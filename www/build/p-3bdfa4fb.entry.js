import{r as t,c as n,B as i,h as e,d as o,f as r,H as s,w as l,e as a,i as u}from"./p-21a72a99.js";import{g as c,c as h,I as d,b as f}from"./p-1a77ebfe.js";import{c as p}from"./p-890f8034.js";import{g,a as m,c as b}from"./p-007262f0.js";import{h as v,a as w,b as y}from"./p-54adbb74.js";import{createGesture as x}from"./p-e9431eeb.js";import{B as k,i as I,p as _,a as E,d as T,e as S,s as C,f as A,b as D,c as N,g as O}from"./p-8b39d8b1.js";import{g as P,o as R,c as M,h as L}from"./p-0e4de1d0.js";import{c as $}from"./p-fe17063e.js";import{s as j}from"./p-7d8427eb.js";import{G as z}from"./p-076f0239.js";import{h as F,i as V,g as U,r as B,d as q,f as K,a as W,b as G,c as H,e as X,j as Y,k as J}from"./p-005b2cbe.js";import{c as Q}from"./p-30c031bf.js";import{p as Z}from"./p-e8c0a813.js";import{C as tt,a as nt,d as it}from"./p-d5d76201.js";import{d as et}from"./p-e6d7b416.js";import"./p-add30d46.js";const ot=class{constructor(i){t(this,i),this.fireenjinFetch=n(this,"fireenjinFetch",7),this.fireenjinReset=n(this,"fireenjinReset",7),this.fireenjinSubmit=n(this,"fireenjinSubmit",7),this.fireenjinValidation=n(this,"fireenjinValidation",7),this.componentIsLoaded=!1,this.formData={},this.submitButton="Save",this.submitButtonColor="primary",this.submitButtonFill="solid",this.resetButton="Cancel",this.resetButtonColor="dark",this.resetButtonFill="clear",this.hideControls=!1,this.disableLoader=!1,this.loading=!1,this.disableEnterButton=!1,this.disableReset=!1,this.confirmExit=!1,this.hasChanged=!1,this.method="post"}handleKeyDown(t){"Enter"===t.key&&this.disableEnterButton&&t.preventDefault()}async onInput(t){var n;t&&t.target&&t.target.name&&!t.target.name.startsWith("ion-")&&(this.setByPath(this.formData,t.target.name,(null===(n=this.filterData)||void 0===n?void 0:n.length)?await this.setFilteredValue(t.target.name,t.target.value):t.target.value),this.componentIsLoaded&&!this.hasChanged&&(this.hasChanged=!0))}async onSuccess(t){var n,i,e,o,r;this.fetch&&[this.endpoint,this.fetch].includes(null===(n=null==t?void 0:t.detail)||void 0===n?void 0:n.endpoint)&&"fireenjinFetch"===(null===(e=null===(i=null==t?void 0:t.detail)||void 0===i?void 0:i.event)||void 0===e?void 0:e.type)&&await this.setFormData(this.fetchKey?this.fetchKey.split(".").reduce(((t,n)=>t[n]),t.detail.data):null===(o=null==t?void 0:t.detail)||void 0===o?void 0:o.data),[this.endpoint,this.fetch].includes(null===(r=null==t?void 0:t.detail)||void 0===r?void 0:r.endpoint)&&(this.loading=!1)}async onError(t){var n;this.endpoint===(null===(n=null==t?void 0:t.detail)||void 0===n?void 0:n.endpoint)&&(this.loading=!1)}async submit(t,n={manual:!1}){var i;t&&t.preventDefault(),await this.checkFormValidity(),this.loading=!this.disableLoader;const e=this.beforeSubmit&&"function"==typeof this.beforeSubmit?await this.beforeSubmit(this.formData,n):this.formData;console.log(this.filterData),this.fireenjinSubmit.emit({event:t,id:this.documentId,endpoint:this.endpoint,data:(null===(i=this.filterData)||void 0===i?void 0:i.length)?await this.filterFormData(e):e,name:this.name}),this.hasChanged=!1}async reset(t){if(!t)return this.formEl.reset(),!1;this.disableReset?t.preventDefault():(this.formData={},this.hasChanged=!1),this.fireenjinReset.emit({event:t,id:this.documentId,endpoint:this.endpoint,data:this.formData,name:this.name})}async checkFormValidity(t=!0){let n=!0;const i=[].slice.call(this.formEl.querySelectorAll("[value]"));for(const e of i)try{await e.checkValidity(t?null:{validationClassOptions:{ignoreInvalid:!0}})||(n&&t&&await e.reportValidity(),n=!1)}catch(t){console.log(`${null==e?void 0:e.name} input not able to be validated!`)}return n}async reportFormValidity(){const t=await this.checkFormValidity(!1);this.fireenjinValidation.emit({event,isValid:t,name:this.name}),this.submitButtonEl&&(this.submitButtonEl.disabled=!t)}async setFormData(t){this.formEl.querySelectorAll("[data-fill]").forEach((n=>{var i,e;const o=(null===(e=null===(i=n.dataset)||void 0===i?void 0:i.fill)||void 0===e?void 0:e.length)>0?n.dataset.fill:n.name;n.value=this.getByPath(t,o)})),this.formData=await this.mapFormData(this.fetchDataMap,t||{})}async setFilteredValue(t,n){var i,e;let o=n;for(const r of"string"==typeof this.filterData?this.filterData.split(","):this.filterData){if("function"!=typeof r)continue;const s=null===(e=null===(i=Object.getOwnPropertyDescriptors(r))||void 0===i?void 0:i.name)||void 0===e?void 0:e.value;s&&s===t&&(o=await r(n))}return o}async mapFormData(t,n){let i=n||{};if(t){const e=Object.keys(t);for(const o of e)t[o]?i[t[o]]=n[o]:i=Object.assign(Object.assign({},i),n[o])}return i}async filterFormData(t){var n,i;let e={};for(const o of"string"==typeof this.filterData?this.filterData.split(","):this.filterData)if("string"==typeof o)e[o]=t[o];else if("function"==typeof o){const r=null===(i=null===(n=Object.getOwnPropertyDescriptors(o))||void 0===n?void 0:n.name)||void 0===i?void 0:i.value;e[r]=await o(t[r])}return e}pick(t,n){const i={};for(const e of n)(null==t?void 0:t[e])&&(i[e]=t[e]);return i}getByPath(t,n){for(var i=(n=(n=n.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),e=0,o=i.length;e<o;++e){var r=i[e];if(!(r in t))return;t=t[r]}return t}setByPath(t,n,i){const e=n.split("."),o=e.length;for(let n=0;n<o-1;n++){const i=e[n];t[i]||(t[i]={}),t=t[i]}t[e[o-1]]=i}componentDidLoad(){(null==i?void 0:i.isBrowser)&&(setTimeout((()=>{this.componentIsLoaded=!0}),2e3),this.fetch&&(this.disableLoader||(this.loading=!0),this.fireenjinFetch.emit({endpoint:"string"==typeof this.fetch?this.fetch:this.endpoint,name:this.name||null,dataPropsMap:this.fetchDataMap||null,method:"get",params:Object.assign(Object.assign({},this.fetchParams?this.fetchParams:{}),{id:this.documentId})})),this.formData&&this.setFormData(this.formData))}render(){return e("form",{ref:t=>this.formEl=t,name:this.name,id:this.name,action:this.action?this.action:`/${this.endpoint}`,method:this.method,onReset:t=>this.reset(t),onSubmit:t=>this.submit(t),class:{"is-loading":this.loading}},e("slot",null),!this.hideControls&&e("ion-grid",{class:"form-controls"},e("ion-row",null,e("ion-col",null,this.resetButton?e("ion-button",{ref:t=>this.resetButtonEl=t,type:"reset",fill:this.resetButtonFill,color:this.resetButtonColor,innerHTML:this.resetButton}):null),e("ion-col",null,this.submitButton?e("ion-button",{ref:t=>this.submitButtonEl=t,type:"submit",color:this.submitButtonColor,fill:this.submitButtonFill,innerHTML:this.submitButton}):null))))}get fireenjinFormEl(){return o(this)}};ot.style="fireenjin-form{display:block}fireenjin-form .form-controls{opacity:1;pointer-events:all;transition:all ease-out 0.4s}fireenjin-form .form-controls ion-col:last-of-type{display:flex;flex-direction:row;justify-content:flex-end}fireenjin-form .is-hidden{opacity:0;pointer-events:none;height:0px}";var rt="undefined"!=typeof window?window:void 0!==c?c:"undefined"!=typeof self?self:{},st=function(t,n,i,e,o,r,s,l,a,u){var c=this;c.numeralDecimalMark=t||".",c.numeralIntegerScale=n>0?n:0,c.numeralDecimalScale=i>=0?i:2,c.numeralThousandsGroupStyle=e||st.groupStyle.thousand,c.numeralPositiveOnly=!!o,c.stripLeadingZeroes=!1!==r,c.prefix=s||""===s?s:"",c.signBeforePrefix=!!l,c.tailPrefix=!!a,c.delimiter=u||""===u?u:",",c.delimiterRE=u?new RegExp("\\"+u,"g"):""};st.groupStyle={thousand:"thousand",lakh:"lakh",wan:"wan",none:"none"},st.prototype={getRawValue:function(t){return t.replace(this.delimiterRE,"").replace(this.numeralDecimalMark,".")},format:function(t){var n,i,e,o,r=this,s="";switch(t=t.replace(/[A-Za-z]/g,"").replace(r.numeralDecimalMark,"M").replace(/[^\dM-]/g,"").replace(/^\-/,"N").replace(/\-/g,"").replace("N",r.numeralPositiveOnly?"":"-").replace("M",r.numeralDecimalMark),r.stripLeadingZeroes&&(t=t.replace(/^(-)?0+(?=\d)/,"$1")),i="-"===t.slice(0,1)?"-":"",e=void 0!==r.prefix?r.signBeforePrefix?i+r.prefix:r.prefix+i:i,o=t,t.indexOf(r.numeralDecimalMark)>=0&&(o=(n=t.split(r.numeralDecimalMark))[0],s=r.numeralDecimalMark+n[1].slice(0,r.numeralDecimalScale)),"-"===i&&(o=o.slice(1)),r.numeralIntegerScale>0&&(o=o.slice(0,r.numeralIntegerScale)),r.numeralThousandsGroupStyle){case st.groupStyle.lakh:o=o.replace(/(\d)(?=(\d\d)+\d$)/g,"$1"+r.delimiter);break;case st.groupStyle.wan:o=o.replace(/(\d)(?=(\d{4})+$)/g,"$1"+r.delimiter);break;case st.groupStyle.thousand:o=o.replace(/(\d)(?=(\d{3})+$)/g,"$1"+r.delimiter)}return r.tailPrefix?i+o.toString()+(r.numeralDecimalScale>0?s.toString():"")+r.prefix:e+o.toString()+(r.numeralDecimalScale>0?s.toString():"")}};var lt=st,at=function(t,n,i){var e=this;e.date=[],e.blocks=[],e.datePattern=t,e.dateMin=n.split("-").reverse().map((function(t){return parseInt(t,10)})),2===e.dateMin.length&&e.dateMin.unshift(0),e.dateMax=i.split("-").reverse().map((function(t){return parseInt(t,10)})),2===e.dateMax.length&&e.dateMax.unshift(0),e.initBlocks()};at.prototype={initBlocks:function(){var t=this;t.datePattern.forEach((function(n){t.blocks.push("Y"===n?4:2)}))},getISOFormatDate:function(){var t=this,n=t.date;return n[2]?n[2]+"-"+t.addLeadingZero(n[1])+"-"+t.addLeadingZero(n[0]):""},getBlocks:function(){return this.blocks},getValidatedDate:function(t){var n=this,i="";return t=t.replace(/[^\d]/g,""),n.blocks.forEach((function(e,o){if(t.length>0){var r=t.slice(0,e),s=r.slice(0,1),l=t.slice(e);switch(n.datePattern[o]){case"d":"00"===r?r="01":parseInt(s,10)>3?r="0"+s:parseInt(r,10)>31&&(r="31");break;case"m":"00"===r?r="01":parseInt(s,10)>1?r="0"+s:parseInt(r,10)>12&&(r="12")}i+=r,t=l}})),this.getFixedDateString(i)},getFixedDateString:function(t){var n,i,e,o=this,r=o.datePattern,s=[],l=0,a=0,u=0,c=0,h=0,d=0,f=!1;return 4===t.length&&"y"!==r[0].toLowerCase()&&"y"!==r[1].toLowerCase()&&(h=2-(c="d"===r[0]?0:2),n=parseInt(t.slice(c,c+2),10),i=parseInt(t.slice(h,h+2),10),s=this.getFixedDate(n,i,0)),8===t.length&&(r.forEach((function(t,n){switch(t){case"d":l=n;break;case"m":a=n;break;default:u=n}})),d=2*u,c=l<=u?2*l:2*l+2,h=a<=u?2*a:2*a+2,n=parseInt(t.slice(c,c+2),10),i=parseInt(t.slice(h,h+2),10),e=parseInt(t.slice(d,d+4),10),f=4===t.slice(d,d+4).length,s=this.getFixedDate(n,i,e)),4!==t.length||"y"!==r[0]&&"y"!==r[1]||(d=2-(h="m"===r[0]?0:2),i=parseInt(t.slice(h,h+2),10),e=parseInt(t.slice(d,d+2),10),f=2===t.slice(d,d+2).length,s=[0,i,e]),6!==t.length||"Y"!==r[0]&&"Y"!==r[1]||(d=2-.5*(h="m"===r[0]?0:4),i=parseInt(t.slice(h,h+2),10),e=parseInt(t.slice(d,d+4),10),f=4===t.slice(d,d+4).length,s=[0,i,e]),s=o.getRangeFixedDate(s),o.date=s,0===s.length?t:r.reduce((function(t,n){switch(n){case"d":return t+(0===s[0]?"":o.addLeadingZero(s[0]));case"m":return t+(0===s[1]?"":o.addLeadingZero(s[1]));case"y":return t+(f?o.addLeadingZeroForYear(s[2],!1):"");case"Y":return t+(f?o.addLeadingZeroForYear(s[2],!0):"")}}),"")},getRangeFixedDate:function(t){var n=this,i=n.dateMin||[],e=n.dateMax||[];return!t.length||i.length<3&&e.length<3||n.datePattern.find((function(t){return"y"===t.toLowerCase()}))&&0===t[2]?t:e.length&&(e[2]<t[2]||e[2]===t[2]&&(e[1]<t[1]||e[1]===t[1]&&e[0]<t[0]))?e:i.length&&(i[2]>t[2]||i[2]===t[2]&&(i[1]>t[1]||i[1]===t[1]&&i[0]>t[0]))?i:t},getFixedDate:function(t,n,i){return t=Math.min(t,31),n=Math.min(n,12),i=parseInt(i||0,10),(n<7&&n%2==0||n>8&&n%2==1)&&(t=Math.min(t,2===n?this.isLeapYear(i)?29:28:30)),[t,n,i]},isLeapYear:function(t){return t%4==0&&t%100!=0||t%400==0},addLeadingZero:function(t){return(t<10?"0":"")+t},addLeadingZeroForYear:function(t,n){return n?(t<10?"000":t<100?"00":t<1e3?"0":"")+t:(t<10?"0":"")+t}};var ut=at,ct=function(t,n){var i=this;i.time=[],i.blocks=[],i.timePattern=t,i.timeFormat=n,i.initBlocks()};ct.prototype={initBlocks:function(){var t=this;t.timePattern.forEach((function(){t.blocks.push(2)}))},getISOFormatTime:function(){var t=this,n=t.time;return n[2]?t.addLeadingZero(n[0])+":"+t.addLeadingZero(n[1])+":"+t.addLeadingZero(n[2]):""},getBlocks:function(){return this.blocks},getTimeFormatOptions:function(){return"12"===String(this.timeFormat)?{maxHourFirstDigit:1,maxHours:12,maxMinutesFirstDigit:5,maxMinutes:60}:{maxHourFirstDigit:2,maxHours:23,maxMinutesFirstDigit:5,maxMinutes:60}},getValidatedTime:function(t){var n=this,i="";t=t.replace(/[^\d]/g,"");var e=n.getTimeFormatOptions();return n.blocks.forEach((function(o,r){if(t.length>0){var s=t.slice(0,o),l=s.slice(0,1),a=t.slice(o);switch(n.timePattern[r]){case"h":parseInt(l,10)>e.maxHourFirstDigit?s="0"+l:parseInt(s,10)>e.maxHours&&(s=e.maxHours+"");break;case"m":case"s":parseInt(l,10)>e.maxMinutesFirstDigit?s="0"+l:parseInt(s,10)>e.maxMinutes&&(s=e.maxMinutes+"")}i+=s,t=a}})),this.getFixedTimeString(i)},getFixedTimeString:function(t){var n,i,e,o=this,r=o.timePattern,s=[],l=0,a=0,u=0,c=0,h=0,d=0;return 6===t.length&&(r.forEach((function(t,n){switch(t){case"s":l=2*n;break;case"m":a=2*n;break;case"h":u=2*n}})),d=u,h=a,c=l,n=parseInt(t.slice(c,c+2),10),i=parseInt(t.slice(h,h+2),10),e=parseInt(t.slice(d,d+2),10),s=this.getFixedTime(e,i,n)),4===t.length&&o.timePattern.indexOf("s")<0&&(r.forEach((function(t,n){switch(t){case"m":a=2*n;break;case"h":u=2*n}})),d=u,h=a,n=0,i=parseInt(t.slice(h,h+2),10),e=parseInt(t.slice(d,d+2),10),s=this.getFixedTime(e,i,n)),o.time=s,0===s.length?t:r.reduce((function(t,n){switch(n){case"s":return t+o.addLeadingZero(s[2]);case"m":return t+o.addLeadingZero(s[1]);case"h":return t+o.addLeadingZero(s[0])}}),"")},getFixedTime:function(t,n,i){return i=Math.min(parseInt(i||0,10),60),n=Math.min(n,60),[t=Math.min(t,60),n,i]},addLeadingZero:function(t){return(t<10?"0":"")+t}};var ht=ct,dt=function(t,n){var i=this;i.delimiter=n||""===n?n:" ",i.delimiterRE=n?new RegExp("\\"+n,"g"):"",i.formatter=t};dt.prototype={setFormatter:function(t){this.formatter=t},format:function(t){var n=this;n.formatter.clear();for(var i,e="",o=!1,r=0,s=(t=(t=(t=t.replace(/[^\d+]/g,"")).replace(/^\+/,"B").replace(/\+/g,"").replace("B","+")).replace(n.delimiterRE,"")).length;r<s;r++)i=n.formatter.inputDigit(t.charAt(r)),/[\s()-]/g.test(i)?(e=i,o=!0):o||(e=i);return(e=e.replace(/[()]/g,"")).replace(/[\s-]/g,n.delimiter)}};var ft=dt,pt={blocks:{uatp:[4,5,6],amex:[4,6,5],diners:[4,6,4],discover:[4,4,4,4],mastercard:[4,4,4,4],dankort:[4,4,4,4],instapayment:[4,4,4,4],jcb15:[4,6,5],jcb:[4,4,4,4],maestro:[4,4,4,4],visa:[4,4,4,4],mir:[4,4,4,4],unionPay:[4,4,4,4],general:[4,4,4,4]},re:{uatp:/^(?!1800)1\d{0,14}/,amex:/^3[47]\d{0,13}/,discover:/^(?:6011|65\d{0,2}|64[4-9]\d?)\d{0,12}/,diners:/^3(?:0([0-5]|9)|[689]\d?)\d{0,11}/,mastercard:/^(5[1-5]\d{0,2}|22[2-9]\d{0,1}|2[3-7]\d{0,2})\d{0,12}/,dankort:/^(5019|4175|4571)\d{0,12}/,instapayment:/^63[7-9]\d{0,13}/,jcb15:/^(?:2131|1800)\d{0,11}/,jcb:/^(?:35\d{0,2})\d{0,12}/,maestro:/^(?:5[0678]\d{0,2}|6304|67\d{0,2})\d{0,12}/,mir:/^220[0-4]\d{0,12}/,visa:/^4\d{0,15}/,unionPay:/^(62|81)\d{0,14}/},getStrictBlocks:function(t){var n=t.reduce((function(t,n){return t+n}),0);return t.concat(19-n)},getInfo:function(t,n){var i=pt.blocks,e=pt.re;for(var o in n=!!n,e)if(e[o].test(t)){var r=i[o];return{type:o,blocks:n?this.getStrictBlocks(r):r}}return{type:"unknown",blocks:n?this.getStrictBlocks(i.general):i.general}}},gt=pt,mt={noop:function(){},strip:function(t,n){return t.replace(n,"")},getPostDelimiter:function(t,n,i){if(0===i.length)return t.slice(-n.length)===n?n:"";var e="";return i.forEach((function(n){t.slice(-n.length)===n&&(e=n)})),e},getDelimiterREByDelimiter:function(t){return new RegExp(t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"g")},getNextCursorPosition:function(t,n,i,e,o){return n.length===t?i.length:t+this.getPositionOffset(t,n,i,e,o)},getPositionOffset:function(t,n,i,e,o){var r,s,l;return r=this.stripDelimiters(n.slice(0,t),e,o),s=this.stripDelimiters(i.slice(0,t),e,o),0!=(l=r.length-s.length)?l/Math.abs(l):0},stripDelimiters:function(t,n,i){var e=this;if(0===i.length){var o=n?e.getDelimiterREByDelimiter(n):"";return t.replace(o,"")}return i.forEach((function(n){n.split("").forEach((function(n){t=t.replace(e.getDelimiterREByDelimiter(n),"")}))})),t},headStr:function(t,n){return t.slice(0,n)},getMaxLength:function(t){return t.reduce((function(t,n){return t+n}),0)},getPrefixStrippedValue:function(t,n,i,e,o,r,s,l,a){if(0===i)return t;if(t===n&&""!==t)return"";if(a&&"-"==t.slice(0,1)){var u="-"==e.slice(0,1)?e.slice(1):e;return"-"+this.getPrefixStrippedValue(t.slice(1),n,i,u,o,r,s,l,a)}if(e.slice(0,i)!==n&&!l)return s&&!e&&t?t:"";if(e.slice(-i)!==n&&l)return s&&!e&&t?t:"";var c=this.stripDelimiters(e,o,r);return t.slice(0,i)===n||l?t.slice(-i)!==n&&l?c.slice(0,-i-1):l?t.slice(0,-i):t.slice(i):c.slice(i)},getFirstDiffIndex:function(t,n){for(var i=0;t.charAt(i)===n.charAt(i);)if(""===t.charAt(i++))return-1;return i},getFormattedValue:function(t,n,i,e,o,r){var s="",l=o.length>0,a="";return 0===i?t:(n.forEach((function(n,u){if(t.length>0){var c=t.slice(0,n),h=t.slice(n);a=l?o[r?u-1:u]||a:e,r?(u>0&&(s+=a),s+=c):(s+=c,c.length===n&&u<i-1&&(s+=a)),t=h}})),s)},fixPrefixCursor:function(t,n,i,e){if(t){var o=t.value;if(t.setSelectionRange&&n&&!(n.length+(i||e[0]||" ").length<=o.length)){var r=2*o.length;setTimeout((function(){t.setSelectionRange(r,r)}),1)}}},checkFullSelection:function(t){try{return(window.getSelection()||document.getSelection()||{}).toString().length===t.length}catch(t){}return!1},setSelection:function(t,n,i){if(t===this.getActiveElement(i)&&!(t&&t.value.length<=n))if(t.createTextRange){var e=t.createTextRange();e.move("character",n),e.select()}else try{t.setSelectionRange(n,n)}catch(t){console.warn("The input element type does not support selection")}},getActiveElement:function(t){var n=t.activeElement;return n&&n.shadowRoot?this.getActiveElement(n.shadowRoot):n},isAndroid:function(){return navigator&&/android/i.test(navigator.userAgent)},isAndroidBackspaceKeydown:function(t,n){return!!(this.isAndroid()&&t&&n)&&n===t.slice(0,-1)}},bt={assign:function(t,n){return(t=t||{}).creditCard=!!(n=n||{}).creditCard,t.creditCardStrictMode=!!n.creditCardStrictMode,t.creditCardType="",t.onCreditCardTypeChanged=n.onCreditCardTypeChanged||function(){},t.phone=!!n.phone,t.phoneRegionCode=n.phoneRegionCode||"AU",t.phoneFormatter={},t.time=!!n.time,t.timePattern=n.timePattern||["h","m","s"],t.timeFormat=n.timeFormat||"24",t.timeFormatter={},t.date=!!n.date,t.datePattern=n.datePattern||["d","m","Y"],t.dateMin=n.dateMin||"",t.dateMax=n.dateMax||"",t.dateFormatter={},t.numeral=!!n.numeral,t.numeralIntegerScale=n.numeralIntegerScale>0?n.numeralIntegerScale:0,t.numeralDecimalScale=n.numeralDecimalScale>=0?n.numeralDecimalScale:2,t.numeralDecimalMark=n.numeralDecimalMark||".",t.numeralThousandsGroupStyle=n.numeralThousandsGroupStyle||"thousand",t.numeralPositiveOnly=!!n.numeralPositiveOnly,t.stripLeadingZeroes=!1!==n.stripLeadingZeroes,t.signBeforePrefix=!!n.signBeforePrefix,t.tailPrefix=!!n.tailPrefix,t.swapHiddenInput=!!n.swapHiddenInput,t.numericOnly=t.creditCard||t.date||!!n.numericOnly,t.uppercase=!!n.uppercase,t.lowercase=!!n.lowercase,t.prefix=t.creditCard||t.date?"":n.prefix||"",t.noImmediatePrefix=!!n.noImmediatePrefix,t.prefixLength=t.prefix.length,t.rawValueTrimPrefix=!!n.rawValueTrimPrefix,t.copyDelimiter=!!n.copyDelimiter,t.initValue=null!=n.initValue?n.initValue.toString():"",t.delimiter=n.delimiter||""===n.delimiter?n.delimiter:n.date?"/":n.time?":":n.numeral?",":" ",t.delimiterLength=t.delimiter.length,t.delimiterLazyShow=!!n.delimiterLazyShow,t.delimiters=n.delimiters||[],t.blocks=n.blocks||[],t.blocksLength=t.blocks.length,t.root="object"==typeof rt&&rt?rt:window,t.document=n.document||t.root.document,t.maxLength=0,t.backspace=!1,t.result="",t.onValueChanged=n.onValueChanged||function(){},t}},vt=function(t,n){var i=this,e=!1;if("string"==typeof t?(i.element=document.querySelector(t),e=document.querySelectorAll(t).length>1):void 0!==t.length&&t.length>0?(i.element=t[0],e=t.length>1):i.element=t,!i.element)throw new Error("[cleave.js] Please check the element");if(e)try{console.warn("[cleave.js] Multiple input fields matched, cleave.js will only take the first one.")}catch(t){}n.initValue=i.element.value,i.properties=vt.DefaultProperties.assign({},n),i.init()};vt.prototype={init:function(){var t=this,n=t.properties;n.numeral||n.phone||n.creditCard||n.time||n.date||0!==n.blocksLength||n.prefix?(n.maxLength=vt.Util.getMaxLength(n.blocks),t.isAndroid=vt.Util.isAndroid(),t.lastInputValue="",t.isBackward="",t.onChangeListener=t.onChange.bind(t),t.onKeyDownListener=t.onKeyDown.bind(t),t.onFocusListener=t.onFocus.bind(t),t.onCutListener=t.onCut.bind(t),t.onCopyListener=t.onCopy.bind(t),t.initSwapHiddenInput(),t.element.addEventListener("input",t.onChangeListener),t.element.addEventListener("keydown",t.onKeyDownListener),t.element.addEventListener("focus",t.onFocusListener),t.element.addEventListener("cut",t.onCutListener),t.element.addEventListener("copy",t.onCopyListener),t.initPhoneFormatter(),t.initDateFormatter(),t.initTimeFormatter(),t.initNumeralFormatter(),(n.initValue||n.prefix&&!n.noImmediatePrefix)&&t.onInput(n.initValue)):t.onInput(n.initValue)},initSwapHiddenInput:function(){var t=this;if(t.properties.swapHiddenInput){var n=t.element.cloneNode(!0);t.element.parentNode.insertBefore(n,t.element),t.elementSwapHidden=t.element,t.elementSwapHidden.type="hidden",t.element=n,t.element.id=""}},initNumeralFormatter:function(){var t=this.properties;t.numeral&&(t.numeralFormatter=new vt.NumeralFormatter(t.numeralDecimalMark,t.numeralIntegerScale,t.numeralDecimalScale,t.numeralThousandsGroupStyle,t.numeralPositiveOnly,t.stripLeadingZeroes,t.prefix,t.signBeforePrefix,t.tailPrefix,t.delimiter))},initTimeFormatter:function(){var t=this.properties;t.time&&(t.timeFormatter=new vt.TimeFormatter(t.timePattern,t.timeFormat),t.blocks=t.timeFormatter.getBlocks(),t.blocksLength=t.blocks.length,t.maxLength=vt.Util.getMaxLength(t.blocks))},initDateFormatter:function(){var t=this.properties;t.date&&(t.dateFormatter=new vt.DateFormatter(t.datePattern,t.dateMin,t.dateMax),t.blocks=t.dateFormatter.getBlocks(),t.blocksLength=t.blocks.length,t.maxLength=vt.Util.getMaxLength(t.blocks))},initPhoneFormatter:function(){var t=this.properties;if(t.phone)try{t.phoneFormatter=new vt.PhoneFormatter(new t.root.Cleave.AsYouTypeFormatter(t.phoneRegionCode),t.delimiter)}catch(t){throw new Error("[cleave.js] Please include phone-type-formatter.{country}.js lib")}},onKeyDown:function(t){var n=this,i=t.which||t.keyCode;n.lastInputValue=n.element.value,n.isBackward=8===i},onChange:function(t){var n=this,i=n.properties,e=vt.Util;n.isBackward=n.isBackward||"deleteContentBackward"===t.inputType;var o=e.getPostDelimiter(n.lastInputValue,i.delimiter,i.delimiters);i.postDelimiterBackspace=!(!n.isBackward||!o)&&o,this.onInput(this.element.value)},onFocus:function(){var t=this,n=t.properties;t.lastInputValue=t.element.value,n.prefix&&n.noImmediatePrefix&&!t.element.value&&this.onInput(n.prefix),vt.Util.fixPrefixCursor(t.element,n.prefix,n.delimiter,n.delimiters)},onCut:function(t){vt.Util.checkFullSelection(this.element.value)&&(this.copyClipboardData(t),this.onInput(""))},onCopy:function(t){vt.Util.checkFullSelection(this.element.value)&&this.copyClipboardData(t)},copyClipboardData:function(t){var n,i=this.properties,e=this.element.value;n=i.copyDelimiter?e:vt.Util.stripDelimiters(e,i.delimiter,i.delimiters);try{t.clipboardData?t.clipboardData.setData("Text",n):window.clipboardData.setData("Text",n),t.preventDefault()}catch(t){}},onInput:function(t){var n=this,i=n.properties,e=vt.Util,o=e.getPostDelimiter(t,i.delimiter,i.delimiters);return i.numeral||!i.postDelimiterBackspace||o||(t=e.headStr(t,t.length-i.postDelimiterBackspace.length)),i.phone?(i.result=!i.prefix||i.noImmediatePrefix&&!t.length?i.phoneFormatter.format(t):i.prefix+i.phoneFormatter.format(t).slice(i.prefix.length),void n.updateValueState()):i.numeral?(i.result=i.prefix&&i.noImmediatePrefix&&0===t.length?"":i.numeralFormatter.format(t),void n.updateValueState()):(i.date&&(t=i.dateFormatter.getValidatedDate(t)),i.time&&(t=i.timeFormatter.getValidatedTime(t)),t=e.stripDelimiters(t,i.delimiter,i.delimiters),t=e.getPrefixStrippedValue(t,i.prefix,i.prefixLength,i.result,i.delimiter,i.delimiters,i.noImmediatePrefix,i.tailPrefix,i.signBeforePrefix),t=i.numericOnly?e.strip(t,/[^\d]/g):t,t=i.uppercase?t.toUpperCase():t,t=i.lowercase?t.toLowerCase():t,i.prefix&&(i.tailPrefix?t+=i.prefix:t=i.prefix+t,0===i.blocksLength)?(i.result=t,void n.updateValueState()):(i.creditCard&&n.updateCreditCardPropsByValue(t),t=e.headStr(t,i.maxLength),i.result=e.getFormattedValue(t,i.blocks,i.blocksLength,i.delimiter,i.delimiters,i.delimiterLazyShow),void n.updateValueState()))},updateCreditCardPropsByValue:function(t){var n,i=this.properties,e=vt.Util;e.headStr(i.result,4)!==e.headStr(t,4)&&(n=vt.CreditCardDetector.getInfo(t,i.creditCardStrictMode),i.blocks=n.blocks,i.blocksLength=i.blocks.length,i.maxLength=e.getMaxLength(i.blocks),i.creditCardType!==n.type&&(i.creditCardType=n.type,i.onCreditCardTypeChanged.call(this,i.creditCardType)))},updateValueState:function(){var t=this,n=vt.Util,i=t.properties;if(t.element){var e=t.element.selectionEnd,o=i.result;e=n.getNextCursorPosition(e,t.element.value,o,i.delimiter,i.delimiters),t.isAndroid?window.setTimeout((function(){t.element.value=o,n.setSelection(t.element,e,i.document,!1),t.callOnValueChanged()}),1):(t.element.value=o,i.swapHiddenInput&&(t.elementSwapHidden.value=t.getRawValue()),n.setSelection(t.element,e,i.document,!1),t.callOnValueChanged())}},callOnValueChanged:function(){var t=this,n=t.properties;n.onValueChanged.call(t,{target:{name:t.element.name,value:n.result,rawValue:t.getRawValue()}})},setPhoneRegionCode:function(t){var n=this;n.properties.phoneRegionCode=t,n.initPhoneFormatter(),n.onChange()},setRawValue:function(t){var n=this,i=n.properties;t=null!=t?t.toString():"",i.numeral&&(t=t.replace(".",i.numeralDecimalMark)),i.postDelimiterBackspace=!1,n.element.value=t,n.onInput(t)},getRawValue:function(){var t=this.properties,n=vt.Util,i=this.element.value;return t.rawValueTrimPrefix&&(i=n.getPrefixStrippedValue(i,t.prefix,t.prefixLength,t.result,t.delimiter,t.delimiters,t.noImmediatePrefix,t.tailPrefix,t.signBeforePrefix)),t.numeral?t.numeralFormatter.getRawValue(i):n.stripDelimiters(i,t.delimiter,t.delimiters)},getISOFormatDate:function(){var t=this.properties;return t.date?t.dateFormatter.getISOFormatDate():""},getISOFormatTime:function(){var t=this.properties;return t.time?t.timeFormatter.getISOFormatTime():""},getFormattedValue:function(){return this.element.value},destroy:function(){var t=this;t.element.removeEventListener("input",t.onChangeListener),t.element.removeEventListener("keydown",t.onKeyDownListener),t.element.removeEventListener("focus",t.onFocusListener),t.element.removeEventListener("cut",t.onCutListener),t.element.removeEventListener("copy",t.onCopyListener)},toString:function(){return"[Cleave Object]"}},vt.NumeralFormatter=lt,vt.DateFormatter=ut,vt.TimeFormatter=ht,vt.PhoneFormatter=ft,vt.CreditCardDetector=gt,vt.Util=mt,vt.DefaultProperties=bt,("object"==typeof rt&&rt?rt:window).Cleave=vt;var wt=vt;(function(){function t(t,n){var i,e=t.split("."),o=z;e[0]in o||!o.execScript||o.execScript("var "+e[0]);for(;e.length&&(i=e.shift());)e.length||void 0===n?o=o[i]?o[i]:o[i]={}:o[i]=n}function n(t,n){function i(){}i.prototype=n.prototype,t.M=n.prototype,t.prototype=new i,t.prototype.constructor=t,t.N=function(t,i,e){for(var o=Array(arguments.length-2),r=2;r<arguments.length;r++)o[r-2]=arguments[r];return n.prototype[i].apply(t,o)}}function i(t,n){null!=t&&this.a.apply(this,arguments)}function e(t){t.b=""}function o(t,n){return t>n?1:t<n?-1:0}function r(t,n){this.b=t,this.a={};for(var i=0;i<n.length;i++){var e=n[i];this.a[e.b]=e}}function s(t){return function(t){t.sort(function(t,n){return t.b-n.b}||o)}(t=function(t){var n,i=[],e=0;for(n in t)i[e++]=t[n];return i}(t.a)),t}function l(t,n){switch(this.b=t,this.g=!!n.v,this.a=n.c,this.i=n.type,this.h=!1,this.a){case U:case B:case q:case K:case W:case V:case F:this.h=!0}this.f=n.defaultValue}function a(){this.a={},this.f=this.j().a,this.b=this.g=null}function u(t,n){for(var i=s(t.j()),e=0;e<i.length;e++){var o=(l=i[e]).b;if(null!=n.a[o]){t.b&&delete t.b[l.b];var r=11==l.a||10==l.a;if(l.g)for(var l=c(n,o)||[],a=0;a<l.length;a++){var h=t,d=o,f=r?l[a].clone():l[a];h.a[d]||(h.a[d]=[]),h.a[d].push(f),h.b&&delete h.b[d]}else l=c(n,o),r?(r=c(t,o))?u(r,l):p(t,o,l.clone()):p(t,o,l)}}}function c(t,n){var i=t.a[n];if(null==i)return null;if(t.g){if(!(n in t.b)){var e=t.g,o=t.f[n];if(null!=i)if(o.g){for(var r=[],s=0;s<i.length;s++)r[s]=e.b(o,i[s]);i=r}else i=e.b(o,i);return t.b[n]=i}return t.b[n]}return i}function h(t,n,i){var e=c(t,n);return t.f[n].g?e[i||0]:e}function d(t,n){var i;if(null!=t.a[n])i=h(t,n,void 0);else t:{if(void 0===(i=t.f[n]).f){var e=i.i;if(e===Boolean)i.f=!1;else if(e===Number)i.f=0;else{if(e!==String){i=new e;break t}i.f=i.h?"0":""}}i=i.f}return i}function f(t,n){return t.f[n].g?null!=t.a[n]?t.a[n].length:0:null!=t.a[n]?1:0}function p(t,n,i){t.a[n]=i,t.b&&(t.b[n]=i)}function g(t,n){var i,e=[];for(i in n)0!=i&&e.push(new l(i,n[i]));return new r(t,e)}function m(){a.call(this)}function b(){a.call(this)}function v(){a.call(this)}function w(){}function y(){}function x(){}function k(){this.a={}}function I(t){return 0==t.length||it.test(t)}function _(t,n){if(null==n)return null;n=n.toUpperCase();var i=t.a[n];if(null==i){if(null==(i=Q[n]))return null;i=(new x).a(v.j(),i),t.a[n]=i}return i}function E(t){return null==(t=J[t])?"ZZ":t[0]}function T(t){this.H=RegExp(" "),this.C="",this.m=new i,this.w="",this.i=new i,this.u=new i,this.l=!0,this.A=this.o=this.F=!1,this.G=k.b(),this.s=0,this.b=new i,this.B=!1,this.h="",this.a=new i,this.f=[],this.D=t,this.J=this.g=S(this,this.D)}function S(t,n){var i;if(null!=n&&isNaN(n)&&n.toUpperCase()in Q){if(null==(i=_(t.G,n)))throw Error("Invalid region code: "+n);i=d(i,10)}else i=0;return null!=(i=_(t.G,E(i)))?i:et}function C(t){for(var n=t.f.length,i=0;i<n;++i){var o,r=t.f[i],s=d(r,1);if(t.w==s)return!1;o=t;var l=d(u=r,1);if(-1!=l.indexOf("|"))o=!1;else{var a;l=(l=l.replace(ot,"\\d")).replace(rt,"\\d"),e(o.m),a=o;var u=d(u,2),c="999999999999999".match(l)[0];0<(a=c.length<a.a.b.length?"":(a=c.replace(new RegExp(l,"g"),u)).replace(RegExp("9","g")," ")).length?(o.m.a(a),o=!0):o=!1}if(o)return t.w=s,t.B=lt.test(h(r,4)),t.s=0,!0}return t.l=!1}function A(t,n){for(var i=[],e=n.length-3,o=t.f.length,r=0;r<o;++r){var s=t.f[r];0==f(s,3)?i.push(t.f[r]):(s=h(s,3,Math.min(e,f(s,3)-1)),0==n.search(s)&&i.push(t.f[r]))}t.f=i}function D(t){return t.l=!0,t.A=!1,t.f=[],t.s=0,e(t.m),t.w="",P(t)}function N(t){for(var n=t.a.toString(),i=t.f.length,e=0;e<i;++e){var o=t.f[e],r=d(o,1);if(new RegExp("^(?:"+r+")$").test(n))return t.B=lt.test(h(o,4)),O(t,n=n.replace(new RegExp(r,"g"),h(o,2)))}return""}function O(t,n){var i=t.b.b.length;return t.B&&0<i&&" "!=t.b.toString().charAt(i-1)?t.b+" "+n:t.b+n}function P(t){var n=t.a.toString();if(3<=n.length){for(var i=t.o&&0==t.h.length&&0<f(t.g,20)?c(t.g,20)||[]:c(t.g,19)||[],e=i.length,o=0;o<e;++o){var r=i[o];0<t.h.length&&I(d(r,4))&&!h(r,6)&&null==r.a[5]||(0!=t.h.length||t.o||I(d(r,4))||h(r,6))&&st.test(d(r,2))&&t.f.push(r)}return A(t,n),0<(n=N(t)).length?n:C(t)?R(t):t.i.toString()}return O(t,n)}function R(t){var n=t.a.toString(),i=n.length;if(0<i){for(var e="",o=0;o<i;o++)e=j(t,n.charAt(o));return t.l?O(t,e):t.i.toString()}return t.b.toString()}function M(t){var n,i=t.a.toString(),o=0;return(n=1==h(t.g,10)&&("1"==(n=t.a.toString()).charAt(0)&&"0"!=n.charAt(1)&&"1"!=n.charAt(1)))?(o=1,t.b.a("1").a(" "),t.o=!0):null!=t.g.a[15]&&(n=new RegExp("^(?:"+h(t.g,15)+")"),null!=(n=i.match(n))&&null!=n[0]&&0<n[0].length&&(t.o=!0,t.b.a(i.substring(0,o=n[0].length)))),e(t.a),t.a.a(i.substring(o)),i.substring(0,o)}function L(t){var n=t.u.toString(),i=new RegExp("^(?:\\+|"+h(t.g,11)+")");return null!=(i=n.match(i))&&null!=i[0]&&0<i[0].length&&(t.o=!0,i=i[0].length,e(t.a),t.a.a(n.substring(i)),e(t.b),t.b.a(n.substring(0,i)),"+"!=n.charAt(0)&&t.b.a(" "),!0)}function $(t){if(0==t.a.b.length)return!1;var n,o=new i;t:{if(0!=(n=t.a.toString()).length&&"0"!=n.charAt(0))for(var r,s=n.length,l=1;3>=l&&l<=s;++l)if((r=parseInt(n.substring(0,l),10))in J){o.a(n.substring(l)),n=r;break t}n=0}return 0!=n&&(e(t.a),t.a.a(o.toString()),"001"==(o=E(n))?t.g=_(t.G,""+n):o!=t.D&&(t.g=S(t,o)),t.b.a(""+n).a(" "),t.h="",!0)}function j(t,n){if(0<=(o=t.m.toString()).substring(t.s).search(t.H)){var i=o.search(t.H),o=o.replace(t.H,n);return e(t.m),t.m.a(o),t.s=i,o.substring(0,t.s+1)}return 1==t.f.length&&(t.l=!1),t.w="",t.i.toString()}var z=this;i.prototype.b="",i.prototype.set=function(t){this.b=""+t},i.prototype.a=function(t,n,i){if(this.b+=String(t),null!=n)for(var e=1;e<arguments.length;e++)this.b+=arguments[e];return this},i.prototype.toString=function(){return this.b};var F=1,V=2,U=3,B=4,q=6,K=16,W=18;a.prototype.set=function(t,n){p(this,t.b,n)},a.prototype.clone=function(){var t=new this.constructor;return t!=this&&(t.a={},t.b&&(t.b={}),u(t,this)),t},n(m,a);var G=null;n(b,a);var H=null;n(v,a);var X=null;m.j=m.prototype.j=function(){var t=G;return t||(G=t=g(m,{0:{name:"NumberFormat",I:"i18n.phonenumbers.NumberFormat"},1:{name:"pattern",required:!0,c:9,type:String},2:{name:"format",required:!0,c:9,type:String},3:{name:"leading_digits_pattern",v:!0,c:9,type:String},4:{name:"national_prefix_formatting_rule",c:9,type:String},6:{name:"national_prefix_optional_when_formatting",c:8,defaultValue:!1,type:Boolean},5:{name:"domestic_carrier_code_formatting_rule",c:9,type:String}})),t},b.j=b.prototype.j=function(){var t=H;return t||(H=t=g(b,{0:{name:"PhoneNumberDesc",I:"i18n.phonenumbers.PhoneNumberDesc"},2:{name:"national_number_pattern",c:9,type:String},9:{name:"possible_length",v:!0,c:5,type:Number},10:{name:"possible_length_local_only",v:!0,c:5,type:Number},6:{name:"example_number",c:9,type:String}})),t},v.j=v.prototype.j=function(){var t=X;return t||(X=t=g(v,{0:{name:"PhoneMetadata",I:"i18n.phonenumbers.PhoneMetadata"},1:{name:"general_desc",c:11,type:b},2:{name:"fixed_line",c:11,type:b},3:{name:"mobile",c:11,type:b},4:{name:"toll_free",c:11,type:b},5:{name:"premium_rate",c:11,type:b},6:{name:"shared_cost",c:11,type:b},7:{name:"personal_number",c:11,type:b},8:{name:"voip",c:11,type:b},21:{name:"pager",c:11,type:b},25:{name:"uan",c:11,type:b},27:{name:"emergency",c:11,type:b},28:{name:"voicemail",c:11,type:b},29:{name:"short_code",c:11,type:b},30:{name:"standard_rate",c:11,type:b},31:{name:"carrier_specific",c:11,type:b},33:{name:"sms_services",c:11,type:b},24:{name:"no_international_dialling",c:11,type:b},9:{name:"id",required:!0,c:9,type:String},10:{name:"country_code",c:5,type:Number},11:{name:"international_prefix",c:9,type:String},17:{name:"preferred_international_prefix",c:9,type:String},12:{name:"national_prefix",c:9,type:String},13:{name:"preferred_extn_prefix",c:9,type:String},15:{name:"national_prefix_for_parsing",c:9,type:String},16:{name:"national_prefix_transform_rule",c:9,type:String},18:{name:"same_mobile_and_fixed_line_pattern",c:8,defaultValue:!1,type:Boolean},19:{name:"number_format",v:!0,c:11,type:m},20:{name:"intl_number_format",v:!0,c:11,type:m},22:{name:"main_country_for_code",c:8,defaultValue:!1,type:Boolean},23:{name:"leading_digits",c:9,type:String},26:{name:"leading_zero_possible",c:8,defaultValue:!1,type:Boolean}})),t},w.prototype.a=function(t){throw new t.b,Error("Unimplemented")},w.prototype.b=function(t,n){if(11==t.a||10==t.a)return n instanceof a?n:this.a(t.i.prototype.j(),n);if(14==t.a){if("string"==typeof n&&Y.test(n)){var i=Number(n);if(0<i)return i}return n}if(!t.h)return n;if((i=t.i)===String){if("number"==typeof n)return String(n)}else if(i===Number&&"string"==typeof n&&("Infinity"===n||"-Infinity"===n||"NaN"===n||Y.test(n)))return Number(n);return n};var Y=/^-?[0-9]+$/;n(y,w),y.prototype.a=function(t,n){var i=new t.b;return i.g=this,i.a=n,i.b={},i},n(x,y),x.prototype.b=function(t,n){return 8==t.a?!!n:w.prototype.b.apply(this,arguments)},x.prototype.a=function(t,n){return x.M.a.call(this,t,n)};var J={1:"US AG AI AS BB BM BS CA DM DO GD GU JM KN KY LC MP MS PR SX TC TT VC VG VI".split(" ")},Q={AG:[null,[null,null,"(?:268|[58]\\d\\d|900)\\d{7}",null,null,null,null,null,null,[10],[7]],[null,null,"268(?:4(?:6[0-38]|84)|56[0-2])\\d{4}",null,null,null,"2684601234",null,null,null,[7]],[null,null,"268(?:464|7(?:1[3-9]|2\\d|3[246]|64|[78][0-689]))\\d{4}",null,null,null,"2684641234",null,null,null,[7]],[null,null,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",null,null,null,"8002123456"],[null,null,"900[2-9]\\d{6}",null,null,null,"9002123456"],[null,null,null,null,null,null,null,null,null,[-1]],[null,null,"5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",null,null,null,"5002345678"],[null,null,"26848[01]\\d{4}",null,null,null,"2684801234",null,null,null,[7]],"AG",1,"011","1",null,null,"1",null,null,null,null,null,[null,null,"26840[69]\\d{4}",null,null,null,"2684061234",null,null,null,[7]],null,"268",[null,null,null,null,null,null,null,null,null,[-1]],[null,null,null,null,null,null,null,null,null,[-1]],null,null,[null,null,null,null,null,null,null,null,null,[-1]]],AI:[null,[null,null,"(?:264|[58]\\d\\d|900)\\d{7}",null,null,null,null,null,null,[10],[7]],[null,null,"2644(?:6[12]|9[78])\\d{4}",null,null,null,"2644612345",null,null,null,[7]],[null,null,"264(?:235|476|5(?:3[6-9]|8[1-4])|7(?:29|72))\\d{4}",null,null,null,"2642351234",null,null,null,[7]],[null,null,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",null,null,null,"8002123456"],[null,null,"900[2-9]\\d{6}",null,null,null,"9002123456"],[null,null,null,null,null,null,null,null,null,[-1]],[null,null,"5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",null,null,null,"5002345678"],[null,null,null,null,null,null,null,null,null,[-1]],"AI",1,"011","1",null,null,"1",null,null,null,null,null,[null,null,null,null,null,null,null,null,null,[-1]],null,"264",[null,null,null,null,null,null,null,null,null,[-1]],[null,null,null,null,null,null,null,null,null,[-1]],null,null,[null,null,null,null,null,null,null,null,null,[-1]]],AS:[null,[null,null,"(?:[58]\\d\\d|684|900)\\d{7}",null,null,null,null,null,null,[10],[7]],[null,null,"6846(?:22|33|44|55|77|88|9[19])\\d{4}",null,null,null,"6846221234",null,null,null,[7]],[null,null,"684(?:2(?:5[2468]|72)|7(?:3[13]|70))\\d{4}",null,null,null,"6847331234",null,null,null,[7]],[null,null,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",null,null,null,"8002123456"],[null,null,"900[2-9]\\d{6}",null,null,null,"9002123456"],[null,null,null,null,null,null,null,null,null,[-1]],[null,null,"5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",null,null,null,"5002345678"],[null,null,null,null,null,null,null,null,null,[-1]],"AS",1,"011","1",null,null,"1",null,null,null,null,null,[null,null,null,null,null,null,null,null,null,[-1]],null,"684",[null,null,null,null,null,null,null,null,null,[-1]],[null,null,null,null,null,null,null,null,null,[-1]],null,null,[null,null,null,null,null,null,null,null,null,[-1]]],BB:[null,[null,null,"(?:246|[58]\\d\\d|900)\\d{7}",null,null,null,null,null,null,[10],[7]],[null,null,"246(?:2(?:2[78]|7[0-4])|4(?:1[024-6]|2\\d|3[2-9])|5(?:20|[34]\\d|54|7[1-3])|6(?:2\\d|38)|7[35]7|9(?:1[89]|63))\\d{4}",null,null,null,"2464123456",null,null,null,[7]],[null,null,"246(?:2(?:[356]\\d|4[0-57-9]|8[0-79])|45\\d|69[5-7]|8(?:[2-5]\\d|83))\\d{4}",null,null,null,"2462501234",null,null,null,[7]],[null,null,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",null,null,null,"8002123456"],[null,null,"(?:246976|900[2-9]\\d\\d)\\d{4}",null,null,null,"9002123456",null,null,null,[7]],[null,null,null,null,null,null,null,null,null,[-1]],[null,null,"5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",null,null,null,"5002345678"],[null,null,"24631\\d{5}",null,null,null,"2463101234",null,null,null,[7]],"BB",1,"011","1",null,null,"1",null,null,null,null,null,[null,null,null,null,null,null,null,null,null,[-1]],null,"246",[null,null,null,null,null,null,null,null,null,[-1]],[null,null,"246(?:292|367|4(?:1[7-9]|3[01]|44|67)|7(?:36|53))\\d{4}",null,null,null,"2464301234",null,null,null,[7]],null,null,[null,null,null,null,null,null,null,null,null,[-1]]],BM:[null,[null,null,"(?:441|[58]\\d\\d|900)\\d{7}",null,null,null,null,null,null,[10],[7]],[null,null,"441(?:2(?:02|23|[3479]\\d|61)|[46]\\d\\d|5(?:4\\d|60|89)|824)\\d{4}",null,null,null,"4412345678",null,null,null,[7]],[null,null,"441(?:[37]\\d|5[0-39])\\d{5}",null,null,null,"4413701234",null,null,null,[7]],[null,null,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",null,null,null,"8002123456"],[null,null,"900[2-9]\\d{6}",null,null,null,"9002123456"],[null,null,null,null,null,null,null,null,null,[-1]],[null,null,"5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",null,null,null,"5002345678"],[null,null,null,null,null,null,null,null,null,[-1]],"BM",1,"011","1",null,null,"1",null,null,null,null,null,[null,null,null,null,null,null,null,null,null,[-1]],null,"441",[null,null,null,null,null,null,null,null,null,[-1]],[null,null,null,null,null,null,null,null,null,[-1]],null,null,[null,null,null,null,null,null,null,null,null,[-1]]],BS:[null,[null,null,"(?:242|[58]\\d\\d|900)\\d{7}",null,null,null,null,null,null,[10],[7]],[null,null,"242(?:3(?:02|[236][1-9]|4[0-24-9]|5[0-68]|7[347]|8[0-4]|9[2-467])|461|502|6(?:0[1-4]|12|2[013]|[45]0|7[67]|8[78]|9[89])|7(?:02|88))\\d{4}",null,null,null,"2423456789",null,null,null,[7]],[null,null,"242(?:3(?:5[79]|7[56]|95)|4(?:[23][1-9]|4[1-35-9]|5[1-8]|6[2-8]|7\\d|81)|5(?:2[45]|3[35]|44|5[1-46-9]|65|77)|6[34]6|7(?:27|38)|8(?:0[1-9]|1[02-9]|2\\d|[89]9))\\d{4}",null,null,null,"2423591234",null,null,null,[7]],[null,null,"(?:242300|8(?:00|33|44|55|66|77|88)[2-9]\\d\\d)\\d{4}",null,null,null,"8002123456",null,null,null,[7]],[null,null,"900[2-9]\\d{6}",null,null,null,"9002123456"],[null,null,null,null,null,null,null,null,null,[-1]],[null,null,"5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",null,null,null,"5002345678"],[null,null,null,null,null,null,null,null,null,[-1]],"BS",1,"011","1",null,null,"1",null,null,null,null,null,[null,null,null,null,null,null,null,null,null,[-1]],null,"242",[null,null,null,null,null,null,null,null,null,[-1]],[null,null,"242225[0-46-9]\\d{3}",null,null,null,"2422250123"],null,null,[null,null,null,null,null,null,null,null,null,[-1]]],CA:[null,[null,null,"(?:[2-8]\\d|90)\\d{8}",null,null,null,null,null,null,[10],[7]],[null,null,"(?:2(?:04|[23]6|[48]9|50)|3(?:06|43|65)|4(?:03|1[68]|3[178]|50)|5(?:06|1[49]|48|79|8[17])|6(?:04|13|39|47)|7(?:0[59]|78|8[02])|8(?:[06]7|19|25|73)|90[25])[2-9]\\d{6}",null,null,null,"5062345678",null,null,null,[7]],[null,null,"(?:2(?:04|[23]6|[48]9|50)|3(?:06|43|65)|4(?:03|1[68]|3[178]|50)|5(?:06|1[49]|48|79|8[17])|6(?:04|13|39|47)|7(?:0[59]|78|8[02])|8(?:[06]7|19|25|73)|90[25])[2-9]\\d{6}",null,null,null,"5062345678",null,null,null,[7]],[null,null,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",null,null,null,"8002123456"],[null,null,"900[2-9]\\d{6}",null,null,null,"9002123456"],[null,null,null,null,null,null,null,null,null,[-1]],[null,null,"(?:5(?:00|2[12]|33|44|66|77|88)|622)[2-9]\\d{6}",null,null,null,"5002345678"],[null,null,"600[2-9]\\d{6}",null,null,null,"6002012345"],"CA",1,"011","1",null,null,"1",null,null,1,null,null,[null,null,null,null,null,null,null,null,null,[-1]],null,null,[null,null,null,null,null,null,null,null,null,[-1]],[null,null,null,null,null,null,null,null,null,[-1]],null,null,[null,null,null,null,null,null,null,null,null,[-1]]],DM:[null,[null,null,"(?:[58]\\d\\d|767|900)\\d{7}",null,null,null,null,null,null,[10],[7]],[null,null,"767(?:2(?:55|66)|4(?:2[01]|4[0-25-9])|50[0-4]|70[1-3])\\d{4}",null,null,null,"7674201234",null,null,null,[7]],[null,null,"767(?:2(?:[2-4689]5|7[5-7])|31[5-7]|61[1-7])\\d{4}",null,null,null,"7672251234",null,null,null,[7]],[null,null,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",null,null,null,"8002123456"],[null,null,"900[2-9]\\d{6}",null,null,null,"9002123456"],[null,null,null,null,null,null,null,null,null,[-1]],[null,null,"5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",null,null,null,"5002345678"],[null,null,null,null,null,null,null,null,null,[-1]],"DM",1,"011","1",null,null,"1",null,null,null,null,null,[null,null,null,null,null,null,null,null,null,[-1]],null,"767",[null,null,null,null,null,null,null,null,null,[-1]],[null,null,null,null,null,null,null,null,null,[-1]],null,null,[null,null,null,null,null,null,null,null,null,[-1]]],DO:[null,[null,null,"(?:[58]\\d\\d|900)\\d{7}",null,null,null,null,null,null,[10],[7]],[null,null,"8(?:[04]9[2-9]\\d\\d|29(?:2(?:[0-59]\\d|6[04-9]|7[0-27]|8[0237-9])|3(?:[0-35-9]\\d|4[7-9])|[45]\\d\\d|6(?:[0-27-9]\\d|[3-5][1-9]|6[0135-8])|7(?:0[013-9]|[1-37]\\d|4[1-35689]|5[1-4689]|6[1-57-9]|8[1-79]|9[1-8])|8(?:0[146-9]|1[0-48]|[248]\\d|3[1-79]|5[01589]|6[013-68]|7[124-8]|9[0-8])|9(?:[0-24]\\d|3[02-46-9]|5[0-79]|60|7[0169]|8[57-9]|9[02-9])))\\d{4}",null,null,null,"8092345678",null,null,null,[7]],[null,null,"8[024]9[2-9]\\d{6}",null,null,null,"8092345678",null,null,null,[7]],[null,null,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",null,null,null,"8002123456"],[null,null,"900[2-9]\\d{6}",null,null,null,"9002123456"],[null,null,null,null,null,null,null,null,null,[-1]],[null,null,"5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",null,null,null,"5002345678"],[null,null,null,null,null,null,null,null,null,[-1]],"DO",1,"011","1",null,null,"1",null,null,null,null,null,[null,null,null,null,null,null,null,null,null,[-1]],null,"8[024]9",[null,null,null,null,null,null,null,null,null,[-1]],[null,null,null,null,null,null,null,null,null,[-1]],null,null,[null,null,null,null,null,null,null,null,null,[-1]]],GD:[null,[null,null,"(?:473|[58]\\d\\d|900)\\d{7}",null,null,null,null,null,null,[10],[7]],[null,null,"473(?:2(?:3[0-2]|69)|3(?:2[89]|86)|4(?:[06]8|3[5-9]|4[0-49]|5[5-79]|73|90)|63[68]|7(?:58|84)|800|938)\\d{4}",null,null,null,"4732691234",null,null,null,[7]],[null,null,"473(?:4(?:0[2-79]|1[04-9]|2[0-5]|58)|5(?:2[01]|3[3-8])|901)\\d{4}",null,null,null,"4734031234",null,null,null,[7]],[null,null,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",null,null,null,"8002123456"],[null,null,"900[2-9]\\d{6}",null,null,null,"9002123456"],[null,null,null,null,null,null,null,null,null,[-1]],[null,null,"5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",null,null,null,"5002345678"],[null,null,null,null,null,null,null,null,null,[-1]],"GD",1,"011","1",null,null,"1",null,null,null,null,null,[null,null,null,null,null,null,null,null,null,[-1]],null,"473",[null,null,null,null,null,null,null,null,null,[-1]],[null,null,null,null,null,null,null,null,null,[-1]],null,null,[null,null,null,null,null,null,null,null,null,[-1]]],GU:[null,[null,null,"(?:[58]\\d\\d|671|900)\\d{7}",null,null,null,null,null,null,[10],[7]],[null,null,"671(?:3(?:00|3[39]|4[349]|55|6[26])|4(?:00|56|7[1-9]|8[0236-9])|5(?:55|6[2-5]|88)|6(?:3[2-578]|4[24-9]|5[34]|78|8[235-9])|7(?:[0479]7|2[0167]|3[45]|8[7-9])|8(?:[2-57-9]8|6[48])|9(?:2[29]|6[79]|7[1279]|8[7-9]|9[78]))\\d{4}",null,null,null,"6713001234",null,null,null,[7]],[null,null,"671(?:3(?:00|3[39]|4[349]|55|6[26])|4(?:00|56|7[1-9]|8[0236-9])|5(?:55|6[2-5]|88)|6(?:3[2-578]|4[24-9]|5[34]|78|8[235-9])|7(?:[0479]7|2[0167]|3[45]|8[7-9])|8(?:[2-57-9]8|6[48])|9(?:2[29]|6[79]|7[1279]|8[7-9]|9[78]))\\d{4}",null,null,null,"6713001234",null,null,null,[7]],[null,null,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",null,null,null,"8002123456"],[null,null,"900[2-9]\\d{6}",null,null,null,"9002123456"],[null,null,null,null,null,null,null,null,null,[-1]],[null,null,"5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",null,null,null,"5002345678"],[null,null,null,null,null,null,null,null,null,[-1]],"GU",1,"011","1",null,null,"1",null,null,1,null,null,[null,null,null,null,null,null,null,null,null,[-1]],null,"671",[null,null,null,null,null,null,null,null,null,[-1]],[null,null,null,null,null,null,null,null,null,[-1]],null,null,[null,null,null,null,null,null,null,null,null,[-1]]],JM:[null,[null,null,"(?:[58]\\d\\d|658|900)\\d{7}",null,null,null,null,null,null,[10],[7]],[null,null,"(?:658[2-9]\\d\\d|876(?:5(?:0[12]|1[0-468]|2[35]|63)|6(?:0[1-3579]|1[0237-9]|[23]\\d|40|5[06]|6[2-589]|7[05]|8[04]|9[4-9])|7(?:0[2-689]|[1-6]\\d|8[056]|9[45])|9(?:0[1-8]|1[02378]|[2-8]\\d|9[2-468])))\\d{4}",null,null,null,"8765230123",null,null,null,[7]],[null,null,"876(?:(?:2[14-9]|[348]\\d)\\d|5(?:0[3-9]|[2-57-9]\\d|6[0-24-9])|7(?:0[07]|7\\d|8[1-47-9]|9[0-36-9])|9(?:[01]9|9[0579]))\\d{4}",null,null,null,"8762101234",null,null,null,[7]],[null,null,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",null,null,null,"8002123456"],[null,null,"900[2-9]\\d{6}",null,null,null,"9002123456"],[null,null,null,null,null,null,null,null,null,[-1]],[null,null,"5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",null,null,null,"5002345678"],[null,null,null,null,null,null,null,null,null,[-1]],"JM",1,"011","1",null,null,"1",null,null,null,null,null,[null,null,null,null,null,null,null,null,null,[-1]],null,"658|876",[null,null,null,null,null,null,null,null,null,[-1]],[null,null,null,null,null,null,null,null,null,[-1]],null,null,[null,null,null,null,null,null,null,null,null,[-1]]],KN:[null,[null,null,"(?:[58]\\d\\d|900)\\d{7}",null,null,null,null,null,null,[10],[7]],[null,null,"869(?:2(?:29|36)|302|4(?:6[015-9]|70))\\d{4}",null,null,null,"8692361234",null,null,null,[7]],[null,null,"869(?:5(?:5[6-8]|6[5-7])|66\\d|76[02-7])\\d{4}",null,null,null,"8697652917",null,null,null,[7]],[null,null,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",null,null,null,"8002123456"],[null,null,"900[2-9]\\d{6}",null,null,null,"9002123456"],[null,null,null,null,null,null,null,null,null,[-1]],[null,null,"5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",null,null,null,"5002345678"],[null,null,null,null,null,null,null,null,null,[-1]],"KN",1,"011","1",null,null,"1",null,null,null,null,null,[null,null,null,null,null,null,null,null,null,[-1]],null,"869",[null,null,null,null,null,null,null,null,null,[-1]],[null,null,null,null,null,null,null,null,null,[-1]],null,null,[null,null,null,null,null,null,null,null,null,[-1]]],KY:[null,[null,null,"(?:345|[58]\\d\\d|900)\\d{7}",null,null,null,null,null,null,[10],[7]],[null,null,"345(?:2(?:22|44)|444|6(?:23|38|40)|7(?:4[35-79]|6[6-9]|77)|8(?:00|1[45]|25|[48]8)|9(?:14|4[035-9]))\\d{4}",null,null,null,"3452221234",null,null,null,[7]],[null,null,"345(?:32[1-9]|5(?:1[67]|2[5-79]|4[6-9]|50|76)|649|9(?:1[67]|2[2-9]|3[689]))\\d{4}",null,null,null,"3453231234",null,null,null,[7]],[null,null,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",null,null,null,"8002345678"],[null,null,"(?:345976|900[2-9]\\d\\d)\\d{4}",null,null,null,"9002345678"],[null,null,null,null,null,null,null,null,null,[-1]],[null,null,"5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",null,null,null,"5002345678"],[null,null,null,null,null,null,null,null,null,[-1]],"KY",1,"011","1",null,null,"1",null,null,null,null,null,[null,null,"345849\\d{4}",null,null,null,"3458491234"],null,"345",[null,null,null,null,null,null,null,null,null,[-1]],[null,null,null,null,null,null,null,null,null,[-1]],null,null,[null,null,null,null,null,null,null,null,null,[-1]]],LC:[null,[null,null,"(?:[58]\\d\\d|758|900)\\d{7}",null,null,null,null,null,null,[10],[7]],[null,null,"758(?:4(?:30|5\\d|6[2-9]|8[0-2])|57[0-2]|638)\\d{4}",null,null,null,"7584305678",null,null,null,[7]],[null,null,"758(?:28[4-7]|384|4(?:6[01]|8[4-9])|5(?:1[89]|20|84)|7(?:1[2-9]|2\\d|3[01]))\\d{4}",null,null,null,"7582845678",null,null,null,[7]],[null,null,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",null,null,null,"8002123456"],[null,null,"900[2-9]\\d{6}",null,null,null,"9002123456"],[null,null,null,null,null,null,null,null,null,[-1]],[null,null,"5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",null,null,null,"5002345678"],[null,null,null,null,null,null,null,null,null,[-1]],"LC",1,"011","1",null,null,"1",null,null,null,null,null,[null,null,null,null,null,null,null,null,null,[-1]],null,"758",[null,null,null,null,null,null,null,null,null,[-1]],[null,null,null,null,null,null,null,null,null,[-1]],null,null,[null,null,null,null,null,null,null,null,null,[-1]]],MP:[null,[null,null,"(?:[58]\\d\\d|(?:67|90)0)\\d{7}",null,null,null,null,null,null,[10],[7]],[null,null,"670(?:2(?:3[3-7]|56|8[5-8])|32[1-38]|4(?:33|8[348])|5(?:32|55|88)|6(?:64|70|82)|78[3589]|8[3-9]8|989)\\d{4}",null,null,null,"6702345678",null,null,null,[7]],[null,null,"670(?:2(?:3[3-7]|56|8[5-8])|32[1-38]|4(?:33|8[348])|5(?:32|55|88)|6(?:64|70|82)|78[3589]|8[3-9]8|989)\\d{4}",null,null,null,"6702345678",null,null,null,[7]],[null,null,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",null,null,null,"8002123456"],[null,null,"900[2-9]\\d{6}",null,null,null,"9002123456"],[null,null,null,null,null,null,null,null,null,[-1]],[null,null,"5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",null,null,null,"5002345678"],[null,null,null,null,null,null,null,null,null,[-1]],"MP",1,"011","1",null,null,"1",null,null,1,null,null,[null,null,null,null,null,null,null,null,null,[-1]],null,"670",[null,null,null,null,null,null,null,null,null,[-1]],[null,null,null,null,null,null,null,null,null,[-1]],null,null,[null,null,null,null,null,null,null,null,null,[-1]]],MS:[null,[null,null,"(?:(?:[58]\\d\\d|900)\\d\\d|66449)\\d{5}",null,null,null,null,null,null,[10],[7]],[null,null,"664491\\d{4}",null,null,null,"6644912345",null,null,null,[7]],[null,null,"66449[2-6]\\d{4}",null,null,null,"6644923456",null,null,null,[7]],[null,null,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",null,null,null,"8002123456"],[null,null,"900[2-9]\\d{6}",null,null,null,"9002123456"],[null,null,null,null,null,null,null,null,null,[-1]],[null,null,"5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",null,null,null,"5002345678"],[null,null,null,null,null,null,null,null,null,[-1]],"MS",1,"011","1",null,null,"1",null,null,null,null,null,[null,null,null,null,null,null,null,null,null,[-1]],null,"664",[null,null,null,null,null,null,null,null,null,[-1]],[null,null,null,null,null,null,null,null,null,[-1]],null,null,[null,null,null,null,null,null,null,null,null,[-1]]],PR:[null,[null,null,"(?:[589]\\d\\d|787)\\d{7}",null,null,null,null,null,null,[10],[7]],[null,null,"(?:787|939)[2-9]\\d{6}",null,null,null,"7872345678",null,null,null,[7]],[null,null,"(?:787|939)[2-9]\\d{6}",null,null,null,"7872345678",null,null,null,[7]],[null,null,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",null,null,null,"8002345678"],[null,null,"900[2-9]\\d{6}",null,null,null,"9002345678"],[null,null,null,null,null,null,null,null,null,[-1]],[null,null,"5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",null,null,null,"5002345678"],[null,null,null,null,null,null,null,null,null,[-1]],"PR",1,"011","1",null,null,"1",null,null,1,null,null,[null,null,null,null,null,null,null,null,null,[-1]],null,"787|939",[null,null,null,null,null,null,null,null,null,[-1]],[null,null,null,null,null,null,null,null,null,[-1]],null,null,[null,null,null,null,null,null,null,null,null,[-1]]],SX:[null,[null,null,"(?:(?:[58]\\d\\d|900)\\d|7215)\\d{6}",null,null,null,null,null,null,[10],[7]],[null,null,"7215(?:4[2-8]|8[239]|9[056])\\d{4}",null,null,null,"7215425678",null,null,null,[7]],[null,null,"7215(?:1[02]|2\\d|5[034679]|8[014-8])\\d{4}",null,null,null,"7215205678",null,null,null,[7]],[null,null,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",null,null,null,"8002123456"],[null,null,"900[2-9]\\d{6}",null,null,null,"9002123456"],[null,null,null,null,null,null,null,null,null,[-1]],[null,null,"5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",null,null,null,"5002345678"],[null,null,null,null,null,null,null,null,null,[-1]],"SX",1,"011","1",null,null,"1",null,null,null,null,null,[null,null,null,null,null,null,null,null,null,[-1]],null,"721",[null,null,null,null,null,null,null,null,null,[-1]],[null,null,null,null,null,null,null,null,null,[-1]],null,null,[null,null,null,null,null,null,null,null,null,[-1]]],TC:[null,[null,null,"(?:[58]\\d\\d|649|900)\\d{7}",null,null,null,null,null,null,[10],[7]],[null,null,"649(?:712|9(?:4\\d|50))\\d{4}",null,null,null,"6497121234",null,null,null,[7]],[null,null,"649(?:2(?:3[129]|4[1-7])|3(?:3[1-389]|4[1-8])|4[34][1-3])\\d{4}",null,null,null,"6492311234",null,null,null,[7]],[null,null,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",null,null,null,"8002345678"],[null,null,"900[2-9]\\d{6}",null,null,null,"9002345678"],[null,null,null,null,null,null,null,null,null,[-1]],[null,null,"5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",null,null,null,"5002345678"],[null,null,"64971[01]\\d{4}",null,null,null,"6497101234",null,null,null,[7]],"TC",1,"011","1",null,null,"1",null,null,null,null,null,[null,null,null,null,null,null,null,null,null,[-1]],null,"649",[null,null,null,null,null,null,null,null,null,[-1]],[null,null,null,null,null,null,null,null,null,[-1]],null,null,[null,null,null,null,null,null,null,null,null,[-1]]],TT:[null,[null,null,"(?:[58]\\d\\d|900)\\d{7}",null,null,null,null,null,null,[10],[7]],[null,null,"868(?:2(?:01|[23]\\d)|6(?:0[7-9]|1[02-8]|2[1-9]|[3-69]\\d|7[0-79])|82[124])\\d{4}",null,null,null,"8682211234",null,null,null,[7]],[null,null,"868(?:2(?:6[6-9]|[7-9]\\d)|[37](?:0[1-9]|1[02-9]|[2-9]\\d)|4[6-9]\\d|6(?:20|78|8\\d))\\d{4}",null,null,null,"8682911234",null,null,null,[7]],[null,null,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",null,null,null,"8002345678"],[null,null,"900[2-9]\\d{6}",null,null,null,"9002345678"],[null,null,null,null,null,null,null,null,null,[-1]],[null,null,"5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",null,null,null,"5002345678"],[null,null,null,null,null,null,null,null,null,[-1]],"TT",1,"011","1",null,null,"1",null,null,null,null,null,[null,null,null,null,null,null,null,null,null,[-1]],null,"868",[null,null,null,null,null,null,null,null,null,[-1]],[null,null,null,null,null,null,null,null,null,[-1]],null,null,[null,null,"868619\\d{4}",null,null,null,"8686191234",null,null,null,[7]]],US:[null,[null,null,"[2-9]\\d{9}",null,null,null,null,null,null,[10],[7]],[null,null,"(?:2(?:0[1-35-9]|1[02-9]|2[03-589]|3[149]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-57-9]|1[02-9]|2[0135]|3[0-24679]|4[67]|5[12]|6[014]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[0235]|58|6[39]|7[0589]|8[04])|5(?:0[1-57-9]|1[0235-8]|20|3[0149]|4[01]|5[19]|6[1-47]|7[013-5]|8[056])|6(?:0[1-35-9]|1[024-9]|2[03689]|[34][016]|5[017]|6[0-279]|78|8[0-2])|7(?:0[1-46-8]|1[2-9]|2[04-7]|3[1247]|4[037]|5[47]|6[02359]|7[02-59]|8[156])|8(?:0[1-68]|1[02-8]|2[08]|3[0-28]|4[3578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[0179]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}",null,null,null,"2015550123",null,null,null,[7]],[null,null,"(?:2(?:0[1-35-9]|1[02-9]|2[03-589]|3[149]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-57-9]|1[02-9]|2[0135]|3[0-24679]|4[67]|5[12]|6[014]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[0235]|58|6[39]|7[0589]|8[04])|5(?:0[1-57-9]|1[0235-8]|20|3[0149]|4[01]|5[19]|6[1-47]|7[013-5]|8[056])|6(?:0[1-35-9]|1[024-9]|2[03689]|[34][016]|5[017]|6[0-279]|78|8[0-2])|7(?:0[1-46-8]|1[2-9]|2[04-7]|3[1247]|4[037]|5[47]|6[02359]|7[02-59]|8[156])|8(?:0[1-68]|1[02-8]|2[08]|3[0-28]|4[3578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[0179]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}",null,null,null,"2015550123",null,null,null,[7]],[null,null,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",null,null,null,"8002345678"],[null,null,"900[2-9]\\d{6}",null,null,null,"9002345678"],[null,null,null,null,null,null,null,null,null,[-1]],[null,null,"5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",null,null,null,"5002345678"],[null,null,null,null,null,null,null,null,null,[-1]],"US",1,"011","1",null,null,"1",null,null,1,[[null,"(\\d{3})(\\d{4})","$1-$2",["[2-9]"]],[null,"(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],null,null,1]],[[null,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[2-9]"]]],[null,null,null,null,null,null,null,null,null,[-1]],1,null,[null,null,null,null,null,null,null,null,null,[-1]],[null,null,"710[2-9]\\d{6}",null,null,null,"7102123456"],null,null,[null,null,null,null,null,null,null,null,null,[-1]]],VC:[null,[null,null,"(?:[58]\\d\\d|784|900)\\d{7}",null,null,null,null,null,null,[10],[7]],[null,null,"784(?:266|3(?:6[6-9]|7\\d|8[0-24-6])|4(?:38|5[0-36-8]|8[0-8])|5(?:55|7[0-2]|93)|638|784)\\d{4}",null,null,null,"7842661234",null,null,null,[7]],[null,null,"784(?:4(?:3[0-5]|5[45]|89|9[0-8])|5(?:2[6-9]|3[0-4]))\\d{4}",null,null,null,"7844301234",null,null,null,[7]],[null,null,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",null,null,null,"8002345678"],[null,null,"900[2-9]\\d{6}",null,null,null,"9002345678"],[null,null,null,null,null,null,null,null,null,[-1]],[null,null,"5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",null,null,null,"5002345678"],[null,null,null,null,null,null,null,null,null,[-1]],"VC",1,"011","1",null,null,"1",null,null,null,null,null,[null,null,null,null,null,null,null,null,null,[-1]],null,"784",[null,null,null,null,null,null,null,null,null,[-1]],[null,null,null,null,null,null,null,null,null,[-1]],null,null,[null,null,null,null,null,null,null,null,null,[-1]]],VG:[null,[null,null,"(?:284|[58]\\d\\d|900)\\d{7}",null,null,null,null,null,null,[10],[7]],[null,null,"284(?:(?:229|774|8(?:52|6[459]))\\d|4(?:22\\d|9(?:[45]\\d|6[0-5])))\\d{3}",null,null,null,"2842291234",null,null,null,[7]],[null,null,"284(?:(?:3(?:0[0-3]|4[0-7]|68|9[34])|54[0-57])\\d|4(?:(?:4[0-6]|68)\\d|9(?:6[6-9]|9\\d)))\\d{3}",null,null,null,"2843001234",null,null,null,[7]],[null,null,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",null,null,null,"8002345678"],[null,null,"900[2-9]\\d{6}",null,null,null,"9002345678"],[null,null,null,null,null,null,null,null,null,[-1]],[null,null,"5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",null,null,null,"5002345678"],[null,null,null,null,null,null,null,null,null,[-1]],"VG",1,"011","1",null,null,"1",null,null,null,null,null,[null,null,null,null,null,null,null,null,null,[-1]],null,"284",[null,null,null,null,null,null,null,null,null,[-1]],[null,null,null,null,null,null,null,null,null,[-1]],null,null,[null,null,null,null,null,null,null,null,null,[-1]]],VI:[null,[null,null,"(?:(?:34|90)0|[58]\\d\\d)\\d{7}",null,null,null,null,null,null,[10],[7]],[null,null,"340(?:2(?:01|2[06-8]|44|77)|3(?:32|44)|4(?:22|7[34])|5(?:1[34]|55)|6(?:26|4[23]|77|9[023])|7(?:1[2-57-9]|27|7\\d)|884|998)\\d{4}",null,null,null,"3406421234",null,null,null,[7]],[null,null,"340(?:2(?:01|2[06-8]|44|77)|3(?:32|44)|4(?:22|7[34])|5(?:1[34]|55)|6(?:26|4[23]|77|9[023])|7(?:1[2-57-9]|27|7\\d)|884|998)\\d{4}",null,null,null,"3406421234",null,null,null,[7]],[null,null,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",null,null,null,"8002345678"],[null,null,"900[2-9]\\d{6}",null,null,null,"9002345678"],[null,null,null,null,null,null,null,null,null,[-1]],[null,null,"5(?:00|2[12]|33|44|66|77|88)[2-9]\\d{6}",null,null,null,"5002345678"],[null,null,null,null,null,null,null,null,null,[-1]],"VI",1,"011","1",null,null,"1",null,null,1,null,null,[null,null,null,null,null,null,null,null,null,[-1]],null,"340",[null,null,null,null,null,null,null,null,null,[-1]],[null,null,null,null,null,null,null,null,null,[-1]],null,null,[null,null,null,null,null,null,null,null,null,[-1]]]};k.b=function(){return k.a?k.a:k.a=new k};var Z={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9"},tt=RegExp("[+＋]+"),nt=RegExp("([0-9０-９٠-٩۰-۹])"),it=/^\(?\$1\)?$/,et=new v;p(et,11,"NA");var ot=/\[([^\[\]])*\]/g,rt=/\d(?=[^,}][^,}])/g,st=RegExp("^[-x‐-―−ー－-／  ­​⁠　()（）［］.\\[\\]/~⁓∼～]*(\\$\\d[-x‐-―−ー－-／  ­​⁠　()（）［］.\\[\\]/~⁓∼～]*)+$"),lt=/[- ]/;T.prototype.K=function(){this.C="",e(this.i),e(this.u),e(this.m),this.s=0,this.w="",e(this.b),this.h="",e(this.a),this.l=!0,this.A=this.o=this.F=!1,this.f=[],this.B=!1,this.g!=this.J&&(this.g=S(this,this.D))},T.prototype.L=function(t){return this.C=function(t,n){var i,o;if(t.i.a(n),nt.test(o=n)||1==t.i.b.length&&tt.test(o)?("+"==(o=n)?(i=o,t.u.a(o)):(t.u.a(i=Z[o]),t.a.a(i)),n=i):(t.l=!1,t.F=!0),!t.l){if(!t.F)if(L(t)){if($(t))return D(t)}else if(0<t.h.length&&(o=t.a.toString(),e(t.a),t.a.a(t.h),t.a.a(o),i=(o=t.b.toString()).lastIndexOf(t.h),e(t.b),t.b.a(o.substring(0,i))),t.h!=M(t))return t.b.a(" "),D(t);return t.i.toString()}switch(t.u.b.length){case 0:case 1:case 2:return t.i.toString();case 3:if(!L(t))return t.h=M(t),P(t);t.A=!0;default:return t.A?($(t)&&(t.A=!1),t.b.toString()+t.a.toString()):0<t.f.length?(o=j(t,n),0<(i=N(t)).length?i:(A(t,t.a.toString()),C(t)?R(t):t.l?O(t,o):t.i.toString())):P(t)}}(this,t)},t("Cleave.AsYouTypeFormatter",T),t("Cleave.AsYouTypeFormatter.prototype.inputDigit",T.prototype.L),t("Cleave.AsYouTypeFormatter.prototype.clear",T.prototype.K)}).call("object"==typeof p&&p?p:window);var yt="https://js.stripe.com/v3",xt=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,kt="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",It=null,_t=function(t,n,i){if(null===t)return null;var e=t.apply(void 0,n);return function(t,n){t&&t._registerWrapper&&t._registerWrapper({name:"stripe-js",version:"1.27.0",startTime:n})}(e,i),e},Et=Promise.resolve().then((function(){return t=null,null!==It?It:It=new Promise((function(n,i){if("undefined"!=typeof window)if(window.Stripe&&t&&console.warn(kt),window.Stripe)n(window.Stripe);else try{var e=function(){for(var t=document.querySelectorAll('script[src^="'.concat(yt,'"]')),n=0;n<t.length;n++){var i=t[n];if(xt.test(i.src))return i}return null}();e&&t?console.warn(kt):e||(e=function(t){var n=t&&!t.advancedFraudSignals?"?advancedFraudSignals=false":"",i=document.createElement("script");i.src="".concat(yt).concat(n);var e=document.head||document.body;if(!e)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return e.appendChild(i),i}(t)),e.addEventListener("load",(function(){window.Stripe?n(window.Stripe):i(new Error("Stripe.js not available"))})),e.addEventListener("error",(function(){i(new Error("Failed to load Stripe.js"))}))}catch(t){return void i(t)}else n(null)}));var t})),Tt=!1;Et.catch((function(t){Tt||console.warn(t)}));const St=class{constructor(i){t(this,i),this.ionChange=n(this,"ionChange",7),this.ionInput=n(this,"ionInput",7),this.ionBlur=n(this,"ionBlur",7),this.ionFocus=n(this,"ionFocus",7),this.autocomplete="off",this.clearInput=!1,this.multiple=!1,this.readOnly=!1,this.spellCheck=!1,this.inputMode="text",this.stripeElements={},this.passwordVisible=!1}async onBlur(){const t=await this.checkValidity();this.inputEl.classList[t?"remove":"add"]("invalid"),await this.setValidationClass()}async getCardToken(t={}){return this.stripe.createToken(this.card,Object.assign({address_country:"US",currency:"usd"},t))}async setFocus(){this.input.focus()}async checkValidity(t){return(this.required||t&&t.setValidationClass)&&await this.setValidationClass(t&&t.validationClassOptions?t.validationClassOptions:null),this.input?this.input.checkValidity():!("card"!==this.type||!this.cardValidity||this.cardValidity.empty||!this.cardValidity.complete||this.cardValidity.error)}async clear(){"card"===this.type?this.card.clear():this.inputEl.querySelector("ion-input").value=null}async reportValidity(){const t=!this.input||this.input.reportValidity();return this.inputEl.classList[t?"remove":"add"]("invalid"),await this.setValidationClass(),t}onValueChange(){if(!this.cleave)return!1;this.cleave.setRawValue(this.value?this.value:null)}async setValidationClass(t){const n=Object.values(this.itemEl.classList);if(n.indexOf("invalid")>=0&&this.itemEl.classList.remove("invalid"),n.indexOf("valid")>=0&&this.itemEl.classList.remove("valid"),"card"===this.type)!this.cardValidity||this.cardValidity.empty||this.cardValidity.error||this.itemEl.classList.add(this.cardValidity&&!this.cardValidity.empty&&this.cardValidity.complete&&!this.cardValidity.error?"valid":"invalid");else if(this.input){const n=await this.input.checkValidity();(!t||!t.ignoreInvalid||t&&t.ignoreInvalid&&n)&&this.itemEl.classList.add(n?"valid":"invalid")}}componentDidLoad(){(null==i?void 0:i.isBrowser)&&setTimeout((()=>{this.input=this.inputEl.querySelector("input"),this.inputType=this.type?"phone"===this.type?"tel":this.type:"text","phone"===this.type?this.cleave=new wt(this.input,{onValueChanged:t=>{this.value=t.target.value,r(this)},phone:!0,phoneRegionCode:"US",delimiter:"-"}):"hour"===this.type?this.cleave=new wt(this.input,{onValueChanged:t=>{this.value=t.target.value,r(this)},numericOnly:!0,delimiter:".",blocks:[2,2]}):"expiration"===this.type?this.cleave=new wt(this.input,{onValueChanged:t=>{this.value=t.target.value,r(this)},delimiter:"/",numericOnly:!0,blocks:[2,2]}):"cvc"===this.type||"ssn"===this.type?this.cleave=new wt(this.input,{onValueChanged:t=>{this.value=t.target.value,r(this)},delimiter:"",numericOnly:!0,blocks:[4]}):"code"===this.type?this.cleave=new wt(this.input,{onValueChanged:t=>{this.value=t.target.value,r(this)},delimiter:"",numericOnly:!0,blocks:[6]}):"ein"===this.type&&(this.cleave=new wt(this.input,{onValueChanged:t=>{this.value=t.target.value,r(this)},numericOnly:!0,blocks:[2,7],delimiter:"-"}))}),100)}togglePassword(t){t.stopPropagation();const n=this.input.value;this.passwordVisible=!this.passwordVisible,setTimeout((()=>{this.value=n}),50)}async initializeStripeElements(){if(!this.stripeKey)return console.log("Stripe Key prop is required to create card field."),!1;this.stripe=await function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];Tt=!0;var e=Date.now();return Et.then((function(t){return _t(t,n,e)}))}(this.stripeKey);const t=this.stripe.elements({fonts:this.stripeElements.fonts?this.stripeElements.fonts:[{cssSrc:"https://fonts.googleapis.com/css?family=Open+Sans"}]});this.card=t.create("card",{hidePostalCode:!0,style:this.stripeElements.style?this.stripeElements.style:{base:{color:"#000",fontFamily:'"Open Sans", arial, sans-serif',fontSize:"16px","::placeholder":{color:"#999"}}},classes:{base:"native-input native-input-md"}}),this.card.mount(this.cardNumberEl),this.card.on("blur",(t=>{this.itemEl.classList.remove("item-has-focus","item-input"),this.ionBlur.emit({event:t,name:this.name?this.name:"card",value:this.cardValidity&&this.cardValidity.card?this.cardValidity.card:null,validity:!(!this.cardValidity||this.cardValidity.empty||!this.cardValidity.complete||this.cardValidity.error)})})),this.card.on("change",(t=>{this.required&&this.setValidationClass(t),this.cardValidity=t;const n={event:t,name:this.name?this.name:"card",value:t.card,validity:!(!this.cardValidity||this.cardValidity.empty||!this.cardValidity.complete||this.cardValidity.error)};this.ionChange.emit(n),this.ionInput.emit(n)})),this.card.on("focus",(t=>{this.itemEl.classList.add("item-has-focus","item-input"),this.ionFocus.emit({event:t,name:this.name?this.name:"card",validity:!(!this.cardValidity||this.cardValidity.empty||!this.cardValidity.complete||this.cardValidity.error)})}))}dateToYearMonthDay(t){const n=new Date(+t);let i=""+(n.getMonth()+1),e=""+n.getDate();const o=n.getFullYear();return i.length<2&&(i="0"+i),e.length<2&&(e="0"+e),[o,i,e].join("-")}renderInput(){return"card"===this.type?(setTimeout((()=>{this.initializeStripeElements()}),200),e("div",{id:"card-number",ref:t=>this.cardNumberEl=t})):"expiration"===this.type?e("div",{id:"card-expiry"}):"cvc"===this.type?e("div",{id:"card-cvc"}):e("ion-input",{type:this.inputType&&!this.passwordVisible?this.inputType:"phone"===this.type||"hours"===this.type||"date"===this.type?"tel":"text",name:this.name,spellcheck:this.spellCheck,readonly:this.readOnly,multiple:this.multiple,clearInput:this.clearInput,inputMode:this.inputMode,pattern:this.pattern?this.pattern:"phone"===this.type?"[0-9]{3}-[0-9]{3}-[0-9]{4}":"ssn"===this.type?"[0-9]{4}":"date"===this.type?"[0-9]{1,2}/[0-9]{1,2}/[0-9]{2,4}":"code"===this.type?"[0-9]{6}":"expiration"===this.type?"[0-9]{2}/[0-9]{2}":"cvc"===this.type?"[0-9]{3,4}":null,value:"date"===this.type?this.dateToYearMonthDay(this.value):this.value,placeholder:this.placeholder,required:this.required,autofocus:this.autofocus,autocomplete:this.autocomplete,autocorrect:this.autocorrect,autocapitalize:this.autocapitalize,minlength:"phone"===this.type?12:this.minlength,maxlength:"phone"===this.type?12:this.maxlength,disabled:this.disabled,min:this.min,max:this.max,step:this.step})}render(){return e("ion-item",{ref:t=>this.itemEl=t,lines:this.lines,class:{"input-password item-input":"password"===this.inputType,"input-card":"card"===this.inputType,"has-info-bubble":!!this.info}},this.iconLeft&&e("ion-icon",{name:this.iconLeft,slot:"start"}),this.label&&e("ion-label",{position:this.labelPosition},e("span",null,this.label)),this.renderInput(),"password"===this.type&&e("div",{class:"input-icon"},e("ion-icon",{name:this.passwordVisible?"eye-off":"eye",onClick:t=>this.togglePassword(t)})),this.iconRight&&e("ion-icon",{name:this.iconRight,slot:"start"}))}get inputEl(){return o(this)}static get watchers(){return{value:["onValueChange"]}}};St.style='fireenjin-input .invalid{--border-color:var(--ion-color-danger) !important}fireenjin-input .invalid ion-label{color:var(--ion-color-danger) !important}fireenjin-input .valid{--border-color:var(--ion-color-success) !important}fireenjin-input .valid ion-label{color:var(--ion-color-success) !important}fireenjin-input ion-label{font-size:16px !important;font-weight:bold !important;display:block;background:transparent;text-align:left;padding:0 0 8px 0;font-family:var(--ion-font-family)}fireenjin-input ion-item{position:relative;box-shadow:none !important;--background:var(--background);font-size:inherit;text-align:inherit;--min-height:var(--item-min-height, 48px) !important}fireenjin-input ion-item ion-input{border:none;box-shadow:none !important;font-size:inherit;outline:none !important;--padding-top:15px;width:85% !important;margin-right:auto;text-align:left;--padding-top:var(--input-padding-top, 10px) !important;--padding-bottom:var(--input-padding-bottom, 10px) !important;--padding-start:var(--input-padding-start, 0px) !important;--padding-end:var(--input-padding-end, 0px) !important}fireenjin-input ion-item ion-icon[slot="start"]{margin:auto 10px 10px auto;fill:var(--ion-text-color)}fireenjin-input ion-item.item-has-focus{--border-width:0;border-color:var(--ion-color-primary)}fireenjin-input ion-item.item-has-focus ion-label{color:var(--ion-color-primary) !important}fireenjin-input ion-item .edit ion-button{text-decoration:none;position:absolute;right:0px;top:3px}fireenjin-input ion-item .edit ion-button .button-inner{font-size:14px;color:var(--ion-color-primary);padding-right:25px}fireenjin-input ion-item .edit ion-button ion-icon{position:absolute;top:6px;right:10px;color:var(--ion-color-primary)}fireenjin-input .input-password input{width:calc(100% - 60px) !important}fireenjin-input .input-icon ion-icon{display:block;position:absolute;right:0px;top:30px;height:35px;width:35px;color:var(--ion-color-dark)}fireenjin-input .input-icon ion-icon:hover{cursor:pointer;color:var(--ion-color-primary)}fireenjin-input .input-password ion-icon{top:25px}fireenjin-input .input-card.item-has-focus{border-bottom:2px solid var(--ion-color-primary);--border-color:transparent !important}fireenjin-input #card-number{padding:12px 0 8px 0;width:100%}';const Ct=class{constructor(i){t(this,i),this.fireenjinFetch=n(this,"fireenjinFetch",7),this.ionChange=n(this,"ionChange",7),this.disabled=!1,this.cancelText="Dismiss",this.okText="Okay",this.multiple=!1,this.interface="alert",this.interfaceOptions={},this.limit=15,this.options=[],this.required=!1,this.results=[]}onSuccess(t){var n,i,e;"select"===(null===(n=null==t?void 0:t.detail)||void 0===n?void 0:n.name)&&t.detail.endpoint===this.endpoint&&(this.results=(null===(e=null===(i=null==t?void 0:t.detail)||void 0===i?void 0:i.data)||void 0===e?void 0:e.results)?t.detail.data.results:[],setTimeout((()=>{this.value=this.value}),200))}fetchData(){this.endpoint&&this.fireenjinFetch.emit({name:"select",endpoint:this.endpoint,dataPropsMap:this.dataPropsMap?this.dataPropsMap:this.resultsKey?{[this.resultsKey]:"results"}:null,params:Object.assign({data:Object.assign(Object.assign(Object.assign({},this.query?{query:this.query}:{}),this.orderBy?{orderBy:this.orderBy}:{}),{limit:this.limit?this.limit:15})},this.params?this.params:{})})}componentWillLoad(){this.fetchData()}render(){return e(s,null,e("ion-item",{lines:this.lines},this.icon&&e("ion-icon",{slot:"start",name:this.icon}),this.label&&e("ion-label",{position:this.labelPosition},this.label),e("ion-select",{disabled:this.disabled,selectedText:this.selectedText,interface:this.interface,compareWith:this.compareWith,name:this.name,value:this.value,okText:this.okText,multiple:this.multiple,cancelText:this.cancelText,placeholder:this.placeholder,interfaceOptions:this.interfaceOptions?this.interfaceOptions:{header:this.header,subHeader:this.subHeader,message:this.message}},(this.options?this.options:[]).map((t=>this.optionEl?this.optionEl(t):e("ion-select-option",{value:t.value,disabled:t.disabled},t.label))),(this.results?this.results:[]).map((t=>this.optionEl?this.optionEl(t):e("ion-select-option",{value:t.id},t.name))))))}};Ct.style="fireenjin-select ion-icon{margin-right:5px;color:var(--ion-text-color);opacity:0.33}fireenjin-select select{border:none;width:auto;padding:10px;min-width:30%;cursor:pointer;text-align:justify}";
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */
const At=(t,n)=>{let i,e;const o=(t,e,o)=>{if("undefined"==typeof document)return;const l=document.elementFromPoint(t,e);l&&n(l)?l!==i&&(s(),r(l,o)):s()},r=(t,n)=>{i=t,e||(e=i);const o=i;l((()=>o.classList.add("ion-activated"))),n()},s=(t=!1)=>{if(!i)return;const n=i;l((()=>n.classList.remove("ion-activated"))),t&&e!==i&&i.click(),i=void 0};return x({el:t,gestureName:"buttonActiveDrag",threshold:0,onStart:t=>o(t.currentX,t.currentY,w),onMove:t=>o(t.currentX,t.currentY,y),onEnd:()=>{s(!0),v(),e=void 0}})},Dt=t=>{const n=$(),i=$(),e=$();return i.addElement(t.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),e.addElement(t.querySelector(".action-sheet-wrapper")).fromTo("transform","translateY(100%)","translateY(0%)"),n.addElement(t).easing("cubic-bezier(.36,.66,.04,1)").duration(400).addAnimation([i,e])},Nt=t=>{const n=$(),i=$(),e=$();return i.addElement(t.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),e.addElement(t.querySelector(".action-sheet-wrapper")).fromTo("transform","translateY(0%)","translateY(100%)"),n.addElement(t).easing("cubic-bezier(.36,.66,.04,1)").duration(450).addAnimation([i,e])},Ot=t=>{const n=$(),i=$(),e=$();return i.addElement(t.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),e.addElement(t.querySelector(".action-sheet-wrapper")).fromTo("transform","translateY(100%)","translateY(0%)"),n.addElement(t).easing("cubic-bezier(.36,.66,.04,1)").duration(400).addAnimation([i,e])},Pt=t=>{const n=$(),i=$(),e=$();return i.addElement(t.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),e.addElement(t.querySelector(".action-sheet-wrapper")).fromTo("transform","translateY(0%)","translateY(100%)"),n.addElement(t).easing("cubic-bezier(.36,.66,.04,1)").duration(450).addAnimation([i,e])},Rt=class{constructor(i){t(this,i),this.didPresent=n(this,"ionActionSheetDidPresent",7),this.willPresent=n(this,"ionActionSheetWillPresent",7),this.willDismiss=n(this,"ionActionSheetWillDismiss",7),this.didDismiss=n(this,"ionActionSheetDidDismiss",7),this.presented=!1,this.keyboardClose=!0,this.buttons=[],this.backdropDismiss=!0,this.translucent=!1,this.animated=!0,this.onBackdropTap=()=>{this.dismiss(void 0,k)},this.dispatchCancelHandler=t=>{if(I(t.detail.role)){const t=this.getButtons().find((t=>"cancel"===t.role));this.callButtonHandler(t)}}}present(){return _(this,"actionSheetEnter",Dt,Ot)}connectedCallback(){E(this.el)}dismiss(t,n){return T(this,t,n,"actionSheetLeave",Nt,Pt)}onDidDismiss(){return S(this.el,"ionActionSheetDidDismiss")}onWillDismiss(){return S(this.el,"ionActionSheetWillDismiss")}async buttonClick(t){const n=t.role;return I(n)?this.dismiss(t.data,n):await this.callButtonHandler(t)?this.dismiss(t.data,t.role):Promise.resolve()}async callButtonHandler(t){return!t||!1!==await C(t.handler)}getButtons(){return this.buttons.map((t=>"string"==typeof t?{text:t}:t))}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}componentDidLoad(){const{groupEl:t,wrapperEl:n}=this;!this.gesture&&"md"!==g(this)&&n&&t&&a((()=>{t.scrollHeight>t.clientHeight||(this.gesture=At(n,(t=>t.classList.contains("action-sheet-button"))),this.gesture.enable(!0))}))}render(){const{htmlAttributes:t}=this,n=g(this),i=this.getButtons(),o=i.find((t=>"cancel"===t.role)),r=i.filter((t=>"cancel"!==t.role));return e(s,Object.assign({role:"dialog","aria-modal":"true",tabindex:"-1"},t,{style:{zIndex:`${2e4+this.overlayIndex}`},class:Object.assign(Object.assign({[n]:!0},P(this.cssClass)),{"overlay-hidden":!0,"action-sheet-translucent":this.translucent}),onIonActionSheetWillDismiss:this.dispatchCancelHandler,onIonBackdropTap:this.onBackdropTap}),e("ion-backdrop",{tappable:this.backdropDismiss}),e("div",{tabindex:"0"}),e("div",{class:"action-sheet-wrapper ion-overlay-wrapper",role:"dialog",ref:t=>this.wrapperEl=t},e("div",{class:"action-sheet-container"},e("div",{class:"action-sheet-group",ref:t=>this.groupEl=t},void 0!==this.header&&e("div",{class:{"action-sheet-title":!0,"action-sheet-has-sub-title":void 0!==this.subHeader}},this.header,this.subHeader&&e("div",{class:"action-sheet-sub-title"},this.subHeader)),r.map((t=>e("button",{type:"button",id:t.id,class:Mt(t),onClick:()=>this.buttonClick(t)},e("span",{class:"action-sheet-button-inner"},t.icon&&e("ion-icon",{icon:t.icon,lazy:!1,class:"action-sheet-icon"}),t.text),"md"===n&&e("ion-ripple-effect",null))))),o&&e("div",{class:"action-sheet-group action-sheet-group-cancel"},e("button",{type:"button",class:Mt(o),onClick:()=>this.buttonClick(o)},e("span",{class:"action-sheet-button-inner"},o.icon&&e("ion-icon",{icon:o.icon,lazy:!1,class:"action-sheet-icon"}),o.text),"md"===n&&e("ion-ripple-effect",null))))),e("div",{tabindex:"0"}))}get el(){return o(this)}},Mt=t=>Object.assign({"action-sheet-button":!0,"ion-activatable":!0,"ion-focusable":!0,[`action-sheet-${t.role}`]:void 0!==t.role},P(t.cssClass));
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */Rt.style={ios:'.sc-ion-action-sheet-ios-h{--color:initial;--button-color-activated:var(--button-color);--button-color-focused:var(--button-color);--button-color-hover:var(--button-color);--button-color-selected:var(--button-color);--min-width:auto;--width:100%;--max-width:500px;--min-height:auto;--height:100%;--max-height:calc(100% - (var(--ion-safe-area-top) + var(--ion-safe-area-bottom)));-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;left:0;right:0;top:0;bottom:0;display:block;position:fixed;outline:none;font-family:var(--ion-font-family, inherit);touch-action:none;user-select:none;z-index:1001}.overlay-hidden.sc-ion-action-sheet-ios-h{display:none}.action-sheet-wrapper.sc-ion-action-sheet-ios{left:0;right:0;bottom:0;transform:translate3d(0,  100%,  0);display:block;position:absolute;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);z-index:10;pointer-events:none}.action-sheet-button.sc-ion-action-sheet-ios{display:block;position:relative;width:100%;border:0;outline:none;background:var(--button-background);color:var(--button-color);font-family:inherit;overflow:hidden}.action-sheet-button-inner.sc-ion-action-sheet-ios{display:flex;position:relative;flex-flow:row nowrap;flex-shrink:0;align-items:center;justify-content:center;pointer-events:none;width:100%;height:100%;z-index:1}.action-sheet-container.sc-ion-action-sheet-ios{display:flex;flex-flow:column;justify-content:flex-end;height:100%;max-height:100%}.action-sheet-group.sc-ion-action-sheet-ios{flex-shrink:2;overscroll-behavior-y:contain;overflow-y:auto;-webkit-overflow-scrolling:touch;pointer-events:all;background:var(--background)}.action-sheet-group.sc-ion-action-sheet-ios::-webkit-scrollbar{display:none}.action-sheet-group-cancel.sc-ion-action-sheet-ios{flex-shrink:0;overflow:hidden}.action-sheet-button.sc-ion-action-sheet-ios::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.action-sheet-selected.sc-ion-action-sheet-ios{color:var(--button-color-selected)}.action-sheet-selected.sc-ion-action-sheet-ios::after{background:var(--button-background-selected);opacity:var(--button-background-selected-opacity)}.action-sheet-button.ion-activated.sc-ion-action-sheet-ios{color:var(--button-color-activated)}.action-sheet-button.ion-activated.sc-ion-action-sheet-ios::after{background:var(--button-background-activated);opacity:var(--button-background-activated-opacity)}.action-sheet-button.ion-focused.sc-ion-action-sheet-ios{color:var(--button-color-focused)}.action-sheet-button.ion-focused.sc-ion-action-sheet-ios::after{background:var(--button-background-focused);opacity:var(--button-background-focused-opacity)}@media (any-hover: hover){.action-sheet-button.sc-ion-action-sheet-ios:hover{color:var(--button-color-hover)}.action-sheet-button.sc-ion-action-sheet-ios:hover::after{background:var(--button-background-hover);opacity:var(--button-background-hover-opacity)}}.sc-ion-action-sheet-ios-h{--background:var(--ion-overlay-background-color, var(--ion-color-step-100, #f9f9f9));--backdrop-opacity:var(--ion-backdrop-opacity, 0.4);--button-background:linear-gradient(0deg, rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08), rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08) 50%, transparent 50%) bottom/100% 1px no-repeat transparent;--button-background-activated:var(--ion-text-color, #000);--button-background-activated-opacity:.08;--button-background-hover:currentColor;--button-background-hover-opacity:.04;--button-background-focused:currentColor;--button-background-focused-opacity:.12;--button-background-selected:var(--ion-color-step-150, var(--ion-background-color, #fff));--button-background-selected-opacity:1;--button-color:var(--ion-color-primary, #3880ff);--color:var(--ion-color-step-400, #999999);text-align:center}.action-sheet-wrapper.sc-ion-action-sheet-ios{margin-left:auto;margin-right:auto;margin-top:var(--ion-safe-area-top, 0);margin-bottom:var(--ion-safe-area-bottom, 0)}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.action-sheet-wrapper.sc-ion-action-sheet-ios{margin-left:unset;margin-right:unset;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto}}.action-sheet-container.sc-ion-action-sheet-ios{padding-left:8px;padding-right:8px;padding-top:0;padding-bottom:0}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.action-sheet-container.sc-ion-action-sheet-ios{padding-left:unset;padding-right:unset;-webkit-padding-start:8px;padding-inline-start:8px;-webkit-padding-end:8px;padding-inline-end:8px}}.action-sheet-group.sc-ion-action-sheet-ios{border-radius:13px;margin-bottom:8px}.action-sheet-group.sc-ion-action-sheet-ios:first-child{margin-top:10px}.action-sheet-group.sc-ion-action-sheet-ios:last-child{margin-bottom:10px}@supports (backdrop-filter: blur(0)){.action-sheet-translucent.sc-ion-action-sheet-ios-h .action-sheet-group.sc-ion-action-sheet-ios{background-color:transparent;backdrop-filter:saturate(280%) blur(20px)}.action-sheet-translucent.sc-ion-action-sheet-ios-h .action-sheet-title.sc-ion-action-sheet-ios,.action-sheet-translucent.sc-ion-action-sheet-ios-h .action-sheet-button.sc-ion-action-sheet-ios{background-color:transparent;background-image:linear-gradient(0deg, rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8), rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8) 100%), linear-gradient(0deg, rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.4), rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.4) 50%, rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8) 50%);background-repeat:no-repeat;background-position:top, bottom;background-size:100% calc(100% - 1px), 100% 1px;backdrop-filter:saturate(120%)}.action-sheet-translucent.sc-ion-action-sheet-ios-h .action-sheet-button.ion-activated.sc-ion-action-sheet-ios{background-color:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.7);background-image:none}.action-sheet-translucent.sc-ion-action-sheet-ios-h .action-sheet-cancel.sc-ion-action-sheet-ios{background:var(--button-background-selected)}}.action-sheet-title.sc-ion-action-sheet-ios{background:linear-gradient(0deg, rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08), rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.08) 50%, transparent 50%) bottom/100% 1px no-repeat transparent}.action-sheet-title.sc-ion-action-sheet-ios{padding-left:10px;padding-right:10px;padding-top:14px;padding-bottom:13px;color:var(--color, var(--ion-color-step-400, #999999));font-size:13px;font-weight:400;text-align:center}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.action-sheet-title.sc-ion-action-sheet-ios{padding-left:unset;padding-right:unset;-webkit-padding-start:10px;padding-inline-start:10px;-webkit-padding-end:10px;padding-inline-end:10px}}.action-sheet-title.action-sheet-has-sub-title.sc-ion-action-sheet-ios{font-weight:600}.action-sheet-sub-title.sc-ion-action-sheet-ios{padding-left:0;padding-right:0;padding-top:6px;padding-bottom:0;font-size:13px;font-weight:400}.action-sheet-button.sc-ion-action-sheet-ios{padding-left:18px;padding-right:18px;padding-top:18px;padding-bottom:18px;height:56px;font-size:20px;contain:strict}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.action-sheet-button.sc-ion-action-sheet-ios{padding-left:unset;padding-right:unset;-webkit-padding-start:18px;padding-inline-start:18px;-webkit-padding-end:18px;padding-inline-end:18px}}.action-sheet-button.sc-ion-action-sheet-ios .action-sheet-icon.sc-ion-action-sheet-ios{margin-right:0.3em;font-size:28px;pointer-events:none}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.action-sheet-button.sc-ion-action-sheet-ios .action-sheet-icon.sc-ion-action-sheet-ios{margin-right:unset;-webkit-margin-end:0.3em;margin-inline-end:0.3em}}.action-sheet-button.sc-ion-action-sheet-ios:last-child{background-image:none}.action-sheet-selected.sc-ion-action-sheet-ios{font-weight:bold}.action-sheet-cancel.sc-ion-action-sheet-ios{font-weight:600}.action-sheet-cancel.sc-ion-action-sheet-ios::after{background:var(--button-background-selected);opacity:var(--button-background-selected-opacity)}.action-sheet-destructive.sc-ion-action-sheet-ios,.action-sheet-destructive.ion-activated.sc-ion-action-sheet-ios,.action-sheet-destructive.ion-focused.sc-ion-action-sheet-ios{color:var(--ion-color-danger, #eb445a)}@media (any-hover: hover){.action-sheet-destructive.sc-ion-action-sheet-ios:hover{color:var(--ion-color-danger, #eb445a)}}',md:'.sc-ion-action-sheet-md-h{--color:initial;--button-color-activated:var(--button-color);--button-color-focused:var(--button-color);--button-color-hover:var(--button-color);--button-color-selected:var(--button-color);--min-width:auto;--width:100%;--max-width:500px;--min-height:auto;--height:100%;--max-height:calc(100% - (var(--ion-safe-area-top) + var(--ion-safe-area-bottom)));-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;left:0;right:0;top:0;bottom:0;display:block;position:fixed;outline:none;font-family:var(--ion-font-family, inherit);touch-action:none;user-select:none;z-index:1001}.overlay-hidden.sc-ion-action-sheet-md-h{display:none}.action-sheet-wrapper.sc-ion-action-sheet-md{left:0;right:0;bottom:0;transform:translate3d(0,  100%,  0);display:block;position:absolute;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);z-index:10;pointer-events:none}.action-sheet-button.sc-ion-action-sheet-md{display:block;position:relative;width:100%;border:0;outline:none;background:var(--button-background);color:var(--button-color);font-family:inherit;overflow:hidden}.action-sheet-button-inner.sc-ion-action-sheet-md{display:flex;position:relative;flex-flow:row nowrap;flex-shrink:0;align-items:center;justify-content:center;pointer-events:none;width:100%;height:100%;z-index:1}.action-sheet-container.sc-ion-action-sheet-md{display:flex;flex-flow:column;justify-content:flex-end;height:100%;max-height:100%}.action-sheet-group.sc-ion-action-sheet-md{flex-shrink:2;overscroll-behavior-y:contain;overflow-y:auto;-webkit-overflow-scrolling:touch;pointer-events:all;background:var(--background)}.action-sheet-group.sc-ion-action-sheet-md::-webkit-scrollbar{display:none}.action-sheet-group-cancel.sc-ion-action-sheet-md{flex-shrink:0;overflow:hidden}.action-sheet-button.sc-ion-action-sheet-md::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.action-sheet-selected.sc-ion-action-sheet-md{color:var(--button-color-selected)}.action-sheet-selected.sc-ion-action-sheet-md::after{background:var(--button-background-selected);opacity:var(--button-background-selected-opacity)}.action-sheet-button.ion-activated.sc-ion-action-sheet-md{color:var(--button-color-activated)}.action-sheet-button.ion-activated.sc-ion-action-sheet-md::after{background:var(--button-background-activated);opacity:var(--button-background-activated-opacity)}.action-sheet-button.ion-focused.sc-ion-action-sheet-md{color:var(--button-color-focused)}.action-sheet-button.ion-focused.sc-ion-action-sheet-md::after{background:var(--button-background-focused);opacity:var(--button-background-focused-opacity)}@media (any-hover: hover){.action-sheet-button.sc-ion-action-sheet-md:hover{color:var(--button-color-hover)}.action-sheet-button.sc-ion-action-sheet-md:hover::after{background:var(--button-background-hover);opacity:var(--button-background-hover-opacity)}}.sc-ion-action-sheet-md-h{--background:var(--ion-overlay-background-color, var(--ion-background-color, #fff));--backdrop-opacity:var(--ion-backdrop-opacity, 0.32);--button-background:transparent;--button-background-selected:currentColor;--button-background-selected-opacity:0;--button-background-activated:transparent;--button-background-activated-opacity:0;--button-background-hover:currentColor;--button-background-hover-opacity:.04;--button-background-focused:currentColor;--button-background-focused-opacity:.12;--button-color:var(--ion-color-step-850, #262626);--color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54)}.action-sheet-wrapper.sc-ion-action-sheet-md{margin-left:auto;margin-right:auto;margin-top:var(--ion-safe-area-top, 0);margin-bottom:0}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.action-sheet-wrapper.sc-ion-action-sheet-md{margin-left:unset;margin-right:unset;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto}}.action-sheet-title.sc-ion-action-sheet-md{padding-left:16px;padding-right:16px;padding-top:20px;padding-bottom:17px;min-height:60px;color:var(--color, rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54));font-size:16px;text-align:start}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.action-sheet-title.sc-ion-action-sheet-md{padding-left:unset;padding-right:unset;-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px}}.action-sheet-sub-title.sc-ion-action-sheet-md{padding-left:0;padding-right:0;padding-top:16px;padding-bottom:0;font-size:14px}.action-sheet-group.sc-ion-action-sheet-md:first-child{padding-top:0}.action-sheet-group.sc-ion-action-sheet-md:last-child{padding-bottom:var(--ion-safe-area-bottom)}.action-sheet-button.sc-ion-action-sheet-md{padding-left:16px;padding-right:16px;padding-top:0;padding-bottom:0;position:relative;height:52px;font-size:16px;text-align:start;contain:strict;overflow:hidden}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.action-sheet-button.sc-ion-action-sheet-md{padding-left:unset;padding-right:unset;-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px}}.action-sheet-icon.sc-ion-action-sheet-md{padding-bottom:4px;margin-left:0;margin-right:32px;margin-top:0;margin-bottom:0;color:var(--color);font-size:24px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.action-sheet-icon.sc-ion-action-sheet-md{margin-left:unset;margin-right:unset;-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:32px;margin-inline-end:32px}}.action-sheet-button-inner.sc-ion-action-sheet-md{justify-content:flex-start}.action-sheet-selected.sc-ion-action-sheet-md{font-weight:bold}'};
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */
const Lt=t=>{const n=$(),i=$(),e=$();return i.addElement(t.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),e.addElement(t.querySelector(".alert-wrapper")).keyframes([{offset:0,opacity:"0.01",transform:"scale(1.1)"},{offset:1,opacity:"1",transform:"scale(1)"}]),n.addElement(t).easing("ease-in-out").duration(200).addAnimation([i,e])},$t=t=>{const n=$(),i=$(),e=$();return i.addElement(t.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),e.addElement(t.querySelector(".alert-wrapper")).keyframes([{offset:0,opacity:.99,transform:"scale(1)"},{offset:1,opacity:0,transform:"scale(0.9)"}]),n.addElement(t).easing("ease-in-out").duration(200).addAnimation([i,e])},jt=t=>{const n=$(),i=$(),e=$();return i.addElement(t.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),e.addElement(t.querySelector(".alert-wrapper")).keyframes([{offset:0,opacity:"0.01",transform:"scale(0.9)"},{offset:1,opacity:"1",transform:"scale(1)"}]),n.addElement(t).easing("ease-in-out").duration(150).addAnimation([i,e])},zt=t=>{const n=$(),i=$(),e=$();return i.addElement(t.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),e.addElement(t.querySelector(".alert-wrapper")).fromTo("opacity",.99,0),n.addElement(t).easing("ease-in-out").duration(150).addAnimation([i,e])},Ft=class{constructor(i){t(this,i),this.didPresent=n(this,"ionAlertDidPresent",7),this.willPresent=n(this,"ionAlertWillPresent",7),this.willDismiss=n(this,"ionAlertWillDismiss",7),this.didDismiss=n(this,"ionAlertDidDismiss",7),this.processedInputs=[],this.processedButtons=[],this.presented=!1,this.keyboardClose=!0,this.buttons=[],this.inputs=[],this.backdropDismiss=!0,this.translucent=!1,this.animated=!0,this.onBackdropTap=()=>{this.dismiss(void 0,k)},this.dispatchCancelHandler=t=>{if(I(t.detail.role)){const t=this.processedButtons.find((t=>"cancel"===t.role));this.callButtonHandler(t)}}}onKeydown(t){if(!new Set(this.processedInputs.map((t=>t.type))).has("radio")||t.target&&!this.el.contains(t.target)||t.target.classList.contains("alert-button"))return;const n=this.el.querySelectorAll(".alert-radio"),i=Array.from(n).filter((t=>!t.disabled)),e=i.findIndex((n=>n.id===t.target.id));let o;if(["ArrowDown","ArrowRight"].includes(t.code)&&(o=e===i.length-1?i[0]:i[e+1]),["ArrowUp","ArrowLeft"].includes(t.code)&&(o=0===e?i[i.length-1]:i[e-1]),o&&i.includes(o)){const t=this.processedInputs.find((t=>t.id===(null==o?void 0:o.id)));t&&(this.rbClick(t),o.focus())}}buttonsChanged(){this.processedButtons=this.buttons.map((t=>"string"==typeof t?{text:t,role:"cancel"===t.toLowerCase()?"cancel":void 0}:t))}inputsChanged(){const t=this.inputs,n=t.find((t=>!t.disabled)),i=t.find((t=>t.checked&&!t.disabled))||n,e=new Set(t.map((t=>t.type)));e.has("checkbox")&&e.has("radio")&&console.warn(`Alert cannot mix input types: ${Array.from(e.values()).join("/")}. Please see alert docs for more info.`),this.inputType=e.values().next().value,this.processedInputs=t.map(((t,n)=>({type:t.type||"text",name:t.name||`${n}`,placeholder:t.placeholder||"",value:t.value,label:t.label,checked:!!t.checked,disabled:!!t.disabled,id:t.id||`alert-input-${this.overlayIndex}-${n}`,handler:t.handler,min:t.min,max:t.max,cssClass:t.cssClass||"",attributes:t.attributes||{},tabindex:"radio"===t.type&&t!==i?-1:0})))}connectedCallback(){E(this.el)}componentWillLoad(){this.inputsChanged(),this.buttonsChanged()}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}componentDidLoad(){!this.gesture&&"md"!==g(this)&&this.wrapperEl&&(this.gesture=At(this.wrapperEl,(t=>t.classList.contains("alert-button"))),this.gesture.enable(!0))}present(){return _(this,"alertEnter",Lt,jt)}dismiss(t,n){return T(this,t,n,"alertLeave",$t,zt)}onDidDismiss(){return S(this.el,"ionAlertDidDismiss")}onWillDismiss(){return S(this.el,"ionAlertWillDismiss")}rbClick(t){for(const n of this.processedInputs)n.checked=n===t,n.tabindex=n===t?0:-1;this.activeId=t.id,C(t.handler,t),r(this)}cbClick(t){t.checked=!t.checked,C(t.handler,t),r(this)}buttonClick(t){const n=t.role,i=this.getValues();if(I(n))return this.dismiss({values:i},n);const e=this.callButtonHandler(t,i);return!1!==e?this.dismiss(Object.assign({values:i},e),t.role):Promise.resolve(!1)}callButtonHandler(t,n){if(null==t?void 0:t.handler){const i=C(t.handler,n);if(!1===i)return!1;if("object"==typeof i)return i}return{}}getValues(){if(0===this.processedInputs.length)return;if("radio"===this.inputType){const t=this.processedInputs.find((t=>!!t.checked));return t?t.value:void 0}if("checkbox"===this.inputType)return this.processedInputs.filter((t=>t.checked)).map((t=>t.value));const t={};return this.processedInputs.forEach((n=>{t[n.name]=n.value||""})),t}renderAlertInputs(){switch(this.inputType){case"checkbox":return this.renderCheckbox();case"radio":return this.renderRadio();default:return this.renderInput()}}renderCheckbox(){const t=this.processedInputs,n=g(this);return 0===t.length?null:e("div",{class:"alert-checkbox-group"},t.map((t=>e("button",{type:"button",onClick:()=>this.cbClick(t),"aria-checked":`${t.checked}`,id:t.id,disabled:t.disabled,tabIndex:t.tabindex,role:"checkbox",class:Object.assign(Object.assign({},P(t.cssClass)),{"alert-tappable":!0,"alert-checkbox":!0,"alert-checkbox-button":!0,"ion-focusable":!0,"alert-checkbox-button-disabled":t.disabled||!1})},e("div",{class:"alert-button-inner"},e("div",{class:"alert-checkbox-icon"},e("div",{class:"alert-checkbox-inner"})),e("div",{class:"alert-checkbox-label"},t.label)),"md"===n&&e("ion-ripple-effect",null)))))}renderRadio(){const t=this.processedInputs;return 0===t.length?null:e("div",{class:"alert-radio-group",role:"radiogroup","aria-activedescendant":this.activeId},t.map((t=>e("button",{type:"button",onClick:()=>this.rbClick(t),"aria-checked":`${t.checked}`,disabled:t.disabled,id:t.id,tabIndex:t.tabindex,class:Object.assign(Object.assign({},P(t.cssClass)),{"alert-radio-button":!0,"alert-tappable":!0,"alert-radio":!0,"ion-focusable":!0,"alert-radio-button-disabled":t.disabled||!1}),role:"radio"},e("div",{class:"alert-button-inner"},e("div",{class:"alert-radio-icon"},e("div",{class:"alert-radio-inner"})),e("div",{class:"alert-radio-label"},t.label))))))}renderInput(){const t=this.processedInputs;return 0===t.length?null:e("div",{class:"alert-input-group"},t.map((t=>{var n,i,o,r;return e("div",{class:"alert-input-wrapper"},"textarea"===t.type?e("textarea",Object.assign({placeholder:t.placeholder,value:t.value,id:t.id,tabIndex:t.tabindex},t.attributes,{disabled:null!==(i=null===(n=t.attributes)||void 0===n?void 0:n.disabled)&&void 0!==i?i:t.disabled,class:Vt(t),onInput:n=>{var i;t.value=n.target.value,(null===(i=t.attributes)||void 0===i?void 0:i.onInput)&&t.attributes.onInput(n)}})):e("input",Object.assign({placeholder:t.placeholder,type:t.type,min:t.min,max:t.max,value:t.value,id:t.id,tabIndex:t.tabindex},t.attributes,{disabled:null!==(r=null===(o=t.attributes)||void 0===o?void 0:o.disabled)&&void 0!==r?r:t.disabled,class:Vt(t),onInput:n=>{var i;t.value=n.target.value,(null===(i=t.attributes)||void 0===i?void 0:i.onInput)&&t.attributes.onInput(n)}})))})))}renderAlertButtons(){const t=this.processedButtons,n=g(this);return e("div",{class:{"alert-button-group":!0,"alert-button-group-vertical":t.length>2}},t.map((t=>e("button",{type:"button",id:t.id,class:Ut(t),tabIndex:0,onClick:()=>this.buttonClick(t)},e("span",{class:"alert-button-inner"},t.text),"md"===n&&e("ion-ripple-effect",null)))))}render(){const{overlayIndex:t,header:n,subHeader:i,htmlAttributes:o}=this,r=g(this),l=`alert-${t}-hdr`,a=`alert-${t}-sub-hdr`,u=`alert-${t}-msg`;return e(s,Object.assign({role:this.inputs.length>0||this.buttons.length>0?"alertdialog":"alert","aria-modal":"true",tabindex:"-1"},o,{style:{zIndex:`${2e4+t}`},class:Object.assign(Object.assign({},P(this.cssClass)),{[r]:!0,"overlay-hidden":!0,"alert-translucent":this.translucent}),onIonAlertWillDismiss:this.dispatchCancelHandler,onIonBackdropTap:this.onBackdropTap}),e("ion-backdrop",{tappable:this.backdropDismiss}),e("div",{tabindex:"0"}),e("div",{class:"alert-wrapper ion-overlay-wrapper",ref:t=>this.wrapperEl=t},e("div",{class:"alert-head"},n&&e("h2",{id:l,class:"alert-title"},n),i&&e("h2",{id:a,class:"alert-sub-title"},i)),e("div",{id:u,class:"alert-message",innerHTML:j(this.message)}),this.renderAlertInputs(),this.renderAlertButtons()),e("div",{tabindex:"0"}))}get el(){return o(this)}static get watchers(){return{buttons:["buttonsChanged"],inputs:["inputsChanged"]}}},Vt=t=>{var n,i,e;return Object.assign(Object.assign({"alert-input":!0,"alert-input-disabled":(null!==(i=null===(n=t.attributes)||void 0===n?void 0:n.disabled)&&void 0!==i?i:t.disabled)||!1},P(t.cssClass)),P(t.attributes?null===(e=t.attributes.class)||void 0===e?void 0:e.toString():""))},Ut=t=>Object.assign({"alert-button":!0,"ion-focusable":!0,"ion-activatable":!0,[`alert-button-role-${t.role}`]:void 0!==t.role},P(t.cssClass));
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */Ft.style={ios:".sc-ion-alert-ios-h{--min-width:250px;--width:auto;--min-height:auto;--height:auto;--max-height:90%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;left:0;right:0;top:0;bottom:0;display:flex;position:absolute;align-items:center;justify-content:center;outline:none;font-family:var(--ion-font-family, inherit);contain:strict;touch-action:none;user-select:none;z-index:1001}.overlay-hidden.sc-ion-alert-ios-h{display:none}.alert-top.sc-ion-alert-ios-h{padding-top:50px;align-items:flex-start}.alert-wrapper.sc-ion-alert-ios{display:flex;flex-direction:column;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);contain:content;opacity:0;z-index:10}.alert-title.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}.alert-sub-title.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-weight:normal}.alert-message.sc-ion-alert-ios{box-sizing:border-box;-webkit-overflow-scrolling:touch;overflow-y:auto;overscroll-behavior-y:contain}.alert-checkbox-group.sc-ion-alert-ios::-webkit-scrollbar,.alert-radio-group.sc-ion-alert-ios::-webkit-scrollbar,.alert-message.sc-ion-alert-ios::-webkit-scrollbar{display:none}.alert-input.sc-ion-alert-ios{padding-left:0;padding-right:0;padding-top:10px;padding-bottom:10px;width:100%;border:0;background:inherit;font:inherit;box-sizing:border-box}.alert-button-group.sc-ion-alert-ios{display:flex;flex-direction:row;width:100%}.alert-button-group-vertical.sc-ion-alert-ios{flex-direction:column;flex-wrap:nowrap}.alert-button.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;border:0;font-size:14px;line-height:20px;z-index:0}.alert-button.ion-focused.sc-ion-alert-ios,.alert-tappable.ion-focused.sc-ion-alert-ios{background:var(--ion-color-step-100, #e6e6e6)}.alert-button-inner.sc-ion-alert-ios{display:flex;flex-flow:row nowrap;flex-shrink:0;align-items:center;justify-content:center;width:100%;height:100%}.alert-input-disabled.sc-ion-alert-ios,.alert-checkbox-button-disabled.sc-ion-alert-ios .alert-button-inner.sc-ion-alert-ios,.alert-radio-button-disabled.sc-ion-alert-ios .alert-button-inner.sc-ion-alert-ios{cursor:default;opacity:0.5;pointer-events:none}.alert-tappable.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:flex;width:100%;border:0;background:transparent;font-size:inherit;line-height:initial;text-align:start;appearance:none;contain:strict}.alert-button.sc-ion-alert-ios,.alert-checkbox.sc-ion-alert-ios,.alert-input.sc-ion-alert-ios,.alert-radio.sc-ion-alert-ios{outline:none}.alert-radio-icon.sc-ion-alert-ios,.alert-checkbox-icon.sc-ion-alert-ios,.alert-checkbox-inner.sc-ion-alert-ios{box-sizing:border-box}textarea.alert-input.sc-ion-alert-ios{min-height:37px;resize:none}.sc-ion-alert-ios-h{--background:var(--ion-overlay-background-color, var(--ion-color-step-100, #f9f9f9));--max-width:270px;--backdrop-opacity:var(--ion-backdrop-opacity, 0.3);font-size:14px}.alert-wrapper.sc-ion-alert-ios{border-radius:13px;box-shadow:none;overflow:hidden}.alert-button.sc-ion-alert-ios .alert-button-inner.sc-ion-alert-ios{pointer-events:none}@supports (backdrop-filter: blur(0)){.alert-translucent.sc-ion-alert-ios-h .alert-wrapper.sc-ion-alert-ios{background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.9);backdrop-filter:saturate(180%) blur(20px)}}.alert-head.sc-ion-alert-ios{padding-left:16px;padding-right:16px;padding-top:12px;padding-bottom:7px;text-align:center}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.alert-head.sc-ion-alert-ios{padding-left:unset;padding-right:unset;-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px}}.alert-title.sc-ion-alert-ios{margin-top:8px;color:var(--ion-text-color, #000);font-size:17px;font-weight:600}.alert-sub-title.sc-ion-alert-ios{color:var(--ion-color-step-600, #666666);font-size:14px}.alert-message.sc-ion-alert-ios,.alert-input-group.sc-ion-alert-ios{padding-left:16px;padding-right:16px;padding-top:0;padding-bottom:21px;color:var(--ion-text-color, #000);font-size:13px;text-align:center}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.alert-message.sc-ion-alert-ios,.alert-input-group.sc-ion-alert-ios{padding-left:unset;padding-right:unset;-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px}}.alert-message.sc-ion-alert-ios{max-height:240px}.alert-message.sc-ion-alert-ios:empty{padding-left:0;padding-right:0;padding-top:0;padding-bottom:12px}.alert-input.sc-ion-alert-ios{border-radius:4px;margin-top:10px;padding-left:6px;padding-right:6px;padding-top:6px;padding-bottom:6px;border:0.55px solid var(--ion-color-step-250, #bfbfbf);background-color:var(--ion-background-color, #fff);appearance:none}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.alert-input.sc-ion-alert-ios{padding-left:unset;padding-right:unset;-webkit-padding-start:6px;padding-inline-start:6px;-webkit-padding-end:6px;padding-inline-end:6px}}.alert-input.sc-ion-alert-ios::placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-ios::-ms-clear{display:none}.alert-radio-group.sc-ion-alert-ios,.alert-checkbox-group.sc-ion-alert-ios{overscroll-behavior:contain;max-height:240px;border-top:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2);overflow-y:auto;-webkit-overflow-scrolling:touch}.alert-tappable.sc-ion-alert-ios{height:44px}.alert-radio-label.sc-ion-alert-ios{padding-left:13px;padding-right:13px;padding-top:13px;padding-bottom:13px;flex:1;order:0;color:var(--ion-text-color, #000);text-overflow:ellipsis;white-space:nowrap;overflow:hidden}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.alert-radio-label.sc-ion-alert-ios{padding-left:unset;padding-right:unset;-webkit-padding-start:13px;padding-inline-start:13px;-webkit-padding-end:13px;padding-inline-end:13px}}[aria-checked=true].sc-ion-alert-ios .alert-radio-label.sc-ion-alert-ios{color:var(--ion-color-primary, #3880ff)}.alert-radio-icon.sc-ion-alert-ios{position:relative;order:1;min-width:30px}[aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios{left:7px;top:-7px;position:absolute;width:6px;height:12px;transform:rotate(45deg);border-width:2px;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--ion-color-primary, #3880ff)}[dir=rtl].sc-ion-alert-ios [aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios,[dir=rtl].sc-ion-alert-ios-h [aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios,[dir=rtl] .sc-ion-alert-ios-h [aria-checked=true].sc-ion-alert-ios .alert-radio-inner.sc-ion-alert-ios{left:unset;right:unset;right:7px}.alert-checkbox-label.sc-ion-alert-ios{padding-left:13px;padding-right:13px;padding-top:13px;padding-bottom:13px;flex:1;color:var(--ion-text-color, #000);text-overflow:ellipsis;white-space:nowrap;overflow:hidden}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.alert-checkbox-label.sc-ion-alert-ios{padding-left:unset;padding-right:unset;-webkit-padding-start:13px;padding-inline-start:13px;-webkit-padding-end:13px;padding-inline-end:13px}}.alert-checkbox-icon.sc-ion-alert-ios{border-radius:50%;margin-left:16px;margin-right:6px;margin-top:10px;margin-bottom:10px;position:relative;width:24px;height:24px;border-width:1px;border-style:solid;border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, #c8c7cc)));background-color:var(--ion-item-background, var(--ion-background-color, #fff));contain:strict}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.alert-checkbox-icon.sc-ion-alert-ios{margin-left:unset;margin-right:unset;-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:6px;margin-inline-end:6px}}[aria-checked=true].sc-ion-alert-ios .alert-checkbox-icon.sc-ion-alert-ios{border-color:var(--ion-color-primary, #3880ff);background-color:var(--ion-color-primary, #3880ff)}[aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios{left:9px;top:4px;position:absolute;width:5px;height:12px;transform:rotate(45deg);border-width:1px;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--ion-background-color, #fff)}[dir=rtl].sc-ion-alert-ios [aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios,[dir=rtl].sc-ion-alert-ios-h [aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios,[dir=rtl] .sc-ion-alert-ios-h [aria-checked=true].sc-ion-alert-ios .alert-checkbox-inner.sc-ion-alert-ios{left:unset;right:unset;right:9px}.alert-button-group.sc-ion-alert-ios{margin-right:-0.55px;flex-wrap:wrap}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.alert-button-group.sc-ion-alert-ios{margin-right:unset;-webkit-margin-end:-0.55px;margin-inline-end:-0.55px}}.alert-button.sc-ion-alert-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;border-radius:0;flex:1 1 auto;min-width:50%;height:44px;border-top:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2);border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2);background-color:transparent;color:var(--ion-color-primary, #3880ff);font-size:17px;overflow:hidden}[dir=rtl].sc-ion-alert-ios .alert-button.sc-ion-alert-ios:first-child,[dir=rtl].sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:first-child,[dir=rtl] .sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:first-child{border-right:0}.alert-button.sc-ion-alert-ios:last-child{border-right:0;font-weight:bold}[dir=rtl].sc-ion-alert-ios .alert-button.sc-ion-alert-ios:last-child,[dir=rtl].sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:last-child,[dir=rtl] .sc-ion-alert-ios-h .alert-button.sc-ion-alert-ios:last-child{border-right:0.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.2)}.alert-button.ion-activated.sc-ion-alert-ios{background-color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.1)}.alert-button-role-destructive.sc-ion-alert-ios,.alert-button-role-destructive.ion-activated.sc-ion-alert-ios,.alert-button-role-destructive.ion-focused.sc-ion-alert-ios{color:var(--ion-color-danger, #eb445a)}",md:".sc-ion-alert-md-h{--min-width:250px;--width:auto;--min-height:auto;--height:auto;--max-height:90%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;left:0;right:0;top:0;bottom:0;display:flex;position:absolute;align-items:center;justify-content:center;outline:none;font-family:var(--ion-font-family, inherit);contain:strict;touch-action:none;user-select:none;z-index:1001}.overlay-hidden.sc-ion-alert-md-h{display:none}.alert-top.sc-ion-alert-md-h{padding-top:50px;align-items:flex-start}.alert-wrapper.sc-ion-alert-md{display:flex;flex-direction:column;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);contain:content;opacity:0;z-index:10}.alert-title.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}.alert-sub-title.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-weight:normal}.alert-message.sc-ion-alert-md{box-sizing:border-box;-webkit-overflow-scrolling:touch;overflow-y:auto;overscroll-behavior-y:contain}.alert-checkbox-group.sc-ion-alert-md::-webkit-scrollbar,.alert-radio-group.sc-ion-alert-md::-webkit-scrollbar,.alert-message.sc-ion-alert-md::-webkit-scrollbar{display:none}.alert-input.sc-ion-alert-md{padding-left:0;padding-right:0;padding-top:10px;padding-bottom:10px;width:100%;border:0;background:inherit;font:inherit;box-sizing:border-box}.alert-button-group.sc-ion-alert-md{display:flex;flex-direction:row;width:100%}.alert-button-group-vertical.sc-ion-alert-md{flex-direction:column;flex-wrap:nowrap}.alert-button.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;border:0;font-size:14px;line-height:20px;z-index:0}.alert-button.ion-focused.sc-ion-alert-md,.alert-tappable.ion-focused.sc-ion-alert-md{background:var(--ion-color-step-100, #e6e6e6)}.alert-button-inner.sc-ion-alert-md{display:flex;flex-flow:row nowrap;flex-shrink:0;align-items:center;justify-content:center;width:100%;height:100%}.alert-input-disabled.sc-ion-alert-md,.alert-checkbox-button-disabled.sc-ion-alert-md .alert-button-inner.sc-ion-alert-md,.alert-radio-button-disabled.sc-ion-alert-md .alert-button-inner.sc-ion-alert-md{cursor:default;opacity:0.5;pointer-events:none}.alert-tappable.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:flex;width:100%;border:0;background:transparent;font-size:inherit;line-height:initial;text-align:start;appearance:none;contain:strict}.alert-button.sc-ion-alert-md,.alert-checkbox.sc-ion-alert-md,.alert-input.sc-ion-alert-md,.alert-radio.sc-ion-alert-md{outline:none}.alert-radio-icon.sc-ion-alert-md,.alert-checkbox-icon.sc-ion-alert-md,.alert-checkbox-inner.sc-ion-alert-md{box-sizing:border-box}textarea.alert-input.sc-ion-alert-md{min-height:37px;resize:none}.sc-ion-alert-md-h{--background:var(--ion-overlay-background-color, var(--ion-background-color, #fff));--max-width:280px;--backdrop-opacity:var(--ion-backdrop-opacity, 0.32);font-size:14px}.alert-wrapper.sc-ion-alert-md{border-radius:4px;box-shadow:0 11px 15px -7px rgba(0, 0, 0, 0.2), 0 24px 38px 3px rgba(0, 0, 0, 0.14), 0 9px 46px 8px rgba(0, 0, 0, 0.12)}.alert-head.sc-ion-alert-md{padding-left:23px;padding-right:23px;padding-top:20px;padding-bottom:15px;text-align:start}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.alert-head.sc-ion-alert-md{padding-left:unset;padding-right:unset;-webkit-padding-start:23px;padding-inline-start:23px;-webkit-padding-end:23px;padding-inline-end:23px}}.alert-title.sc-ion-alert-md{color:var(--ion-text-color, #000);font-size:20px;font-weight:500}.alert-sub-title.sc-ion-alert-md{color:var(--ion-text-color, #000);font-size:16px}.alert-message.sc-ion-alert-md,.alert-input-group.sc-ion-alert-md{padding-left:24px;padding-right:24px;padding-top:20px;padding-bottom:20px;color:var(--ion-color-step-550, #737373)}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.alert-message.sc-ion-alert-md,.alert-input-group.sc-ion-alert-md{padding-left:unset;padding-right:unset;-webkit-padding-start:24px;padding-inline-start:24px;-webkit-padding-end:24px;padding-inline-end:24px}}.alert-message.sc-ion-alert-md{max-height:266px;font-size:16px}.alert-message.sc-ion-alert-md:empty{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}.alert-head.sc-ion-alert-md+.alert-message.sc-ion-alert-md{padding-top:0}.alert-input.sc-ion-alert-md{margin-left:0;margin-right:0;margin-top:5px;margin-bottom:5px;border-bottom:1px solid var(--ion-color-step-150, #d9d9d9);color:var(--ion-text-color, #000)}.alert-input.sc-ion-alert-md::placeholder{color:var(--ion-placeholder-color, var(--ion-color-step-400, #999999));font-family:inherit;font-weight:inherit}.alert-input.sc-ion-alert-md::-ms-clear{display:none}.alert-input.sc-ion-alert-md:focus{margin-bottom:4px;border-bottom:2px solid var(--ion-color-primary, #3880ff)}.alert-radio-group.sc-ion-alert-md,.alert-checkbox-group.sc-ion-alert-md{position:relative;max-height:266px;border-top:1px solid var(--ion-color-step-150, #d9d9d9);border-bottom:1px solid var(--ion-color-step-150, #d9d9d9);overflow:auto}.alert-tappable.sc-ion-alert-md{position:relative;height:48px;overflow:hidden}.alert-radio-label.sc-ion-alert-md{padding-left:52px;padding-right:26px;padding-top:13px;padding-bottom:13px;flex:1;color:var(--ion-color-step-850, #262626);font-size:16px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.alert-radio-label.sc-ion-alert-md{padding-left:unset;padding-right:unset;-webkit-padding-start:52px;padding-inline-start:52px;-webkit-padding-end:26px;padding-inline-end:26px}}.alert-radio-icon.sc-ion-alert-md{left:26px;top:0;border-radius:50%;display:block;position:relative;width:20px;height:20px;border-width:2px;border-style:solid;border-color:var(--ion-color-step-550, #737373)}[dir=rtl].sc-ion-alert-md .alert-radio-icon.sc-ion-alert-md,[dir=rtl].sc-ion-alert-md-h .alert-radio-icon.sc-ion-alert-md,[dir=rtl] .sc-ion-alert-md-h .alert-radio-icon.sc-ion-alert-md{left:unset;right:unset;right:26px}.alert-radio-inner.sc-ion-alert-md{left:3px;top:3px;border-radius:50%;position:absolute;width:10px;height:10px;transform:scale3d(0, 0, 0);transition:transform 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:var(--ion-color-primary, #3880ff)}[dir=rtl].sc-ion-alert-md .alert-radio-inner.sc-ion-alert-md,[dir=rtl].sc-ion-alert-md-h .alert-radio-inner.sc-ion-alert-md,[dir=rtl] .sc-ion-alert-md-h .alert-radio-inner.sc-ion-alert-md{left:unset;right:unset;right:3px}[aria-checked=true].sc-ion-alert-md .alert-radio-label.sc-ion-alert-md{color:var(--ion-color-step-850, #262626)}[aria-checked=true].sc-ion-alert-md .alert-radio-icon.sc-ion-alert-md{border-color:var(--ion-color-primary, #3880ff)}[aria-checked=true].sc-ion-alert-md .alert-radio-inner.sc-ion-alert-md{transform:scale3d(1, 1, 1)}.alert-checkbox-label.sc-ion-alert-md{padding-left:53px;padding-right:26px;padding-top:13px;padding-bottom:13px;flex:1;color:var(--ion-color-step-850, #262626);font-size:16px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.alert-checkbox-label.sc-ion-alert-md{padding-left:unset;padding-right:unset;-webkit-padding-start:53px;padding-inline-start:53px;-webkit-padding-end:26px;padding-inline-end:26px}}.alert-checkbox-icon.sc-ion-alert-md{left:26px;top:0;border-radius:2px;position:relative;width:16px;height:16px;border-width:2px;border-style:solid;border-color:var(--ion-color-step-550, #737373);contain:strict}[dir=rtl].sc-ion-alert-md .alert-checkbox-icon.sc-ion-alert-md,[dir=rtl].sc-ion-alert-md-h .alert-checkbox-icon.sc-ion-alert-md,[dir=rtl] .sc-ion-alert-md-h .alert-checkbox-icon.sc-ion-alert-md{left:unset;right:unset;right:26px}[aria-checked=true].sc-ion-alert-md .alert-checkbox-icon.sc-ion-alert-md{border-color:var(--ion-color-primary, #3880ff);background-color:var(--ion-color-primary, #3880ff)}[aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md{left:3px;top:0;position:absolute;width:6px;height:10px;transform:rotate(45deg);border-width:2px;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--ion-color-primary-contrast, #fff)}[dir=rtl].sc-ion-alert-md [aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md,[dir=rtl].sc-ion-alert-md-h [aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md,[dir=rtl] .sc-ion-alert-md-h [aria-checked=true].sc-ion-alert-md .alert-checkbox-inner.sc-ion-alert-md{left:unset;right:unset;right:3px}.alert-button-group.sc-ion-alert-md{padding-left:8px;padding-right:8px;padding-top:8px;padding-bottom:8px;box-sizing:border-box;flex-wrap:wrap-reverse;justify-content:flex-end}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.alert-button-group.sc-ion-alert-md{padding-left:unset;padding-right:unset;-webkit-padding-start:8px;padding-inline-start:8px;-webkit-padding-end:8px;padding-inline-end:8px}}.alert-button.sc-ion-alert-md{border-radius:2px;margin-left:0;margin-right:8px;margin-top:0;margin-bottom:0;padding-left:10px;padding-right:10px;padding-top:10px;padding-bottom:10px;position:relative;background-color:transparent;color:var(--ion-color-primary, #3880ff);font-weight:500;text-align:end;text-transform:uppercase;overflow:hidden}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.alert-button.sc-ion-alert-md{margin-left:unset;margin-right:unset;-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px}}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.alert-button.sc-ion-alert-md{padding-left:unset;padding-right:unset;-webkit-padding-start:10px;padding-inline-start:10px;-webkit-padding-end:10px;padding-inline-end:10px}}.alert-button-inner.sc-ion-alert-md{justify-content:flex-end}"};const Bt=class{constructor(i){t(this,i),this.ionBackdropTap=n(this,"ionBackdropTap",7),this.blocker=z.createBlocker({disableScroll:!0}),this.visible=!0,this.tappable=!0,this.stopPropagation=!0}connectedCallback(){this.stopPropagation&&this.blocker.block()}disconnectedCallback(){this.blocker.unblock()}onMouseDown(t){this.emitTap(t)}emitTap(t){this.stopPropagation&&(t.preventDefault(),t.stopPropagation()),this.tappable&&this.ionBackdropTap.emit()}render(){const t=g(this);return e(s,{tabindex:"-1","aria-hidden":"true",class:{[t]:!0,"backdrop-hide":!this.visible,"backdrop-no-tappable":!this.tappable}})}};Bt.style={ios:":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}",md:":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}"};const qt=class{constructor(i){t(this,i),this.ionFocus=n(this,"ionFocus",7),this.ionBlur=n(this,"ionBlur",7),this.inItem=!1,this.inListHeader=!1,this.inToolbar=!1,this.inheritedAttributes={},this.buttonType="button",this.disabled=!1,this.routerDirection="forward",this.strong=!1,this.type="button",this.handleClick=t=>{if("button"===this.type)R(this.href,t,this.routerDirection,this.routerAnimation);else if(F(this.el)){const n=this.el.closest("form");if(n){t.preventDefault();const i=document.createElement("button");i.type=this.type,i.style.display="none",n.appendChild(i),i.click(),i.remove()}}},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()}}componentWillLoad(){this.inToolbar=!!this.el.closest("ion-buttons"),this.inListHeader=!!this.el.closest("ion-list-header"),this.inItem=!!this.el.closest("ion-item")||!!this.el.closest("ion-item-divider"),this.inheritedAttributes=V(this.el,["aria-label"])}get hasIconOnly(){return!!this.el.querySelector('[slot="icon-only"]')}get rippleType(){return(void 0===this.fill||"clear"===this.fill)&&this.hasIconOnly&&this.inToolbar?"unbounded":"bounded"}render(){const t=g(this),{buttonType:n,type:i,disabled:o,rel:r,target:l,size:a,href:u,color:c,expand:h,hasIconOnly:d,shape:f,strong:p,inheritedAttributes:m}=this,b=void 0===a&&this.inItem?"small":a,v=void 0===u?"button":"a",w="button"===v?{type:i}:{download:this.download,href:u,rel:r,target:l};let y=this.fill;return void 0===y&&(y=this.inToolbar||this.inListHeader?"clear":"solid"),e(s,{onClick:this.handleClick,"aria-disabled":o?"true":null,class:M(c,{[t]:!0,[n]:!0,[`${n}-${h}`]:void 0!==h,[`${n}-${b}`]:void 0!==b,[`${n}-${f}`]:void 0!==f,[`${n}-${y}`]:!0,[`${n}-strong`]:p,"in-toolbar":L("ion-toolbar",this.el),"in-toolbar-color":L("ion-toolbar[color]",this.el),"button-has-icon-only":d,"button-disabled":o,"ion-activatable":!0,"ion-focusable":!0})},e(v,Object.assign({},w,{class:"button-native",part:"native",disabled:o,onFocus:this.onFocus,onBlur:this.onBlur},m),e("span",{class:"button-inner"},e("slot",{name:"icon-only"}),e("slot",{name:"start"}),e("slot",null),e("slot",{name:"end"})),"md"===t&&e("ion-ripple-effect",{type:this.rippleType})))}get el(){return o(this)}};qt.style={ios:':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;text-overflow:ellipsis;white-space:nowrap;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #3880ff);--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;display:block;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;display:block;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;box-sizing:border-box;appearance:none}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.button-native{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.button-native::-moz-focus-inner{border:0}.button-inner{display:flex;position:relative;flex-flow:row nowrap;flex-shrink:0;align-items:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted(ion-icon){font-size:1.4em;pointer-events:none}::slotted(ion-icon[slot=start]){margin-left:-0.3em;margin-right:0.3em;margin-top:0;margin-bottom:0}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){::slotted(ion-icon[slot=start]){margin-left:unset;margin-right:unset;-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em}}::slotted(ion-icon[slot=end]){margin-left:0.3em;margin-right:-0.2em;margin-top:0;margin-bottom:0}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){::slotted(ion-icon[slot=end]){margin-left:unset;margin-right:unset;-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em}}::slotted(ion-icon[slot=icon-only]){font-size:1.8em}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host{--border-radius:10px;--padding-top:0;--padding-bottom:0;--padding-start:1em;--padding-end:1em;--transition:background-color, opacity 100ms linear;margin-left:2px;margin-right:2px;margin-top:4px;margin-bottom:4px;height:2.8em;font-size:16px;font-weight:500;letter-spacing:-0.03em}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host{margin-left:unset;margin-right:unset;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px}}:host(.button-solid){--background-activated:var(--ion-color-primary-shade, #3171e0);--background-focused:var(--ion-color-primary-shade, #3171e0);--background-hover:var(--ion-color-primary-tint, #4c8dff);--background-activated-opacity:1;--background-focused-opacity:1;--background-hover-opacity:1}:host(.button-outline){--border-radius:10px;--border-width:1px;--border-style:solid;--background-activated:var(--ion-color-primary, #3880ff);--background-focused:var(--ion-color-primary, #3880ff);--background-hover:transparent;--background-focused-opacity:.1;--color-activated:var(--ion-color-primary-contrast, #fff)}:host(.button-clear){--background-activated:transparent;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:transparent;--background-focused-opacity:.1;font-size:17px;font-weight:normal;letter-spacing:0}:host(.button-large){--border-radius:12px;--padding-top:0;--padding-start:1em;--padding-end:1em;--padding-bottom:0;height:2.8em;font-size:20px}:host(.button-small){--border-radius:6px;--padding-top:0;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:0;height:2.1em;font-size:13px}:host(.button-round){--border-radius:64px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-strong){font-weight:600}:host(.button-clear.ion-activated){opacity:0.4}:host(.button-outline.ion-activated.ion-color) .button-native{color:var(--ion-color-contrast)}:host(.button-outline.ion-activated.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-activated) .button-native::after{background:var(--ion-color-shade)}:host(.button-outline.ion-focused.ion-color) .button-native,:host(.button-clear.ion-focused.ion-color) .button-native{color:var(--ion-color-base)}:host(.button-outline.ion-focused.ion-color) .button-native::after,:host(.button-clear.ion-focused.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-shade)}@media (any-hover: hover){:host(.button-clear:hover),:host(.button-outline:hover){opacity:0.6}:host(.button-clear.ion-color:hover) .button-native,:host(.button-outline.ion-color:hover) .button-native{color:var(--ion-color-base)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:transparent}:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-tint)}:host(:hover.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native::after{background:#fff;opacity:0.1}}',md:':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;text-overflow:ellipsis;white-space:nowrap;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #3880ff);--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;display:block;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;display:block;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:block;position:relative;width:100%;height:100%;transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;box-sizing:border-box;appearance:none}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.button-native{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.button-native::-moz-focus-inner{border:0}.button-inner{display:flex;position:relative;flex-flow:row nowrap;flex-shrink:0;align-items:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted(ion-icon){font-size:1.4em;pointer-events:none}::slotted(ion-icon[slot=start]){margin-left:-0.3em;margin-right:0.3em;margin-top:0;margin-bottom:0}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){::slotted(ion-icon[slot=start]){margin-left:unset;margin-right:unset;-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em}}::slotted(ion-icon[slot=end]){margin-left:0.3em;margin-right:-0.2em;margin-top:0;margin-bottom:0}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){::slotted(ion-icon[slot=end]){margin-left:unset;margin-right:unset;-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em}}::slotted(ion-icon[slot=icon-only]){font-size:1.8em}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host{--border-radius:4px;--padding-top:0;--padding-bottom:0;--padding-start:1.1em;--padding-end:1.1em;--transition:box-shadow 280ms cubic-bezier(.4, 0, .2, 1),\n                background-color 15ms linear,\n                color 15ms linear;margin-left:2px;margin-right:2px;margin-top:4px;margin-bottom:4px;height:36px;font-size:14px;font-weight:500;letter-spacing:0.06em;text-transform:uppercase}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host{margin-left:unset;margin-right:unset;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px}}:host(.button-solid){--background-activated:transparent;--background-hover:var(--ion-color-primary-contrast, #fff);--background-focused:var(--ion-color-primary-contrast, #fff);--background-activated-opacity:0;--background-focused-opacity:.24;--background-hover-opacity:.08;--box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)}:host(.button-solid.ion-activated){--box-shadow:0 5px 5px -3px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12)}:host(.button-outline){--border-width:2px;--border-style:solid;--box-shadow:none;--background-activated:transparent;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:var(--ion-color-primary, #3880ff);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-outline.ion-activated.ion-color) .button-native{background:transparent}:host(.button-clear){--background-activated:transparent;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:var(--ion-color-primary, #3880ff);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-round){--border-radius:64px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-large){--padding-top:0;--padding-start:1em;--padding-end:1em;--padding-bottom:0;height:2.8em;font-size:20px}:host(.button-small){--padding-top:0;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:0;height:2.1em;font-size:13px}:host(.button-strong){font-weight:bold}::slotted(ion-icon[slot=icon-only]){padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color.ion-focused) .button-native::after,:host(.button-outline.ion-color.ion-focused) .button-native::after{background:var(--ion-color-base)}@media (any-hover: hover){:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:var(--ion-color-base)}}'};const Kt=class{constructor(n){t(this,n),this.button=!1,this.type="button",this.disabled=!1,this.routerDirection="forward"}isClickable(){return void 0!==this.href||this.button}renderCard(t){const n=this.isClickable();if(!n)return[e("slot",null)];const{href:i,routerAnimation:o,routerDirection:r}=this,s=n?void 0===i?"button":"a":"div";return e(s,Object.assign({},"button"===s?{type:this.type}:{download:this.download,href:this.href,rel:this.rel,target:this.target},{class:"card-native",part:"native",disabled:this.disabled,onClick:t=>R(i,t,r,o)}),e("slot",null),n&&"md"===t&&e("ion-ripple-effect",null))}render(){const t=g(this);return e(s,{class:M(this.color,{[t]:!0,"card-disabled":this.disabled,"ion-activatable":this.isClickable()})},this.renderCard(t))}};Kt.style={ios:":host{--ion-safe-area-left:0px;--ion-safe-area-right:0px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);overflow:hidden}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.card-disabled){cursor:default;opacity:0.3;pointer-events:none}.card-native{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:100%;min-height:var(--min-height);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:inherit}.card-native::-moz-focus-inner{border:0}button,a{cursor:pointer;user-select:none;-webkit-user-drag:none}ion-ripple-effect{color:var(--ripple-color)}:host{--background:var(--ion-card-background, var(--ion-item-background, var(--ion-background-color, #fff)));--color:var(--ion-card-color, var(--ion-item-color, var(--ion-color-step-600, #666666)));margin-left:16px;margin-right:16px;margin-top:24px;margin-bottom:24px;border-radius:8px;transform:translateZ(0);transition:transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);font-size:14px;box-shadow:0 4px 16px rgba(0, 0, 0, 0.12)}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host{margin-left:unset;margin-right:unset;-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px}}:host(.ion-activated){transform:scale3d(0.97, 0.97, 1)}",md:":host{--ion-safe-area-left:0px;--ion-safe-area-right:0px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);overflow:hidden}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.card-disabled){cursor:default;opacity:0.3;pointer-events:none}.card-native{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:100%;min-height:var(--min-height);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:inherit}.card-native::-moz-focus-inner{border:0}button,a{cursor:pointer;user-select:none;-webkit-user-drag:none}ion-ripple-effect{color:var(--ripple-color)}:host{--background:var(--ion-card-background, var(--ion-item-background, var(--ion-background-color, #fff)));--color:var(--ion-card-color, var(--ion-item-color, var(--ion-color-step-550, #737373)));margin-left:10px;margin-right:10px;margin-top:10px;margin-bottom:10px;border-radius:4px;font-size:14px;box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host{margin-left:unset;margin-right:unset;-webkit-margin-start:10px;margin-inline-start:10px;-webkit-margin-end:10px;margin-inline-end:10px}}"};const Wt=class{constructor(n){t(this,n)}render(){const t=g(this);return e(s,{class:{[t]:!0,[`card-content-${t}`]:!0}})}};Wt.style={ios:"ion-card-content{display:block;position:relative}.card-content-ios{padding-left:20px;padding-right:20px;padding-top:20px;padding-bottom:20px;font-size:16px;line-height:1.4}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.card-content-ios{padding-left:unset;padding-right:unset;-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:20px;padding-inline-end:20px}}.card-content-ios h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:24px;font-weight:normal}.card-content-ios h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:16px;font-weight:normal}.card-content-ios h3,.card-content-ios h4,.card-content-ios h5,.card-content-ios h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:14px;font-weight:normal}.card-content-ios p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px}ion-card-header+.card-content-ios{padding-top:0}",md:"ion-card-content{display:block;position:relative}.card-content-md{padding-left:16px;padding-right:16px;padding-top:13px;padding-bottom:13px;font-size:14px;line-height:1.5}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.card-content-md{padding-left:unset;padding-right:unset;-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px}}.card-content-md h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:24px;font-weight:normal}.card-content-md h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:16px;font-weight:normal}.card-content-md h3,.card-content-md h4,.card-content-md h5,.card-content-md h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:14px;font-weight:normal}.card-content-md p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;font-weight:normal;line-height:1.5}ion-card-header+.card-content-md{padding-top:0}"};const Gt=class{constructor(n){t(this,n),this.translucent=!1}render(){const t=g(this);return e(s,{class:M(this.color,{"card-header-translucent":this.translucent,"ion-inherit-color":!0,[t]:!0})},e("slot",null))}};Gt.style={ios:":host{--background:transparent;--color:inherit;display:block;position:relative;background:var(--background);color:var(--color)}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host{padding-left:20px;padding-right:20px;padding-top:20px;padding-bottom:16px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:20px;padding-inline-end:20px}}@supports (backdrop-filter: blur(0)){:host(.card-header-translucent){background-color:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.9);backdrop-filter:saturate(180%) blur(30px)}}",md:":host{--background:transparent;--color:inherit;display:block;position:relative;background:var(--background);color:var(--color)}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host{padding-left:16px;padding-right:16px;padding-top:16px;padding-bottom:16px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px}}::slotted(ion-card-title:not(:first-child)),::slotted(ion-card-subtitle:not(:first-child)){margin-top:8px}"};const Ht=class{constructor(n){t(this,n)}render(){const t=g(this);return e(s,{role:"heading","aria-level":"2",class:M(this.color,{"ion-inherit-color":!0,[t]:!0})},e("slot",null))}};Ht.style={ios:":host{display:block;position:relative;color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}:host{--color:var(--ion-text-color, #000);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-size:28px;font-weight:700;line-height:1.2}",md:":host{display:block;position:relative;color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}:host{--color:var(--ion-color-step-850, #262626);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;font-size:20px;font-weight:500;line-height:1.2}"};const Xt=class{constructor(i){t(this,i),this.ionChange=n(this,"ionChange",7),this.ionFocus=n(this,"ionFocus",7),this.ionBlur=n(this,"ionBlur",7),this.ionStyle=n(this,"ionStyle",7),this.inputId="ion-cb-"+Yt++,this.name=this.inputId,this.checked=!1,this.indeterminate=!1,this.disabled=!1,this.value="on",this.onClick=t=>{t.preventDefault(),this.setFocus(),this.checked=!this.checked,this.indeterminate=!1},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()}}componentWillLoad(){this.emitStyle()}checkedChanged(t){this.ionChange.emit({checked:t,value:this.value}),this.emitStyle()}disabledChanged(){this.emitStyle()}emitStyle(){this.ionStyle.emit({"checkbox-checked":this.checked,"interactive-disabled":this.disabled})}setFocus(){this.focusEl&&this.focusEl.focus()}render(){const{color:t,checked:n,disabled:i,el:o,indeterminate:r,inputId:l,name:a,value:u}=this,c=g(this),{label:h,labelId:d,labelText:f}=U(o,l);B(!0,o,a,n?u:"",i);let p=e("path",r?{d:"M6 12L18 12",part:"mark"}:{d:"M5.9,12.5l3.8,3.8l8.8-8.8",part:"mark"});return"md"===c&&(p=e("path",r?{d:"M2 12H22",part:"mark"}:{d:"M1.73,12.91 8.1,19.28 22.79,4.59",part:"mark"})),e(s,{onClick:this.onClick,"aria-labelledby":h?d:null,"aria-checked":`${n}`,"aria-hidden":i?"true":null,role:"checkbox",class:M(t,{[c]:!0,"in-item":L("ion-item",o),"checkbox-checked":n,"checkbox-disabled":i,"checkbox-indeterminate":r,interactive:!0})},e("svg",{class:"checkbox-icon",viewBox:"0 0 24 24",part:"container"},p),e("label",{htmlFor:l},f),e("input",{type:"checkbox","aria-checked":`${n}`,disabled:i,id:l,onFocus:()=>this.onFocus(),onBlur:()=>this.onBlur(),ref:t=>this.focusEl=t}))}get el(){return o(this)}static get watchers(){return{checked:["checkedChanged"],disabled:["disabledChanged"]}}};let Yt=0;Xt.style={ios:":host{--background-checked:var(--ion-color-primary, #3880ff);--border-color-checked:var(--ion-color-primary, #3880ff);--checkmark-color:var(--ion-color-primary-contrast, #fff);--checkmark-width:1;--transition:none;display:inline-block;position:relative;user-select:none;z-index:2}:host(.ion-color){--background-checked:var(--ion-color-base);--border-color-checked:var(--ion-color-base);--checkmark-color:var(--ion-color-contrast)}label{left:0;top:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;position:absolute;width:100%;height:100%;border:0;background:transparent;cursor:pointer;appearance:none;outline:none;display:flex;align-items:center;opacity:0}[dir=rtl] label,:host-context([dir=rtl]) label{left:unset;right:unset;right:0}label::-moz-focus-inner{border:0}input{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}.checkbox-icon{border-radius:var(--border-radius);display:block;position:relative;width:100%;height:100%;transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);box-sizing:border-box}.checkbox-icon path{fill:none;stroke:var(--checkmark-color);stroke-width:var(--checkmark-width);opacity:0}:host(.checkbox-checked) .checkbox-icon,:host(.checkbox-indeterminate) .checkbox-icon{border-color:var(--border-color-checked);background:var(--background-checked)}:host(.checkbox-checked) .checkbox-icon path,:host(.checkbox-indeterminate) .checkbox-icon path{opacity:1}:host(.checkbox-disabled){pointer-events:none}:host{--border-radius:50%;--border-width:1px;--border-style:solid;--border-color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.23);--background:var(--ion-item-background, var(--ion-background-color, #fff));--size:26px;width:var(--size);height:var(--size)}:host(.checkbox-disabled){opacity:0.3}:host(.in-item){margin-left:0;margin-right:8px;margin-top:10px;margin-bottom:9px;display:block;position:static}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host(.in-item){margin-left:unset;margin-right:unset;-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px}}:host(.in-item[slot=start]){margin-left:2px;margin-right:20px;margin-top:8px;margin-bottom:8px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host(.in-item[slot=start]){margin-left:unset;margin-right:unset;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:20px;margin-inline-end:20px}}",md:":host{--background-checked:var(--ion-color-primary, #3880ff);--border-color-checked:var(--ion-color-primary, #3880ff);--checkmark-color:var(--ion-color-primary-contrast, #fff);--checkmark-width:1;--transition:none;display:inline-block;position:relative;user-select:none;z-index:2}:host(.ion-color){--background-checked:var(--ion-color-base);--border-color-checked:var(--ion-color-base);--checkmark-color:var(--ion-color-contrast)}label{left:0;top:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;position:absolute;width:100%;height:100%;border:0;background:transparent;cursor:pointer;appearance:none;outline:none;display:flex;align-items:center;opacity:0}[dir=rtl] label,:host-context([dir=rtl]) label{left:unset;right:unset;right:0}label::-moz-focus-inner{border:0}input{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}.checkbox-icon{border-radius:var(--border-radius);display:block;position:relative;width:100%;height:100%;transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);box-sizing:border-box}.checkbox-icon path{fill:none;stroke:var(--checkmark-color);stroke-width:var(--checkmark-width);opacity:0}:host(.checkbox-checked) .checkbox-icon,:host(.checkbox-indeterminate) .checkbox-icon{border-color:var(--border-color-checked);background:var(--background-checked)}:host(.checkbox-checked) .checkbox-icon path,:host(.checkbox-indeterminate) .checkbox-icon path{opacity:1}:host(.checkbox-disabled){pointer-events:none}:host{--border-radius:calc(var(--size) * .125);--border-width:2px;--border-style:solid;--border-color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.51);--checkmark-width:3;--background:var(--ion-item-background, var(--ion-background-color, #fff));--transition:background 180ms cubic-bezier(0.4, 0, 0.2, 1);--size:18px;width:var(--size);height:var(--size)}.checkbox-icon path{stroke-dasharray:30;stroke-dashoffset:30}:host(.checkbox-checked) .checkbox-icon path,:host(.checkbox-indeterminate) .checkbox-icon path{stroke-dashoffset:0;transition:stroke-dashoffset 90ms linear 90ms}:host(.checkbox-disabled){opacity:0.3}:host(.in-item){margin-left:0;margin-right:0;margin-top:18px;margin-bottom:18px;display:block;position:static}:host(.in-item[slot=start]){margin-left:4px;margin-right:36px;margin-top:18px;margin-bottom:18px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host(.in-item[slot=start]){margin-left:unset;margin-right:unset;-webkit-margin-start:4px;margin-inline-start:4px;-webkit-margin-end:36px;margin-inline-end:36px}}"};
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */
const Jt={xs:"(min-width: 0px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)"},Qt=t=>void 0===t||""===t||!!window.matchMedia&&window.matchMedia(Jt[t]).matches,Zt="undefined"!=typeof window?window:void 0,tn=Zt&&!!(Zt.CSS&&Zt.CSS.supports&&Zt.CSS.supports("--a: 0")),nn=["","xs","sm","md","lg","xl"],en=class{constructor(n){t(this,n)}onResize(){r(this)}getColumns(t){let n;for(const i of nn){const e=Qt(i),o=this[t+i.charAt(0).toUpperCase()+i.slice(1)];e&&void 0!==o&&(n=o)}return n}calculateSize(){const t=this.getColumns("size");if(!t||""===t)return;const n="auto"===t?"auto":tn?`calc(calc(${t} / var(--ion-grid-columns, 12)) * 100%)`:t/12*100+"%";return{flex:`0 0 ${n}`,width:`${n}`,"max-width":`${n}`}}calculatePosition(t,n){const i=this.getColumns(t);if(i)return{[n]:tn?`calc(calc(${i} / var(--ion-grid-columns, 12)) * 100%)`:i>0&&i<12?i/12*100+"%":"auto"}}calculateOffset(t){return this.calculatePosition("offset",t?"margin-right":"margin-left")}calculatePull(t){return this.calculatePosition("pull",t?"left":"right")}calculatePush(t){return this.calculatePosition("push",t?"right":"left")}render(){const t="rtl"===document.dir,n=g(this);return e(s,{class:{[n]:!0},style:Object.assign(Object.assign(Object.assign(Object.assign({},this.calculateOffset(t)),this.calculatePull(t)),this.calculatePush(t)),this.calculateSize())},e("slot",null))}};en.style=":host{padding-left:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-right:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;box-sizing:border-box;position:relative;flex-basis:0;flex-grow:1;width:100%;max-width:100%;min-height:1px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-xs, var(--ion-grid-column-padding, 5px))}}@media (min-width: 576px){:host{padding-left:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-right:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px))}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-sm, var(--ion-grid-column-padding, 5px))}}}@media (min-width: 768px){:host{padding-left:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-right:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px))}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-md, var(--ion-grid-column-padding, 5px))}}}@media (min-width: 992px){:host{padding-left:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-right:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px))}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-lg, var(--ion-grid-column-padding, 5px))}}}@media (min-width: 1200px){:host{padding-left:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-right:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-top:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-bottom:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px))}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-inline-start:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));-webkit-padding-end:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px));padding-inline-end:var(--ion-grid-column-padding-xl, var(--ion-grid-column-padding, 5px))}}}";const on=class{constructor(n){t(this,n),this.fixed=!1}render(){const t=g(this);return e(s,{class:{[t]:!0,"grid-fixed":this.fixed}},e("slot",null))}};let rn;on.style=":host{padding-left:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-right:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));margin-left:auto;margin-right:auto;display:block;flex:1}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px))}}@media (min-width: 576px){:host{padding-left:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-right:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px))}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px))}}}@media (min-width: 768px){:host{padding-left:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-right:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px))}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px))}}}@media (min-width: 992px){:host{padding-left:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-right:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px))}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px))}}}@media (min-width: 1200px){:host{padding-left:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-right:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px))}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px))}}}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host{margin-left:unset;margin-right:unset;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto}}:host(.grid-fixed){width:var(--ion-grid-width-xs, var(--ion-grid-width, 100%));max-width:100%}@media (min-width: 576px){:host(.grid-fixed){width:var(--ion-grid-width-sm, var(--ion-grid-width, 540px))}}@media (min-width: 768px){:host(.grid-fixed){width:var(--ion-grid-width-md, var(--ion-grid-width, 720px))}}@media (min-width: 992px){:host(.grid-fixed){width:var(--ion-grid-width-lg, var(--ion-grid-width, 960px))}}@media (min-width: 1200px){:host(.grid-fixed){width:var(--ion-grid-width-xl, var(--ion-grid-width, 1140px))}}:host(.ion-no-padding){--ion-grid-column-padding:0;--ion-grid-column-padding-xs:0;--ion-grid-column-padding-sm:0;--ion-grid-column-padding-md:0;--ion-grid-column-padding-lg:0;--ion-grid-column-padding-xl:0}";const sn=(t,n,i,e,o)=>(i="ios"===(i&&cn(i))?"ios":"md",e&&"ios"===i?t=cn(e):o&&"md"===i?t=cn(o):(t||!n||an(n)||(t=n),un(t)&&(t=cn(t))),un(t)&&""!==t.trim()?""!==t.replace(/[a-z]|-|\d/gi,"")?null:t:null),ln=t=>un(t)&&(t=t.trim(),an(t))?t:null,an=t=>t.length>0&&/(\/|\.)/.test(t),un=t=>"string"==typeof t,cn=t=>t.toLowerCase(),hn=t=>{if(1===t.nodeType){if("script"===t.nodeName.toLowerCase())return!1;for(let n=0;n<t.attributes.length;n++){const i=t.attributes[n].value;if(un(i)&&0===i.toLowerCase().indexOf("on"))return!1}for(let n=0;n<t.childNodes.length;n++)if(!hn(t.childNodes[n]))return!1}return!0},dn=new Map,fn=new Map,pn=class{constructor(n){t(this,n),this.iconName=null,this.inheritedAttributes={},this.isVisible=!1,this.mode=gn(),this.lazy=!1,this.sanitize=!0,this.hasAriaHidden=()=>{const{el:t}=this;return t.hasAttribute("aria-hidden")&&"true"===t.getAttribute("aria-hidden")}}componentWillLoad(){this.inheritedAttributes=((t,n=[])=>{const i={};return n.forEach((n=>{t.hasAttribute(n)&&(null!==t.getAttribute(n)&&(i[n]=t.getAttribute(n)),t.removeAttribute(n))})),i})(this.el,["aria-label"])}connectedCallback(){this.waitUntilVisible(this.el,"50px",(()=>{this.isVisible=!0,this.loadIcon()}))}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(t,n,i){if(this.lazy&&"undefined"!=typeof window&&window.IntersectionObserver){const e=this.io=new window.IntersectionObserver((t=>{t[0].isIntersecting&&(e.disconnect(),this.io=void 0,i())}),{rootMargin:n});e.observe(t)}else i()}loadIcon(){if(this.isVisible){const t=(t=>{let n=ln(t.src);if(n)return n;if(n=sn(t.name,t.icon,t.mode,t.ios,t.md),n)return i=n,(()=>{if("undefined"==typeof window)return new Map;if(!rn){const t=window;t.Ionicons=t.Ionicons||{},rn=t.Ionicons.map=t.Ionicons.map||new Map}return rn})().get(i)||u(`svg/${i}.svg`);var i;if(t.icon){if(n=ln(t.icon),n)return n;if(n=ln(t.icon[t.mode]),n)return n}return null})(this);t&&(dn.has(t)?this.svgContent=dn.get(t):((t,n)=>{let i=fn.get(t);if(!i){if("undefined"==typeof fetch||"undefined"==typeof document)return dn.set(t,""),Promise.resolve();i=fetch(t).then((i=>{if(i.ok)return i.text().then((i=>{i&&!1!==n&&(i=(t=>{const n=document.createElement("div");n.innerHTML=t;for(let t=n.childNodes.length-1;t>=0;t--)"svg"!==n.childNodes[t].nodeName.toLowerCase()&&n.removeChild(n.childNodes[t]);const i=n.firstElementChild;if(i&&"svg"===i.nodeName.toLowerCase()){const t=i.getAttribute("class")||"";if(i.setAttribute("class",(t+" s-ion-icon").trim()),hn(i))return n.innerHTML}return""})(i)),dn.set(t,i||"")}));dn.set(t,"")})),fn.set(t,i)}return i})(t,this.sanitize).then((()=>this.svgContent=dn.get(t))))}const t=this.iconName=sn(this.name,this.icon,this.mode,this.ios,this.md);t&&(this.ariaLabel=t.replace(/\-/g," "))}render(){const{iconName:t,ariaLabel:n,inheritedAttributes:i}=this,o=this.mode||"md",r=this.flipRtl||t&&(t.indexOf("arrow")>-1||t.indexOf("chevron")>-1)&&!1!==this.flipRtl;return e(s,Object.assign({"aria-label":void 0===n||this.hasAriaHidden()?null:n,role:"img",class:Object.assign(Object.assign({[o]:!0},mn(this.color)),{[`icon-${this.size}`]:!!this.size,"flip-rtl":!!r&&"rtl"===this.el.ownerDocument.dir})},i),e("div",this.svgContent?{class:"icon-inner",innerHTML:this.svgContent}:{class:"icon-inner"}))}static get assetsDirs(){return["svg"]}get el(){return o(this)}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"]}}},gn=()=>"undefined"!=typeof document&&document.documentElement.getAttribute("mode")||"md",mn=t=>t?{"ion-color":!0,[`ion-color-${t}`]:!0}:null;pn.style=":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}:host(.flip-rtl) .icon-inner{transform:scaleX(-1)}:host(.icon-small){font-size:18px !important}:host(.icon-large){font-size:32px !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}";const bn=class{constructor(i){t(this,i),this.ionInput=n(this,"ionInput",7),this.ionChange=n(this,"ionChange",7),this.ionBlur=n(this,"ionBlur",7),this.ionFocus=n(this,"ionFocus",7),this.ionStyle=n(this,"ionStyle",7),this.inputId="ion-input-"+vn++,this.didBlurAfterEdit=!1,this.inheritedAttributes={},this.isComposing=!1,this.fireFocusEvents=!0,this.hasFocus=!1,this.autocapitalize="off",this.autocomplete="off",this.autocorrect="off",this.autofocus=!1,this.clearInput=!1,this.debounce=0,this.disabled=!1,this.name=this.inputId,this.readonly=!1,this.required=!1,this.spellcheck=!1,this.type="text",this.value="",this.onInput=t=>{const n=t.target;n&&(this.value=n.value||""),this.ionInput.emit(t)},this.onBlur=t=>{this.hasFocus=!1,this.focusChanged(),this.emitStyle(),this.fireFocusEvents&&this.ionBlur.emit(t)},this.onFocus=t=>{this.hasFocus=!0,this.focusChanged(),this.emitStyle(),this.fireFocusEvents&&this.ionFocus.emit(t)},this.onKeydown=t=>{this.shouldClearOnEdit()&&(this.didBlurAfterEdit&&this.hasValue()&&"Enter"!==t.key&&this.clearTextInput(),this.didBlurAfterEdit=!1)},this.onCompositionStart=()=>{this.isComposing=!0},this.onCompositionEnd=()=>{this.isComposing=!1},this.clearTextOnEnter=t=>{"Enter"===t.key&&this.clearTextInput(t)},this.clearTextInput=t=>{this.clearInput&&!this.readonly&&!this.disabled&&t&&(t.preventDefault(),t.stopPropagation(),this.setFocus()),this.value="",this.nativeInput&&(this.nativeInput.value="")}}debounceChanged(){this.ionChange=q(this.ionChange,this.debounce)}disabledChanged(){this.emitStyle()}placeholderChanged(){this.emitStyle()}valueChanged(){const t=this.nativeInput,n=this.getValue();t&&t.value!==n&&!this.isComposing&&(t.value=n),this.emitStyle(),this.ionChange.emit({value:null==this.value?this.value:this.value.toString()})}componentWillLoad(){this.inheritedAttributes=V(this.el,["aria-label","tabindex","title"])}connectedCallback(){this.emitStyle(),this.debounceChanged(),document.dispatchEvent(new CustomEvent("ionInputDidLoad",{detail:this.el}))}componentDidLoad(){const t=this.nativeInput;t&&(t.addEventListener("compositionstart",this.onCompositionStart),t.addEventListener("compositionend",this.onCompositionEnd))}disconnectedCallback(){document.dispatchEvent(new CustomEvent("ionInputDidUnload",{detail:this.el}));const t=this.nativeInput;t&&(t.removeEventListener("compositionstart",this.onCompositionStart),t.removeEventListener("compositionEnd",this.onCompositionEnd))}async setFocus(){this.nativeInput&&this.nativeInput.focus()}async setBlur(){this.nativeInput&&this.nativeInput.blur()}getInputElement(){return Promise.resolve(this.nativeInput)}shouldClearOnEdit(){const{type:t,clearOnEdit:n}=this;return void 0===n?"password"===t:n}getValue(){return"number"==typeof this.value?this.value.toString():(this.value||"").toString()}emitStyle(){this.ionStyle.emit({interactive:!0,input:!0,"has-placeholder":void 0!==this.placeholder,"has-value":this.hasValue(),"has-focus":this.hasFocus,"interactive-disabled":this.disabled})}focusChanged(){!this.hasFocus&&this.shouldClearOnEdit()&&this.hasValue()&&(this.didBlurAfterEdit=!0)}hasValue(){return this.getValue().length>0}render(){const t=g(this),n=this.getValue(),i=this.inputId+"-lbl",o=K(this.el);return o&&(o.id=i),e(s,{"aria-disabled":this.disabled?"true":null,class:M(this.color,{[t]:!0,"has-value":this.hasValue(),"has-focus":this.hasFocus})},e("input",Object.assign({class:"native-input",ref:t=>this.nativeInput=t,"aria-labelledby":o?i:null,disabled:this.disabled,accept:this.accept,autoCapitalize:this.autocapitalize,autoComplete:this.autocomplete,autoCorrect:this.autocorrect,autoFocus:this.autofocus,enterKeyHint:this.enterkeyhint,inputMode:this.inputmode,min:this.min,max:this.max,minLength:this.minlength,maxLength:this.maxlength,multiple:this.multiple,name:this.name,pattern:this.pattern,placeholder:this.placeholder||"",readOnly:this.readonly,required:this.required,spellcheck:this.spellcheck,step:this.step,size:this.size,type:this.type,value:n,onInput:this.onInput,onBlur:this.onBlur,onFocus:this.onFocus,onKeyDown:this.onKeydown},this.inheritedAttributes)),this.clearInput&&!this.readonly&&!this.disabled&&e("button",{"aria-label":"reset",type:"button",class:"input-clear-icon",onTouchStart:this.clearTextInput,onMouseDown:this.clearTextInput,onKeyDown:this.clearTextOnEnter}))}get el(){return o(this)}static get watchers(){return{debounce:["debounceChanged"],disabled:["disabledChanged"],placeholder:["placeholderChanged"],value:["valueChanged"]}}};let vn=0;bn.style={ios:".sc-ion-input-ios-h{--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:.5;--padding-top:0;--padding-end:0;--padding-bottom:0;--padding-start:0;--background:transparent;--color:initial;display:flex;position:relative;flex:1;align-items:center;width:100%;padding:0 !important;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);z-index:2}ion-item.sc-ion-input-ios-h:not(.item-label),ion-item:not(.item-label) .sc-ion-input-ios-h{--padding-start:0}.ion-color.sc-ion-input-ios-h{color:var(--ion-color-base)}.native-input.sc-ion-input-ios{border-radius:var(--border-radius);padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:inline-block;flex:1;width:100%;max-width:100%;max-height:100%;border:0;outline:none;background:transparent;box-sizing:border-box;appearance:none}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.native-input.sc-ion-input-ios{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.native-input.sc-ion-input-ios::placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-ios:-webkit-autofill{background-color:transparent}.native-input.sc-ion-input-ios:invalid{box-shadow:none}.native-input.sc-ion-input-ios::-ms-clear{display:none}.native-input[disabled].sc-ion-input-ios{opacity:0.4}.cloned-input.sc-ion-input-ios{left:0;top:0;position:absolute;pointer-events:none}[dir=rtl].sc-ion-input-ios .cloned-input.sc-ion-input-ios,[dir=rtl].sc-ion-input-ios-h .cloned-input.sc-ion-input-ios,[dir=rtl] .sc-ion-input-ios-h .cloned-input.sc-ion-input-ios{left:unset;right:unset;right:0}.input-clear-icon.sc-ion-input-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;background-position:center;border:0;outline:none;background-color:transparent;background-repeat:no-repeat;visibility:hidden;appearance:none}.input-clear-icon.sc-ion-input-ios:focus{opacity:0.5}.has-value.sc-ion-input-ios-h .input-clear-icon.sc-ion-input-ios{visibility:visible}.has-focus.sc-ion-input-ios-h{pointer-events:none}.has-focus.sc-ion-input-ios-h input.sc-ion-input-ios,.has-focus.sc-ion-input-ios-h a.sc-ion-input-ios,.has-focus.sc-ion-input-ios-h button.sc-ion-input-ios{pointer-events:auto}.item-label-floating.item-has-placeholder.sc-ion-input-ios-h:not(.item-has-value),.item-label-floating.item-has-placeholder:not(.item-has-value) .sc-ion-input-ios-h{opacity:0}.item-label-floating.item-has-placeholder.sc-ion-input-ios-h:not(.item-has-value).item-has-focus,.item-label-floating.item-has-placeholder:not(.item-has-value).item-has-focus .sc-ion-input-ios-h{transition:opacity 0.15s cubic-bezier(0.4, 0, 0.2, 1);opacity:1}.sc-ion-input-ios-h{--padding-top:10px;--padding-end:10px;--padding-bottom:10px;--padding-start:0;font-size:inherit}.item-label-stacked.sc-ion-input-ios-h,.item-label-stacked .sc-ion-input-ios-h,.item-label-floating.sc-ion-input-ios-h,.item-label-floating .sc-ion-input-ios-h{--padding-top:8px;--padding-bottom:8px;--padding-start:0px}.input-clear-icon.sc-ion-input-ios{background-image:url(\"data:image/svg+xml;charset=utf-8,<svg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'><path%20fill='var(--ion-color-step-600,%20%23666666)'%20d='M403.1,108.9c-81.2-81.2-212.9-81.2-294.2,0s-81.2,212.9,0,294.2c81.2,81.2,212.9,81.2,294.2,0S484.3,190.1,403.1,108.9z%20M352,340.2L340.2,352l-84.4-84.2l-84,83.8L160,339.8l84-83.8l-84-83.8l11.8-11.8l84,83.8l84.4-84.2l11.8,11.8L267.6,256L352,340.2z'/></svg>\");width:30px;height:30px;background-size:18px}",md:".sc-ion-input-md-h{--placeholder-color:initial;--placeholder-font-style:initial;--placeholder-font-weight:initial;--placeholder-opacity:.5;--padding-top:0;--padding-end:0;--padding-bottom:0;--padding-start:0;--background:transparent;--color:initial;display:flex;position:relative;flex:1;align-items:center;width:100%;padding:0 !important;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);z-index:2}ion-item.sc-ion-input-md-h:not(.item-label),ion-item:not(.item-label) .sc-ion-input-md-h{--padding-start:0}.ion-color.sc-ion-input-md-h{color:var(--ion-color-base)}.native-input.sc-ion-input-md{border-radius:var(--border-radius);padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:inline-block;flex:1;width:100%;max-width:100%;max-height:100%;border:0;outline:none;background:transparent;box-sizing:border-box;appearance:none}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.native-input.sc-ion-input-md{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.native-input.sc-ion-input-md::placeholder{color:var(--placeholder-color);font-family:inherit;font-style:var(--placeholder-font-style);font-weight:var(--placeholder-font-weight);opacity:var(--placeholder-opacity)}.native-input.sc-ion-input-md:-webkit-autofill{background-color:transparent}.native-input.sc-ion-input-md:invalid{box-shadow:none}.native-input.sc-ion-input-md::-ms-clear{display:none}.native-input[disabled].sc-ion-input-md{opacity:0.4}.cloned-input.sc-ion-input-md{left:0;top:0;position:absolute;pointer-events:none}[dir=rtl].sc-ion-input-md .cloned-input.sc-ion-input-md,[dir=rtl].sc-ion-input-md-h .cloned-input.sc-ion-input-md,[dir=rtl] .sc-ion-input-md-h .cloned-input.sc-ion-input-md{left:unset;right:unset;right:0}.input-clear-icon.sc-ion-input-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;background-position:center;border:0;outline:none;background-color:transparent;background-repeat:no-repeat;visibility:hidden;appearance:none}.input-clear-icon.sc-ion-input-md:focus{opacity:0.5}.has-value.sc-ion-input-md-h .input-clear-icon.sc-ion-input-md{visibility:visible}.has-focus.sc-ion-input-md-h{pointer-events:none}.has-focus.sc-ion-input-md-h input.sc-ion-input-md,.has-focus.sc-ion-input-md-h a.sc-ion-input-md,.has-focus.sc-ion-input-md-h button.sc-ion-input-md{pointer-events:auto}.item-label-floating.item-has-placeholder.sc-ion-input-md-h:not(.item-has-value),.item-label-floating.item-has-placeholder:not(.item-has-value) .sc-ion-input-md-h{opacity:0}.item-label-floating.item-has-placeholder.sc-ion-input-md-h:not(.item-has-value).item-has-focus,.item-label-floating.item-has-placeholder:not(.item-has-value).item-has-focus .sc-ion-input-md-h{transition:opacity 0.15s cubic-bezier(0.4, 0, 0.2, 1);opacity:1}.sc-ion-input-md-h{--padding-top:10px;--padding-end:0;--padding-bottom:10px;--padding-start:8px;font-size:inherit}.item-label-stacked.sc-ion-input-md-h,.item-label-stacked .sc-ion-input-md-h,.item-label-floating.sc-ion-input-md-h,.item-label-floating .sc-ion-input-md-h{--padding-top:8px;--padding-bottom:8px;--padding-start:0}.input-clear-icon.sc-ion-input-md{background-image:url(\"data:image/svg+xml;charset=utf-8,<svg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20512%20512'><polygon%20fill='var(--ion-color-step-600,%20%23666666)'%20points='405,136.798%20375.202,107%20256,226.202%20136.798,107%20107,136.798%20226.202,256%20107,375.202%20136.798,405%20256,285.798%20375.202,405%20405,375.202%20285.798,256'/></svg>\");width:30px;height:30px;background-size:22px}"};const wn=class{constructor(n){t(this,n),this.labelColorStyles={},this.itemStyles=new Map,this.multipleInputs=!1,this.focusable=!0,this.button=!1,this.detailIcon=Q,this.disabled=!1,this.counter=!1,this.routerDirection="forward",this.type="button"}counterFormatterChanged(){this.updateCounterOutput(this.getFirstInput())}handleIonChange(t){this.counter&&t.target===this.getFirstInput()&&this.updateCounterOutput(t.target)}labelColorChanged(t){const{color:n}=this;void 0===n&&(this.labelColorStyles=t.detail)}itemStyle(t){t.stopPropagation();const n=t.target.tagName,i=t.detail,e={},o=this.itemStyles.get(n)||{};let s=!1;Object.keys(i).forEach((t=>{if(i[t]){const n=`item-${t}`;o[n]||(s=!0),e[n]=!0}})),s||Object.keys(e).length===Object.keys(o).length||(s=!0),s&&(this.itemStyles.set(n,e),r(this))}connectedCallback(){this.counter&&this.updateCounterOutput(this.getFirstInput()),this.hasStartEl()}componentDidUpdate(){const t=this.getFirstInput();t&&!this.clickListener&&(this.clickListener=n=>this.delegateFocus(n,t),this.el.addEventListener("click",this.clickListener))}disconnectedCallback(){this.getFirstInput()&&this.clickListener&&(this.el.removeEventListener("click",this.clickListener),this.clickListener=void 0)}componentDidLoad(){W((()=>{this.setMultipleInputs(),this.focusable=this.isFocusable()}))}setMultipleInputs(){const t=this.el.querySelectorAll("ion-checkbox, ion-datetime, ion-select, ion-radio"),n=this.el.querySelectorAll("ion-input, ion-range, ion-searchbar, ion-segment, ion-textarea, ion-toggle"),i=this.el.querySelectorAll("ion-anchor, ion-button, a, button");this.multipleInputs=t.length+n.length>1||t.length+i.length>1||t.length>0&&this.isClickable()}hasCover(){return 1===this.el.querySelectorAll("ion-checkbox, ion-datetime, ion-select, ion-radio").length&&!this.multipleInputs}isClickable(){return void 0!==this.href||this.button}canActivate(){return this.isClickable()||this.hasCover()}isFocusable(){const t=this.el.querySelector(".ion-focusable");return this.canActivate()||null!==t}getFirstInput(){return this.el.querySelectorAll("ion-input, ion-textarea")[0]}delegateFocus(t,n){const i="ION-ITEM"===t.target.tagName;let e=!1;document.activeElement&&(e=n.querySelector("input, textarea")===document.activeElement),!i||!e&&this.multipleInputs||(n.fireFocusEvents=!1,n.setBlur(),n.setFocus(),W((()=>{n.fireFocusEvents=!0})))}updateCounterOutput(t){var n,i;const{counter:e,counterFormatter:o,defaultCounterFormatter:r}=this;if(e&&!this.multipleInputs&&void 0!==(null==t?void 0:t.maxlength)){const e=null!==(i=null===(n=null==t?void 0:t.value)||void 0===n?void 0:n.toString().length)&&void 0!==i?i:0;if(void 0===o)this.counterString=r(e,t.maxlength);else try{this.counterString=o(e,t.maxlength)}catch(n){Z("Exception in provided `counterFormatter`.",n),this.counterString=r(e,t.maxlength)}}}defaultCounterFormatter(t,n){return`${t} / ${n}`}hasStartEl(){null!==this.el.querySelector('[slot="start"]')&&this.el.classList.add("item-has-start-slot")}render(){const{counterString:t,detail:n,detailIcon:i,download:o,fill:r,labelColorStyles:l,lines:a,disabled:u,href:c,rel:h,shape:d,target:f,routerAnimation:p,routerDirection:m}=this,b={},v=g(this),w=this.isClickable(),y=this.canActivate(),x=w?void 0===c?"button":"a":"div",k="button"===x?{type:this.type}:{download:o,href:c,rel:h,target:f},I=w?{onClick:t=>{R(c,t,m,p)}}:{},_=void 0!==n?n:"ios"===v&&w;this.itemStyles.forEach((t=>{Object.assign(b,t)}));const E=r||"none";return e(s,{"aria-disabled":u||b["item-interactive-disabled"]?"true":null,class:Object.assign(Object.assign(Object.assign({},b),l),M(this.color,{item:!0,[v]:!0,[`item-lines-${a}`]:void 0!==a,[`item-fill-${E}`]:!0,[`item-shape-${d}`]:void 0!==d,"item-disabled":u,"in-list":L("ion-list",this.el),"item-multiple-inputs":this.multipleInputs,"ion-activatable":y,"ion-focusable":this.focusable,"item-rtl":"rtl"===document.dir}))},e(x,Object.assign({},k,{class:"item-native",part:"native",disabled:u},I),e("slot",{name:"start"}),e("div",{class:"item-inner"},e("div",{class:"input-wrapper"},e("slot",null)),e("slot",{name:"end"}),_&&e("ion-icon",{icon:i,lazy:!1,class:"item-detail-icon",part:"detail-icon","aria-hidden":"true","flip-rtl":i===Q}),e("div",{class:"item-inner-highlight"})),y&&"md"===v&&e("ion-ripple-effect",null),e("div",{class:"item-highlight"})),e("div",{class:"item-bottom"},e("slot",{name:"error"}),e("slot",{name:"helper"}),t&&e("ion-note",{class:"item-counter"},t)))}static get delegatesFocus(){return!0}get el(){return o(this)}static get watchers(){return{counterFormatter:["counterFormatterChanged"]}}};wn.style={ios:':host{--border-radius:0px;--border-width:0px;--border-style:solid;--padding-top:0px;--padding-bottom:0px;--padding-end:0px;--padding-start:0px;--inner-border-width:0px;--inner-padding-top:0px;--inner-padding-bottom:0px;--inner-padding-start:0px;--inner-padding-end:0px;--inner-box-shadow:none;--show-full-highlight:0;--show-inset-highlight:0;--detail-icon-color:initial;--detail-icon-font-size:20px;--detail-icon-opacity:0.25;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;align-items:center;justify-content:space-between;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:initial;text-decoration:none;overflow:hidden;box-sizing:border-box}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-native,:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-inner{border-color:var(--ion-color-shade)}:host(.ion-activated) .item-native{color:var(--color-activated)}:host(.ion-activated) .item-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.ion-color.ion-activated) .item-native{color:var(--ion-color-contrast)}:host(.ion-focused) .item-native{color:var(--color-focused)}:host(.ion-focused) .item-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-color.ion-focused) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .item-native::after{background:var(--ion-color-contrast)}@media (any-hover: hover){:host(.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--color-hover)}:host(.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--ion-color-contrast)}}:host(.item-interactive-disabled:not(.item-multiple-inputs)){cursor:default;pointer-events:none}:host(.item-disabled){cursor:default;opacity:0.3;pointer-events:none}.item-native{border-radius:var(--border-radius);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:flex;position:relative;align-items:inherit;justify-content:inherit;width:100%;min-height:var(--min-height);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);overflow:inherit;box-sizing:border-box;z-index:1}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.item-native{padding-left:unset;padding-right:unset;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.item-native::-moz-focus-inner{border:0}.item-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0;transition:var(--transition);z-index:-1}button,a{cursor:pointer;user-select:none;-webkit-user-drag:none}.item-inner{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:var(--inner-padding-start);padding-right:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-top:var(--inner-padding-top);padding-bottom:var(--inner-padding-bottom);display:flex;position:relative;flex:1;flex-direction:inherit;align-items:inherit;align-self:stretch;min-height:inherit;border-width:var(--inner-border-width);border-style:var(--border-style);border-color:var(--border-color);box-shadow:var(--inner-box-shadow);overflow:inherit;box-sizing:border-box}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.item-inner{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--inner-padding-start);padding-inline-start:var(--inner-padding-start);-webkit-padding-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-inline-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end))}}.item-bottom{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-right:var(--inner-padding-end);padding-top:0;padding-bottom:0;display:flex;justify-content:space-between}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.item-bottom{padding-left:unset;padding-right:unset;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--inner-padding-end);padding-inline-end:var(--inner-padding-end)}}.item-detail-icon{color:var(--detail-icon-color);font-size:var(--detail-icon-font-size);opacity:var(--detail-icon-opacity)}::slotted(ion-icon){font-size:1.6em}::slotted(ion-button){--margin-top:0;--margin-bottom:0;--margin-start:0;--margin-end:0;z-index:1}::slotted(ion-label:not([slot=end])){flex:1}:host(.item-input){align-items:center}.input-wrapper{display:flex;flex:1;flex-direction:inherit;align-items:inherit;align-self:stretch;text-overflow:ellipsis;overflow:inherit;box-sizing:border-box}:host(.item-label-stacked),:host(.item-label-floating){align-items:start}:host(.item-label-stacked) .input-wrapper,:host(.item-label-floating) .input-wrapper{flex:1;flex-direction:column}.item-highlight,.item-inner-highlight{left:0;right:0;top:0;bottom:0;border-radius:inherit;position:absolute;width:100%;height:100%;transform:scaleX(0);transition:transform 200ms, border-bottom-width 200ms;z-index:2;box-sizing:border-box;pointer-events:none}:host(.item-interactive.item-has-focus) .item-native{caret-color:var(--highlight-background)}:host(.item-interactive.ion-focused),:host(.item-interactive.item-has-focus),:host(.item-interactive.ion-touched.ion-invalid){--full-highlight-height:calc(var(--highlight-height) * var(--show-full-highlight));--inset-highlight-height:calc(var(--highlight-height) * var(--show-inset-highlight))}:host(.item-interactive.ion-focused),:host(.item-interactive.item-has-focus){--highlight-background:var(--highlight-color-focused)}:host(.item-interactive.ion-valid){--highlight-background:var(--highlight-color-valid)}:host(.item-interactive.ion-invalid){--highlight-background:var(--highlight-color-invalid)}:host(.item-interactive.ion-invalid) ::slotted([slot=helper]){display:none}::slotted([slot=error]){display:none;color:var(--highlight-color-invalid)}:host(.item-interactive.ion-invalid) ::slotted([slot=error]){display:block}:host(:not(.item-label)) ::slotted(ion-select){--padding-start:0;max-width:none}:host(.item-label-stacked) ::slotted(ion-select),:host(.item-label-floating) ::slotted(ion-select){--padding-top:8px;--padding-bottom:8px;--padding-start:0;align-self:stretch;width:100%;max-width:100%}:host(:not(.item-label)) ::slotted(ion-datetime){--padding-start:0}:host(.item-label-stacked) ::slotted(ion-datetime),:host(.item-label-floating) ::slotted(ion-datetime){--padding-start:0;width:100%}:host(.item-multiple-inputs) ::slotted(ion-checkbox),:host(.item-multiple-inputs) ::slotted(ion-datetime),:host(.item-multiple-inputs) ::slotted(ion-radio),:host(.item-multiple-inputs) ::slotted(ion-select){position:relative}:host(.item-textarea){align-items:stretch}::slotted(ion-reorder[slot]){margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}:host(.item-fill-solid) ::slotted([slot=start]),:host(.item-fill-solid) ::slotted([slot=end]),:host(.item-fill-outline) ::slotted([slot=start]),:host(.item-fill-outline) ::slotted([slot=end]){align-self:center}::slotted([slot=helper]),::slotted([slot=error]),.item-counter{padding-top:5px;font-size:12px;z-index:1}.item-counter{margin-left:auto;padding-inline-start:16px;white-space:nowrap}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.item-counter{margin-left:unset;-webkit-margin-start:auto;margin-inline-start:auto}}@media (prefers-reduced-motion: reduce){.item-highlight,.item-inner-highlight{transition:none}}:host{--min-height:44px;--transition:background-color 200ms linear, opacity 200ms linear;--padding-start:20px;--inner-padding-end:10px;--inner-border-width:0px 0px 0.55px 0px;--background:var(--ion-item-background, var(--ion-background-color, #fff));--background-activated:#000;--background-focused:#000;--background-hover:currentColor;--background-activated-opacity:.12;--background-focused-opacity:.15;--background-hover-opacity:.04;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, #c8c7cc)));--color:var(--ion-item-color, var(--ion-text-color, #000));--highlight-height:0px;--highlight-color-focused:var(--ion-color-primary, #3880ff);--highlight-color-valid:var(--ion-color-success, #2dd36f);--highlight-color-invalid:var(--ion-color-danger, #eb445a);--bottom-padding-start:0px;font-size:17px}:host(.ion-activated){--transition:none}:host(.ion-color.ion-focused) .item-native::after{background:#000;opacity:0.15}:host(.ion-color.ion-activated) .item-native::after{background:#000;opacity:0.12}:host(.item-interactive){--show-full-highlight:0;--show-inset-highlight:1}:host(.item-lines-full){--border-width:0px 0px 0.55px 0px;--show-full-highlight:1;--show-inset-highlight:0}:host(.item-lines-inset){--inner-border-width:0px 0px 0.55px 0px;--show-full-highlight:0;--show-inset-highlight:1}:host(.item-lines-inset),:host(.item-lines-none){--border-width:0px;--show-full-highlight:0}:host(.item-lines-full),:host(.item-lines-none){--inner-border-width:0px;--show-inset-highlight:0}.item-highlight,.item-inner-highlight{transition:none}:host(.item-has-focus) .item-inner-highlight,:host(.item-has-focus) .item-highlight{border-top:none;border-right:none;border-left:none}::slotted([slot=start]){margin-left:0;margin-right:20px;margin-top:2px;margin-bottom:2px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){::slotted([slot=start]){margin-left:unset;margin-right:unset;-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:20px;margin-inline-end:20px}}::slotted([slot=end]){margin-left:10px;margin-right:10px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){::slotted([slot=end]){margin-left:unset;margin-right:unset;-webkit-margin-start:10px;margin-inline-start:10px;-webkit-margin-end:10px;margin-inline-end:10px}}::slotted(ion-icon[slot=start]),::slotted(ion-icon[slot=end]){margin-top:7px;margin-bottom:7px}::slotted(ion-toggle[slot=start]),::slotted(ion-toggle[slot=end]){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}:host(.item-label-stacked) ::slotted([slot=end]),:host(.item-label-floating) ::slotted([slot=end]){margin-top:7px;margin-bottom:7px}::slotted(.button-small){--padding-top:0px;--padding-bottom:0px;--padding-start:.5em;--padding-end:.5em;height:24px;font-size:13px}::slotted(ion-avatar){width:36px;height:36px}::slotted(ion-thumbnail){width:56px;height:56px}::slotted(ion-avatar[slot=end]),::slotted(ion-thumbnail[slot=end]){margin-left:10px;margin-right:10px;margin-top:10px;margin-bottom:10px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){::slotted(ion-avatar[slot=end]),::slotted(ion-thumbnail[slot=end]){margin-left:unset;margin-right:unset;-webkit-margin-start:10px;margin-inline-start:10px;-webkit-margin-end:10px;margin-inline-end:10px}}:host(.item-radio) ::slotted(ion-label),:host(.item-toggle) ::slotted(ion-label){margin-left:0px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host(.item-radio) ::slotted(ion-label),:host(.item-toggle) ::slotted(ion-label){margin-left:unset;-webkit-margin-start:0px;margin-inline-start:0px}}::slotted(ion-label){margin-left:0;margin-right:8px;margin-top:10px;margin-bottom:10px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){::slotted(ion-label){margin-left:unset;margin-right:unset;-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px}}:host(.item-label-floating),:host(.item-label-stacked){--min-height:68px}:host(.item-label-stacked) ::slotted(ion-select),:host(.item-label-floating) ::slotted(ion-select){--padding-top:8px;--padding-bottom:8px;--padding-start:0px}:host(.item-label-fixed) ::slotted(ion-select),:host(.item-label-fixed) ::slotted(ion-datetime){--padding-start:0}',md:':host{--border-radius:0px;--border-width:0px;--border-style:solid;--padding-top:0px;--padding-bottom:0px;--padding-end:0px;--padding-start:0px;--inner-border-width:0px;--inner-padding-top:0px;--inner-padding-bottom:0px;--inner-padding-start:0px;--inner-padding-end:0px;--inner-box-shadow:none;--show-full-highlight:0;--show-inset-highlight:0;--detail-icon-color:initial;--detail-icon-font-size:20px;--detail-icon-opacity:0.25;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;align-items:center;justify-content:space-between;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:initial;text-decoration:none;overflow:hidden;box-sizing:border-box}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-native,:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) .item-inner{border-color:var(--ion-color-shade)}:host(.ion-activated) .item-native{color:var(--color-activated)}:host(.ion-activated) .item-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.ion-color.ion-activated) .item-native{color:var(--ion-color-contrast)}:host(.ion-focused) .item-native{color:var(--color-focused)}:host(.ion-focused) .item-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}:host(.ion-color.ion-focused) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-focused) .item-native::after{background:var(--ion-color-contrast)}@media (any-hover: hover){:host(.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--color-hover)}:host(.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native{color:var(--ion-color-contrast)}:host(.ion-color.ion-activatable:not(.ion-focused):hover) .item-native::after{background:var(--ion-color-contrast)}}:host(.item-interactive-disabled:not(.item-multiple-inputs)){cursor:default;pointer-events:none}:host(.item-disabled){cursor:default;opacity:0.3;pointer-events:none}.item-native{border-radius:var(--border-radius);margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:flex;position:relative;align-items:inherit;justify-content:inherit;width:100%;min-height:var(--min-height);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);overflow:inherit;box-sizing:border-box;z-index:1}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.item-native{padding-left:unset;padding-right:unset;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.item-native::-moz-focus-inner{border:0}.item-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0;transition:var(--transition);z-index:-1}button,a{cursor:pointer;user-select:none;-webkit-user-drag:none}.item-inner{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:var(--inner-padding-start);padding-right:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-top:var(--inner-padding-top);padding-bottom:var(--inner-padding-bottom);display:flex;position:relative;flex:1;flex-direction:inherit;align-items:inherit;align-self:stretch;min-height:inherit;border-width:var(--inner-border-width);border-style:var(--border-style);border-color:var(--border-color);box-shadow:var(--inner-box-shadow);overflow:inherit;box-sizing:border-box}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.item-inner{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--inner-padding-start);padding-inline-start:var(--inner-padding-start);-webkit-padding-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end));padding-inline-end:calc(var(--ion-safe-area-right, 0px) + var(--inner-padding-end))}}.item-bottom{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-right:var(--inner-padding-end);padding-top:0;padding-bottom:0;display:flex;justify-content:space-between}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.item-bottom{padding-left:unset;padding-right:unset;-webkit-padding-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));padding-inline-start:calc(var(--padding-start) + var(--ion-safe-area-left, 0px));-webkit-padding-end:var(--inner-padding-end);padding-inline-end:var(--inner-padding-end)}}.item-detail-icon{color:var(--detail-icon-color);font-size:var(--detail-icon-font-size);opacity:var(--detail-icon-opacity)}::slotted(ion-icon){font-size:1.6em}::slotted(ion-button){--margin-top:0;--margin-bottom:0;--margin-start:0;--margin-end:0;z-index:1}::slotted(ion-label:not([slot=end])){flex:1}:host(.item-input){align-items:center}.input-wrapper{display:flex;flex:1;flex-direction:inherit;align-items:inherit;align-self:stretch;text-overflow:ellipsis;overflow:inherit;box-sizing:border-box}:host(.item-label-stacked),:host(.item-label-floating){align-items:start}:host(.item-label-stacked) .input-wrapper,:host(.item-label-floating) .input-wrapper{flex:1;flex-direction:column}.item-highlight,.item-inner-highlight{left:0;right:0;top:0;bottom:0;border-radius:inherit;position:absolute;width:100%;height:100%;transform:scaleX(0);transition:transform 200ms, border-bottom-width 200ms;z-index:2;box-sizing:border-box;pointer-events:none}:host(.item-interactive.item-has-focus) .item-native{caret-color:var(--highlight-background)}:host(.item-interactive.ion-focused),:host(.item-interactive.item-has-focus),:host(.item-interactive.ion-touched.ion-invalid){--full-highlight-height:calc(var(--highlight-height) * var(--show-full-highlight));--inset-highlight-height:calc(var(--highlight-height) * var(--show-inset-highlight))}:host(.item-interactive.ion-focused),:host(.item-interactive.item-has-focus){--highlight-background:var(--highlight-color-focused)}:host(.item-interactive.ion-valid){--highlight-background:var(--highlight-color-valid)}:host(.item-interactive.ion-invalid){--highlight-background:var(--highlight-color-invalid)}:host(.item-interactive.ion-invalid) ::slotted([slot=helper]){display:none}::slotted([slot=error]){display:none;color:var(--highlight-color-invalid)}:host(.item-interactive.ion-invalid) ::slotted([slot=error]){display:block}:host(:not(.item-label)) ::slotted(ion-select){--padding-start:0;max-width:none}:host(.item-label-stacked) ::slotted(ion-select),:host(.item-label-floating) ::slotted(ion-select){--padding-top:8px;--padding-bottom:8px;--padding-start:0;align-self:stretch;width:100%;max-width:100%}:host(:not(.item-label)) ::slotted(ion-datetime){--padding-start:0}:host(.item-label-stacked) ::slotted(ion-datetime),:host(.item-label-floating) ::slotted(ion-datetime){--padding-start:0;width:100%}:host(.item-multiple-inputs) ::slotted(ion-checkbox),:host(.item-multiple-inputs) ::slotted(ion-datetime),:host(.item-multiple-inputs) ::slotted(ion-radio),:host(.item-multiple-inputs) ::slotted(ion-select){position:relative}:host(.item-textarea){align-items:stretch}::slotted(ion-reorder[slot]){margin-top:0;margin-bottom:0}ion-ripple-effect{color:var(--ripple-color)}:host(.item-fill-solid) ::slotted([slot=start]),:host(.item-fill-solid) ::slotted([slot=end]),:host(.item-fill-outline) ::slotted([slot=start]),:host(.item-fill-outline) ::slotted([slot=end]){align-self:center}::slotted([slot=helper]),::slotted([slot=error]),.item-counter{padding-top:5px;font-size:12px;z-index:1}.item-counter{margin-left:auto;padding-inline-start:16px;white-space:nowrap}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.item-counter{margin-left:unset;-webkit-margin-start:auto;margin-inline-start:auto}}@media (prefers-reduced-motion: reduce){.item-highlight,.item-inner-highlight{transition:none}}:host{--min-height:48px;--background:var(--ion-item-background, var(--ion-background-color, #fff));--background-activated:transparent;--background-focused:currentColor;--background-hover:currentColor;--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04;--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.13))));--color:var(--ion-item-color, var(--ion-text-color, #000));--transition:opacity 15ms linear, background-color 15ms linear;--padding-start:16px;--inner-padding-end:16px;--inner-border-width:0 0 1px 0;--highlight-height:1px;--highlight-color-focused:var(--ion-color-primary, #3880ff);--highlight-color-valid:var(--ion-color-success, #2dd36f);--highlight-color-invalid:var(--ion-color-danger, #eb445a);font-size:16px;font-weight:normal;text-transform:none}:host(.item-fill-outline){--highlight-height:2px}:host(.item-fill-none.item-interactive.ion-focus) .item-highlight,:host(.item-fill-none.item-interactive.item-has-focus) .item-highlight,:host(.item-fill-none.item-interactive.ion-touched.ion-invalid) .item-highlight{transform:scaleX(1);border-width:0 0 var(--full-highlight-height) 0;border-style:var(--border-style);border-color:var(--highlight-background)}:host(.item-fill-none.item-interactive.ion-focus) .item-native,:host(.item-fill-none.item-interactive.item-has-focus) .item-native,:host(.item-fill-none.item-interactive.ion-touched.ion-invalid) .item-native{border-bottom-color:var(--highlight-background)}:host(.item-fill-outline.item-interactive.ion-focus) .item-highlight,:host(.item-fill-outline.item-interactive.item-has-focus) .item-highlight{transform:scaleX(1)}:host(.item-fill-outline.item-interactive.ion-focus) .item-highlight,:host(.item-fill-outline.item-interactive.item-has-focus) .item-highlight,:host(.item-fill-outline.item-interactive.ion-touched.ion-invalid) .item-highlight{border-width:var(--full-highlight-height);border-style:var(--border-style);border-color:var(--highlight-background)}:host(.item-fill-outline.item-interactive.ion-touched.ion-invalid) .item-native{border-color:var(--highlight-background)}:host(.item-fill-solid.item-interactive.ion-focus) .item-highlight,:host(.item-fill-solid.item-interactive.item-has-focus) .item-highlight,:host(.item-fill-solid.item-interactive.ion-touched.ion-invalid) .item-highlight{transform:scaleX(1);border-width:0 0 var(--full-highlight-height) 0;border-style:var(--border-style);border-color:var(--highlight-background)}:host(.item-fill-solid.item-interactive.ion-focus) .item-native,:host(.item-fill-solid.item-interactive.item-has-focus) .item-native,:host(.item-fill-solid.item-interactive.ion-touched.ion-invalid) .item-native{border-bottom-color:var(--highlight-background)}:host(.ion-color.ion-activated) .item-native::after{background:transparent}:host(.item-has-focus) .item-native{caret-color:var(--highlight-color-focused)}:host(.item-interactive){--border-width:0 0 1px 0;--inner-border-width:0;--show-full-highlight:1;--show-inset-highlight:0}:host(.item-lines-full){--border-width:0 0 1px 0;--show-full-highlight:1;--show-inset-highlight:0}:host(.item-lines-inset){--inner-border-width:0 0 1px 0;--show-full-highlight:0;--show-inset-highlight:1}:host(.item-lines-inset),:host(.item-lines-none){--border-width:0;--show-full-highlight:0}:host(.item-lines-full),:host(.item-lines-none){--inner-border-width:0;--show-inset-highlight:0}:host(.item-fill-outline) .item-highlight{--position-offset:calc(-1 * var(--border-width));left:var(--position-offset);top:var(--position-offset);width:calc(100% + 2 * var(--border-width));height:calc(100% + 2 * var(--border-width));transition:none}:host-context([dir=rtl]):host(.item-fill-outline) .item-highlight,:host-context([dir=rtl]).item-fill-outline .item-highlight{left:unset;right:unset;right:var(--position-offset)}:host(.item-fill-outline.ion-focused) .item-native,:host(.item-fill-outline.item-has-focus) .item-native{border-color:transparent}:host(.item-multi-line) ::slotted([slot=start]),:host(.item-multi-line) ::slotted([slot=end]){margin-top:16px;margin-bottom:16px;align-self:flex-start}::slotted([slot=start]){margin-right:32px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){::slotted([slot=start]){margin-right:unset;-webkit-margin-end:32px;margin-inline-end:32px}}::slotted([slot=end]){margin-left:32px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){::slotted([slot=end]){margin-left:unset;-webkit-margin-start:32px;margin-inline-start:32px}}:host(.item-fill-solid) ::slotted([slot=start]),:host(.item-fill-solid) ::slotted([slot=end]),:host(.item-fill-outline) ::slotted([slot=start]),:host(.item-fill-outline) ::slotted([slot=end]){align-self:center}::slotted(ion-icon){color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.54);font-size:24px}:host(.ion-color:not(.item-fill-solid):not(.item-fill-outline)) ::slotted(ion-icon){color:var(--ion-color-contrast)}::slotted(ion-icon[slot]){margin-top:12px;margin-bottom:12px}::slotted(ion-icon[slot=start]){margin-right:32px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){::slotted(ion-icon[slot=start]){margin-right:unset;-webkit-margin-end:32px;margin-inline-end:32px}}::slotted(ion-icon[slot=end]){margin-left:16px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){::slotted(ion-icon[slot=end]){margin-left:unset;-webkit-margin-start:16px;margin-inline-start:16px}}:host(.item-fill-solid) ::slotted(ion-icon[slot=start]),:host(.item-fill-outline) ::slotted(ion-icon[slot=start]){margin-right:8px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host(.item-fill-solid) ::slotted(ion-icon[slot=start]),:host(.item-fill-outline) ::slotted(ion-icon[slot=start]){margin-right:unset;-webkit-margin-end:8px;margin-inline-end:8px}}::slotted(ion-toggle[slot=start]),::slotted(ion-toggle[slot=end]){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}::slotted(ion-note){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;align-self:flex-start;font-size:11px}::slotted(ion-note[slot]:not([slot=helper]):not([slot=error])){padding-left:0;padding-right:0;padding-top:18px;padding-bottom:10px}::slotted(ion-note[slot=start]){padding-right:16px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){::slotted(ion-note[slot=start]){padding-right:unset;-webkit-padding-end:16px;padding-inline-end:16px}}::slotted(ion-note[slot=end]){padding-left:16px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){::slotted(ion-note[slot=end]){padding-left:unset;-webkit-padding-start:16px;padding-inline-start:16px}}::slotted(ion-avatar){width:40px;height:40px}::slotted(ion-thumbnail){width:56px;height:56px}::slotted(ion-avatar),::slotted(ion-thumbnail){margin-top:8px;margin-bottom:8px}::slotted(ion-avatar[slot=start]),::slotted(ion-thumbnail[slot=start]){margin-right:16px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){::slotted(ion-avatar[slot=start]),::slotted(ion-thumbnail[slot=start]){margin-right:unset;-webkit-margin-end:16px;margin-inline-end:16px}}::slotted(ion-avatar[slot=end]),::slotted(ion-thumbnail[slot=end]){margin-left:16px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){::slotted(ion-avatar[slot=end]),::slotted(ion-thumbnail[slot=end]){margin-left:unset;-webkit-margin-start:16px;margin-inline-start:16px}}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:10px;margin-bottom:10px}:host(.item-label-stacked) ::slotted([slot=end]),:host(.item-label-floating) ::slotted([slot=end]){margin-top:7px;margin-bottom:7px}:host(.item-label-fixed) ::slotted(ion-select),:host(.item-label-fixed) ::slotted(ion-datetime){--padding-start:8px}:host(.item-toggle) ::slotted(ion-label),:host(.item-radio) ::slotted(ion-label){margin-left:0}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host(.item-toggle) ::slotted(ion-label),:host(.item-radio) ::slotted(ion-label){margin-left:unset;-webkit-margin-start:0;margin-inline-start:0}}::slotted(.button-small){--padding-top:0;--padding-bottom:0;--padding-start:.6em;--padding-end:.6em;height:25px;font-size:12px}:host(.item-label-floating),:host(.item-label-stacked){--min-height:55px}:host(.item-label-stacked) ::slotted(ion-select),:host(.item-label-floating) ::slotted(ion-select){--padding-top:8px;--padding-bottom:8px;--padding-start:0}:host(.ion-focused:not(.ion-color)) ::slotted(.label-stacked),:host(.ion-focused:not(.ion-color)) ::slotted(.label-floating),:host(.item-has-focus:not(.ion-color)) ::slotted(.label-stacked),:host(.item-has-focus:not(.ion-color)) ::slotted(.label-floating){color:var(--ion-color-primary, #3880ff)}:host(.ion-color){--highlight-color-focused:var(--ion-color-contrast)}:host(.item-label-color){--highlight-color-focused:var(--ion-color-base)}:host(.item-fill-solid.ion-color),:host(.item-fill-outline.ion-color){--highlight-color-focused:var(--ion-color-base)}:host(.item-fill-solid){--background:var(--ion-color-step-50, #f2f2f2);--background-hover:var(--ion-color-step-100, #e6e6e6);--background-focused:var(--ion-color-step-150, #d9d9d9);--border-width:0 0 1px 0;--inner-border-width:0;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}:host-context([dir=rtl]):host(.item-fill-solid),:host-context([dir=rtl]).item-fill-solid{border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}:host(.item-fill-solid) .item-native{--border-color:var(--ion-color-step-500, gray)}:host(.item-fill-solid.ion-focused) .item-native,:host(.item-fill-solid.item-has-focus) .item-native{--background:var(--background-focused)}:host(.item-fill-solid.item-shape-round){border-top-left-radius:16px;border-top-right-radius:16px;border-bottom-right-radius:0;border-bottom-left-radius:0}:host-context([dir=rtl]):host(.item-fill-solid.item-shape-round),:host-context([dir=rtl]).item-fill-solid.item-shape-round{border-top-left-radius:16px;border-top-right-radius:16px;border-bottom-right-radius:0;border-bottom-left-radius:0}@media (any-hover: hover){:host(.item-fill-solid:hover) .item-native{--background:var(--background-hover);--border-color:var(--ion-color-step-750, #404040)}}:host(.item-fill-outline){--ripple-color:transparent;--background-focused:transparent;--background-hover:transparent;--border-color:var(--ion-color-step-500, gray);--border-width:1px;border:none;overflow:visible}:host(.item-fill-outline) .item-native{--native-padding-left:16px;border-radius:4px}:host(.item-fill-outline.item-shape-round) .item-native{--inner-padding-start:16px;border-radius:28px}:host(.item-fill-outline.item-shape-round) .item-bottom{padding-left:32px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host(.item-fill-outline.item-shape-round) .item-bottom{padding-left:unset;-webkit-padding-start:32px;padding-inline-start:32px}}:host(.item-fill-outline.item-label-floating.ion-focused) .item-native ::slotted(ion-input:not(:first-child)),:host(.item-fill-outline.item-label-floating.ion-focused) .item-native ::slotted(ion-textarea:not(:first-child)),:host(.item-fill-outline.item-label-floating.item-has-focus) .item-native ::slotted(ion-input:not(:first-child)),:host(.item-fill-outline.item-label-floating.item-has-focus) .item-native ::slotted(ion-textarea:not(:first-child)),:host(.item-fill-outline.item-label-floating.item-has-value) .item-native ::slotted(ion-input:not(:first-child)),:host(.item-fill-outline.item-label-floating.item-has-value) .item-native ::slotted(ion-textarea:not(:first-child)){transform:translateY(-14px)}@media (any-hover: hover){:host(.item-fill-outline:hover) .item-native{--border-color:var(--ion-color-step-750, #404040)}}.item-counter{color:rgba(0, 0, 0, 0.6);letter-spacing:0.0333333333em}'};const yn=class{constructor(i){t(this,i),this.ionColor=n(this,"ionColor",7),this.ionStyle=n(this,"ionStyle",7),this.inRange=!1,this.noAnimate=!1}componentWillLoad(){this.inRange=!!this.el.closest("ion-range"),this.noAnimate="floating"===this.position,this.emitStyle(),this.emitColor()}componentDidLoad(){this.noAnimate&&setTimeout((()=>{this.noAnimate=!1}),1e3)}colorChanged(){this.emitColor()}positionChanged(){this.emitStyle()}emitColor(){const{color:t}=this;this.ionColor.emit({"item-label-color":void 0!==t,[`ion-color-${t}`]:void 0!==t})}emitStyle(){const{inRange:t,position:n}=this;t||this.ionStyle.emit({label:!0,[`label-${n}`]:void 0!==n})}render(){const t=this.position,n=g(this);return e(s,{class:M(this.color,{[n]:!0,"in-item-color":L("ion-item.ion-color",this.el),[`label-${t}`]:void 0!==t,"label-no-animate":this.noAnimate,"label-rtl":"rtl"===document.dir})})}get el(){return o(this)}static get watchers(){return{color:["colorChanged"],position:["positionChanged"]}}};yn.style={ios:".item.sc-ion-label-ios-h,.item .sc-ion-label-ios-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;box-sizing:border-box}.ion-color.sc-ion-label-ios-h{color:var(--ion-color-base)}.ion-text-wrap.sc-ion-label-ios-h,[text-wrap].sc-ion-label-ios-h{white-space:normal}.item-interactive-disabled.sc-ion-label-ios-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-ios-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-ios-h,.item-input .sc-ion-label-ios-h{flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-ios-h,.item-textarea .sc-ion-label-ios-h{align-self:baseline}.label-fixed.sc-ion-label-ios-h{flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-ios-h,.label-floating.sc-ion-label-ios-h{margin-bottom:0;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-ios-h{transition:none}.sc-ion-label-ios-s h1,.sc-ion-label-ios-s h2,.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-ios-h,[text-wrap].sc-ion-label-ios-h{font-size:14px;line-height:1.5}.label-stacked.sc-ion-label-ios-h{margin-bottom:4px;font-size:14px}.label-floating.sc-ion-label-ios-h{margin-bottom:0;transform:translate3d(0,  29px,  0);transform-origin:left top;transition:transform 150ms ease-in-out}[dir=rtl].sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl] .sc-ion-label-ios-h -no-combinator.label-floating.sc-ion-label-ios-h,[dir=rtl].label-floating.sc-ion-label-ios-h,[dir=rtl] .label-floating.sc-ion-label-ios-h{transform-origin:right top}.item-textarea.label-floating.sc-ion-label-ios-h,.item-textarea .label-floating.sc-ion-label-ios-h{transform:translate3d(0,  28px,  0)}.item-has-focus.label-floating.sc-ion-label-ios-h,.item-has-focus .label-floating.sc-ion-label-ios-h,.item-has-placeholder.sc-ion-label-ios-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-ios-h,.item-has-value.label-floating.sc-ion-label-ios-h,.item-has-value .label-floating.sc-ion-label-ios-h{transform:translate3d(0,  0,  0) scale(0.82)}.sc-ion-label-ios-s h1{margin-left:0;margin-right:0;margin-top:3px;margin-bottom:2px;font-size:22px;font-weight:normal}.sc-ion-label-ios-s h2{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:17px;font-weight:normal}.sc-ion-label-ios-s h3,.sc-ion-label-ios-s h4,.sc-ion-label-ios-s h5,.sc-ion-label-ios-s h6{margin-left:0;margin-right:0;margin-top:0;margin-bottom:3px;font-size:14px;font-weight:normal;line-height:normal}.sc-ion-label-ios-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;line-height:normal;text-overflow:inherit;overflow:inherit}.sc-ion-label-ios-s>p{color:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.4)}.sc-ion-label-ios-h.in-item-color.sc-ion-label-ios-s>p{color:inherit}.sc-ion-label-ios-s h2:last-child,.sc-ion-label-ios-s h3:last-child,.sc-ion-label-ios-s h4:last-child,.sc-ion-label-ios-s h5:last-child,.sc-ion-label-ios-s h6:last-child,.sc-ion-label-ios-s p:last-child{margin-bottom:0}",md:'.item.sc-ion-label-md-h,.item .sc-ion-label-md-h{--color:initial;display:block;color:var(--color);font-family:var(--ion-font-family, inherit);font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;box-sizing:border-box}.ion-color.sc-ion-label-md-h{color:var(--ion-color-base)}.ion-text-wrap.sc-ion-label-md-h,[text-wrap].sc-ion-label-md-h{white-space:normal}.item-interactive-disabled.sc-ion-label-md-h:not(.item-multiple-inputs),.item-interactive-disabled:not(.item-multiple-inputs) .sc-ion-label-md-h{cursor:default;opacity:0.3;pointer-events:none}.item-input.sc-ion-label-md-h,.item-input .sc-ion-label-md-h{flex:initial;max-width:200px;pointer-events:none}.item-textarea.sc-ion-label-md-h,.item-textarea .sc-ion-label-md-h{align-self:baseline}.label-fixed.sc-ion-label-md-h{flex:0 0 100px;width:100px;min-width:100px;max-width:200px}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-bottom:0;align-self:stretch;width:auto;max-width:100%}.label-no-animate.label-floating.sc-ion-label-md-h{transition:none}.sc-ion-label-md-s h1,.sc-ion-label-md-s h2,.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{text-overflow:inherit;overflow:inherit}.ion-text-wrap.sc-ion-label-md-h,[text-wrap].sc-ion-label-md-h{line-height:1.5}.label-stacked.sc-ion-label-md-h,.label-floating.sc-ion-label-md-h{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;transform-origin:top left}.label-stacked.label-rtl.sc-ion-label-md-h,.label-floating.label-rtl.sc-ion-label-md-h{transform-origin:top right}.label-stacked.sc-ion-label-md-h{transform:translateY(50%) scale(0.75);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.label-floating.sc-ion-label-md-h{transform:translateY(96%);transition:color 150ms cubic-bezier(0.4, 0, 0.2, 1), transform 150ms cubic-bezier(0.4, 0, 0.2, 1)}.ion-focused.label-floating.sc-ion-label-md-h,.ion-focused .label-floating.sc-ion-label-md-h,.item-has-focus.label-floating.sc-ion-label-md-h,.item-has-focus .label-floating.sc-ion-label-md-h,.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating,.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h,.item-has-value.label-floating.sc-ion-label-md-h,.item-has-value .label-floating.sc-ion-label-md-h{transform:translateY(50%) scale(0.75)}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h{transform:translateY(-6px) scale(0.75);position:relative;max-width:min-content;background-color:var(--ion-item-background, var(--ion-background-color, #fff));overflow:visible;z-index:3}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::after,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::before,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::after,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::after{position:absolute;width:4px;height:100%;background-color:var(--ion-item-background, var(--ion-background-color, #fff));content:""}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::before,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::before,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::before,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::before{left:calc(-1 * 4px)}.item-fill-outline.ion-focused.label-floating.sc-ion-label-md-h::after,.item-fill-outline.ion-focused .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-focus .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).label-floating::after,.item-fill-outline.item-has-placeholder:not(.item-input) .label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value.label-floating.sc-ion-label-md-h::after,.item-fill-outline.item-has-value .label-floating.sc-ion-label-md-h::after{right:calc(-1 * 4px)}.item-fill-outline.ion-focused.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.ion-focused.item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).item-has-start-slot.label-floating,.item-fill-outline.item-has-placeholder:not(.item-input).item-has-start-slot .label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot.label-floating.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot .label-floating.sc-ion-label-md-h{transform:translateX(-32px) translateY(-6px) scale(0.75)}.item-fill-outline.ion-focused.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.ion-focused.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-focus.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-placeholder.sc-ion-label-md-h:not(.item-input).item-has-start-slot.label-floating.label-rtl,.item-fill-outline.item-has-placeholder:not(.item-input).item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot.label-floating.label-rtl.sc-ion-label-md-h,.item-fill-outline.item-has-value.item-has-start-slot .label-floating.label-rtl.sc-ion-label-md-h{transform:translateX(calc(-1 * -32px)) translateY(-6px) scale(0.75)}.ion-focused.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-primary, #3880ff)}.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-contrast)}.item-fill-solid.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.ion-focused.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-solid.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color.label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color .label-stacked.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color.label-floating.sc-ion-label-md-h:not(.ion-color),.item-fill-outline.item-has-focus.ion-color .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--ion-color-base)}.ion-invalid.ion-touched.label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-stacked.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched.label-floating.sc-ion-label-md-h:not(.ion-color),.ion-invalid.ion-touched .label-floating.sc-ion-label-md-h:not(.ion-color){color:var(--highlight-color-invalid)}.sc-ion-label-md-s h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:24px;font-weight:normal}.sc-ion-label-md-s h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:16px;font-weight:normal}.sc-ion-label-md-s h3,.sc-ion-label-md-s h4,.sc-ion-label-md-s h5,.sc-ion-label-md-s h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:14px;font-weight:normal;line-height:normal}.sc-ion-label-md-s p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:14px;line-height:20px;text-overflow:inherit;overflow:inherit}.sc-ion-label-md-s>p{color:var(--ion-color-step-600, #666666)}.sc-ion-label-md-h.in-item-color.sc-ion-label-md-s>p{color:inherit}'};const xn=class{constructor(n){t(this,n),this.inset=!1}async closeSlidingItems(){const t=this.el.querySelector("ion-item-sliding");return!!(null==t?void 0:t.closeOpened)&&t.closeOpened()}render(){const t=g(this),{lines:n,inset:i}=this;return e(s,{class:{[t]:!0,[`list-${t}`]:!0,"list-inset":i,[`list-lines-${n}`]:void 0!==n,[`list-${t}-lines-${n}`]:void 0!==n}})}get el(){return o(this)}};xn.style={ios:"ion-list{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:block;contain:content;list-style-type:none}ion-list.list-inset{transform:translateZ(0);overflow:hidden}.list-ios{background:var(--ion-item-background, var(--ion-background-color, #fff))}.list-ios.list-inset{margin-left:16px;margin-right:16px;margin-top:16px;margin-bottom:16px;border-radius:10px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.list-ios.list-inset{margin-left:unset;margin-right:unset;-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px}}.list-ios.list-inset ion-item{--border-width:0 0 1px 0;--inner-border-width:0}.list-ios.list-inset ion-item:last-child{--border-width:0;--inner-border-width:0}.list-ios.list-inset+ion-list.list-inset{margin-top:0}.list-ios-lines-none .item{--border-width:0;--inner-border-width:0}.list-ios-lines-full .item,.list-ios .item-lines-full{--border-width:0 0 0.55px 0}.list-ios-lines-full .item{--inner-border-width:0}.list-ios-lines-inset .item,.list-ios .item-lines-inset{--inner-border-width:0 0 0.55px 0}.list-ios .item-lines-inset{--border-width:0}.list-ios .item-lines-full{--inner-border-width:0}.list-ios .item-lines-none{--border-width:0;--inner-border-width:0}ion-card .list-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}",md:"ion-list{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:block;contain:content;list-style-type:none}ion-list.list-inset{transform:translateZ(0);overflow:hidden}.list-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:8px;padding-bottom:8px;background:var(--ion-item-background, var(--ion-background-color, #fff))}.list-md>.input:last-child::after{left:0}[dir=rtl] .list-md>.input:last-child::after,:host-context([dir=rtl]) .list-md>.input:last-child::after{left:unset;right:unset;right:0}.list-md.list-inset{margin-left:16px;margin-right:16px;margin-top:16px;margin-bottom:16px;border-radius:2px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.list-md.list-inset{margin-left:unset;margin-right:unset;-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px}}.list-md.list-inset ion-item:first-child{--border-radius:2px 2px 0 0;--border-width:0 0 1px 0}.list-md.list-inset ion-item:last-child{--border-radius:0 0 2px, 2px;--border-width:0}.list-md.list-inset .item-interactive{--padding-start:0;--padding-end:0}.list-md.list-inset+ion-list.list-inset{margin-top:0}.list-md-lines-none .item{--border-width:0;--inner-border-width:0}.list-md-lines-full .item,.list-md .item-lines-full{--border-width:0 0 1px 0}.list-md-lines-full .item{--inner-border-width:0}.list-md-lines-inset .item,.list-md .item-lines-inset{--inner-border-width:0 0 1px 0}.list-md .item-lines-inset{--border-width:0}.list-md .item-lines-full{--inner-border-width:0}.list-md .item-lines-none{--border-width:0;--inner-border-width:0}ion-card .list-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}"};const kn=class{constructor(n){t(this,n)}render(){const{lines:t}=this,n=g(this);return e(s,{class:M(this.color,{[n]:!0,[`list-header-lines-${t}`]:void 0!==t})},e("div",{class:"list-header-inner"},e("slot",null)))}};kn.style={ios:":host{--border-style:solid;--border-width:0;--inner-border-width:0;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:flex;align-items:center;justify-content:space-between;width:100%;min-height:40px;border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);color:var(--color);overflow:hidden}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}.list-header-inner{display:flex;position:relative;flex:1;flex-direction:inherit;align-items:inherit;align-self:stretch;min-height:inherit;border-width:var(--inner-border-width);border-style:var(--border-style);border-color:var(--border-color);overflow:inherit;box-sizing:border-box}::slotted(ion-label){flex:1 1 auto}:host(.list-header-lines-inset),:host(.list-header-lines-none){--border-width:0}:host(.list-header-lines-full),:host(.list-header-lines-none){--inner-border-width:0}:host{--background:transparent;--color:var(--ion-color-step-850, #262626);--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-250, #c8c7cc)));padding-left:calc(var(--ion-safe-area-left, 0px) + 20px);position:relative;align-items:flex-end;font-size:22px;font-weight:700;letter-spacing:0}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host{padding-left:unset;-webkit-padding-start:calc(var(--ion-safe-area-left, 0px) + 20px);padding-inline-start:calc(var(--ion-safe-area-left, 0px) + 20px)}}::slotted(ion-button),::slotted(ion-label){margin-top:29px;margin-bottom:6px}::slotted(ion-button){margin-left:3px;margin-right:3px;height:1.4em}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){::slotted(ion-button){margin-left:unset;margin-right:unset;-webkit-margin-start:3px;margin-inline-start:3px;-webkit-margin-end:3px;margin-inline-end:3px}}:host(.list-header-lines-full){--border-width:0 0 0.55px 0}:host(.list-header-lines-inset){--inner-border-width:0 0 0.55px 0}",md:":host{--border-style:solid;--border-width:0;--inner-border-width:0;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;display:flex;align-items:center;justify-content:space-between;width:100%;min-height:40px;border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);color:var(--color);overflow:hidden}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}.list-header-inner{display:flex;position:relative;flex:1;flex-direction:inherit;align-items:inherit;align-self:stretch;min-height:inherit;border-width:var(--inner-border-width);border-style:var(--border-style);border-color:var(--border-color);overflow:inherit;box-sizing:border-box}::slotted(ion-label){flex:1 1 auto}:host(.list-header-lines-inset),:host(.list-header-lines-none){--border-width:0}:host(.list-header-lines-full),:host(.list-header-lines-none){--inner-border-width:0}:host{--background:transparent;--color:var(--ion-text-color, #000);--border-color:var(--ion-item-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.13))));padding-left:calc(var(--ion-safe-area-left, 0) + 16px);min-height:45px;font-size:14px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host{padding-left:unset;-webkit-padding-start:calc(var(--ion-safe-area-left, 0) + 16px);padding-inline-start:calc(var(--ion-safe-area-left, 0) + 16px)}}:host(.list-header-lines-full){--border-width:0 0 1px 0}:host(.list-header-lines-inset){--inner-border-width:0 0 1px 0}"};const In=class{constructor(n){t(this,n)}render(){const t=g(this);return e(s,{class:M(this.color,{[t]:!0})},e("slot",null))}};In.style={ios:":host{color:var(--color);font-family:var(--ion-font-family, inherit);box-sizing:border-box}:host(.ion-color){color:var(--ion-color-base)}:host{--color:var(--ion-color-step-350, #a6a6a6)}",md:":host{color:var(--color);font-family:var(--ion-font-family, inherit);box-sizing:border-box}:host(.ion-color){color:var(--ion-color-base)}:host{--color:var(--ion-color-step-600, #666666);font-size:14px}"};
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */
const _n=(t,n,i)=>{const e=n.getBoundingClientRect(),o=e.height;let r=e.width;return"cover"===t&&i&&(r=i.getBoundingClientRect().width),{contentWidth:r,contentHeight:o}},En=(t,n)=>n&&"ION-ITEM"===n.tagName?t.findIndex((t=>t===n)):-1,Tn=t=>{const n=G(t).querySelector("button");n&&W((()=>n.focus()))},Sn=(t,n,i,e,o,r,s,l,a,u,c)=>{var h;let d={top:0,left:0,width:0,height:0};switch(r){case"event":if(!c)return a;d={top:c.clientY,left:c.clientX,width:1,height:1};break;case"trigger":default:const t=c,n=u||(null===(h=null==t?void 0:t.detail)||void 0===h?void 0:h.ionShadowTarget)||(null==t?void 0:t.target);if(!n)return a;const i=n.getBoundingClientRect();d={top:i.top,left:i.left,width:i.width,height:i.height}}const f=On(s,d,n,i,e,o,t),p=Pn(l,s,d,n,i),g=f.top+p.top,m=f.left+p.left,{arrowTop:b,arrowLeft:v}=Nn(s,e,o,g,m,n,i,t),{originX:w,originY:y}=Cn(s,l,t);return{top:g,left:m,referenceCoordinates:d,arrowTop:b,arrowLeft:v,originX:w,originY:y}},Cn=(t,n,i)=>{switch(t){case"top":return{originX:An(n),originY:"bottom"};case"bottom":return{originX:An(n),originY:"top"};case"left":return{originX:"right",originY:Dn(n)};case"right":return{originX:"left",originY:Dn(n)};case"start":return{originX:i?"left":"right",originY:Dn(n)};case"end":return{originX:i?"right":"left",originY:Dn(n)}}},An=t=>{switch(t){case"start":return"left";case"center":return"center";case"end":return"right"}},Dn=t=>{switch(t){case"start":return"top";case"center":return"center";case"end":return"bottom"}},Nn=(t,n,i,e,o,r,s,l)=>{const a={arrowTop:e+s/2-n/2,arrowLeft:o+r-n/2},u={arrowTop:e+s/2-n/2,arrowLeft:o-1.5*n};switch(t){case"top":return{arrowTop:e+s,arrowLeft:o+r/2-n/2};case"bottom":return{arrowTop:e-i,arrowLeft:o+r/2-n/2};case"left":return a;case"right":return u;case"start":return l?u:a;case"end":return l?a:u;default:return{arrowTop:0,arrowLeft:0}}},On=(t,n,i,e,o,r,s)=>{const l={top:n.top,left:n.left-i-o},a={top:n.top,left:n.left+n.width+o};switch(t){case"top":return{top:n.top-e-r,left:n.left};case"right":return a;case"bottom":return{top:n.top+n.height+r,left:n.left};case"left":return l;case"start":return s?a:l;case"end":return s?l:a}},Pn=(t,n,i,e,o)=>{switch(t){case"center":return Mn(n,i,e,o);case"end":return Rn(n,i,e,o);case"start":default:return{top:0,left:0}}},Rn=(t,n,i,e)=>{switch(t){case"start":case"end":case"left":case"right":return{top:-(e-n.height),left:0};case"top":case"bottom":default:return{top:0,left:-(i-n.width)}}},Mn=(t,n,i,e)=>{switch(t){case"start":case"end":case"left":case"right":return{top:-(e/2-n.height/2),left:0};case"top":case"bottom":default:return{top:0,left:-(i/2-n.width/2)}}},Ln=(t,n,i,e,o,r,s,l,a,u,c,h,d=0,f=0,p=0)=>{let g,m=d,b=i,v=n,w=u,y=c,x=!1,k=!1;const I=h?h.top+h.height:r/2-l/2,_=h?h.height:0;let E=!1;return b<e+a?(b=e,x=!0,w="left"):s+e+b+a>o&&(k=!0,b=o-s-e,w="right"),I+_+l>r&&("top"===t||"bottom"===t)&&(I-l>0?(v=I-l-_-(p-1),m=v+l,y="bottom",E=!0):g=e),{top:v,left:b,bottom:g,originX:w,originY:y,checkSafeAreaLeft:x,checkSafeAreaRight:k,arrowTop:m,arrowLeft:f,addPopoverBottomClass:E}},$n=(t,n)=>{var i;const{event:e,size:o,trigger:r,reference:s,side:l,align:a}=n,u=t.ownerDocument,c="rtl"===u.dir,h=u.defaultView.innerWidth,d=u.defaultView.innerHeight,f=G(t),p=f.querySelector(".popover-content"),g=f.querySelector(".popover-arrow"),m=r||(null===(i=null==e?void 0:e.detail)||void 0===i?void 0:i.ionShadowTarget)||(null==e?void 0:e.target),{contentWidth:b,contentHeight:v}=_n(o,p,m),{arrowWidth:w,arrowHeight:y}=(t=>{if(!t)return{arrowWidth:0,arrowHeight:0};const{width:n,height:i}=t.getBoundingClientRect();return{arrowWidth:n,arrowHeight:i}})(g),x=Sn(c,b,v,w,y,s,l,a,{top:d/2-v/2,left:h/2-b/2,originX:c?"right":"left",originY:"top"},r,e),k="cover"===o?0:5,I="cover"===o?0:25,{originX:_,originY:E,top:T,left:S,bottom:C,checkSafeAreaLeft:A,checkSafeAreaRight:D,arrowTop:N,arrowLeft:O,addPopoverBottomClass:P}=Ln(l,x.top,x.left,k,h,d,b,v,I,x.originX,x.originY,x.referenceCoordinates,x.arrowTop,x.arrowLeft,y),R=$(),M=$(),L=$();return M.addElement(f.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),L.addElement(f.querySelector(".popover-wrapper")).fromTo("opacity",.01,1),R.easing("ease").duration(100).beforeAddWrite((()=>{"cover"===o&&t.style.setProperty("--width",`${b}px`),P&&t.classList.add("popover-bottom"),void 0!==C&&p.style.setProperty("bottom",`${C}px`);let n=`${S}px`;A&&(n=`${S}px + var(--ion-safe-area-left, 0)`),D&&(n=`${S}px - var(--ion-safe-area-right, 0)`),p.style.setProperty("top",`calc(${T}px + var(--offset-y, 0))`),p.style.setProperty("left",`calc(${n} + var(--offset-x, 0))`),p.style.setProperty("transform-origin",`${E} ${_}`),null!==g&&(((t,n=!1,i,e)=>!(!i&&!e||"top"!==t&&"bottom"!==t&&n))(l,x.top!==T||x.left!==S,e,r)?(g.style.setProperty("top",`calc(${N}px + var(--offset-y, 0))`),g.style.setProperty("left",`calc(${O}px + var(--offset-x, 0))`)):g.style.setProperty("display","none"))})).addAnimation([M,L])},jn=t=>{const n=G(t),i=n.querySelector(".popover-content"),e=n.querySelector(".popover-arrow"),o=$(),r=$(),s=$();return r.addElement(n.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),s.addElement(n.querySelector(".popover-wrapper")).fromTo("opacity",.99,0),o.easing("ease").afterAddWrite((()=>{t.style.removeProperty("--width"),t.classList.remove("popover-bottom"),i.style.removeProperty("top"),i.style.removeProperty("left"),i.style.removeProperty("bottom"),i.style.removeProperty("transform-origin"),e&&(e.style.removeProperty("top"),e.style.removeProperty("left"),e.style.removeProperty("display"))})).duration(300).addAnimation([r,s])},zn=(t,n)=>{var i;const{event:e,size:o,trigger:r,reference:s,side:l,align:a}=n,u=t.ownerDocument,c="rtl"===u.dir,h=u.defaultView.innerWidth,d=u.defaultView.innerHeight,f=G(t),p=f.querySelector(".popover-content"),g=r||(null===(i=null==e?void 0:e.detail)||void 0===i?void 0:i.ionShadowTarget)||(null==e?void 0:e.target),{contentWidth:m,contentHeight:b}=_n(o,p,g),v=Sn(c,m,b,0,0,s,l,a,{top:d/2-b/2,left:h/2-m/2,originX:c?"right":"left",originY:"top"},r,e),w="cover"===o?0:12,{originX:y,originY:x,top:k,left:I,bottom:_}=Ln(l,v.top,v.left,w,h,d,m,b,0,v.originX,v.originY,v.referenceCoordinates),E=$(),T=$(),S=$(),C=$(),A=$();return T.addElement(f.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),S.addElement(f.querySelector(".popover-wrapper")).duration(150).fromTo("opacity",.01,1),C.addElement(p).beforeStyles({top:`calc(${k}px + var(--offset-y, 0px))`,left:`calc(${I}px + var(--offset-x, 0px))`,"transform-origin":`${x} ${y}`}).beforeAddWrite((()=>{void 0!==_&&p.style.setProperty("bottom",`${_}px`)})).fromTo("transform","scale(0.8)","scale(1)"),A.addElement(f.querySelector(".popover-viewport")).fromTo("opacity",.01,1),E.easing("cubic-bezier(0.36,0.66,0.04,1)").duration(300).beforeAddWrite((()=>{"cover"===o&&t.style.setProperty("--width",`${m}px`),"bottom"===x&&t.classList.add("popover-bottom")})).addAnimation([T,S,C,A])},Fn=t=>{const n=G(t),i=n.querySelector(".popover-content"),e=$(),o=$(),r=$();return o.addElement(n.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),r.addElement(n.querySelector(".popover-wrapper")).fromTo("opacity",.99,0),e.easing("ease").afterAddWrite((()=>{t.style.removeProperty("--width"),t.classList.remove("popover-bottom"),i.style.removeProperty("top"),i.style.removeProperty("left"),i.style.removeProperty("bottom"),i.style.removeProperty("transform-origin")})).duration(150).addAnimation([o,r])},Vn=class{constructor(i){t(this,i),this.didPresent=n(this,"ionPopoverDidPresent",7),this.willPresent=n(this,"ionPopoverWillPresent",7),this.willDismiss=n(this,"ionPopoverWillDismiss",7),this.didDismiss=n(this,"ionPopoverDidDismiss",7),this.didPresentShorthand=n(this,"didPresent",7),this.willPresentShorthand=n(this,"willPresent",7),this.willDismissShorthand=n(this,"willDismiss",7),this.didDismissShorthand=n(this,"didDismiss",7),this.parentPopover=null,this.popoverIndex=Bn++,this.coreDelegate=tt(),this.inline=!1,this.focusDescendantOnPresent=!1,this.presented=!1,this.hasController=!1,this.keyboardClose=!0,this.backdropDismiss=!0,this.showBackdrop=!0,this.translucent=!1,this.animated=!0,this.triggerAction="click",this.size="auto",this.dismissOnSelect=!1,this.reference="trigger",this.side="bottom",this.arrow=!0,this.isOpen=!1,this.keyboardEvents=!1,this.onBackdropTap=()=>{this.dismiss(void 0,k)},this.onLifecycle=t=>{const n=this.usersElement,i=Un[t.type];if(n&&i){const e=new CustomEvent(i,{bubbles:!1,cancelable:!1,detail:t.detail});n.dispatchEvent(e)}},this.configureTriggerInteraction=()=>{const{trigger:t,triggerAction:n,el:i,destroyTriggerInteraction:e}=this;e&&e();const o=this.triggerEl=void 0!==t?document.getElementById(t):null;o&&(this.destroyTriggerInteraction=((t,n,i)=>{let e=[];switch(n){case"hover":let t;e=[{eventName:"mouseenter",callback:async n=>{n.stopPropagation(),t&&clearTimeout(t),t=setTimeout((()=>{W((()=>{i.presentFromTrigger(n),t=void 0}))}),100)}},{eventName:"mouseleave",callback:n=>{t&&clearTimeout(t);const e=n.relatedTarget;e&&e.closest("ion-popover")!==i&&i.dismiss(void 0,void 0,!1)}},{eventName:"click",callback:t=>t.stopPropagation()},{eventName:"ionPopoverActivateTrigger",callback:t=>i.presentFromTrigger(t,!0)}];break;case"context-menu":e=[{eventName:"contextmenu",callback:t=>{t.preventDefault(),i.presentFromTrigger(t)}},{eventName:"click",callback:t=>t.stopPropagation()},{eventName:"ionPopoverActivateTrigger",callback:t=>i.presentFromTrigger(t,!0)}];break;case"click":default:e=[{eventName:"click",callback:t=>i.presentFromTrigger(t)},{eventName:"ionPopoverActivateTrigger",callback:t=>i.presentFromTrigger(t,!0)}]}return e.forEach((({eventName:n,callback:i})=>t.addEventListener(n,i))),t.setAttribute("data-ion-popover-trigger","true"),()=>{e.forEach((({eventName:n,callback:i})=>t.removeEventListener(n,i))),t.removeAttribute("data-ion-popover-trigger")}})(o,n,i))},this.configureKeyboardInteraction=()=>{const{destroyKeyboardInteraction:t,el:n}=this;t&&t(),this.destroyKeyboardInteraction=(t=>{const n=async n=>{var i;const e=document.activeElement;let o=[];const r=null===(i=n.target)||void 0===i?void 0:i.tagName;if("ION-POPOVER"===r||"ION-ITEM"===r){try{o=Array.from(t.querySelectorAll("ion-item:not(ion-popover ion-popover *):not([disabled])"))}catch(t){}switch(n.key){case"ArrowLeft":await t.getParentPopover()&&t.dismiss(void 0,void 0,!1);break;case"ArrowDown":n.preventDefault();const i=((t,n)=>t[En(t,n)+1])(o,e);void 0!==i&&Tn(i);break;case"ArrowUp":n.preventDefault();const r=((t,n)=>t[En(t,n)-1])(o,e);void 0!==r&&Tn(r);break;case"Home":n.preventDefault();const s=o[0];void 0!==s&&Tn(s);break;case"End":n.preventDefault();const l=o[o.length-1];void 0!==l&&Tn(l);break;case"ArrowRight":case" ":case"Enter":if(e&&(t=>t.hasAttribute("data-ion-popover-trigger"))(e)){const t=new CustomEvent("ionPopoverActivateTrigger");e.dispatchEvent(t)}}}};return t.addEventListener("keydown",n),()=>t.removeEventListener("keydown",n)})(n)},this.configureDismissInteraction=()=>{const{destroyDismissInteraction:t,parentPopover:n,triggerAction:i,triggerEl:e,el:o}=this;n&&e&&(t&&t(),this.destroyDismissInteraction=((t,n,i,e)=>{let o=[];const r=G(e).querySelector(".popover-content");switch(n){case"hover":o=[{eventName:"mouseenter",callback:n=>{document.elementFromPoint(n.clientX,n.clientY)!==t&&i.dismiss(void 0,void 0,!1)}}];break;case"context-menu":case"click":default:o=[{eventName:"click",callback:n=>{n.target.closest("[data-ion-popover-trigger]")!==t?i.dismiss(void 0,void 0,!1):n.stopPropagation()}}]}return o.forEach((({eventName:t,callback:n})=>r.addEventListener(t,n))),()=>{o.forEach((({eventName:t,callback:n})=>r.removeEventListener(t,n)))}})(e,i,o,n))}}onTriggerChange(){this.configureTriggerInteraction()}onIsOpenChange(t,n){!0===t&&!1===n?this.present():!1===t&&!0===n&&this.dismiss()}connectedCallback(){E(this.el)}componentWillLoad(){this.popoverId=this.el.hasAttribute("id")?this.el.getAttribute("id"):`ion-popover-${this.popoverIndex}`,this.parentPopover=this.el.closest(`ion-popover:not(#${this.popoverId})`),void 0===this.alignment&&(this.alignment="ios"===g(this)?"center":"start")}componentDidLoad(){const{parentPopover:t,isOpen:n}=this;!0===n&&W((()=>this.present())),t&&H(t,"ionPopoverWillDismiss",(()=>{this.dismiss(void 0,void 0,!1)})),this.configureTriggerInteraction()}async presentFromTrigger(t,n=!1){this.focusDescendantOnPresent=n,await this.present(t),this.focusDescendantOnPresent=!1}getDelegate(t=!1){if(this.workingDelegate&&!t)return{delegate:this.workingDelegate,inline:this.inline};const n=this.inline=null!==this.el.parentNode&&!this.hasController;return{inline:n,delegate:this.workingDelegate=n?this.delegate||this.coreDelegate:this.delegate}}async present(t){if(this.presented)return;void 0!==this.currentTransition&&await this.currentTransition;const n=Object.assign(Object.assign({},this.componentProps),{popover:this.el}),{inline:i,delegate:e}=this.getDelegate(!0);this.usersElement=await nt(e,this.el,this.component,["popover-viewport"],n,i),await et(this.usersElement),this.keyboardEvents||this.configureKeyboardInteraction(),this.configureDismissInteraction(),this.currentTransition=_(this,"popoverEnter",$n,zn,{event:t||this.event,size:this.size,trigger:this.triggerEl,reference:this.reference,side:this.side,align:this.alignment}),await this.currentTransition,this.currentTransition=void 0,this.focusDescendantOnPresent&&A(this.el,this.el)}async dismiss(t,n,i=!0){void 0!==this.currentTransition&&await this.currentTransition;const{destroyKeyboardInteraction:e,destroyDismissInteraction:o}=this;i&&this.parentPopover&&this.parentPopover.dismiss(t,n,i),this.currentTransition=T(this,t,n,"popoverLeave",jn,Fn,this.event);const r=await this.currentTransition;if(r){e&&(e(),this.destroyKeyboardInteraction=void 0),o&&(o(),this.destroyDismissInteraction=void 0);const{delegate:t}=this.getDelegate();await it(t,this.usersElement)}return this.currentTransition=void 0,r}async getParentPopover(){return this.parentPopover}onDidDismiss(){return S(this.el,"ionPopoverDidDismiss")}onWillDismiss(){return S(this.el,"ionPopoverWillDismiss")}render(){const t=g(this),{onLifecycle:n,popoverId:i,parentPopover:o,dismissOnSelect:r,side:l,arrow:a,htmlAttributes:u}=this,c=m("desktop"),h=a&&!o;return e(s,Object.assign({"aria-modal":"true","no-router":!0,tabindex:"-1"},u,{style:{zIndex:`${2e4+this.overlayIndex}`},id:i,class:Object.assign(Object.assign({},P(this.cssClass)),{[t]:!0,"popover-translucent":this.translucent,"overlay-hidden":!0,"popover-desktop":c,[`popover-side-${l}`]:!0,"popover-nested":!!o}),onIonPopoverDidPresent:n,onIonPopoverWillPresent:n,onIonPopoverWillDismiss:n,onIonPopoverDidDismiss:n,onIonBackdropTap:this.onBackdropTap}),!o&&e("ion-backdrop",{tappable:this.backdropDismiss,visible:this.showBackdrop,part:"backdrop"}),e("div",{class:"popover-wrapper ion-overlay-wrapper",onClick:r?()=>this.dismiss():void 0},h&&e("div",{class:"popover-arrow",part:"arrow"}),e("div",{class:"popover-content",part:"content"},e("slot",null))))}get el(){return o(this)}static get watchers(){return{trigger:["onTriggerChange"],triggerAction:["onTriggerChange"],isOpen:["onIsOpenChange"]}}},Un={ionPopoverDidPresent:"ionViewDidEnter",ionPopoverWillPresent:"ionViewWillEnter",ionPopoverWillDismiss:"ionViewWillLeave",ionPopoverDidDismiss:"ionViewDidLeave"};let Bn=0;Vn.style={ios:':host{--background:var(--ion-background-color, #fff);--min-width:0;--min-height:0;--max-width:auto;--height:auto;--offset-x:0px;--offset-y:0px;left:0;right:0;top:0;bottom:0;display:flex;position:fixed;align-items:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);z-index:1001}:host(.popover-nested){pointer-events:none}:host(.popover-nested) .popover-wrapper{pointer-events:auto}:host(.overlay-hidden){display:none}.popover-wrapper{opacity:0;z-index:10}.popover-content{display:flex;position:absolute;flex-direction:column;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);box-shadow:var(--box-shadow);overflow:auto;z-index:10}.popover-viewport{--ion-safe-area-top:0px;--ion-safe-area-right:0px;--ion-safe-area-bottom:0px;--ion-safe-area-left:0px;display:flex;flex-direction:column;overflow:hidden}:host(.popover-nested.popover-side-left){--offset-x:5px}:host(.popover-nested.popover-side-right){--offset-x:-5px}:host(.popover-nested.popover-side-start){--offset-x:5px}:host-context([dir=rtl]):host(.popover-nested.popover-side-start),:host-context([dir=rtl]).popover-nested.popover-side-start{--offset-x:-5px}:host(.popover-nested.popover-side-end){--offset-x:-5px}:host-context([dir=rtl]):host(.popover-nested.popover-side-end),:host-context([dir=rtl]).popover-nested.popover-side-end{--offset-x:5px}:host{--width:200px;--max-height:90%;--box-shadow:none;--backdrop-opacity:var(--ion-backdrop-opacity, 0.08)}:host(.popover-desktop){--box-shadow:0px 4px 16px 0px rgba(0, 0, 0, 0.12)}.popover-content{border-radius:10px}:host(.popover-desktop) .popover-content{border:0.5px solid var(--ion-color-step-100, #e6e6e6)}.popover-arrow{display:block;position:absolute;width:20px;height:10px;overflow:hidden}.popover-arrow::after{left:3px;top:3px;border-radius:3px;position:absolute;width:14px;height:14px;transform:rotate(45deg);background:var(--background);content:"";z-index:10}[dir=rtl] .popover-arrow::after,:host-context([dir=rtl]) .popover-arrow::after{left:unset;right:unset;right:3px}:host(.popover-bottom) .popover-arrow{top:auto;bottom:-10px}:host(.popover-bottom) .popover-arrow::after{top:-6px}:host(.popover-side-left) .popover-arrow{transform:rotate(90deg)}:host(.popover-side-right) .popover-arrow{transform:rotate(-90deg)}:host(.popover-side-top) .popover-arrow{transform:rotate(180deg)}:host(.popover-side-start) .popover-arrow{transform:rotate(90deg)}:host-context([dir=rtl]):host(.popover-side-start) .popover-arrow,:host-context([dir=rtl]).popover-side-start .popover-arrow{transform:rotate(-90deg)}:host(.popover-side-end) .popover-arrow{transform:rotate(-90deg)}:host-context([dir=rtl]):host(.popover-side-end) .popover-arrow,:host-context([dir=rtl]).popover-side-end .popover-arrow{transform:rotate(90deg)}@supports (backdrop-filter: blur(0)){:host(.popover-translucent) .popover-content,:host(.popover-translucent) .popover-arrow::after{background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);backdrop-filter:saturate(180%) blur(20px)}}',md:":host{--background:var(--ion-background-color, #fff);--min-width:0;--min-height:0;--max-width:auto;--height:auto;--offset-x:0px;--offset-y:0px;left:0;right:0;top:0;bottom:0;display:flex;position:fixed;align-items:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);z-index:1001}:host(.popover-nested){pointer-events:none}:host(.popover-nested) .popover-wrapper{pointer-events:auto}:host(.overlay-hidden){display:none}.popover-wrapper{opacity:0;z-index:10}.popover-content{display:flex;position:absolute;flex-direction:column;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);box-shadow:var(--box-shadow);overflow:auto;z-index:10}.popover-viewport{--ion-safe-area-top:0px;--ion-safe-area-right:0px;--ion-safe-area-bottom:0px;--ion-safe-area-left:0px;display:flex;flex-direction:column;overflow:hidden}:host(.popover-nested.popover-side-left){--offset-x:5px}:host(.popover-nested.popover-side-right){--offset-x:-5px}:host(.popover-nested.popover-side-start){--offset-x:5px}:host-context([dir=rtl]):host(.popover-nested.popover-side-start),:host-context([dir=rtl]).popover-nested.popover-side-start{--offset-x:-5px}:host(.popover-nested.popover-side-end){--offset-x:-5px}:host-context([dir=rtl]):host(.popover-nested.popover-side-end),:host-context([dir=rtl]).popover-nested.popover-side-end{--offset-x:5px}:host{--width:250px;--max-height:90%;--box-shadow:0 5px 5px -3px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12);--backdrop-opacity:var(--ion-backdrop-opacity, 0.32)}.popover-content{border-radius:4px;transform-origin:left top}[dir=rtl] .popover-content,:host-context([dir=rtl]) .popover-content{transform-origin:right top}.popover-viewport{transition-delay:100ms}"};const qn=class{constructor(n){t(this,n),this.type="determinate",this.reversed=!1,this.value=0,this.buffer=1}render(){const{color:t,type:n,reversed:i,value:o,buffer:r}=this,l=b.getBoolean("_testing"),a=g(this);return e(s,{role:"progressbar","aria-valuenow":"determinate"===n?o:null,"aria-valuemin":"0","aria-valuemax":"1",class:M(t,{[a]:!0,[`progress-bar-${n}`]:!0,"progress-paused":l,"progress-bar-reversed":"rtl"===document.dir?!i:i})},"indeterminate"===n?Kn():Wn(o,r))}},Kn=()=>e("div",{part:"track",class:"progress-buffer-bar"},e("div",{class:"indeterminate-bar-primary"},e("span",{part:"progress",class:"progress-indeterminate"})),e("div",{class:"indeterminate-bar-secondary"},e("span",{part:"progress",class:"progress-indeterminate"}))),Wn=(t,n)=>{const i=X(0,t,1),o=X(0,n,1);return[e("div",{part:"progress",class:"progress",style:{transform:`scaleX(${i})`}}),e("div",{class:{"buffer-circles-container":!0,"ion-hide":1===o},style:{transform:`translateX(${100*o}%)`}},e("div",{class:"buffer-circles-container",style:{transform:`translateX(-${100*o}%)`}},e("div",{part:"stream",class:"buffer-circles"}))),e("div",{part:"track",class:"progress-buffer-bar",style:{transform:`scaleX(${o})`}})]};qn.style={ios:":host{--background:rgba(var(--ion-color-primary-rgb, 56, 128, 255), 0.3);--progress-background:var(--ion-color-primary, #3880ff);--buffer-background:var(--background);display:block;position:relative;width:100%;contain:strict;direction:ltr;overflow:hidden}.progress,.progress-indeterminate,.indeterminate-bar-primary,.indeterminate-bar-secondary,.progress-buffer-bar{left:0;right:0;top:0;bottom:0;position:absolute;width:100%;height:100%}.buffer-circles-container,.buffer-circles{left:0;right:0;top:0;bottom:0;position:absolute}.buffer-circles{right:-10px;left:-10px;}.progress,.progress-buffer-bar,.buffer-circles-container{transform-origin:left top;transition:transform 150ms linear}.progress,.progress-indeterminate{background:var(--progress-background);z-index:2}.progress-buffer-bar{background:var(--buffer-background);z-index:1}.buffer-circles-container{overflow:hidden}.indeterminate-bar-primary{top:0;right:0;bottom:0;left:-145.166611%;animation:primary-indeterminate-translate 2s infinite linear}.indeterminate-bar-primary .progress-indeterminate{animation:primary-indeterminate-scale 2s infinite linear;animation-play-state:inherit}.indeterminate-bar-secondary{top:0;right:0;bottom:0;left:-54.888891%;animation:secondary-indeterminate-translate 2s infinite linear}.indeterminate-bar-secondary .progress-indeterminate{animation:secondary-indeterminate-scale 2s infinite linear;animation-play-state:inherit}.buffer-circles{background-image:radial-gradient(ellipse at center, var(--buffer-background) 0%, var(--buffer-background) 30%, transparent 30%);background-repeat:repeat-x;background-position:5px center;background-size:10px 10px;z-index:0;animation:buffering 450ms infinite linear}:host(.progress-bar-reversed){transform:scaleX(-1)}:host(.progress-paused) .indeterminate-bar-secondary,:host(.progress-paused) .indeterminate-bar-primary,:host(.progress-paused) .buffer-circles{animation-play-state:paused}:host(.ion-color) .progress-buffer-bar{background:rgba(var(--ion-color-base-rgb), 0.3)}:host(.ion-color) .buffer-circles{background-image:radial-gradient(ellipse at center, rgba(var(--ion-color-base-rgb), 0.3) 0%, rgba(var(--ion-color-base-rgb), 0.3) 30%, transparent 30%)}:host(.ion-color) .progress,:host(.ion-color) .progress-indeterminate{background:var(--ion-color-base)}@keyframes primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes buffering{to{transform:translateX(-10px)}}:host{height:3px}",md:":host{--background:rgba(var(--ion-color-primary-rgb, 56, 128, 255), 0.3);--progress-background:var(--ion-color-primary, #3880ff);--buffer-background:var(--background);display:block;position:relative;width:100%;contain:strict;direction:ltr;overflow:hidden}.progress,.progress-indeterminate,.indeterminate-bar-primary,.indeterminate-bar-secondary,.progress-buffer-bar{left:0;right:0;top:0;bottom:0;position:absolute;width:100%;height:100%}.buffer-circles-container,.buffer-circles{left:0;right:0;top:0;bottom:0;position:absolute}.buffer-circles{right:-10px;left:-10px;}.progress,.progress-buffer-bar,.buffer-circles-container{transform-origin:left top;transition:transform 150ms linear}.progress,.progress-indeterminate{background:var(--progress-background);z-index:2}.progress-buffer-bar{background:var(--buffer-background);z-index:1}.buffer-circles-container{overflow:hidden}.indeterminate-bar-primary{top:0;right:0;bottom:0;left:-145.166611%;animation:primary-indeterminate-translate 2s infinite linear}.indeterminate-bar-primary .progress-indeterminate{animation:primary-indeterminate-scale 2s infinite linear;animation-play-state:inherit}.indeterminate-bar-secondary{top:0;right:0;bottom:0;left:-54.888891%;animation:secondary-indeterminate-translate 2s infinite linear}.indeterminate-bar-secondary .progress-indeterminate{animation:secondary-indeterminate-scale 2s infinite linear;animation-play-state:inherit}.buffer-circles{background-image:radial-gradient(ellipse at center, var(--buffer-background) 0%, var(--buffer-background) 30%, transparent 30%);background-repeat:repeat-x;background-position:5px center;background-size:10px 10px;z-index:0;animation:buffering 450ms infinite linear}:host(.progress-bar-reversed){transform:scaleX(-1)}:host(.progress-paused) .indeterminate-bar-secondary,:host(.progress-paused) .indeterminate-bar-primary,:host(.progress-paused) .buffer-circles{animation-play-state:paused}:host(.ion-color) .progress-buffer-bar{background:rgba(var(--ion-color-base-rgb), 0.3)}:host(.ion-color) .buffer-circles{background-image:radial-gradient(ellipse at center, rgba(var(--ion-color-base-rgb), 0.3) 0%, rgba(var(--ion-color-base-rgb), 0.3) 30%, transparent 30%)}:host(.ion-color) .progress,:host(.ion-color) .progress-indeterminate{background:var(--ion-color-base)}@keyframes primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes buffering{to{transform:translateX(-10px)}}:host{height:4px}"};const Gn=class{constructor(i){t(this,i),this.ionStyle=n(this,"ionStyle",7),this.ionFocus=n(this,"ionFocus",7),this.ionBlur=n(this,"ionBlur",7),this.inputId="ion-rb-"+Hn++,this.radioGroup=null,this.checked=!1,this.buttonTabindex=-1,this.name=this.inputId,this.disabled=!1,this.updateState=()=>{this.radioGroup&&(this.checked=this.radioGroup.value===this.value)},this.onClick=()=>{this.checked=this.nativeInput.checked},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()}}async setFocus(t){t.stopPropagation(),t.preventDefault(),this.el.focus()}async setButtonTabindex(t){this.buttonTabindex=t}connectedCallback(){void 0===this.value&&(this.value=this.inputId);const t=this.radioGroup=this.el.closest("ion-radio-group");t&&(this.updateState(),H(t,"ionChange",this.updateState))}disconnectedCallback(){const t=this.radioGroup;t&&(Y(t,"ionChange",this.updateState),this.radioGroup=null)}componentWillLoad(){this.emitStyle()}emitStyle(){this.ionStyle.emit({"radio-checked":this.checked,"interactive-disabled":this.disabled})}render(){const{inputId:t,disabled:n,checked:i,color:o,el:r,buttonTabindex:l}=this,a=g(this),{label:u,labelId:c,labelText:h}=U(r,t);return e(s,{"aria-checked":`${i}`,"aria-hidden":n?"true":null,"aria-labelledby":u?c:null,role:"radio",tabindex:l,onFocus:this.onFocus,onBlur:this.onBlur,onClick:this.onClick,class:M(o,{[a]:!0,"in-item":L("ion-item",r),interactive:!0,"radio-checked":i,"radio-disabled":n})},e("div",{class:"radio-icon",part:"container"},e("div",{class:"radio-inner",part:"mark"}),e("div",{class:"radio-ripple"})),e("label",{htmlFor:t},h),e("input",{type:"radio",checked:i,disabled:n,tabindex:"-1",id:t,ref:t=>this.nativeInput=t}))}get el(){return o(this)}static get watchers(){return{color:["emitStyle"],checked:["emitStyle"],disabled:["emitStyle"]}}};let Hn=0;Gn.style={ios:':host{--inner-border-radius:50%;display:inline-block;position:relative;box-sizing:border-box;user-select:none;z-index:2}:host(.radio-disabled){pointer-events:none}.radio-icon{display:flex;align-items:center;justify-content:center;width:100%;height:100%;contain:layout size style}.radio-icon,.radio-inner{box-sizing:border-box}label{left:0;top:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;position:absolute;width:100%;height:100%;border:0;background:transparent;cursor:pointer;appearance:none;outline:none;display:flex;align-items:center;opacity:0}[dir=rtl] label,:host-context([dir=rtl]) label{left:unset;right:unset;right:0}label::-moz-focus-inner{border:0}input{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}:host(:focus){outline:none}:host{--color-checked:var(--ion-color-primary, #3880ff);width:15px;height:24px}:host(.ion-color.radio-checked) .radio-inner{border-color:var(--ion-color-base)}.item-radio.item-ios ion-label{margin-left:0}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){.item-radio.item-ios ion-label{margin-left:unset;-webkit-margin-start:0;margin-inline-start:0}}.radio-inner{width:33%;height:50%}:host(.radio-checked) .radio-inner{transform:rotate(45deg);border-width:2px;border-top-width:0;border-left-width:0;border-style:solid;border-color:var(--color-checked)}:host(.radio-disabled){opacity:0.3}:host(.ion-focused) .radio-icon::after{border-radius:var(--inner-border-radius);left:-9px;top:-8px;display:block;position:absolute;width:36px;height:36px;background:var(--ion-color-primary-tint, #4c8dff);content:"";opacity:0.2}:host-context([dir=rtl]):host(.ion-focused) .radio-icon::after,:host-context([dir=rtl]).ion-focused .radio-icon::after{left:unset;right:unset;right:-9px}:host(.in-item){margin-left:10px;margin-right:11px;margin-top:8px;margin-bottom:8px;display:block;position:static}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host(.in-item){margin-left:unset;margin-right:unset;-webkit-margin-start:10px;margin-inline-start:10px;-webkit-margin-end:11px;margin-inline-end:11px}}:host(.in-item[slot=start]){margin-left:3px;margin-right:21px;margin-top:8px;margin-bottom:8px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host(.in-item[slot=start]){margin-left:unset;margin-right:unset;-webkit-margin-start:3px;margin-inline-start:3px;-webkit-margin-end:21px;margin-inline-end:21px}}',md:':host{--inner-border-radius:50%;display:inline-block;position:relative;box-sizing:border-box;user-select:none;z-index:2}:host(.radio-disabled){pointer-events:none}.radio-icon{display:flex;align-items:center;justify-content:center;width:100%;height:100%;contain:layout size style}.radio-icon,.radio-inner{box-sizing:border-box}label{left:0;top:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;position:absolute;width:100%;height:100%;border:0;background:transparent;cursor:pointer;appearance:none;outline:none;display:flex;align-items:center;opacity:0}[dir=rtl] label,:host-context([dir=rtl]) label{left:unset;right:unset;right:0}label::-moz-focus-inner{border:0}input{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}:host(:focus){outline:none}:host{--color:var(--ion-color-step-400, #999999);--color-checked:var(--ion-color-primary, #3880ff);--border-width:2px;--border-style:solid;--border-radius:50%;width:20px;height:20px}:host(.ion-color) .radio-inner{background:var(--ion-color-base)}:host(.ion-color.radio-checked) .radio-icon{border-color:var(--ion-color-base)}.radio-icon{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;border-radius:var(--border-radius);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--color)}.radio-inner{border-radius:var(--inner-border-radius);width:calc(50% + var(--border-width));height:calc(50% + var(--border-width));transform:scale3d(0, 0, 0);transition:transform 280ms cubic-bezier(0.4, 0, 0.2, 1);background:var(--color-checked)}:host(.radio-checked) .radio-icon{border-color:var(--color-checked)}:host(.radio-checked) .radio-inner{transform:scale3d(1, 1, 1)}:host(.radio-disabled){opacity:0.3}:host(.ion-focused) .radio-icon::after{border-radius:var(--inner-border-radius);left:-12px;top:-12px;display:block;position:absolute;width:36px;height:36px;background:var(--ion-color-primary-tint, #4c8dff);content:"";opacity:0.2}:host-context([dir=rtl]):host(.ion-focused) .radio-icon::after,:host-context([dir=rtl]).ion-focused .radio-icon::after{left:unset;right:unset;right:-12px}:host(.in-item){margin-left:0;margin-right:0;margin-top:9px;margin-bottom:9px;display:block;position:static}:host(.in-item[slot=start]){margin-left:4px;margin-right:36px;margin-top:11px;margin-bottom:10px}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host(.in-item[slot=start]){margin-left:unset;margin-right:unset;-webkit-margin-start:4px;margin-inline-start:4px;-webkit-margin-end:36px;margin-inline-end:36px}}'};const Xn=class{constructor(i){t(this,i),this.ionChange=n(this,"ionChange",7),this.inputId="ion-rg-"+Yn++,this.labelId=`${this.inputId}-lbl`,this.allowEmptySelection=!1,this.name=this.inputId,this.setRadioTabindex=t=>{const n=this.getRadios(),i=n.find((t=>!t.disabled)),e=n.find((n=>n.value===t&&!n.disabled));if(!i&&!e)return;const o=e||i;for(const t of n)t.setButtonTabindex(t===o?0:-1)},this.onClick=t=>{t.preventDefault();const n=t.target&&t.target.closest("ion-radio");if(n){const t=n.value;t!==this.value?this.value=t:this.allowEmptySelection&&(this.value=void 0)}}}valueChanged(t){this.setRadioTabindex(t),this.ionChange.emit({value:t})}componentDidLoad(){this.setRadioTabindex(this.value)}async connectedCallback(){const t=this.el.querySelector("ion-list-header")||this.el.querySelector("ion-item-divider");if(t){const n=this.label=t.querySelector("ion-label");n&&(this.labelId=n.id=this.name+"-lbl")}}getRadios(){return Array.from(this.el.querySelectorAll("ion-radio"))}onKeydown(t){const n=!!this.el.closest("ion-select-popover");if(t.target&&!this.el.contains(t.target))return;const i=this.getRadios().filter((t=>!t.disabled));if(t.target&&i.includes(t.target)){const e=i.findIndex((n=>n===t.target)),o=i[e];let r;["ArrowDown","ArrowRight"].includes(t.code)&&(r=e===i.length-1?i[0]:i[e+1]),["ArrowUp","ArrowLeft"].includes(t.code)&&(r=0===e?i[i.length-1]:i[e-1]),r&&i.includes(r)&&(r.setFocus(t),n||(this.value=r.value)),["Space"].includes(t.code)&&(this.value=this.allowEmptySelection&&void 0!==this.value?void 0:o.value,t.preventDefault())}}render(){const{label:t,labelId:n}=this,i=g(this);return e(s,{role:"radiogroup","aria-labelledby":t?n:null,onClick:this.onClick,class:i})}get el(){return o(this)}static get watchers(){return{value:["valueChanged"]}}};let Yn=0;const Jn=class{constructor(n){t(this,n),this.type="bounded"}async addRipple(t,n){return new Promise((i=>{a((()=>{const e=this.el.getBoundingClientRect(),o=e.width,r=e.height,s=Math.sqrt(o*o+r*r),a=Math.max(r,o),u=this.unbounded?a:s+Zn,c=Math.floor(a*ti),h=u/c;let d=t-e.left,f=n-e.top;this.unbounded&&(d=.5*o,f=.5*r);const p=d-.5*c,g=f-.5*c,m=.5*o-d,b=.5*r-f;l((()=>{const t=document.createElement("div");t.classList.add("ripple-effect");const n=t.style;n.top=g+"px",n.left=p+"px",n.width=n.height=c+"px",n.setProperty("--final-scale",`${h}`),n.setProperty("--translate-end",`${m}px, ${b}px`),(this.el.shadowRoot||this.el).appendChild(t),setTimeout((()=>{i((()=>{Qn(t)}))}),325)}))}))}))}get unbounded(){return"unbounded"===this.type}render(){const t=g(this);return e(s,{role:"presentation",class:{[t]:!0,unbounded:this.unbounded}})}get el(){return o(this)}},Qn=t=>{t.classList.add("fade-out"),setTimeout((()=>{t.remove()}),200)},Zn=10,ti=.5;Jn.style=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:strict;pointer-events:none}:host(.unbounded){contain:layout size style}.ripple-effect{border-radius:50%;position:absolute;background-color:currentColor;color:inherit;contain:strict;opacity:0;animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;will-change:transform, opacity;pointer-events:none}.fade-out{transform:translate(var(--translate-end)) scale(var(--final-scale, 1));animation:150ms fadeOutAnimation forwards}@keyframes rippleAnimation{from{animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transform:scale(1)}to{transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@keyframes fadeInAnimation{from{animation-timing-function:linear;opacity:0}to{opacity:0.16}}@keyframes fadeOutAnimation{from{animation-timing-function:linear;opacity:0.16}to{opacity:0}}";const ni=class{constructor(n){t(this,n)}render(){return e(s,{class:g(this)},e("slot",null))}};ni.style=":host{display:flex;flex-wrap:wrap}";
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */
const ii=(t,n)=>{if(1===t.nodeType)return(t.tagName===n.toUpperCase()?[t]:Array.from(t.querySelectorAll(n))).find((n=>n.value===t.value))},ei=class{constructor(i){t(this,i),this.ionChange=n(this,"ionChange",7),this.ionCancel=n(this,"ionCancel",7),this.ionDismiss=n(this,"ionDismiss",7),this.ionFocus=n(this,"ionFocus",7),this.ionBlur=n(this,"ionBlur",7),this.ionStyle=n(this,"ionStyle",7),this.inputId="ion-sel-"+ci++,this.didInit=!1,this.isExpanded=!1,this.disabled=!1,this.cancelText="Cancel",this.okText="OK",this.name=this.inputId,this.multiple=!1,this.interface="alert",this.interfaceOptions={},this.onClick=t=>{this.setFocus(),this.open(t)},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()}}styleChanged(){this.emitStyle()}valueChanged(){this.emitStyle(),this.didInit&&this.ionChange.emit({value:this.value})}async connectedCallback(){this.updateOverlayOptions(),this.emitStyle(),this.mutationO=((t,n,i)=>{if("undefined"==typeof MutationObserver)return;const e=new MutationObserver((t=>{i(((t,n)=>{let i;t.forEach((t=>{for(let e=0;e<t.addedNodes.length;e++)i=ii(t.addedNodes[e],n)||i}))})(t,"ion-select-option"))}));return e.observe(t,{childList:!0,subtree:!0}),e})(this.el,0,(async()=>{this.updateOverlayOptions()}))}disconnectedCallback(){this.mutationO&&(this.mutationO.disconnect(),this.mutationO=void 0)}componentDidLoad(){this.didInit=!0}async open(t){if(this.disabled||this.isExpanded)return;const n=this.overlay=await this.createOverlay(t);if(this.isExpanded=!0,n.onDidDismiss().then((()=>{this.overlay=void 0,this.isExpanded=!1,this.ionDismiss.emit(),this.setFocus()})),await n.present(),"popover"===this.interface){let t=this.childOpts.map((t=>t.value)).indexOf(this.value);t=t>-1?t:0;const i=n.querySelector(`.select-interface-option:nth-child(${t+1})`);i&&J(i)}return n}createOverlay(t){let n=this.interface;return"action-sheet"===n&&this.multiple&&(console.warn(`Select interface cannot be "${n}" with a multi-value select. Using the "alert" interface instead.`),n="alert"),"popover"!==n||t||(console.warn(`Select interface cannot be a "${n}" without passing an event. Using the "alert" interface instead.`),n="alert"),"action-sheet"===n?this.openActionSheet():"popover"===n?this.openPopover(t):this.openAlert()}updateOverlayOptions(){const t=this.overlay;if(!t)return;const n=this.childOpts,i=this.value;switch(this.interface){case"action-sheet":t.buttons=this.createActionSheetButtons(n,i);break;case"popover":const e=t.querySelector("ion-select-popover");e&&(e.options=this.createPopoverOptions(n,i));break;case"alert":t.inputs=this.createAlertInputs(n,this.multiple?"checkbox":"radio",i)}}createActionSheetButtons(t,n){const i=t.map((t=>{const i=ri(t),e=Array.from(t.classList).filter((t=>"hydrated"!==t)).join(" "),o=`${hi} ${e}`;return{role:oi(n,i,this.compareWith)?"selected":"",text:t.textContent,cssClass:o,handler:()=>{this.value=i}}}));return i.push({text:this.cancelText,role:"cancel",handler:()=>{this.ionCancel.emit()}}),i}createAlertInputs(t,n,i){return t.map((t=>{const e=ri(t),o=Array.from(t.classList).filter((t=>"hydrated"!==t)).join(" ");return{type:n,cssClass:`${hi} ${o}`,label:t.textContent||"",value:e,checked:oi(i,e,this.compareWith),disabled:t.disabled}}))}createPopoverOptions(t,n){return t.map((t=>{const i=ri(t),e=Array.from(t.classList).filter((t=>"hydrated"!==t)).join(" ");return{text:t.textContent||"",cssClass:`${hi} ${e}`,value:i,checked:oi(n,i,this.compareWith),disabled:t.disabled,handler:t=>{this.value=t,this.multiple||this.close()}}}))}async openPopover(t){const n=this.interfaceOptions,i=g(this),e="md"!==i,o=this.multiple,r=this.value;let s=t,l="auto";const a=this.el.closest("ion-item");a&&(a.classList.contains("item-label-floating")||a.classList.contains("item-label-stacked"))&&(s=Object.assign(Object.assign({},t),{detail:{ionShadowTarget:a}}),l="cover");const u=Object.assign(Object.assign({mode:i,event:s,alignment:"center",size:l,showBackdrop:e},n),{component:"ion-select-popover",cssClass:["select-popover",n.cssClass],componentProps:{header:n.header,subHeader:n.subHeader,message:n.message,multiple:o,value:r,options:this.createPopoverOptions(this.childOpts,r)}});return D.create(u)}async openActionSheet(){const t=g(this),n=this.interfaceOptions,i=Object.assign(Object.assign({mode:t},n),{buttons:this.createActionSheetButtons(this.childOpts,this.value),cssClass:["select-action-sheet",n.cssClass]});return N.create(i)}async openAlert(){const t=this.getLabel(),n=t?t.textContent:null,i=this.interfaceOptions,e=this.multiple?"checkbox":"radio",o=g(this),r=Object.assign(Object.assign({mode:o},i),{header:i.header?i.header:n,inputs:this.createAlertInputs(this.childOpts,e,this.value),buttons:[{text:this.cancelText,role:"cancel",handler:()=>{this.ionCancel.emit()}},{text:this.okText,handler:t=>{this.value=t}}],cssClass:["select-alert",i.cssClass,this.multiple?"multiple-select-alert":"single-select-alert"]});return O.create(r)}close(){return this.overlay?this.overlay.dismiss():Promise.resolve(!1)}getLabel(){return K(this.el)}hasValue(){return""!==this.getText()}get childOpts(){return Array.from(this.el.querySelectorAll("ion-select-option"))}getText(){const t=this.selectedText;return null!=t&&""!==t?t:ai(this.childOpts,this.value,this.compareWith)}setFocus(){this.focusEl&&this.focusEl.focus()}emitStyle(){this.ionStyle.emit({interactive:!0,"interactive-disabled":this.disabled,select:!0,"select-disabled":this.disabled,"has-placeholder":void 0!==this.placeholder,"has-value":this.hasValue(),"has-focus":this.isExpanded})}render(){const{disabled:t,el:n,inputId:i,isExpanded:o,name:r,placeholder:l,value:a}=this,u=g(this),{labelText:c,labelId:h}=U(n,i);B(!0,n,r,si(a),t);let d=!1,f=this.getText();""===f&&void 0!==l&&(f=l,d=!0);const p={"select-text":!0,"select-placeholder":d},m=d?"placeholder":"text",b=void 0!==c?""!==f?`${f}, ${c}`:c:f;return e(s,{onClick:this.onClick,role:"button","aria-haspopup":"listbox","aria-disabled":t?"true":null,"aria-label":b,class:{[u]:!0,"in-item":L("ion-item",n),"select-disabled":t,"select-expanded":o}},e("div",{"aria-hidden":"true",class:p,part:m},f),e("div",{class:"select-icon",role:"presentation",part:"icon"},e("div",{class:"select-icon-inner"})),e("label",{id:h},b),e("button",{type:"button",disabled:t,id:i,"aria-labelledby":h,"aria-haspopup":"listbox","aria-expanded":`${o}`,onFocus:this.onFocus,onBlur:this.onBlur,ref:t=>this.focusEl=t}))}get el(){return o(this)}static get watchers(){return{disabled:["styleChanged"],placeholder:["styleChanged"],isExpanded:["styleChanged"],value:["valueChanged"]}}},oi=(t,n,i)=>void 0!==t&&(Array.isArray(t)?t.some((t=>li(t,n,i))):li(t,n,i)),ri=t=>{const n=t.value;return void 0===n?t.textContent||"":n},si=t=>{if(null!=t)return Array.isArray(t)?t.join(","):t.toString()},li=(t,n,i)=>"function"==typeof i?i(t,n):"string"==typeof i?t[i]===n[i]:Array.isArray(n)?n.includes(t):t===n,ai=(t,n,i)=>void 0===n?"":Array.isArray(n)?n.map((n=>ui(t,n,i))).filter((t=>null!==t)).join(", "):ui(t,n,i)||"",ui=(t,n,i)=>{const e=t.find((t=>li(ri(t),n,i)));return e?e.textContent:null};let ci=0;const hi="select-interface-option";ei.style={ios:":host{--placeholder-color:currentColor;--placeholder-opacity:0.33;padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:flex;position:relative;align-items:center;font-family:var(--ion-font-family, inherit);overflow:hidden;z-index:2}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}:host(.in-item){position:static;max-width:45%}:host(.select-disabled){opacity:0.4;pointer-events:none}:host(.ion-focused) button{border:2px solid #5e9ed6}.select-placeholder{color:var(--placeholder-color);opacity:var(--placeholder-opacity)}label{left:0;top:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;position:absolute;width:100%;height:100%;border:0;background:transparent;cursor:pointer;appearance:none;outline:none;display:flex;align-items:center;opacity:0}[dir=rtl] label,:host-context([dir=rtl]) label{left:unset;right:unset;right:0}label::-moz-focus-inner{border:0}button{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}.select-icon{position:relative}.select-text{flex:1;min-width:16px;font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.select-icon-inner{left:5px;top:50%;margin-top:-2px;position:absolute;width:0;height:0;border-top:5px solid;border-right:5px solid transparent;border-left:5px solid transparent;color:currentColor;pointer-events:none}[dir=rtl] .select-icon-inner,:host-context([dir=rtl]) .select-icon-inner{left:unset;right:unset;right:5px}:host{--padding-top:10px;--padding-end:10px;--padding-bottom:10px;--padding-start:20px}.select-icon{width:12px;height:18px;opacity:0.33}",md:":host{--placeholder-color:currentColor;--placeholder-opacity:0.33;padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:flex;position:relative;align-items:center;font-family:var(--ion-font-family, inherit);overflow:hidden;z-index:2}@supports (margin-inline-start: 0) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}:host(.in-item){position:static;max-width:45%}:host(.select-disabled){opacity:0.4;pointer-events:none}:host(.ion-focused) button{border:2px solid #5e9ed6}.select-placeholder{color:var(--placeholder-color);opacity:var(--placeholder-opacity)}label{left:0;top:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;position:absolute;width:100%;height:100%;border:0;background:transparent;cursor:pointer;appearance:none;outline:none;display:flex;align-items:center;opacity:0}[dir=rtl] label,:host-context([dir=rtl]) label{left:unset;right:unset;right:0}label::-moz-focus-inner{border:0}button{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}.select-icon{position:relative}.select-text{flex:1;min-width:16px;font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.select-icon-inner{left:5px;top:50%;margin-top:-2px;position:absolute;width:0;height:0;border-top:5px solid;border-right:5px solid transparent;border-left:5px solid transparent;color:currentColor;pointer-events:none}[dir=rtl] .select-icon-inner,:host-context([dir=rtl]) .select-icon-inner{left:unset;right:unset;right:5px}:host{--padding-top:10px;--padding-end:0;--padding-bottom:10px;--padding-start:16px}.select-icon{width:19px;height:19px;transition:transform 0.15s cubic-bezier(0.4, 0, 0.2, 1);opacity:0.55}:host-context(.item-label-stacked) .select-icon,:host-context(.item-label-floating:not(.item-fill-outline)) .select-icon,:host-context(.item-label-floating.item-fill-outline){transform:translate3d(0,  -9px,  0)}:host-context(.item-has-focus) .select-icon{transform:rotate(180deg)}:host-context(.item-has-focus.item-label-stacked) .select-icon,:host-context(.item-has-focus.item-label-floating:not(.item-fill-outline)) .select-icon{transform:translate3d(0,  -9px,  0) rotate(180deg)}:host-context(ion-item.ion-focused) .select-icon,:host-context(.item-has-focus) .select-icon{color:var(--highlight-color-focused);opacity:1}"};const di=class{constructor(n){t(this,n),this.inputId="ion-selopt-"+fi++,this.disabled=!1}render(){return e(s,{role:"option",id:this.inputId,class:g(this)})}get el(){return o(this)}};let fi=0;di.style=":host{display:none}";const pi=class{constructor(n){t(this,n),this.options=[]}onSelect(t){this.setChecked(t),this.callOptionHandler(t)}findOptionFromEvent(t){const{options:n}=this;return n.find((n=>n.value===t.target.value))}callOptionHandler(t){const n=this.findOptionFromEvent(t),i=this.getValues(t);(null==n?void 0:n.handler)&&C(n.handler,i)}rbClick(t){this.callOptionHandler(t)}setChecked(t){const{multiple:n}=this,i=this.findOptionFromEvent(t);n&&i&&(i.checked=t.detail.checked)}getValues(t){const{multiple:n,options:i}=this;if(n)return i.filter((t=>t.checked)).map((t=>t.value));const e=this.findOptionFromEvent(t);return e?e.value:void 0}renderOptions(t){const{multiple:n}=this;switch(n){case!0:return this.renderCheckboxOptions(t);default:return this.renderRadioOptions(t)}}renderCheckboxOptions(t){return t.map((t=>e("ion-item",{class:P(t.cssClass)},e("ion-checkbox",{slot:"start",value:t.value,disabled:t.disabled,checked:t.checked}),e("ion-label",null,t.text))))}renderRadioOptions(t){const n=t.filter((t=>t.checked)).map((t=>t.value))[0];return e("ion-radio-group",{value:n},t.map((t=>e("ion-item",{class:P(t.cssClass)},e("ion-label",null,t.text),e("ion-radio",{value:t.value,disabled:t.disabled,onClick:t=>this.rbClick(t)})))))}render(){const{header:t,message:n,options:i,subHeader:o}=this,r=void 0!==o||void 0!==n;return e(s,{class:g(this)},e("ion-list",null,void 0!==t&&e("ion-list-header",null,t),r&&e("ion-item",null,e("ion-label",{class:"ion-text-wrap"},void 0!==o&&e("h3",null,o),void 0!==n&&e("p",null,n))),this.renderOptions(i)))}};pi.style={ios:".sc-ion-select-popover-ios-h ion-list.sc-ion-select-popover-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}ion-list-header.sc-ion-select-popover-ios,ion-label.sc-ion-select-popover-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}",md:".sc-ion-select-popover-md-h ion-list.sc-ion-select-popover-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}ion-list-header.sc-ion-select-popover-md,ion-label.sc-ion-select-popover-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}ion-list.sc-ion-select-popover-md ion-radio.sc-ion-select-popover-md{opacity:0}ion-item.sc-ion-select-popover-md{--inner-border-width:0}.item-radio-checked.sc-ion-select-popover-md{--background:rgba(var(--ion-color-primary-rgb, 56, 128, 255), 0.08);--background-focused:var(--ion-color-primary, #3880ff);--background-focused-opacity:0.2;--background-hover:var(--ion-color-primary, #3880ff);--background-hover-opacity:0.12}.item-checkbox-checked.sc-ion-select-popover-md{--background-activated:var(--ion-item-color, var(--ion-text-color, #000));--background-focused:var(--ion-item-color, var(--ion-text-color, #000));--background-hover:var(--ion-item-color, var(--ion-text-color, #000));--color:var(--ion-color-primary, #3880ff)}"};const gi=class{constructor(n){t(this,n)}render(){const t=g(this);return e(s,{class:M(this.color,{[t]:!0})},e("slot",null))}};gi.style=":host(.ion-color){color:var(--ion-color-base)}";var mi,bi=(mi=function(t,n){return(mi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(t,n)},function(t,n){function i(){this.constructor=t}mi(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),vi=new(function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.EVENTS={EVENT_NAME_ACTIVATED_APP:"fb_mobile_activate_app",EVENT_NAME_DEACTIVATED_APP:"fb_mobile_deactivate_app",EVENT_NAME_SESSION_INTERRUPTIONS:"fb_mobile_app_interruptions",EVENT_NAME_TIME_BETWEEN_SESSIONS:"fb_mobile_time_between_sessions",EVENT_NAME_COMPLETED_REGISTRATION:"fb_mobile_complete_registration",EVENT_NAME_VIEWED_CONTENT:"fb_mobile_content_view",EVENT_NAME_SEARCHED:"fb_mobile_search",EVENT_NAME_RATED:"fb_mobile_rate",EVENT_NAME_COMPLETED_TUTORIAL:"fb_mobile_tutorial_completion",EVENT_NAME_PUSH_TOKEN_OBTAINED:"fb_mobile_obtain_push_token",EVENT_NAME_ADDED_TO_CART:"fb_mobile_add_to_cart",EVENT_NAME_ADDED_TO_WISHLIST:"fb_mobile_add_to_wishlist",EVENT_NAME_INITIATED_CHECKOUT:"fb_mobile_initiated_checkout",EVENT_NAME_ADDED_PAYMENT_INFO:"fb_mobile_add_payment_info",EVENT_NAME_PURCHASED:"fb_mobile_purchase",EVENT_NAME_ACHIEVED_LEVEL:"fb_mobile_level_achieved",EVENT_NAME_UNLOCKED_ACHIEVEMENT:"fb_mobile_achievement_unlocked",EVENT_NAME_SPENT_CREDITS:"fb_mobile_spent_credits",EVENT_PARAM_CURRENCY:"fb_currency",EVENT_PARAM_REGISTRATION_METHOD:"fb_registration_method",EVENT_PARAM_CONTENT_TYPE:"fb_content_type",EVENT_PARAM_CONTENT_ID:"fb_content_id",EVENT_PARAM_SEARCH_STRING:"fb_search_string",EVENT_PARAM_SUCCESS:"fb_success",EVENT_PARAM_MAX_RATING_VALUE:"fb_max_rating_value",EVENT_PARAM_PAYMENT_INFO_AVAILABLE:"fb_payment_info_available",EVENT_PARAM_NUM_ITEMS:"fb_num_items",EVENT_PARAM_LEVEL:"fb_level",EVENT_PARAM_DESCRIPTION:"fb_description",EVENT_PARAM_SOURCE_APPLICATION:"fb_mobile_launch_source",EVENT_PARAM_VALUE_YES:"1",EVENT_PARAM_VALUE_NO:"0"},n}return bi(n,t),n.prototype.getApplicationId=function(){return h(this,"getApplicationId",{},arguments)},n.prototype.setApplicationId=function(t){return h(this,"setApplicationId",{},arguments)},n.prototype.getApplicationName=function(){return h(this,"getApplicationName",{},arguments)},n.prototype.setApplicationName=function(t){return h(this,"setApplicationName",{},arguments)},n.prototype.login=function(t){return h(this,"login",{},arguments)},n.prototype.loginWithLimitedTracking=function(t){return h(this,"loginWithLimitedTracking",{},arguments)},n.prototype.checkHasCorrectPermissions=function(t){return h(this,"checkHasCorrectPermissions",{},arguments)},n.prototype.isDataAccessExpired=function(){return h(this,"isDataAccessExpired",{},arguments)},n.prototype.reauthorizeDataAccess=function(){return h(this,"reauthorizeDataAccess",{},arguments)},n.prototype.logout=function(){return h(this,"logout",{},arguments)},n.prototype.getLoginStatus=function(){return h(this,"getLoginStatus",{},arguments)},n.prototype.getAccessToken=function(){return h(this,"getAccessToken",{},arguments)},n.prototype.getCurrentProfile=function(){return h(this,"getCurrentProfile",{},arguments)},n.prototype.showDialog=function(t){return h(this,"showDialog",{},arguments)},n.prototype.api=function(t,n,i){return h(this,"api",{},arguments)},n.prototype.logEvent=function(t,n,i){return h(this,"logEvent",{successIndex:3,errorIndex:4},arguments)},n.prototype.setAutoLogAppEventsEnabled=function(t){return h(this,"setAutoLogAppEventsEnabled",{successIndex:1,errorIndex:2},arguments)},n.prototype.setAdvertiserIDCollectionEnabled=function(t){return h(this,"setAdvertiserIDCollectionEnabled",{},arguments)},n.prototype.setAdvertiserTrackingEnabled=function(t){return h(this,"setAdvertiserTrackingEnabled",{},arguments)},n.prototype.logPurchase=function(t,n,i){return h(this,"logPurchase",{},arguments)},n.prototype.getDeferredApplink=function(){return h(this,"getDeferredApplink",{},arguments)},n.prototype.activateApp=function(){return h(this,"activateApp",{},arguments)},n.pluginName="Facebook",n.plugin="cordova-plugin-facebook-connect",n.pluginRef="facebookConnectPlugin",n.repo="https://github.com/cordova-plugin-facebook-connect/cordova-plugin-facebook-connect",n.install='ionic cordova plugin add cordova-plugin-facebook-connect --variable APP_ID="123456789" --variable APP_NAME="myApplication"',n.installVariables=["APP_ID","APP_NAME"],n.platforms=["Android","iOS","Browser"],n}(d)),wi=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){function e(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}}(),yi=new(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return wi(n,t),n.prototype.login=function(t){return h(this,"login",{successIndex:1,errorIndex:2},arguments)},n.prototype.trySilentLogin=function(t){return h(this,"trySilentLogin",{},arguments)},n.prototype.logout=function(){return h(this,"logout",{},arguments)},n.prototype.disconnect=function(){return h(this,"disconnect",{},arguments)},n.prototype.getSigningCertificateFingerprint=function(){return h(this,"getSigningCertificateFingerprint",{},arguments)},n.pluginName="GooglePlus",n.plugin="cordova-plugin-googleplus",n.pluginRef="window.plugins.googleplus",n.repo="https://github.com/EddyVerbruggen/cordova-plugin-googleplus",n.install="ionic cordova plugin add cordova-plugin-googleplus --variable REVERSED_CLIENT_ID=myreversedclientid",n.installVariables=["REVERSED_CLIENT_ID"],n.platforms=["Android","iOS"],n}(d)),xi=function(){var t=function(n,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(n,i)};return function(n,i){function e(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}}(),ki=new(function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return xi(n,t),n.prototype.login=function(){return h(this,"login",{},arguments)},n.prototype.logout=function(){return h(this,"logout",{},arguments)},n.prototype.showUser=function(){return h(this,"showUser",{},arguments)},n.pluginName="TwitterConnect",n.plugin="twitter-connect-plugin",n.pluginRef="TwitterConnect",n.repo="https://github.com/chroa/twitter-connect-plugin",n.install="ionic cordova plugin add https://github.com/chroa/twitter-connect-plugin --variable FABRIC_KEY=<Fabric API Key> --variable TWITTER_KEY=<Twitter Consumer Key> --variable TWITTER_SECRET=<Twitter Consumer Secret>",n.installVariables=["FABRIC_KEY","TWITTER_KEY","TWITTER_SECRET"],n.platforms=["Android","iOS"],n}(d));const Ii={env:"live",functionsHost:"https://us-central1-madness-club.cloudfunctions.net",firebase:{apiKey:"AIzaSyDBBrd_7ADcgZ4oaubnENC_d303MePtYLM",authDomain:"madness-club.firebaseapp.com",projectId:"madness-club",storageBucket:"madness-club.appspot.com",messagingSenderId:"875566401678",appId:"1:875566401678:web:3c68d3af2ab003df01e1df",measurementId:"G-K5X85CQLHL"},messaging:{vapidKey:"MY_VAPID_KEY"},stripe:{key:"pk_live_DDBgXdQrr1tK6U2FBpumxaoZ",clientId:"ca_D5I8vt9bsP7HxtFZT3vzC3mYTQe6uTRE"},url:"https://madness.club",dynamicLinkDomain:"madnessclub.page.link"};function _i(t,n){const i=t?t&&t.indexOf(".")>=0?t.split(".").reduce(((t,n)=>t&&t[n]||null),Ii):t&&void 0!==Ii[t]?Ii[t]:null:Ii;return n&&(!i&&!1!==i&&0!==i||null==i)?n:i}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei=function(t,n){if(!t)throw Ti(n)},Ti=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},Si=function(t){const n=[];let i=0;for(let e=0;e<t.length;e++){let o=t.charCodeAt(e);o<128?n[i++]=o:o<2048?(n[i++]=o>>6|192,n[i++]=63&o|128):55296==(64512&o)&&e+1<t.length&&56320==(64512&t.charCodeAt(e+1))?(o=65536+((1023&o)<<10)+(1023&t.charCodeAt(++e)),n[i++]=o>>18|240,n[i++]=o>>12&63|128,n[i++]=o>>6&63|128,n[i++]=63&o|128):(n[i++]=o>>12|224,n[i++]=o>>6&63|128,n[i++]=63&o|128)}return n},Ci={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,n){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=n?this.byteToCharMapWebSafe_:this.byteToCharMap_,e=[];for(let n=0;n<t.length;n+=3){const o=t[n],r=n+1<t.length,s=r?t[n+1]:0,l=n+2<t.length,a=l?t[n+2]:0;let u=(15&s)<<2|a>>6,c=63&a;l||(c=64,r||(u=64)),e.push(i[o>>2],i[(3&o)<<4|s>>4],i[u],i[c])}return e.join("")},encodeString(t,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(t):this.encodeByteArray(Si(t),n)},decodeString(t,n){return this.HAS_NATIVE_SUPPORT&&!n?atob(t):function(t){const n=[];let i=0,e=0;for(;i<t.length;){const o=t[i++];if(o<128)n[e++]=String.fromCharCode(o);else if(o>191&&o<224){const r=t[i++];n[e++]=String.fromCharCode((31&o)<<6|63&r)}else if(o>239&&o<365){const r=((7&o)<<18|(63&t[i++])<<12|(63&t[i++])<<6|63&t[i++])-65536;n[e++]=String.fromCharCode(55296+(r>>10)),n[e++]=String.fromCharCode(56320+(1023&r))}else{const r=t[i++],s=t[i++];n[e++]=String.fromCharCode((15&o)<<12|(63&r)<<6|63&s)}}return n.join("")}(this.decodeStringToByteArray(t,n))},decodeStringToByteArray(t,n){this.init_();const i=n?this.charToByteMapWebSafe_:this.charToByteMap_,e=[];for(let n=0;n<t.length;){const o=i[t.charAt(n++)],r=n<t.length?i[t.charAt(n)]:0;++n;const s=n<t.length?i[t.charAt(n)]:64;++n;const l=n<t.length?i[t.charAt(n)]:64;if(++n,null==o||null==r||null==s||null==l)throw Error();e.push(o<<2|r>>4),64!==s&&(e.push(r<<4&240|s>>2),64!==l&&e.push(s<<6&192|l))}return e},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Ai=function(t){const n=Si(t);return Ci.encodeByteArray(n,!0)},Di=function(t){return Ai(t).replace(/\./g,"")},Ni=function(t){try{return Ci.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Oi(t){return Pi(void 0,t)}function Pi(t,n){if(!(n instanceof Object))return n;switch(n.constructor){case Date:return new Date(n.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return n}for(const i in n)n.hasOwnProperty(i)&&"__proto__"!==i&&(t[i]=Pi(t[i],n[i]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ri{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(n):t(n,i))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Mi(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Li(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mi())}function $i(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function ji(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function zi(){const t=Mi();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Fi(){return"object"==typeof indexedDB}function Vi(){return new Promise(((t,n)=>{try{let i=!0;const e="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(e);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(e),t(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{var t;n((null===(t=o.error)||void 0===t?void 0:t.message)||"")}}catch(t){n(t)}}))}class Ui extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name="FirebaseError",Object.setPrototypeOf(this,Ui.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bi.prototype.create)}}class Bi{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},e=`${this.service}/${t}`,o=this.errors[t],r=o?function(t,n){return t.replace(qi,((t,i)=>{const e=n[i];return null!=e?String(e):`<${i}?>`}))}(o,i):"Error";return new Ui(e,`${this.serviceName}: ${r} (${e}).`,i)}}const qi=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(t){return JSON.parse(t)}function Wi(t){return JSON.stringify(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi=function(t){let n={},i={},e={},o="";try{const r=t.split(".");n=Ki(Ni(r[0])||""),i=Ki(Ni(r[1])||""),o=r[2],e=i.d||{},delete i.d}catch(t){}return{header:n,claims:i,data:e,signature:o}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Hi(t,n){return Object.prototype.hasOwnProperty.call(t,n)}function Xi(t,n){return Object.prototype.hasOwnProperty.call(t,n)?t[n]:void 0}function Yi(t){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n))return!1;return!0}function Ji(t,n,i){const e={};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=n.call(i,t[o],o,t));return e}function Qi(t,n){if(t===n)return!0;const i=Object.keys(t),e=Object.keys(n);for(const o of i){if(!e.includes(o))return!1;const i=t[o],r=n[o];if(Zi(i)&&Zi(r)){if(!Qi(i,r))return!1}else if(i!==r)return!1}for(const t of e)if(!i.includes(t))return!1;return!0}function Zi(t){return null!==t&&"object"==typeof t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t){const n=[];for(const[i,e]of Object.entries(t))Array.isArray(e)?e.forEach((t=>{n.push(encodeURIComponent(i)+"="+encodeURIComponent(t))})):n.push(encodeURIComponent(i)+"="+encodeURIComponent(e));return n.length?"&"+n.join("&"):""}function ne(t){const n={};return t.replace(/^\?/,"").split("&").forEach((t=>{if(t){const[i,e]=t.split("=");n[decodeURIComponent(i)]=decodeURIComponent(e)}})),n}function ie(t){const n=t.indexOf("?");if(!n)return"";const i=t.indexOf("#",n);return t.substring(n,i>0?i:void 0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);const i=this.W_;if("string"==typeof t)for(let e=0;e<16;e++)i[e]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let e=0;e<16;e++)i[e]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let t=16;t<80;t++){const n=i[t-3]^i[t-8]^i[t-14]^i[t-16];i[t]=4294967295&(n<<1|n>>>31)}let e,o,r=this.chain_[0],s=this.chain_[1],l=this.chain_[2],a=this.chain_[3],u=this.chain_[4];for(let t=0;t<80;t++){t<40?t<20?(e=a^s&(l^a),o=1518500249):(e=s^l^a,o=1859775393):t<60?(e=s&l|a&(s|l),o=2400959708):(e=s^l^a,o=3395469782);const n=(r<<5|r>>>27)+e+u+o+i[t]&4294967295;u=a,a=l,l=4294967295&(s<<30|s>>>2),s=r,r=n}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(t,n){if(null==t)return;void 0===n&&(n=t.length);const i=n-this.blockSize;let e=0;const o=this.buf_;let r=this.inbuf_;for(;e<n;){if(0===r)for(;e<=i;)this.compress_(t,e),e+=this.blockSize;if("string"==typeof t){for(;e<n;)if(o[r]=t.charCodeAt(e),++r,++e,r===this.blockSize){this.compress_(o),r=0;break}}else for(;e<n;)if(o[r]=t[e],++r,++e,r===this.blockSize){this.compress_(o),r=0;break}}this.inbuf_=r,this.total_+=n}digest(){const t=[];let n=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let t=this.blockSize-1;t>=56;t--)this.buf_[t]=255&n,n/=256;this.compress_(this.buf_);let i=0;for(let n=0;n<5;n++)for(let e=24;e>=0;e-=8)t[i]=this.chain_[n]>>e&255,++i;return t}}class oe{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((n=>{n.next(t)}))}error(t){this.forEachObserver((n=>{n.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,n,i){let e;if(void 0===t&&void 0===n&&void 0===i)throw new Error("Missing Observer.");e=function(t){if("object"!=typeof t||null===t)return!1;for(const n of["next","error","complete"])if(n in t&&"function"==typeof t[n])return!0;return!1}(t)?t:{next:t,error:n,complete:i},void 0===e.next&&(e.next=re),void 0===e.error&&(e.error=re),void 0===e.complete&&(e.complete=re);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?e.error(this.finalError):e.complete()}catch(t){}})),this.observers.push(e),o}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{n(this.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function re(){}function se(t,n){return`${t} failed: ${n} argument `}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le=function(t){let n=0;for(let i=0;i<t.length;i++){const e=t.charCodeAt(i);e<128?n++:e<2048?n+=2:e>=55296&&e<=56319?(n+=4,i++):n+=3}return n};
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ae(t){return t&&t._delegate?t._delegate:t}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(t,n){return new Promise(((i,e)=>{t.onsuccess=t=>{i(t.target.result)},t.onerror=t=>{var i;e(`${n}: ${null===(i=t.target.error)||void 0===i?void 0:i.message}`)}}))}class ce{constructor(t){this._db=t,this.objectStoreNames=this._db.objectStoreNames}transaction(t,n="readonly"){return new he(this._db.transaction.call(this._db,t,n))}createObjectStore(t,n){return new de(this._db.createObjectStore(t,n))}close(){this._db.close()}}class he{constructor(t){this._transaction=t,this.complete=new Promise(((t,n)=>{this._transaction.oncomplete=function(){t()},this._transaction.onerror=()=>{n(this._transaction.error)},this._transaction.onabort=()=>{n(this._transaction.error)}}))}objectStore(t){return new de(this._transaction.objectStore(t))}}class de{constructor(t){this._store=t}index(t){return new fe(this._store.index(t))}createIndex(t,n,i){return new fe(this._store.createIndex(t,n,i))}get(t){return ue(this._store.get(t),"Error reading from IndexedDB")}put(t,n){return ue(this._store.put(t,n),"Error writing to IndexedDB")}delete(t){return ue(this._store.delete(t),"Error deleting from IndexedDB")}clear(){return ue(this._store.clear(),"Error clearing IndexedDB object store")}}class fe{constructor(t){this._index=t}get(t){return ue(this._index.get(t),"Error reading from IndexedDB")}}function pe(t,n,i){return new Promise(((e,o)=>{try{const r=indexedDB.open(t,n);r.onsuccess=t=>{e(new ce(t.target.result))},r.onerror=t=>{var n;o(`Error opening indexedDB: ${null===(n=t.target.error)||void 0===n?void 0:n.message}`)},r.onupgradeneeded=t=>{i(new ce(r.result),t.oldVersion,t.newVersion,new he(r.transaction))}}catch(t){o(`Error opening indexedDB: ${t.message}`)}}))}async function ge(t){return new Promise(((n,i)=>{try{const e=indexedDB.deleteDatabase(t);e.onsuccess=()=>{n()},e.onerror=n=>{var e;i(`Error deleting indexedDB database "${t}": ${null===(e=n.target.error)||void 0===e?void 0:e.message}`)}}catch(n){i(`Error deleting indexedDB database "${t}": ${n.message}`)}}))}class me{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class be{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const t=new Ri;if(this.instancesDeferred.set(n,t),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&t.resolve(i)}catch(t){}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const i=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),e=null!==(n=null==t?void 0:t.optional)&&void 0!==n&&n;if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(t){if(e)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(t){}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:i});n.resolve(t)}catch(t){}}}}clearInstance(t="[DEFAULT]"){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t="[DEFAULT]"){return this.instances.has(t)}getOptions(t="[DEFAULT]"){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const e=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[t,n]of this.instancesDeferred.entries())i===this.normalizeInstanceIdentifier(t)&&n.resolve(e);return e}onInit(t,n){var i;const e=this.normalizeInstanceIdentifier(n),o=null!==(i=this.onInitCallbacks.get(e))&&void 0!==i?i:new Set;o.add(t),this.onInitCallbacks.set(e,o);const r=this.instances.get(e);return r&&t(r,e),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const e of i)try{e(t,n)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(e=t,"[DEFAULT]"===e?void 0:e),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(t){}var e;return i||null}normalizeInstanceIdentifier(t="[DEFAULT]"){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ve{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new be(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(we||(we={}));const ye={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},xe=we.INFO,ke={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},Ie=(t,n,...i)=>{if(n<t.logLevel)return;const e=(new Date).toISOString(),o=ke[n];if(!o)throw new Error(`Attempted to log a message with an invalid logType (value: ${n})`);console[o](`[${e}]  ${t.name}:`,...i)};class _e{constructor(t){this.name=t,this._logLevel=xe,this._logHandler=Ie,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in we))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?ye[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...t),this._logHandler(this,we.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...t),this._logHandler(this,we.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,we.INFO,...t),this._logHandler(this,we.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,we.WARN,...t),this._logHandler(this,we.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...t),this._logHandler(this,we.ERROR,...t)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const n=t.getComponent();return"VERSION"===(null==n?void 0:n.type)}(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}return null})).filter((t=>t)).join(" ")}}const Te="@firebase/app",Se=new _e("@firebase/app"),Ce={[Te]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ae=new Map,De=new Map;function Ne(t,n){try{t.container.addComponent(n)}catch(i){Se.debug(`Component ${n.name} failed to register with FirebaseApp ${t.name}`,i)}}function Oe(t){const n=t.name;if(De.has(n))return Se.debug(`There were multiple attempts to register component ${n}.`),!1;De.set(n,t);for(const n of Ae.values())Ne(n,t);return!0}function Pe(t,n){const i=t.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),t.container.getProvider(n)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Re=new Bi("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Me{constructor(t,n,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new me("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Re.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(t="[DEFAULT]"){const n=Ae.get(t);if(!n)throw Re.create("no-app",{appName:t});return n}function $e(t,n,i){var e;let o=null!==(e=Ce[t])&&void 0!==e?e:t;i&&(o+=`-${i}`);const r=o.match(/\s|\//),s=n.match(/\s|\//);if(r||s){const t=[`Unable to register library "${o}" with version "${n}":`];return r&&t.push(`library name "${o}" contains illegal characters (whitespace or "/")`),r&&s&&t.push("and"),s&&t.push(`version name "${n}" contains illegal characters (whitespace or "/")`),void Se.warn(t.join(" "))}Oe(new me(`${o}-version`,(()=>({library:o,version:n})),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const je="firebase-heartbeat-store";let ze=null;function Fe(){return ze||(ze=pe("firebase-heartbeat-database",1,((t,n)=>{switch(n){case 0:t.createObjectStore(je)}})).catch((t=>{throw Re.create("storage-open",{originalErrorMessage:t.message})}))),ze}async function Ve(t,n){try{const i=(await Fe()).transaction(je,"readwrite"),e=i.objectStore(je);return await e.put(n,Ue(t)),i.complete}catch(t){throw Re.create("storage-set",{originalErrorMessage:t.message})}}function Ue(t){return`${t.name}!${t.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ke(n),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=qe();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==n&&!this._heartbeatsCache.heartbeats.some((t=>t.date===n)))return this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const n=new Date(t.date).valueOf();return Date.now()-n<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const t=qe(),{heartbeatsToSend:n,unsentEntries:i}=function(t,n=1024){const i=[];let e=t.slice();for(const o of t){const t=i.find((t=>t.agent===o.agent));if(t){if(t.dates.push(o.date),We(i)>n){t.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),We(i)>n){i.pop();break}e=e.slice(1)}return{heartbeatsToSend:i,unsentEntries:e}}(this._heartbeatsCache.heartbeats),e=Di(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),e}}function qe(){return(new Date).toISOString().substring(0,10)}class Ke{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Fi()&&Vi().then((()=>!0)).catch((()=>!1))}async read(){return await this._canUseIndexedDBPromise&&await async function(t){try{return(await Fe()).transaction(je).objectStore(je).get(Ue(t))}catch(t){throw Re.create("storage-get",{originalErrorMessage:t.message})}}(this.app)||{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ve(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ve(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}}}function We(t){return Di(JSON.stringify({version:2,heartbeats:t})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function Ge(t,n){var i={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0&&(i[e]=t[e]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(e=Object.getOwnPropertySymbols(t);o<e.length;o++)n.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(t,e[o])&&(i[e[o]]=t[e[o]])}return i}Oe(new me("platform-logger",(t=>new Ee(t)),"PRIVATE")),Oe(new me("heartbeat",(t=>new Be(t)),"PRIVATE")),$e(Te,"0.7.21",""),$e(Te,"0.7.21","esm2017"),$e("fire-js",""),
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
$e("firebase","9.6.11","app");const He=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Xe=new Bi("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ye=new _e("@firebase/auth");function Je(t,...n){Ye.logLevel<=we.ERROR&&Ye.error(`Auth (9.6.11): ${t}`,...n)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(t,...n){throw io(t,...n)}function Ze(t,...n){return io(t,...n)}function to(t,n,i){const e=Object.assign(Object.assign({},He()),{[n]:i});return new Bi("auth","Firebase",e).create(n,{appName:t.name})}function no(t,n,i){if(!(n instanceof i))throw i.name!==n.constructor.name&&Qe(t,"argument-error"),to(t,"argument-error",`Type of ${n.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function io(t,...n){if("string"!=typeof t){const i=n[0],e=[...n.slice(1)];return e[0]&&(e[0].appName=t.name),t._errorFactory.create(i,...e)}return Xe.create(t,...n)}function eo(t,n,...i){if(!t)throw io(n,...i)}function oo(t){const n="INTERNAL ASSERTION FAILED: "+t;throw Je(n),new Error(n)}function ro(t,n){t||oo(n)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=new Map;function lo(t){ro(t instanceof Function,"Expected a class definition");let n=so.get(t);return n?(ro(n instanceof t,"Instance stored in cache mismatched with class"),n):(n=new t,so.set(t,n),n)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ao(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function uo(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class co{constructor(t,n){this.shortDelay=t,this.longDelay=n,ro(n>t,"Short delay should be less than long delay!"),this.isMobile=Li()||ji()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===uo()||"https:"===uo()||$i()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(t,n){ro(t.emulator,"Emulator should always be set here");const{url:i}=t.emulator;return n?`${i}${n.startsWith("/")?n.slice(1):n}`:i}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{static initialize(t,n,i){this.fetchImpl=t,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void oo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void oo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void oo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},go=new co(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(t,n){return t.tenantId&&!n.tenantId?Object.assign(Object.assign({},n),{tenantId:t.tenantId}):n}async function bo(t,n,i,e,o={}){return vo(t,o,(async()=>{let o={},r={};e&&("GET"===n?r=e:o={body:JSON.stringify(e)});const s=te(Object.assign({key:t.config.apiKey},r)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),fo.fetch()(yo(t,t.config.apiHost,i,s),Object.assign({method:n,headers:l,referrerPolicy:"no-referrer"},o))}))}async function vo(t,n,i){t._canInitEmulator=!1;const e=Object.assign(Object.assign({},po),n);try{const n=new xo(t),o=await Promise.race([i(),n.promise]);n.clearNetworkTimeout();const r=await o.json();if("needConfirmation"in r)throw ko(t,"account-exists-with-different-credential",r);if(o.ok&&!("errorMessage"in r))return r;{const n=o.ok?r.errorMessage:r.error.message,[i,s]=n.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===i)throw ko(t,"credential-already-in-use",r);if("EMAIL_EXISTS"===i)throw ko(t,"email-already-in-use",r);const l=e[i]||i.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw to(t,l,s);Qe(t,l)}}catch(n){if(n instanceof Ui)throw n;Qe(t,"network-request-failed")}}async function wo(t,n,i,e,o={}){const r=await bo(t,n,i,e,o);return"mfaPendingCredential"in r&&Qe(t,"multi-factor-auth-required",{_serverResponse:r}),r}function yo(t,n,i,e){const o=`${n}${i}?${e}`;return t.config.emulator?ho(t.config,o):`${t.config.apiScheme}://${o}`}class xo{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,n)=>{this.timer=setTimeout((()=>n(Ze(this.auth,"network-request-failed"))),go.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function ko(t,n,i){const e={appName:t.name};i.email&&(e.email=i.email),i.phoneNumber&&(e.phoneNumber=i.phoneNumber);const o=Ze(t,n,e);return o.customData._tokenResponse=i,o}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Io(t){if(t)try{const n=new Date(Number(t));if(!isNaN(n.getTime()))return n.toUTCString()}catch(t){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _o(t,n=!1){return ae(t).getIdToken(n)}async function Eo(t,n=!1){const i=ae(t),e=await i.getIdToken(n),o=So(e);eo(o&&o.exp&&o.auth_time&&o.iat,i.auth,"internal-error");const r="object"==typeof o.firebase?o.firebase:void 0,s=null==r?void 0:r.sign_in_provider;return{claims:o,token:e,authTime:Io(To(o.auth_time)),issuedAtTime:Io(To(o.iat)),expirationTime:Io(To(o.exp)),signInProvider:s||null,signInSecondFactor:(null==r?void 0:r.sign_in_second_factor)||null}}function To(t){return 1e3*Number(t)}function So(t){const[n,i,e]=t.split(".");if(void 0===n||void 0===i||void 0===e)return Je("JWT malformed, contained fewer than 3 sections"),null;try{const t=Ni(i);return t?JSON.parse(t):(Je("Failed to decode base64 JWT payload"),null)}catch(t){return Je("Caught error parsing JWT payload as JSON",t),null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Co(t,n,i=!1){if(i)return n;try{return await n}catch(n){throw n instanceof Ui&&function({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}class Ao{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t.code&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Io(this.lastLoginAt),this.creationTime=Io(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(t){var n;const i=t.auth,e=await t.getIdToken(),o=await Co(t,async function(t,n){return bo(t,"POST","/v1/accounts:lookup",n)}(i,{idToken:e}));eo(null==o?void 0:o.users.length,i,"internal-error");const r=o.users[0];t._notifyReloadListener(r);const s=(null===(n=r.providerUserInfo)||void 0===n?void 0:n.length)?r.providerUserInfo.map((t=>{var{providerId:n}=t,i=Ge(t,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})):[],l=(a=s,[...t.providerData.filter((t=>!a.some((n=>n.providerId===t.providerId)))),...a]);var a;const u=!!t.isAnonymous&&!(t.email&&r.passwordHash||(null==l?void 0:l.length)),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new Do(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,c)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Oo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){eo(t.idToken,"internal-error"),eo(void 0!==t.idToken,"internal-error"),eo(void 0!==t.refreshToken,"internal-error");const n="expiresIn"in t&&void 0!==t.expiresIn?Number(t.expiresIn):function(t){const n=So(t);return eo(n,"internal-error"),eo(void 0!==n.exp,"internal-error"),eo(void 0!==n.iat,"internal-error"),Number(n.exp)-Number(n.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}async getToken(t,n=!1){return eo(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:i,refreshToken:e,expiresIn:o}=await
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(t,n){const i=await vo(t,{},(async()=>{const i=te({grant_type:"refresh_token",refresh_token:n}).slice(1),{tokenApiHost:e,apiKey:o}=t.config,r=yo(t,e,"/v1/token",`key=${o}`),s=await t._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",fo.fetch()(r,{method:"POST",headers:s,body:i})}));return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}(t,n);this.updateTokensAndExpiration(i,e,Number(o))}updateTokensAndExpiration(t,n,i){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*i}static fromJSON(t,n){const{refreshToken:i,accessToken:e,expirationTime:o}=n,r=new Oo;return i&&(eo("string"==typeof i,"internal-error",{appName:t}),r.refreshToken=i),e&&(eo("string"==typeof e,"internal-error",{appName:t}),r.accessToken=e),o&&(eo("number"==typeof o,"internal-error",{appName:t}),r.expirationTime=o),r}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Oo,this.toJSON())}_performRefresh(){return oo("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(t,n){eo("string"==typeof t||void 0===t,"internal-error",{appName:n})}class Ro{constructor(t){var{uid:n,auth:i,stsTokenManager:e}=t,o=Ge(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ao(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=e,this.accessToken=e.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Do(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const n=await Co(this,this.stsTokenManager.getToken(this.auth,t));return eo(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Eo(this,t)}reload(){return async function(t){const n=ae(t);await No(n),await n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)}(this)}_assign(t){this!==t&&(eo(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){return new Ro(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(t){eo(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),n&&await No(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await Co(this,async function(t,n){return bo(t,"POST","/v1/accounts:delete",n)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var i,e,o,r,s,l,a,u;const c=null!==(i=n.displayName)&&void 0!==i?i:void 0,h=null!==(e=n.email)&&void 0!==e?e:void 0,d=null!==(o=n.phoneNumber)&&void 0!==o?o:void 0,f=null!==(r=n.photoURL)&&void 0!==r?r:void 0,p=null!==(s=n.tenantId)&&void 0!==s?s:void 0,g=null!==(l=n._redirectEventId)&&void 0!==l?l:void 0,m=null!==(a=n.createdAt)&&void 0!==a?a:void 0,b=null!==(u=n.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:w,isAnonymous:y,providerData:x,stsTokenManager:k}=n;eo(v&&k,t,"internal-error");const I=Oo.fromJSON(this.name,k);eo("string"==typeof v,t,"internal-error"),Po(c,t.name),Po(h,t.name),eo("boolean"==typeof w,t,"internal-error"),eo("boolean"==typeof y,t,"internal-error"),Po(d,t.name),Po(f,t.name),Po(p,t.name),Po(g,t.name),Po(m,t.name),Po(b,t.name);const _=new Ro({uid:v,auth:t,email:h,emailVerified:w,displayName:c,isAnonymous:y,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:m,lastLoginAt:b});return x&&Array.isArray(x)&&(_.providerData=x.map((t=>Object.assign({},t)))),g&&(_._redirectEventId=g),_}static async _fromIdTokenResponse(t,n,i=!1){const e=new Oo;e.updateFromServerResponse(n);const o=new Ro({uid:n.localId,auth:t,stsTokenManager:e,isAnonymous:i});return await No(o),o}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return void 0===n?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}Mo.type="NONE";const Lo=Mo;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(t,n,i){return`firebase:${t}:${n}:${i}`}class jo{constructor(t,n,i){this.persistence=t,this.auth=n,this.userKey=i;const{config:e,name:o}=this.auth;this.fullUserKey=$o(this.userKey,e.apiKey,o),this.fullPersistenceKey=$o("persistence",e.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Ro._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,n?this.setCurrentUser(n):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,i="authUser"){if(!n.length)return new jo(lo(Lo),t,i);const e=(await Promise.all(n.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let o=e[0]||lo(Lo);const r=$o(i,t.config.apiKey,t.name);let s=null;for(const i of n)try{const n=await i._get(r);if(n){const e=Ro._fromJSON(t,n);i!==o&&(s=e),o=i;break}}catch(t){}const l=e.filter((t=>t._shouldAllowMigration));return o._shouldAllowMigration&&l.length?(o=l[0],s&&await o._set(r,s.toJSON()),await Promise.all(n.map((async t=>{if(t!==o)try{await t._remove(r)}catch(t){}}))),new jo(o,t,i)):new jo(o,t,i)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(t){const n=t.toLowerCase();if(n.includes("opera/")||n.includes("opr/")||n.includes("opios/"))return"Opera";if(Bo(n))return"IEMobile";if(n.includes("msie")||n.includes("trident/"))return"IE";if(n.includes("edge/"))return"Edge";if(Fo(n))return"Firefox";if(n.includes("silk/"))return"Silk";if(Ko(n))return"Blackberry";if(Wo(n))return"Webos";if(Vo(n))return"Safari";if((n.includes("chrome/")||Uo(n))&&!n.includes("edge/"))return"Chrome";if(qo(n))return"Android";{const n=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Fo(t=Mi()){return/firefox\//i.test(t)}function Vo(t=Mi()){const n=t.toLowerCase();return n.includes("safari/")&&!n.includes("chrome/")&&!n.includes("crios/")&&!n.includes("android")}function Uo(t=Mi()){return/crios\//i.test(t)}function Bo(t=Mi()){return/iemobile/i.test(t)}function qo(t=Mi()){return/android/i.test(t)}function Ko(t=Mi()){return/blackberry/i.test(t)}function Wo(t=Mi()){return/webos/i.test(t)}function Go(t=Mi()){return/iphone|ipad|ipod/i.test(t)}function Ho(t=Mi()){return Go(t)||qo(t)||Wo(t)||Ko(t)||/windows phone/i.test(t)||Bo(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Xo(t,n=[]){let i;switch(t){case"Browser":i=zo(Mi());break;case"Worker":i=`${zo(Mi())}-${t}`;break;default:i=t}return`${i}/JsCore/9.6.11/${n.length?n.join(","):"FirebaseCore-web"}`}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(t,n,i){this.app=t,this.heartbeatServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qo(this),this.idTokenSubscription=new Qo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Xe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=lo(n)),this._initializationPromise=this.queue((async()=>{var i,e;if(!this._deleted&&(this.persistenceManager=await jo.create(this,t),!this._deleted)){if(null===(i=this._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(t){}await this.initializeCurrentUser(n),this.lastNotifiedUid=(null===(e=this.currentUser)||void 0===e?void 0:e.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t):void 0}async initializeCurrentUser(t){var n;let i=await this.assertedPersistence.getCurrentUser();if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const e=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,o=null==i?void 0:i._redirectEventId,r=await this.tryRedirectSignIn(t);e&&e!==o||!(null==r?void 0:r.user)||(i=r.user)}return i?i._redirectEventId?(eo(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)):this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(t){await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await No(t)}catch(t){if("auth/network-request-failed"!==t.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const n=t?ae(t):null;return n&&eo(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t){if(!this._deleted)return t&&eo(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(t){return this.queue((async()=>{await this.assertedPersistence.setPersistence(lo(t))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Bi("auth","Firebase",t())}onAuthStateChanged(t,n,i){return this.registerStateListener(this.authStateSubscription,t,n,i)}onIdTokenChanged(t,n,i){return this.registerStateListener(this.idTokenSubscription,t,n,i)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,n){const i=await this.getOrInitRedirectPersistenceManager(n);return null===t?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&lo(t)||this._popupRedirectResolver;eo(n,this,"argument-error"),this.redirectPersistenceManager=await jo.create(this,[lo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,i;return this._isInitialized&&await this.queue((async()=>{})),(null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)===t?this._currentUser:(null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=null!==(n=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,i,e){if(this._deleted)return()=>{};const o="function"==typeof n?n:n.next.bind(n),r=this._isInitialized?Promise.resolve():this._initializationPromise;return eo(r,this,"internal-error"),r.then((()=>o(this.currentUser))),"function"==typeof n?t.addObserver(n,i,e):t.addObserver(n)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return eo(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Xo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await(null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader());return i&&(n["X-Firebase-Client"]=i),n}}function Jo(t){return ae(t)}class Qo{constructor(t){this.auth=t,this.observer=null,this.addObserver=function(t){const n=new oe(t,void 0);return n.subscribe.bind(n)}((t=>this.observer=t))}get next(){return eo(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Zo(t){const n=t.indexOf(":");return n<0?"":t.substr(0,n+1)}function tr(t){if(!t)return null;const n=Number(t);return isNaN(n)?null:n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class nr{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return oo("not implemented")}_getIdTokenResponse(t){return oo("not implemented")}_linkToIdToken(t,n){return oo("not implemented")}_getReauthenticationResolver(t){return oo("not implemented")}}async function ir(t,n){return bo(t,"POST","/v1/accounts:update",n)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function er(t,n){return bo(t,"POST","/v1/accounts:sendOobCode",mo(t,n))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class or extends nr{constructor(t,n,i,e=null){super("password",i),this._email=t,this._password=n,this._tenantId=e}static _fromEmailAndPassword(t,n){return new or(t,n,"password")}static _fromEmailAndCode(t,n,i=null){return new or(t,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n="string"==typeof t?JSON.parse(t):t;if((null==n?void 0:n.email)&&(null==n?void 0:n.password)){if("password"===n.signInMethod)return this._fromEmailAndPassword(n.email,n.password);if("emailLink"===n.signInMethod)return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":return async function(t,n){return wo(t,"POST","/v1/accounts:signInWithPassword",mo(t,n))}(t,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return async function(t,n){return wo(t,"POST","/v1/accounts:signInWithEmailLink",mo(t,n))}(t,{email:this._email,oobCode:this._password});default:Qe(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":return ir(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,n){return wo(t,"POST","/v1/accounts:signInWithEmailLink",mo(t,n))}(t,{idToken:n,email:this._email,oobCode:this._password});default:Qe(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rr(t,n){return wo(t,"POST","/v1/accounts:signInWithIdp",mo(t,n))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends nr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new sr(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Qe("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n="string"==typeof t?JSON.parse(t):t,{providerId:i,signInMethod:e}=n,o=Ge(n,["providerId","signInMethod"]);if(!i||!e)return null;const r=new sr(i,e);return r.idToken=o.idToken||void 0,r.accessToken=o.accessToken||void 0,r.secret=o.secret,r.nonce=o.nonce,r.pendingToken=o.pendingToken||null,r}_getIdTokenResponse(t){return rr(t,this.buildRequest())}_linkToIdToken(t,n){const i=this.buildRequest();return i.idToken=n,rr(t,i)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,rr(t,n)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=te(n)}return t}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr={USER_NOT_FOUND:"user-not-found"};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ar extends nr{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,n){return new ar({verificationId:t,verificationCode:n})}static _fromTokenResponse(t,n){return new ar({phoneNumber:t,temporaryProof:n})}_getIdTokenResponse(t){return async function(t,n){return wo(t,"POST","/v1/accounts:signInWithPhoneNumber",mo(t,n))}(t,this._makeVerificationRequest())}_linkToIdToken(t,n){return async function(t,n){const i=await wo(t,"POST","/v1/accounts:signInWithPhoneNumber",mo(t,n));if(i.temporaryProof)throw ko(t,"account-exists-with-different-credential",i);return i}(t,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return async function(t,n){return wo(t,"POST","/v1/accounts:signInWithPhoneNumber",mo(t,Object.assign(Object.assign({},n),{operation:"REAUTH"})),lr)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:n,verificationId:i,verificationCode:e}=this.params;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:i,code:e}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"==typeof t&&(t=JSON.parse(t));const{verificationId:n,verificationCode:i,phoneNumber:e,temporaryProof:o}=t;return i||n||e||o?new ar({verificationId:n,verificationCode:i,phoneNumber:e,temporaryProof:o}):null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(t){var n,i,e,o,r,s;const l=ne(ie(t)),a=null!==(n=l.apiKey)&&void 0!==n?n:null,u=null!==(i=l.oobCode)&&void 0!==i?i:null,c=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(e=l.mode)&&void 0!==e?e:null);eo(a&&u&&c,"argument-error"),this.apiKey=a,this.operation=c,this.code=u,this.continueUrl=null!==(o=l.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(r=l.languageCode)&&void 0!==r?r:null,this.tenantId=null!==(s=l.tenantId)&&void 0!==s?s:null}static parseLink(t){const n=function(t){const n=ne(ie(t)).link,i=n?ne(ie(n)).deep_link_id:null,e=ne(ie(t)).deep_link_id;return(e?ne(ie(e)).link:null)||e||i||n||t}(t);try{return new ur(n)}catch(t){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(){this.providerId=cr.PROVIDER_ID}static credential(t,n){return or._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const i=ur.parseLink(n);return eo(i,"argument-error"),or._fromEmailAndCode(t,i.code,i.tenantId)}}cr.PROVIDER_ID="password",cr.EMAIL_PASSWORD_SIGN_IN_METHOD="password",cr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class hr{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends hr{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends dr{constructor(){super("facebook.com")}static credential(t){return sr._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return fr.credentialFromTaggedObject(t)}static credentialFromError(t){return fr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return fr.credential(t.oauthAccessToken)}catch(t){return null}}}fr.FACEBOOK_SIGN_IN_METHOD="facebook.com",fr.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class pr extends dr{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return sr._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return pr.credentialFromTaggedObject(t)}static credentialFromError(t){return pr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return pr.credential(n,i)}catch(t){return null}}}pr.GOOGLE_SIGN_IN_METHOD="google.com",pr.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class gr extends dr{constructor(){super("twitter.com")}static credential(t,n){return sr._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return gr.credentialFromTaggedObject(t)}static credentialFromError(t){return gr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return gr.credential(n,i)}catch(t){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function mr(t,n){return wo(t,"POST","/v1/accounts:signUp",mo(t,n))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gr.TWITTER_SIGN_IN_METHOD="twitter.com",gr.PROVIDER_ID="twitter.com";class br{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,i,e=!1){const o=await Ro._fromIdTokenResponse(t,i,e),r=vr(i);return new br({user:o,providerId:r,_tokenResponse:i,operationType:n})}static async _forOperation(t,n,i){await t._updateTokensIfNecessary(i,!0);const e=vr(i);return new br({user:t,providerId:e,_tokenResponse:i,operationType:n})}}function vr(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class wr extends Ui{constructor(t,n,i,e){var o;super(n.code,n.message),this.operationType=i,this.user=e,Object.setPrototypeOf(this,wr.prototype),this.customData={appName:t.name,tenantId:null!==(o=t.tenantId)&&void 0!==o?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,n,i,e){return new wr(t,n,i,e)}}function yr(t,n,i,e){return("reauthenticate"===n?i._getReauthenticationResolver(t):i._getIdTokenResponse(t)).catch((i=>{if("auth/multi-factor-auth-required"===i.code)throw wr._fromErrorAndOperation(t,i,n,e);throw i}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function xr(t,n,i=!1){const{auth:e}=t,o="reauthenticate";try{const r=await Co(t,yr(e,o,n,t),i);eo(r.idToken,e,"internal-error");const s=So(r.idToken);eo(s,e,"internal-error");const{sub:l}=s;return eo(t.uid===l,e,"user-mismatch"),br._forOperation(t,o,r)}catch(t){throw"auth/user-not-found"===(null==t?void 0:t.code)&&Qe(e,"user-mismatch"),t}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kr(t,n,i=!1){const e="signIn",o=await yr(t,e,n),r=await br._fromIdTokenResponse(t,e,o);return i||await t._updateCurrentUser(r.user),r}async function Ir(t,n){return kr(Jo(t),n)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _r(t,n,i){var e;eo((null===(e=i.url)||void 0===e?void 0:e.length)>0,t,"invalid-continue-uri"),eo(void 0===i.dynamicLinkDomain||i.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),n.continueUrl=i.url,n.dynamicLinkDomain=i.dynamicLinkDomain,n.canHandleCodeInApp=i.handleCodeInApp,i.iOS&&(eo(i.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),n.iOSBundleId=i.iOS.bundleId),i.android&&(eo(i.android.packageName.length>0,t,"missing-android-pkg-name"),n.androidInstallApp=i.android.installApp,n.androidMinimumVersionCode=i.android.minimumVersion,n.androidPackageName=i.android.packageName)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Er(t,n,i){const{auth:e}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(o.email=n),i&&(o.password=i);const r=await Co(t,ir(e,o));await t._updateTokensIfNecessary(r,!0)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Tr{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem("__sak","1"),this.storage.removeItem("__sak"),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends Tr{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const t=Mi();return Vo(t)||Go(t)}()&&function(){try{return!(!window||window===window.top)}catch(t){return!1}}(),this.fallbackToPolling=Ho(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),e=this.localCache[n];i!==e&&t(n,e,i)}}onStorageEvent(t,n=!1){if(!t.key)return void this.forAllChangedKeys(((t,n,i)=>{this.notifyListeners(t,i)}));const i=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const e=this.storage.getItem(i);if(t.newValue!==e)null!==t.newValue?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!n)return}const e=()=>{const t=this.storage.getItem(i);(n||this.localCache[i]!==t)&&this.notifyListeners(i,t)},o=this.storage.getItem(i);zi()&&10===document.documentMode&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(e,10):e()}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const t of Array.from(i))t(n?JSON.parse(n):n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}Sr.type="LOCAL";const Cr=Sr;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar extends Tr{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(t,n){}_removeListener(t,n){}}Ar.type="SESSION";const Dr=Ar;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Nr{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find((n=>n.isListeningto(t)));if(n)return n;const i=new Nr(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:i,eventType:e,data:o}=n.data,r=this.handlersMap[e];if(!(null==r?void 0:r.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:e});const s=Array.from(r).map((async t=>t(n.origin,o))),l=await function(t){return Promise.all(t.map((async t=>{try{return{fulfilled:!0,value:await t}}catch(t){return{fulfilled:!1,reason:t}}})))}(s);n.ports[0].postMessage({status:"done",eventId:i,eventType:e,response:l})}_subscribe(t,n){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),n&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Or(t="",n=10){let i="";for(let t=0;t<n;t++)i+=Math.floor(10*Math.random());return t+i}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nr.receivers=[];class Pr{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,i=50){const e="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!e)throw new Error("connection_unavailable");let o,r;return new Promise(((s,l)=>{const a=Or("",20);e.port1.start();const u=setTimeout((()=>{l(new Error("unsupported_event"))}),i);r={messageChannel:e,onMessage(t){const n=t;if(n.data.eventId===a)switch(n.data.status){case"ack":clearTimeout(u),o=setTimeout((()=>{l(new Error("timeout"))}),3e3);break;case"done":clearTimeout(o),s(n.data.response);break;default:clearTimeout(u),clearTimeout(o),l(new Error("invalid_response"))}}},this.handlers.add(r),e.port1.addEventListener("message",r.onMessage),this.target.postMessage({eventType:t,eventId:a,data:n},[e.port2])})).finally((()=>{r&&this.removeMessageHandler(r)}))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(){return window}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Mr(){return void 0!==Rr().WorkerGlobalScope&&"function"==typeof Rr().importScripts}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Lr="firebaseLocalStorageDb";class $r{constructor(t){this.request=t}toPromise(){return new Promise(((t,n)=>{this.request.addEventListener("success",(()=>{t(this.request.result)})),this.request.addEventListener("error",(()=>{n(this.request.error)}))}))}}function jr(t,n){return t.transaction(["firebaseLocalStorage"],n?"readwrite":"readonly").objectStore("firebaseLocalStorage")}function zr(){const t=indexedDB.open(Lr,1);return new Promise(((n,i)=>{t.addEventListener("error",(()=>{i(t.error)})),t.addEventListener("upgradeneeded",(()=>{const n=t.result;try{n.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){i(t)}})),t.addEventListener("success",(async()=>{const i=t.result;i.objectStoreNames.contains("firebaseLocalStorage")?n(i):(i.close(),await function(){const t=indexedDB.deleteDatabase(Lr);return new $r(t).toPromise()}(),n(await zr()))}))}))}async function Fr(t,n,i){const e=jr(t,!0).put({fbase_key:n,value:i});return new $r(e).toPromise()}function Vr(t,n){const i=jr(t,!0).delete(n);return new $r(i).toPromise()}class Ur{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await zr()),this.db}async _withRetries(t){let n=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(t){if(n++>3)throw t;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Mr()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nr._getInstance(Mr()?self:null),this.receiver._subscribe("keyChanged",(async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)}))),this.receiver._subscribe("ping",(async()=>["keyChanged"]))}async initializeSender(){var t,n;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Pr(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&(null===(t=i[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=i[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(this.sender&&this.activeServiceWorker&&function(){var t;return(null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await zr();return await Fr(t,"__sak","1"),await Vr(t,"__sak"),!0}catch(t){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite((async()=>(await this._withRetries((i=>Fr(i,t,n))),this.localCache[t]=n,this.notifyServiceWorker(t))))}async _get(t){const n=await this._withRetries((n=>async function(t,n){const i=jr(t,!1).get(n),e=await new $r(i).toPromise();return void 0===e?null:e.value}(n,t)));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Vr(n,t))),delete this.localCache[t],this.notifyServiceWorker(t))))}async _poll(){const t=await this._withRetries((t=>{const n=jr(t,!1).getAll();return new $r(n).toPromise()}));if(!t)return[];if(0!==this.pendingWrites)return[];const n=[],i=new Set;for(const{fbase_key:e,value:o}of t)i.add(e),JSON.stringify(this.localCache[e])!==JSON.stringify(o)&&(this.notifyListeners(e,o),n.push(e));for(const t of Object.keys(this.localCache))this.localCache[t]&&!i.has(t)&&(this.notifyListeners(t,null),n.push(t));return n}notifyListeners(t,n){this.localCache[t]=n;const i=this.listeners[t];if(i)for(const t of Array.from(i))t(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Ur.type="LOCAL";const Br=Ur;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new co(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class qr{constructor(t,n){this.verificationId=t,this.onConfirmation=n}confirm(t){const n=ar._fromVerification(this.verificationId,t);return this.onConfirmation(n)}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Kr(t,n){return n?lo(n):(eo(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends nr{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return rr(t,this._buildIdpRequest())}_linkToIdToken(t,n){return rr(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return rr(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Gr(t){return kr(t.auth,new Wr(t),t.bypassAuthState)}function Hr(t){const{auth:n,user:i}=t;return eo(i,n,"internal-error"),xr(i,new Wr(t),t.bypassAuthState)}async function Xr(t){const{auth:n,user:i}=t;return eo(i,n,"internal-error"),async function(t,n,i=!1){const e=await Co(t,n._linkToIdToken(t.auth,await t.getIdToken()),i);return br._forOperation(t,"link",e)}(i,new Wr(t),t.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(t,n,i,e,o=!1){this.auth=t,this.resolver=i,this.user=e,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(t){this.reject(t)}}))}async onAuthEvent(t){const{urlResponse:n,sessionId:i,postBody:e,tenantId:o,error:r,type:s}=t;if(r)return void this.reject(r);const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:e||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(l))}catch(t){this.reject(t)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Gr;case"linkViaPopup":case"linkViaRedirect":return Xr;case"reauthViaPopup":case"reauthViaRedirect":return Hr;default:Qe(this.auth,"internal-error")}}resolve(t){ro(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ro(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr=new co(2e3,1e4);class Qr extends Yr{constructor(t,n,i,e,o){super(t,n,e,o),this.provider=i,this.authWindow=null,this.pollId=null,Qr.currentPopupAction&&Qr.currentPopupAction.cancel(),Qr.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return eo(t,this.auth,"internal-error"),t}async onExecution(){ro(1===this.filter.length,"Popup operations only handle one event");const t=Or();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(Ze(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(Ze(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qr.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,i;this.pollId=(null===(i=null===(n=this.authWindow)||void 0===n?void 0:n.window)||void 0===i?void 0:i.closed)?window.setTimeout((()=>{this.pollId=null,this.reject(Ze(this.auth,"popup-closed-by-user"))}),2e3):window.setTimeout(t,Jr.get())};t()}}Qr.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Zr=new Map;class ts extends Yr{constructor(t,n,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let t=Zr.get(this.auth._key());if(!t){try{const n=await async function(t,n){const i=is(n),e=ns(t);if(!await e._isAvailable())return!1;const o="true"===await e._get(i);return await e._remove(i),o}(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(n){t=()=>Promise.reject(n)}Zr.set(this.auth._key(),t)}return this.bypassAuthState||Zr.set(this.auth._key(),(()=>Promise.resolve(null))),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function ns(t){return lo(t._redirectPersistence)}function is(t){return $o("pendingRedirect",t.config.apiKey,t.name)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function es(t,n,i=!1){const e=Jo(t),o=Kr(e,n),r=new ts(e,o,i),s=await r.execute();return s&&!i&&(delete s.user._redirectEventId,await e._persistUserIfCurrent(s.user),await e._setRedirectUser(null,n)),s}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach((i=>{this.isEventForConsumer(t,i)&&(n=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ss(t);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var i;if(t.error&&!ss(t)){const e=(null===(i=t.error.code)||void 0===i?void 0:i.split("auth/")[1])||"internal-error";n.onError(Ze(this.auth,e))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const i=null===n.eventId||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(rs(t))}saveEventToCache(t){this.cachedEventUids.add(rs(t)),this.lastProcessedEventTime=Date.now()}}function rs(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((t=>t)).join("-")}function ss({type:t,error:n}){return"unknown"===t&&"auth/no-auth-event"===(null==n?void 0:n.code)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const ls=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,as=/^https?/;function us(t){const n=ao(),{protocol:i,hostname:e}=new URL(n);if(t.startsWith("chrome-extension://")){const o=new URL(t);return""===o.hostname&&""===e?"chrome-extension:"===i&&t.replace("chrome-extension://","")===n.replace("chrome-extension://",""):"chrome-extension:"===i&&o.hostname===e}if(!as.test(i))return!1;if(ls.test(t))return e===t;const o=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(e)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs=new co(3e4,6e4);function hs(){const t=Rr().___jsl;if(null==t?void 0:t.H)for(const n of Object.keys(t.H))if(t.H[n].r=t.H[n].r||[],t.H[n].L=t.H[n].L||[],t.H[n].r=[...t.H[n].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}function ds(t){return new Promise(((n,i)=>{var e,o,r,s;function l(){hs(),gapi.load("gapi.iframes",{callback:()=>{n(gapi.iframes.getContext())},ontimeout:()=>{hs(),i(Ze(t,"network-request-failed"))},timeout:cs.get()})}if(null===(o=null===(e=Rr().gapi)||void 0===e?void 0:e.iframes)||void 0===o?void 0:o.Iframe)n(gapi.iframes.getContext());else{if(!(null===(r=Rr().gapi)||void 0===r?void 0:r.load)){const n=`__iframefcb${Math.floor(1e6*Math.random())}`;return Rr()[n]=()=>{gapi.load?l():i(Ze(t,"network-request-failed"))},(s=`https://apis.google.com/js/api.js?onload=${n}`,new Promise(((t,n)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=t,i.onerror=t=>{const i=Ze("internal-error");i.customData=t,n(i)},i.type="text/javascript",i.charset="UTF-8",
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){var t,n;return null!==(n=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==n?n:document}().appendChild(i)}))).catch((t=>i(t)))}l()}})).catch((t=>{throw fs=null,t}))}let fs=null;
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const ps=new co(5e3,15e3),gs={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ms=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bs(t){const n=t.config;eo(n.authDomain,t,"auth-domain-config-required");const i=n.emulator?ho(n,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,e={apiKey:n.apiKey,appName:t.name,v:"9.6.11"},o=ms.get(t.config.apiHost);o&&(e.eid=o);const r=t._getFrameworks();return r.length&&(e.fw=r.join(",")),`${i}?${te(e).slice(1)}`}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const vs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ws{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}function ys(t,n,i,e,o,r){eo(t.config.authDomain,t,"auth-domain-config-required"),eo(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:i,redirectUrl:e,v:"9.6.11",eventId:o};if(n instanceof hr){n.setDefaultLanguage(t.languageCode),s.providerId=n.providerId||"",Yi(n.getCustomParameters())||(s.customParameters=JSON.stringify(n.getCustomParameters()));for(const[t,n]of Object.entries(r||{}))s[t]=n}if(n instanceof dr){const t=n.getScopes().filter((t=>""!==t));t.length>0&&(s.scopes=t.join(","))}t.tenantId&&(s.tid=t.tenantId);const l=s;for(const t of Object.keys(l))void 0===l[t]&&delete l[t];return`${function({config:t}){return t.emulator?ho(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)}?${te(l).slice(1)}`}const xs=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Dr,this._completeRedirectFn=es}async _openPopup(t,n,i,e){var o;return ro(null===(o=this.eventManagers[t._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()"),function(t,n,i,e=500,o=600){const r=Math.max((window.screen.availHeight-o)/2,0).toString(),s=Math.max((window.screen.availWidth-e)/2,0).toString();let l="";const a=Object.assign(Object.assign({},vs),{width:e.toString(),height:o.toString(),top:r,left:s}),u=Mi().toLowerCase();i&&(l=Uo(u)?"_blank":i),Fo(u)&&(n=n||"http://localhost",a.scrollbars="yes");const c=Object.entries(a).reduce(((t,[n,i])=>`${t}${n}=${i},`),"");if(function(t=Mi()){var n;return Go(t)&&!!(null===(n=window.navigator)||void 0===n?void 0:n.standalone)}(u)&&"_self"!==l)return function(t,n){const i=document.createElement("a");i.href=t,i.target=n;const e=document.createEvent("MouseEvent");e.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(e)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n||"",l),new ws(null);const h=window.open(n||"",l,c);eo(h,t,"popup-blocked");try{h.focus()}catch(t){}return new ws(h)}(t,ys(t,n,i,ao(),e),Or())}async _openRedirect(t,n,i,e){var o;return await this._originValidation(t),o=ys(t,n,i,ao(),e),Rr().location.href=o,new Promise((()=>{}))}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:t,promise:i}=this.eventManagers[n];return t?Promise.resolve(t):(ro(i,"If manager is not set, promise should be"),i)}const i=this.initAndGetManager(t);return this.eventManagers[n]={promise:i},i.catch((()=>{delete this.eventManagers[n]})),i}async initAndGetManager(t){const n=await async function(t){const n=await function(t){return fs=fs||ds(t),fs}(t),i=Rr().gapi;return eo(i,t,"internal-error"),n.open({where:document.body,url:bs(t),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gs,dontclear:!0},(n=>new Promise((async(i,e)=>{await n.restyle({setHideOnLeave:!1});const o=Ze(t,"network-request-failed"),r=Rr().setTimeout((()=>{e(o)}),ps.get());function s(){Rr().clearTimeout(r),i(n)}n.ping(s).then(s,(()=>{e(o)}))}))))}(t),i=new os(t);return n.register("authEvent",(n=>(eo(null==n?void 0:n.authEvent,t,"invalid-auth-event"),{status:i.onEvent(n.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,i}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send("webStorageSupport",{type:"webStorageSupport"},(i=>{var e;const o=null===(e=null==i?void 0:i[0])||void 0===e?void 0:e.webStorageSupport;void 0!==o&&n(!!o),Qe(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=async function(t){if(t.config.emulator)return;const{authorizedDomains:n}=await async function(t,n={}){return bo(t,"GET","/v1/projects",n)}(t);for(const t of n)try{if(us(t))return}catch(t){}Qe(t,"unauthorized-domain")}(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ho()||Vo()||Go()}};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ks{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged((n=>{var i;t((null===(i=n)||void 0===i?void 0:i.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){eo(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Oe(new me("auth",((t,{options:n})=>{const i=t.getProvider("app").getImmediate(),e=t.getProvider("heartbeat"),{apiKey:o,authDomain:r}=i.options;return((t,i)=>{eo(o&&!o.includes(":"),"invalid-api-key",{appName:t.name}),eo(!(null==r?void 0:r.includes(":")),"argument-error",{appName:t.name});const e={apiKey:o,authDomain:r,clientPlatform:"Browser",apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xo("Browser")},s=new Yo(t,i,e);return function(t,n){const i=(null==n?void 0:n.persistence)||[],e=(Array.isArray(i)?i:[i]).map(lo);(null==n?void 0:n.errorMap)&&t._updateErrorMap(n.errorMap),t._initializeWithPersistence(e,null==n?void 0:n.popupRedirectResolver)}(s,n),s})(i,e)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t=>{t.getProvider("auth-internal").initialize()}))),Oe(new me("auth-internal",(t=>{return n=Jo(t.getProvider("auth").getImmediate()),new ks(n);var n}),"PRIVATE").setInstantiationMode("EXPLICIT")),$e("@firebase/auth","0.19.12",void 0),$e("@firebase/auth","0.19.12","esm2017");const Is="@firebase/installations",_s=new Bi("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Es(t){return t instanceof Ui&&t.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts({projectId:t}){return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function Ss(t){return{token:t.token,requestStatus:2,expiresIn:(n=t.expiresIn,Number(n.replace("s","000"))),creationTime:Date.now()};var n}async function Cs(t,n){const i=(await n.json()).error;return _s.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function As({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}async function Ds(t){const n=await t();return n.status>=500&&n.status<600?t():n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ns(t){return new Promise((n=>{setTimeout(n,t)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Os=/^[cdef][\w-]{21}$/;function Ps(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=function(t){return(n=t,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t);return Os.test(n)?n:""}catch(t){return""}}function Rs(t){return`${t.appName}!${t.appId}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new Map;function Ls(t,n){const i=Rs(t);$s(i,n),function(t,n){const i=(!js&&"BroadcastChannel"in self&&(js=new BroadcastChannel("[Firebase] FID Change"),js.onmessage=t=>{$s(t.data.key,t.data.fid)}),js);i&&i.postMessage({key:t,fid:n}),0===Ms.size&&js&&(js.close(),js=null)}(i,n)}function $s(t,n){const i=Ms.get(t);if(i)for(const t of i)t(n)}let js=null;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const zs="firebase-installations-store";let Fs=null;function Vs(){return Fs||(Fs=pe("firebase-installations-database",1,((t,n)=>{switch(n){case 0:t.createObjectStore(zs)}}))),Fs}async function Us(t,n){const i=Rs(t),e=(await Vs()).transaction(zs,"readwrite"),o=e.objectStore(zs),r=await o.get(i);return await o.put(n,i),await e.complete,r&&r.fid===n.fid||Ls(t,n.fid),n}async function Bs(t){const n=Rs(t),i=(await Vs()).transaction(zs,"readwrite");await i.objectStore(zs).delete(n),await i.complete}async function qs(t,n){const i=Rs(t),e=(await Vs()).transaction(zs,"readwrite"),o=e.objectStore(zs),r=await o.get(i),s=n(r);return void 0===s?await o.delete(i):await o.put(s,i),await e.complete,!s||r&&r.fid===s.fid||Ls(t,s.fid),s}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ks(t){let n;const i=await qs(t.appConfig,(i=>{const e=function(t){return Hs(t||{fid:Ps(),registrationStatus:0})}(i),o=function(t,n){if(0===n.registrationStatus){if(!navigator.onLine)return{installationEntry:n,registrationPromise:Promise.reject(_s.create("app-offline"))};const i={fid:n.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:i,registrationPromise:async function(t,n){try{const i=await
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function({appConfig:t,heartbeatServiceProvider:n},{fid:i}){const e=Ts(t),o=As(t),r=n.getImmediate({optional:!0});if(r){const t=await r.getHeartbeatsHeader();t&&o.append("x-firebase-client",t)}const s={method:"POST",headers:o,body:JSON.stringify({fid:i,authVersion:"FIS_v2",appId:t.appId,sdkVersion:"w:0.5.8"})},l=await Ds((()=>fetch(e,s)));if(l.ok){const t=await l.json();return{fid:t.fid||i,registrationStatus:2,refreshToken:t.refreshToken,authToken:Ss(t.authToken)}}throw await Cs("Create Installation",l)}(t,n);return Us(t.appConfig,i)}catch(i){throw Es(i)&&409===i.customData.serverCode?await Bs(t.appConfig):await Us(t.appConfig,{fid:n.fid,registrationStatus:0}),i}}(t,i)}}return 1===n.registrationStatus?{installationEntry:n,registrationPromise:Ws(t)}:{installationEntry:n}}(t,e);return n=o.registrationPromise,o.installationEntry}));return""===i.fid?{installationEntry:await n}:{installationEntry:i,registrationPromise:n}}async function Ws(t){let n=await Gs(t.appConfig);for(;1===n.registrationStatus;)await Ns(100),n=await Gs(t.appConfig);if(0===n.registrationStatus){const{installationEntry:n,registrationPromise:i}=await Ks(t);return i||n}return n}function Gs(t){return qs(t,(t=>{if(!t)throw _s.create("installation-not-found");return Hs(t)}))}function Hs(t){return 1===(n=t).registrationStatus&&n.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var n;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}async function Xs({appConfig:t,heartbeatServiceProvider:n},i){const e=function(t,{fid:n}){return`${Ts(t)}/${n}/authTokens:generate`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,i),o=function(t,{refreshToken:n}){const i=As(t);return i.append("Authorization",function(t){return`FIS_v2 ${t}`}(n)),i}(t,i),r=n.getImmediate({optional:!0});if(r){const t=await r.getHeartbeatsHeader();t&&o.append("x-firebase-client",t)}const s={method:"POST",headers:o,body:JSON.stringify({installation:{sdkVersion:"w:0.5.8",appId:t.appId}})},l=await Ds((()=>fetch(e,s)));if(l.ok)return Ss(await l.json());throw await Cs("Generate Auth Token",l)}async function Ys(t,n=!1){let i;const e=await qs(t.appConfig,(e=>{if(!Qs(e))throw _s.create("not-registered");const o=e.authToken;if(!n&&(2===(r=o).requestStatus&&!function(t){const n=Date.now();return n<t.creationTime||t.creationTime+t.expiresIn<n+36e5}(r)))return e;var r;if(1===o.requestStatus)return i=async function(t,n){let i=await Js(t.appConfig);for(;1===i.authToken.requestStatus;)await Ns(100),i=await Js(t.appConfig);const e=i.authToken;return 0===e.requestStatus?Ys(t,n):e}(t,n),e;{if(!navigator.onLine)throw _s.create("app-offline");const n=function(t){const n={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:n})}(e);return i=async function(t,n){try{const i=await Xs(t,n),e=Object.assign(Object.assign({},n),{authToken:i});return await Us(t.appConfig,e),i}catch(i){if(!Es(i)||401!==i.customData.serverCode&&404!==i.customData.serverCode){const i=Object.assign(Object.assign({},n),{authToken:{requestStatus:0}});await Us(t.appConfig,i)}else await Bs(t.appConfig);throw i}}(t,n),n}}));return i?await i:e.authToken}function Js(t){return qs(t,(t=>{if(!Qs(t))throw _s.create("not-registered");return 1===(n=t.authToken).requestStatus&&n.requestTime+1e4<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t;var n;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}function Qs(t){return void 0!==t&&2===t.registrationStatus}function Zs(t){return _s.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Oe(new me("installations",(t=>{const n=t.getProvider("app").getImmediate();return{app:n,appConfig:
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){if(!t||!t.options)throw Zs("App Configuration");if(!t.name)throw Zs("App Name");const n=["projectId","apiKey","appId"];for(const i of n)if(!t.options[i])throw Zs(i);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(n),heartbeatServiceProvider:Pe(n,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),Oe(new me("installations-internal",(t=>{const n=Pe(t.getProvider("app").getImmediate(),"installations").getImmediate();return{getId:()=>async function(t){const n=t,{installationEntry:i,registrationPromise:e}=await Ks(n);return e?e.catch(console.error):Ys(n).catch(console.error),i.fid}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n),getToken:t=>async function(t,n=!1){const i=t;return await async function(t){const{registrationPromise:n}=await Ks(t);n&&await n}(i),(await Ys(i,n)).token}(n,t)}}),"PRIVATE")),$e(Is,"0.5.8"),$e(Is,"0.5.8","esm2017");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const tl="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";var nl,il;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function el(t){const n=new Uint8Array(t);return btoa(String.fromCharCode(...n)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ol(t){const n=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(n),e=new Uint8Array(i.length);for(let t=0;t<i.length;++t)e[t]=i.charCodeAt(t);return e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(nl||(nl={})),function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"}(il||(il={}));
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const rl="firebase-messaging-store";let sl=null;function ll(){return sl||(sl=pe("firebase-messaging-database",1,((t,n)=>{switch(n){case 0:t.createObjectStore(rl)}}))),sl}async function al(t){const n=cl(t),i=await ll(),e=await i.transaction(rl).objectStore(rl).get(n);if(e)return e;{const n=await async function(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map((t=>t.name)).includes("fcm_token_details_db"))return null;let n=null;return(await pe("fcm_token_details_db",5,(async(i,e,o,r)=>{var s;if(e<2)return;if(!i.objectStoreNames.contains("fcm_token_object_Store"))return;const l=r.objectStore("fcm_token_object_Store"),a=await l.index("fcmSenderId").get(t);if(await l.clear(),a)if(2===e){const t=a;if(!t.auth||!t.p256dh||!t.endpoint)return;n={token:t.fcmToken,createTime:null!==(s=t.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:t.auth,p256dh:t.p256dh,endpoint:t.endpoint,swScope:t.swScope,vapidKey:"string"==typeof t.vapidKey?t.vapidKey:el(t.vapidKey)}}}else if(3===e){const t=a;n={token:t.fcmToken,createTime:t.createTime,subscriptionOptions:{auth:el(t.auth),p256dh:el(t.p256dh),endpoint:t.endpoint,swScope:t.swScope,vapidKey:el(t.vapidKey)}}}else if(4===e){const t=a;n={token:t.fcmToken,createTime:t.createTime,subscriptionOptions:{auth:el(t.auth),p256dh:el(t.p256dh),endpoint:t.endpoint,swScope:t.swScope,vapidKey:el(t.vapidKey)}}}}))).close(),await ge("fcm_token_details_db"),await ge("fcm_vapid_details_db"),await ge("undefined"),function(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:n}=t;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof n.auth&&n.auth.length>0&&"string"==typeof n.p256dh&&n.p256dh.length>0&&"string"==typeof n.endpoint&&n.endpoint.length>0&&"string"==typeof n.swScope&&n.swScope.length>0&&"string"==typeof n.vapidKey&&n.vapidKey.length>0}(n)?n:null}(t.appConfig.senderId);if(n)return await ul(t,n),n}}async function ul(t,n){const i=cl(t),e=(await ll()).transaction(rl,"readwrite");return await e.objectStore(rl).put(n,i),await e.complete,n}function cl({appConfig:t}){return t.appId}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=new Bi("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});async function dl(t,n){const i={method:"DELETE",headers:await pl(t)};try{const e=await fetch(`${fl(t.appConfig)}/${n}`,i),o=await e.json();if(o.error)throw hl.create("token-unsubscribe-failed",{errorInfo:o.error.message})}catch(t){throw hl.create("token-unsubscribe-failed",{errorInfo:t})}}function fl({projectId:t}){return`https://fcmregistrations.googleapis.com/v1/projects/${t}/registrations`}async function pl({appConfig:t,installations:n}){const i=await n.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${i}`})}function gl({p256dh:t,auth:n,endpoint:i,vapidKey:e}){const o={web:{endpoint:i,auth:n,p256dh:t}};return e!==tl&&(o.web.applicationPubKey=e),o}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ml(t,n){const i={token:await
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(t,n){const i=await pl(t),e=gl(n),o={method:"POST",headers:i,body:JSON.stringify(e)};let r;try{const n=await fetch(fl(t.appConfig),o);r=await n.json()}catch(t){throw hl.create("token-subscribe-failed",{errorInfo:t})}if(r.error)throw hl.create("token-subscribe-failed",{errorInfo:r.error.message});if(!r.token)throw hl.create("token-subscribe-no-token");return r.token}(t,n),createTime:Date.now(),subscriptionOptions:n};return await ul(t,i),i.token}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function bl(t){const n={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return function(t,n){if(!n.notification)return;t.notification={};const i=n.notification.title;i&&(t.notification.title=i);const e=n.notification.body;e&&(t.notification.body=e);const o=n.notification.image;o&&(t.notification.image=o)}(n,t),function(t,n){n.data&&(t.data=n.data)}(n,t),function(t,n){if(!n.fcmOptions)return;t.fcmOptions={};const i=n.fcmOptions.link;i&&(t.fcmOptions.link=i);const e=n.fcmOptions.analytics_label;e&&(t.fcmOptions.analyticsLabel=e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n,t),n}function vl(t,n){const i=[];for(let e=0;e<t.length;e++)i.push(t.charAt(e)),e<n.length&&i.push(n.charAt(e));return i.join("")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(t){return hl.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
vl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),vl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class yl{constructor(t,n,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const e=function(t){if(!t||!t.options)throw wl("App Configuration Object");if(!t.name)throw wl("App Name");const n=["projectId","apiKey","appId","messagingSenderId"],{options:i}=t;for(const t of n)if(!i[t])throw wl(t);return{appName:t.name,projectId:i.projectId,apiKey:i.apiKey,appId:i.appId,senderId:i.messagingSenderId}}(t);this.firebaseDependencies={app:t,appConfig:e,installations:n,analyticsProvider:i}}_delete(){return Promise.resolve()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function xl(t,n){if(!navigator)throw hl.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw hl.create("permission-blocked");return await
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(t,n){n?t.vapidKey=n:t.vapidKey||(t.vapidKey=tl)}(t,null==n?void 0:n.vapidKey),await
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(t,n){if(n||t.swRegistration||await async function(t){try{t.swRegistration=await navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}),t.swRegistration.update().catch((()=>{}))}catch(t){throw hl.create("failed-service-worker-registration",{browserErrorMessage:t.message})}}(t),n||!t.swRegistration){if(!(n instanceof ServiceWorkerRegistration))throw hl.create("invalid-sw-registration");t.swRegistration=n}}(t,null==n?void 0:n.serviceWorkerRegistration),async function(t){const n=await async function(t,n){return await t.pushManager.getSubscription()||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ol(n)})}(t.swRegistration,t.vapidKey),i={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:n.endpoint,auth:el(n.getKey("auth")),p256dh:el(n.getKey("p256dh"))},e=await al(t.firebaseDependencies);if(e){if((r=i).vapidKey===(o=e.subscriptionOptions).vapidKey&&r.endpoint===o.endpoint&&r.auth===o.auth&&r.p256dh===o.p256dh)return Date.now()>=e.createTime+6048e5?async function(t,n){try{const i=await async function(t,n){const i=await pl(t),e=gl(n.subscriptionOptions),o={method:"PATCH",headers:i,body:JSON.stringify(e)};let r;try{const i=await fetch(`${fl(t.appConfig)}/${n.token}`,o);r=await i.json()}catch(t){throw hl.create("token-update-failed",{errorInfo:t})}if(r.error)throw hl.create("token-update-failed",{errorInfo:r.error.message});if(!r.token)throw hl.create("token-update-no-token");return r.token}(t.firebaseDependencies,n),e=Object.assign(Object.assign({},n),{token:i,createTime:Date.now()});return await ul(t.firebaseDependencies,e),i}catch(n){throw await async function(t){const n=await al(t.firebaseDependencies);n&&(await dl(t.firebaseDependencies,n.token),await async function(t){const n=cl(t),i=(await ll()).transaction(rl,"readwrite");await i.objectStore(rl).delete(n),await i.complete}(t.firebaseDependencies));const i=await t.swRegistration.pushManager.getSubscription();return!i||i.unsubscribe()}(t),n}}(t,{token:e.token,createTime:Date.now(),subscriptionOptions:i}):e.token;try{await dl(t.firebaseDependencies,e.token)}catch(t){console.warn(t)}return ml(t.firebaseDependencies,i)}var o,r;return ml(t.firebaseDependencies,i)}(t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl="@firebase/messaging";async function Il(t,n){return xl(t=ae(t),n)}Oe(new me("messaging",(t=>{const n=new yl(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",(t=>
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(t,n){const i=n.data;if(!i.isFirebaseMessaging)return;t.onMessageHandler&&i.messageType===il.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(bl(i)):t.onMessageHandler.next(bl(i)));const e=i.data;var o;"object"==typeof(o=e)&&o&&"google.c.a.c_id"in o&&"1"===e["google.c.a.e"]&&await async function(t,n,i){const e=function(t){switch(t){case il.NOTIFICATION_CLICKED:return"notification_open";case il.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(n);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(e,{message_id:i["google.c.a.c_id"],message_name:i["google.c.a.c_l"],message_time:i["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})}(t,i.messageType,e)}(n,t))),n}),"PUBLIC")),Oe(new me("messaging-internal",(t=>{const n=t.getProvider("messaging").getImmediate();return{getToken:t=>xl(n,t)}}),"PRIVATE")),$e(kl,"0.9.12"),$e(kl,"0.9.12","esm2017");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let _l="";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class El{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){null==n?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Wi(n))}get(t){const n=this.domStorage_.getItem(this.prefixedName_(t));return null==n?null:Ki(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){null==n?delete this.cache_[t]:this.cache_[t]=n}get(t){return Hi(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){const n=window[t];return n.setItem("firebase:sentinel","cache"),n.removeItem("firebase:sentinel"),new El(n)}}catch(t){}return new Tl},Cl=Sl("localStorage"),Al=Sl("sessionStorage"),Dl=new _e("@firebase/database"),Nl=function(){let t=1;return function(){return t++}}(),Ol=function(t){const n=function(t){const n=[];let i=0;for(let e=0;e<t.length;e++){let o=t.charCodeAt(e);if(o>=55296&&o<=56319){const n=o-55296;e++,Ei(e<t.length,"Surrogate pair missing trail surrogate."),o=65536+(n<<10)+(t.charCodeAt(e)-56320)}o<128?n[i++]=o:o<2048?(n[i++]=o>>6|192,n[i++]=63&o|128):o<65536?(n[i++]=o>>12|224,n[i++]=o>>6&63|128,n[i++]=63&o|128):(n[i++]=o>>18|240,n[i++]=o>>12&63|128,n[i++]=o>>6&63|128,n[i++]=63&o|128)}return n}(t),i=new ee;i.update(n);const e=i.digest();return Ci.encodeByteArray(e)},Pl=function(...t){let n="";for(let i=0;i<t.length;i++){const e=t[i];Array.isArray(e)||e&&"object"==typeof e&&"number"==typeof e.length?n+=Pl.apply(null,e):n+="object"==typeof e?Wi(e):e,n+=" "}return n};let Rl=null,Ml=!0;const Ll=function(...t){if(!0===Ml&&(Ml=!1,null===Rl&&!0===Al.get("logging_enabled")&&(!0,Ei(!0,"Can't turn on custom loggers persistently."),Dl.logLevel=we.VERBOSE,Rl=Dl.log.bind(Dl))),Rl){const n=Pl.apply(null,t);Rl(n)}},$l=function(t){return function(...n){Ll(t,...n)}},jl=function(...t){const n="FIREBASE INTERNAL ERROR: "+Pl(...t);Dl.error(n)},zl=function(...t){const n=`FIREBASE FATAL ERROR: ${Pl(...t)}`;throw Dl.error(n),new Error(n)},Fl=function(...t){const n="FIREBASE WARNING: "+Pl(...t);Dl.warn(n)},Vl=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Ul="[MIN_NAME]",Bl="[MAX_NAME]",ql=function(t,n){if(t===n)return 0;if(t===Ul||n===Bl)return-1;if(n===Ul||t===Bl)return 1;{const i=Ql(t),e=Ql(n);return null!==i?null!==e?i-e==0?t.length-n.length:i-e:-1:null!==e?1:t<n?-1:1}},Kl=function(t,n){return t===n?0:t<n?-1:1},Wl=function(t,n){if(n&&t in n)return n[t];throw new Error("Missing required key ("+t+") in object: "+Wi(n))},Gl=function(t){if("object"!=typeof t||null===t)return Wi(t);const n=[];for(const i in t)n.push(i);n.sort();let i="{";for(let e=0;e<n.length;e++)0!==e&&(i+=","),i+=Wi(n[e]),i+=":",i+=Gl(t[n[e]]);return i+="}",i},Hl=function(t,n){const i=t.length;if(i<=n)return[t];const e=[];for(let o=0;o<i;o+=n)e.push(t.substring(o,o+n>i?i:o+n));return e};function Xl(t,n){for(const i in t)t.hasOwnProperty(i)&&n(i,t[i])}const Yl=function(t){Ei(!Vl(t),"Invalid JSON number");let n,i,e,o,r;0===t?(i=0,e=0,n=1/t==-1/0?1:0):(n=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(o=Math.min(Math.floor(Math.log(t)/Math.LN2),1023),i=o+1023,e=Math.round(t*Math.pow(2,52-o)-Math.pow(2,52))):(i=0,e=Math.round(t/Math.pow(2,-1074))));const s=[];for(r=52;r;r-=1)s.push(e%2?1:0),e=Math.floor(e/2);for(r=11;r;r-=1)s.push(i%2?1:0),i=Math.floor(i/2);s.push(n?1:0),s.reverse();const l=s.join("");let a="";for(r=0;r<64;r+=8){let t=parseInt(l.substr(r,8),2).toString(16);1===t.length&&(t="0"+t),a+=t}return a.toLowerCase()},Jl=new RegExp("^-?(0*)\\d{1,10}$"),Ql=function(t){if(Jl.test(t)){const n=Number(t);if(n>=-2147483648&&n<=2147483647)return n}return null},Zl=function(t){try{t()}catch(t){setTimeout((()=>{throw Fl("Exception was thrown by user callback.",t.stack||""),t}),Math.floor(0))}},ta=function(t,n){const i=setTimeout(t,n);return"object"==typeof i&&i.unref&&i.unref(),i};
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class na{constructor(t,n){this.appName_=t,this.appCheckProvider=n,this.appCheck=null==n?void 0:n.getImmediate({optional:!0}),this.appCheck||null==n||n.get().then((t=>this.appCheck=t))}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise(((n,i)=>{setTimeout((()=>{this.appCheck?this.getToken(t).then(n,i):n(null)}),0)}))}addTokenChangeListener(t){var n;null===(n=this.appCheckProvider)||void 0===n||n.get().then((n=>n.addTokenListener(t)))}notifyForInvalidToken(){Fl(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(t,n,i){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit((t=>this.auth_=t))}getToken(t){return this.auth_?this.auth_.getToken(t).catch((t=>t&&"auth/token-not-initialized"===t.code?(Ll("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t))):new Promise(((n,i)=>{setTimeout((()=>{this.auth_?this.getToken(t).then(n,i):n(null)}),0)}))}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then((n=>n.addAuthTokenListener(t)))}removeTokenChangeListener(t){this.authProvider_.get().then((n=>n.removeAuthTokenListener(t)))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Fl(t)}}class ea{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}ea.OWNER="owner";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const oa=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ra{constructor(t,n,i,e,o=!1,r="",s=!1){this.secure=n,this.namespace=i,this.webSocketOnly=e,this.nodeAdmin=o,this.persistenceKey=r,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Cl.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Cl.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function sa(t,n,i){let e;if(Ei("string"==typeof n,"typeof type must == string"),Ei("object"==typeof i,"typeof params must == object"),"websocket"===n)e=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if("long_polling"!==n)throw new Error("Unknown connection type: "+n);e=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(i.ns=t.namespace);const o=[];return Xl(i,((t,n)=>{o.push(t+"="+n)})),e+o.join("&")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(){this.counters_={}}incrementCounter(t,n=1){Hi(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return Oi(this.counters_)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa={},ua={};function ca(t){const n=t.toString();return aa[n]||(aa[n]=new la),aa[n]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ha{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){const t=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let n=0;n<t.length;++n)t[n]&&Zl((()=>{this.onMessage_(t[n])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(t,n,i,e,o,r,s){this.connId=t,this.repoInfo=n,this.applicationId=i,this.appCheckToken=e,this.authToken=o,this.transportSessionId=r,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$l(t),this.stats_=ca(n),this.urlFn=t=>(this.appCheckToken&&(t.ac=this.appCheckToken),sa(n,"long_polling",t))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new ha(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{let n=!1;const i=function(){document.body?n||(n=!0,t()):setTimeout(i,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&i()})),window.attachEvent("onload",i))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new fa(((...t)=>{const[n,i,e,o,r]=t;if(this.incrementIncomingBytes_(t),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===n)this.id=i,this.password=e;else{if("close"!==n)throw new Error("Unrecognized command received: "+n);i?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(i,(()=>{this.onClosed_()}))):this.onClosed_()}}),((...t)=>{const[n,i]=t;this.incrementIncomingBytes_(t),this.myPacketOrderer.handleResponse(n,i)}),(()=>{this.onClosed_()}),this.urlFn);const t={start:"t"};t.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=this.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",this.transportSessionId&&(t.s=this.transportSessionId),this.lastSessionId&&(t.ls=this.lastSessionId),this.applicationId&&(t.p=this.applicationId),this.appCheckToken&&(t.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&oa.test(location.hostname)&&(t.r="f");const n=this.urlFn(t);this.log_("Connecting via long-poll to "+n),this.scriptTagHolder.addTag(n,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){da.forceAllow_=!0}static forceDisallow(){da.forceDisallow_=!0}static isAvailable(){return!!da.forceAllow_||!(da.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const n=Wi(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=Ai(n),e=Hl(i,1840);for(let t=0;t<e.length;t++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,e.length,e[t]),this.curSegmentNum++}addDisconnectPingFrame(t,n){this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const n=Wi(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class fa{constructor(t,n,i,e){this.onDisconnect=i,this.urlFn=e,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Nl(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=fa.createIFrame_();let i="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(i='<script>document.domain="'+document.domain+'";<\/script>');const e="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(e),this.myIFrame.doc.close()}catch(t){Ll("frame writing exception"),t.stack&&Ll(t.stack),Ll(t)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Ll("No IE domain setting required")}catch(n){const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let n=this.urlFn(t),i="",e=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const t=this.pendingSegs.shift();i=i+"&seg"+e+"="+t.seg+"&ts"+e+"="+t.ts+"&d"+e+"="+t.d,e++}return n+=i,this.addLongPollTag_(n,this.currentSerial),!0}return!1}enqueueSegment(t,n,i){this.pendingSegs.push({seg:t,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},e=setTimeout(i,Math.floor(25e3));this.addTag(t,(()=>{clearTimeout(e),i()}))}addTag(t,n){setTimeout((()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const t=i.readyState;t&&"loaded"!==t&&"complete"!==t||(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Ll("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch(t){}}),Math.floor(1))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pa,ga=null;"undefined"!=typeof MozWebSocket?ga=MozWebSocket:"undefined"!=typeof WebSocket&&(ga=WebSocket);class ma{constructor(t,n,i,e,o,r,s){this.connId=t,this.applicationId=i,this.appCheckToken=e,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$l(this.connId),this.stats_=ca(n),this.connURL=ma.connectionURL_(n,r,s,e),this.nodeAdmin=n.nodeAdmin}static connectionURL_(t,n,i,e){const o={v:"5"};return"undefined"!=typeof location&&location.hostname&&oa.test(location.hostname)&&(o.r="f"),n&&(o.s=n),i&&(o.ls=i),e&&(o.ac=e),sa(t,"websocket",o)}open(t,n){this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Cl.set("previous_websocket_failure",!0);try{this.mySock=new ga(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(t){this.log_("Error instantiating WebSocket.");const n=t.message||t.data;return n&&this.log_(n),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=t=>{this.handleIncomingFrame(t)},this.mySock.onerror=t=>{this.log_("WebSocket error.  Closing connection.");const n=t.message||t.data;n&&this.log_(n),this.onClosed_()}}start(){}static forceDisallow(){ma.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==ga&&!ma.forceDisallow_}static previouslyFailed(){return Cl.isInMemoryStorage||!0===Cl.get("previous_websocket_failure")}markConnectionHealthy(){Cl.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const n=Ki(t);this.onMessage(n)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(Ei(null===this.frames,"We already have a frame buffer"),t.length<=6){const n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(n);else{const t=this.extractFrameCount_(n);null!==t&&this.appendFrame_(t)}}send(t){this.resetKeepAlive();const n=Wi(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=Hl(n,16384);i.length>1&&this.sendString_(String(i.length));for(let t=0;t<i.length;t++)this.sendString_(i[t])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ma.responsesRequiredToBeHealthy=2,ma.healthyTimeout=3e4;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ba{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[da,ma]}initTransports_(t){const n=ma&&ma.isAvailable();let i=n&&!ma.previouslyFailed();if(t.webSocketOnly&&(n||Fl("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ma];else{const t=this.transports_=[];for(const n of ba.ALL_TRANSPORTS)n&&n.isAvailable()&&t.push(n)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(t,n,i,e,o,r,s,l,a,u){this.id=t,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=e,this.authToken_=o,this.onMessage_=r,this.onReady_=s,this.onDisconnect_=l,this.onKill_=a,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$l("c:"+this.id+":"),this.transportManager_=new ba(n),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(n,i)}),Math.floor(0));const e=t.healthyTimeout||0;e>0&&(this.healthyTimeout_=ta((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(e)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const n=t.t;"a"===n?this.upgradeIfSecondaryHealthy_():"r"===n?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===n&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const n=Wl("t",t),i=Wl("d",t);if("c"===n)this.onSecondaryControl_(i);else{if("d"!==n)throw new Error("Unknown protocol layer: "+n);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const n=Wl("t",t),i=Wl("d",t);"c"===n?this.onControl_(i):"d"===n&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const n=Wl("t",t);if("d"in t){const i=t.d;if("h"===n)this.onHandshake_(i);else if("n"===n){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let t=0;t<this.pendingDataMessages.length;++t)this.onDataMessage_(this.pendingDataMessages[t]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===n?this.onConnectionShutdown_(i):"r"===n?this.onReset_(i):"e"===n?jl("Server Error: "+i):"o"===n?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):jl("Unknown control packet command: "+n)}}onHandshake_(t){const n=t.ts,i=t.v,e=t.h;this.sessionId=t.s,this.repoInfo_.host=e,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),"5"!==i&&Fl("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),ta((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ta((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Cl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{put(t,n,i,e){}merge(t,n,i,e){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,i){}onDisconnectMerge(t,n,i){}onDisconnectCancel(t,n){}reportStats(t){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(t){this.allowedEvents_=t,this.listeners_={},Ei(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let t=0;t<i.length;t++)i[t].callback.apply(i[t].context,n)}}on(t,n,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:i});const e=this.getInitialEvent(t);e&&n.apply(i,e)}off(t,n,i){this.validateEventType_(t);const e=this.listeners_[t]||[];for(let t=0;t<e.length;t++)if(e[t].callback===n&&(!i||i===e[t].context))return void e.splice(t,1)}validateEventType_(t){Ei(this.allowedEvents_.find((n=>n===t)),"Unknown event: "+t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa extends ya{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Li()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new xa}getInitialEvent(t){return Ei("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(t,n){if(void 0===n){this.pieces_=t.split("/");let n=0;for(let t=0;t<this.pieces_.length;t++)this.pieces_[t].length>0&&(this.pieces_[n]=this.pieces_[t],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)""!==this.pieces_[n]&&(t+="/"+this.pieces_[n]);return t||"/"}}function Ia(){return new ka("")}function _a(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ea(t){return t.pieces_.length-t.pieceNum_}function Ta(t){let n=t.pieceNum_;return n<t.pieces_.length&&n++,new ka(t.pieces_,n)}function Sa(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Ca(t,n=0){return t.pieces_.slice(t.pieceNum_+n)}function Aa(t){if(t.pieceNum_>=t.pieces_.length)return null;const n=[];for(let i=t.pieceNum_;i<t.pieces_.length-1;i++)n.push(t.pieces_[i]);return new ka(n,0)}function Da(t,n){const i=[];for(let n=t.pieceNum_;n<t.pieces_.length;n++)i.push(t.pieces_[n]);if(n instanceof ka)for(let t=n.pieceNum_;t<n.pieces_.length;t++)i.push(n.pieces_[t]);else{const t=n.split("/");for(let n=0;n<t.length;n++)t[n].length>0&&i.push(t[n])}return new ka(i,0)}function Na(t){return t.pieceNum_>=t.pieces_.length}function Oa(t,n){const i=_a(t),e=_a(n);if(null===i)return n;if(i===e)return Oa(Ta(t),Ta(n));throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+t+")")}function Pa(t,n){const i=Ca(t,0),e=Ca(n,0);for(let t=0;t<i.length&&t<e.length;t++){const n=ql(i[t],e[t]);if(0!==n)return n}return i.length===e.length?0:i.length<e.length?-1:1}function Ra(t,n){if(Ea(t)!==Ea(n))return!1;for(let i=t.pieceNum_,e=n.pieceNum_;i<=t.pieces_.length;i++,e++)if(t.pieces_[i]!==n.pieces_[e])return!1;return!0}function Ma(t,n){let i=t.pieceNum_,e=n.pieceNum_;if(Ea(t)>Ea(n))return!1;for(;i<t.pieces_.length;){if(t.pieces_[i]!==n.pieces_[e])return!1;++i,++e}return!0}class La{constructor(t,n){this.errorPrefix_=n,this.parts_=Ca(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let t=0;t<this.parts_.length;t++)this.byteLength_+=le(this.parts_[t]);$a(this)}}function $a(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ja(t))}function ja(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za extends ya{constructor(){let t,n;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",t="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,(()=>{const n=!document[t];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))}),!1)}static getInstance(){return new za}getInitialEvent(t){return Ei("visible"===t,"Unknown event type: "+t),[this.visible_]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa extends wa{constructor(t,n,i,e,o,r,s,l){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=e,this.onServerInfoUpdate_=o,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.authOverride_=l,this.id=Fa.nextPersistentConnectionId_++,this.log_=$l("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=1e3,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");za.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&xa.getInstance().on("online",this.onOnline_,this)}sendRequest(t,n,i){const e=++this.requestNumber_,o={r:e,a:t,b:n};this.log_(Wi(o)),Ei(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[e]=i)}get(t){this.initConnection_();const n=new Ri,i={p:t._path.toString(),q:t._queryObject},e={action:"g",request:i,onComplete:t=>{const e=t.d;"ok"===t.s?(this.onDataUpdate_(i.p,e,!1,null),n.resolve(e)):n.reject(e)}};this.outstandingGets_.push(e),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_||setTimeout((()=>{const t=this.outstandingGets_[o];void 0!==t&&e===t&&(delete this.outstandingGets_[o],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+o+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(o),n.promise}listen(t,n,i,e){this.initConnection_();const o=t._queryIdentifier,r=t._path.toString();this.log_("Listen called for "+r+" "+o),this.listens.has(r)||this.listens.set(r,new Map),Ei(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ei(!this.listens.get(r).has(o),"listen() called twice for same path/queryId.");const s={onComplete:e,hashFn:n,query:t,tag:i};this.listens.get(r).set(o,s),this.connected_&&this.sendListen_(s)}sendGet_(t){const n=this.outstandingGets_[t];this.sendRequest("g",n.request,(i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)}))}sendListen_(t){const n=t.query,i=n._path.toString(),e=n._queryIdentifier;this.log_("Listen on "+i+" for "+e);const o={p:i};t.tag&&(o.q=n._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,(o=>{const r=o.d,s=o.s;Fa.warnOnListenWarnings_(r,n),(this.listens.get(i)&&this.listens.get(i).get(e))===t&&(this.log_("listen response",o),"ok"!==s&&this.removeListen_(i,e),t.onComplete&&t.onComplete(s,r))}))}static warnOnListenWarnings_(t,n){if(t&&"object"==typeof t&&Hi(t,"w")){const i=Xi(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const t='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();Fl(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${t} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(t){const n=Gi(t).claims;return"object"==typeof n&&!0===n.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,n=function(t){const n=Gi(t).claims;return!!n&&"object"==typeof n&&n.hasOwnProperty("iat")}(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(n,i,(n=>{const i=n.s,e=n.d||"error";this.authToken_===t&&("ok"===i?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,e))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(t=>{const n=t.s,i=t.d||"error";"ok"===n?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)}))}unlisten(t,n){const i=t._path.toString(),e=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+e),Ei(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,e)&&this.connected_&&this.sendUnlisten_(i,e,t._queryObject,n)}sendUnlisten_(t,n,i,e){this.log_("Unlisten on "+t+" for "+n);const o={p:t};e&&(o.q=i,o.t=e),this.sendRequest("n",o)}onDisconnectPut(t,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,n,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:n,onComplete:i})}onDisconnectMerge(t,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,n,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:n,onComplete:i})}onDisconnectCancel(t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(t,n,i,e){const o={p:n,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,(t=>{e&&setTimeout((()=>{e(t.s,t.d)}),Math.floor(0))}))}put(t,n,i,e){this.putInternal("p",t,n,i,e)}merge(t,n,i,e){this.putInternal("m",t,n,i,e)}putInternal(t,n,i,e,o){this.initConnection_();const r={p:n,d:i};void 0!==o&&(r.h=o),this.outstandingPuts_.push({action:t,request:r,onComplete:e}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+n)}sendPut_(t){const n=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,e=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,i,(i=>{this.log_(n+" response",i),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),e&&e(i.s,i.d)}))}reportStats(t){if(this.connected_){const n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(t=>{"ok"!==t.s&&this.log_("reportStats","Error sending stats: "+t.d)}))}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Wi(t));const n=t.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,n){this.log_("handleServerMessage",t,n),"d"===t?this.onDataUpdate_(n.p,n.d,!1,n.t):"m"===t?this.onDataUpdate_(n.p,n.d,!0,n.t):"c"===t?this.onListenRevoked_(n.p,n.q):"ac"===t?this.onAuthRevoked_(n.s,n.d):"apc"===t?this.onAppCheckRevoked_(n.s,n.d):"sd"===t?this.onSecurityDebugPacket_(n):jl("Unrecognized action received from server: "+Wi(t)+"\nAre you using the latest client?")}onReady_(t,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){Ei(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),e=this.id+":"+Fa.nextConnectionId_++,o=this.lastSessionId;let r=!1,s=null;const l=function(){s?s.close():(r=!0,i())};this.realtime_={close:l,sendRequest:function(t){Ei(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(t)}};const a=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[l,u]=await Promise.all([this.authTokenProvider_.getToken(a),this.appCheckTokenProvider_.getToken(a)]);r?Ll("getToken() completed but was canceled"):(Ll("getToken() completed. Creating connection."),this.authToken_=l&&l.accessToken,this.appCheckToken_=u&&u.token,s=new va(e,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,i,(t=>{Fl(t+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),o))}catch(t){this.log_("Failed to get token: "+t),r||(this.repoInfo_.nodeAdmin&&Fl(t),l())}}}interrupt(t){Ll("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ll("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Yi(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const n=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const n=this.outstandingPuts_[t];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,n){let i;i=n?n.map((t=>Gl(t))).join("$"):"default";const e=this.removeListen_(t,i);e&&e.onComplete&&e.onComplete("permission_denied")}removeListen_(t,n){const i=new ka(t).toString();let e;if(this.listens.has(i)){const t=this.listens.get(i);e=t.get(n),t.delete(n),0===t.size&&this.listens.delete(i)}else e=void 0;return e}onAuthRevoked_(t,n){Ll("Auth token revoked: "+t+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,n){Ll("App check token revoked: "+t+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const n of t.values())this.sendListen_(n);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};t["sdk.js."+_l.replace(/\./g,"-")]=1,Li()?t["framework.cordova"]=1:ji()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=xa.getInstance().currentlyOnline();return Yi(this.interruptReasons_)&&t}}Fa.nextPersistentConnectionId_=0,Fa.nextConnectionId_=0;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Va{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new Va(t,n)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){const i=new Va(Ul,t),e=new Va(Ul,n);return 0!==this.compare(i,e)}minPost(){return Va.MIN}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba extends Ua{static get __EMPTY_NODE(){return pa}static set __EMPTY_NODE(t){pa=t}compare(t,n){return ql(t.name,n.name)}isDefinedOn(t){throw Ti("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return Va.MIN}maxPost(){return new Va(Bl,pa)}makePost(t,n){return Ei("string"==typeof t,"KeyIndex indexValue must always be a string."),new Va(t,pa)}toString(){return".key"}}const qa=new Ba;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(t,n,i,e,o=null){this.isReverse_=e,this.resultGenerator_=o,this.nodeStack_=[];let r=1;for(;!t.isEmpty();)if(t=t,r=n?i(t.key,n):1,e&&(r*=-1),r<0)t=this.isReverse_?t.left:t.right;else{if(0===r){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,n=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value},this.isReverse_)for(n=n.left;!n.isEmpty();)this.nodeStack_.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack_.push(n),n=n.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class Wa{constructor(t,n,i,e,o){this.key=t,this.value=n,this.color=null!=i?i:Wa.RED,this.left=null!=e?e:Ga.EMPTY_NODE,this.right=null!=o?o:Ga.EMPTY_NODE}copy(t,n,i,e,o){return new Wa(null!=t?t:this.key,null!=n?n:this.value,null!=i?i:this.color,null!=e?e:this.left,null!=o?o:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let e=this;const o=i(t,e.key);return e=o<0?e.copy(null,null,null,e.left.insert(t,n,i),null):0===o?e.copy(null,n,null,null,null):e.copy(null,null,null,null,e.right.insert(t,n,i)),e.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ga.EMPTY_NODE;let t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,n){let i,e;if(i=this,n(t,i.key)<0)i.left.isEmpty()||i.left.isRed_()||i.left.left.isRed_()||(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),i.right.isEmpty()||i.right.isRed_()||i.right.left.isRed_()||(i=i.moveRedRight_()),0===n(t,i.key)){if(i.right.isEmpty())return Ga.EMPTY_NODE;e=i.right.min_(),i=i.copy(e.key,e.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,Wa.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,Wa.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}Wa.RED=!0,Wa.BLACK=!1;class Ga{constructor(t,n=Ga.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new Ga(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Wa.BLACK,null,null))}remove(t){return new Ga(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Wa.BLACK,null,null))}get(t){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(t,i.key),0===n)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(t){let n,i=this.root_,e=null;for(;!i.isEmpty();){if(n=this.comparator_(t,i.key),0===n){if(i.left.isEmpty())return e?e.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}n<0?i=i.left:n>0&&(e=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Ka(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new Ka(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new Ka(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new Ka(this.root_,null,this.comparator_,!0,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ha(t,n){return ql(t.name,n.name)}function Xa(t,n){return ql(t,n)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ya;Ga.EMPTY_NODE=new class{copy(t,n,i,e,o){return this}insert(t,n,i){return new Wa(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Ja=function(t){return"number"==typeof t?"number:"+Yl(t):"string:"+t},Qa=function(t){if(t.isLeafNode()){const n=t.val();Ei("string"==typeof n||"number"==typeof n||"object"==typeof n&&Hi(n,".sv"),"Priority must be a string or number.")}else Ei(t===Ya||t.isEmpty(),"priority of unexpected type.");Ei(t===Ya||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Za,tu,nu;class iu{constructor(t,n=iu.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Ei(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Qa(this.priorityNode_)}static set __childrenNodeConstructor(t){Za=t}static get __childrenNodeConstructor(){return Za}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new iu(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:iu.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Na(t)?this:".priority"===_a(t)?this.priorityNode_:iu.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,n){return null}updateImmediateChild(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:iu.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){const i=_a(t);return null===i?n:n.isEmpty()&&".priority"!==i?this:(Ei(".priority"!==i||1===Ea(t),".priority must be the last token in a path"),this.updateImmediateChild(i,iu.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ta(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,n){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Ja(this.priorityNode_.val())+":");const n=typeof this.value_;t+=n+":",t+="number"===n?Yl(this.value_):this.value_,this.lazyHash_=Ol(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===iu.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof iu.__childrenNodeConstructor?-1:(Ei(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const n=typeof t.value_,i=typeof this.value_,e=iu.VALUE_TYPE_ORDER.indexOf(n),o=iu.VALUE_TYPE_ORDER.indexOf(i);return Ei(e>=0,"Unknown leaf type: "+n),Ei(o>=0,"Unknown leaf type: "+i),e===o?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-e}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}return!1}}iu.VALUE_TYPE_ORDER=["object","boolean","number","string"];const eu=new class extends Ua{compare(t,n){const i=t.node.getPriority(),e=n.node.getPriority(),o=i.compareTo(e);return 0===o?ql(t.name,n.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return Va.MIN}maxPost(){return new Va(Bl,new iu("[PRIORITY-POST]",nu))}makePost(t,n){const i=tu(t);return new Va(n,new iu("[PRIORITY-POST]",i))}toString(){return".priority"}},ou=Math.log(2);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(t){this.count=parseInt(Math.log(t+1)/ou,10),this.current_=this.count-1;const n=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&n}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const su=function(t,n,i,e){t.sort(n);const o=function(n,e){const r=e-n;let s,l;if(0===r)return null;if(1===r)return s=t[n],l=i?i(s):s,new Wa(l,s.node,Wa.BLACK,null,null);{const a=parseInt(r/2,10)+n,u=o(n,a),c=o(a+1,e);return s=t[a],l=i?i(s):s,new Wa(l,s.node,Wa.BLACK,u,c)}},r=function(n){let e=null,r=null,s=t.length;const l=function(n,e){const r=s-n,l=s;s-=n;const u=o(r+1,l),c=t[r],h=i?i(c):c;a(new Wa(h,c.node,e,null,u))},a=function(t){e?(e.left=t,e=t):(r=t,e=t)};for(let t=0;t<n.count;++t){const i=n.nextBitIsOne(),e=Math.pow(2,n.count-(t+1));i?l(e,Wa.BLACK):(l(e,Wa.BLACK),l(e,Wa.RED))}return r}(new ru(t.length));return new Ga(e||n,r)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lu;const au={};class uu{constructor(t,n){this.indexes_=t,this.indexSet_=n}static get Default(){return Ei(au&&eu,"ChildrenNode.ts has not been loaded"),lu=lu||new uu({".priority":au},{".priority":eu}),lu}get(t){const n=Xi(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof Ga?n:null}hasIndex(t){return Hi(this.indexSet_,t.toString())}addIndex(t,n){Ei(t!==qa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let e=!1;const o=n.getIterator(Va.Wrap);let r,s=o.getNext();for(;s;)e=e||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=e?su(i,t.getCompare()):au;const l=t.toString(),a=Object.assign({},this.indexSet_);a[l]=t;const u=Object.assign({},this.indexes_);return u[l]=r,new uu(u,a)}addToIndexes(t,n){const i=Ji(this.indexes_,((i,e)=>{const o=Xi(this.indexSet_,e);if(Ei(o,"Missing index implementation for "+e),i===au){if(o.isDefinedOn(t.node)){const i=[],e=n.getIterator(Va.Wrap);let r=e.getNext();for(;r;)r.name!==t.name&&i.push(r),r=e.getNext();return i.push(t),su(i,o.getCompare())}return au}{const e=n.get(t.name);let o=i;return e&&(o=o.remove(new Va(t.name,e))),o.insert(t,t.node)}}));return new uu(i,this.indexSet_)}removeFromIndexes(t,n){const i=Ji(this.indexes_,(i=>{if(i===au)return i;{const e=n.get(t.name);return e?i.remove(new Va(t.name,e)):i}}));return new uu(i,this.indexSet_)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cu;class hu{constructor(t,n,i){this.children_=t,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Qa(this.priorityNode_),this.children_.isEmpty()&&Ei(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return cu||(cu=new hu(new Ga(Xa),null,uu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||cu}updatePriority(t){return this.children_.isEmpty()?this:new hu(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const n=this.children_.get(t);return null===n?cu:n}}getChild(t){const n=_a(t);return null===n?this:this.getImmediateChild(n).getChild(Ta(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,n){if(Ei(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);{const i=new Va(t,n);let e,o;n.isEmpty()?(e=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(e=this.children_.insert(t,n),o=this.indexMap_.addToIndexes(i,this.children_));const r=e.isEmpty()?cu:this.priorityNode_;return new hu(e,r,o)}}updateChild(t,n){const i=_a(t);if(null===i)return n;{Ei(".priority"!==_a(t)||1===Ea(t),".priority must be the last token in a path");const e=this.getImmediateChild(i).updateChild(Ta(t),n);return this.updateImmediateChild(i,e)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const n={};let i=0,e=0,o=!0;if(this.forEachChild(eu,((r,s)=>{n[r]=s.val(t),i++,o&&hu.INTEGER_REGEXP_.test(r)?e=Math.max(e,Number(r)):o=!1})),!t&&o&&e<2*i){const t=[];for(const i in n)t[i]=n[i];return t}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Ja(this.getPriority().val())+":"),this.forEachChild(eu,((n,i)=>{const e=i.hash();""!==e&&(t+=":"+n+":"+e)})),this.lazyHash_=""===t?"":Ol(t)}return this.lazyHash_}getPredecessorChildName(t,n,i){const e=this.resolveIndex_(i);if(e){const i=e.getPredecessorKey(new Va(t,n));return i?i.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const n=this.resolveIndex_(t);if(n){const t=n.minKey();return t&&t.name}return this.children_.minKey()}getFirstChild(t){const n=this.getFirstChildName(t);return n?new Va(n,this.children_.get(n)):null}getLastChildName(t){const n=this.resolveIndex_(t);if(n){const t=n.maxKey();return t&&t.name}return this.children_.maxKey()}getLastChild(t){const n=this.getLastChildName(t);return n?new Va(n,this.children_.get(n)):null}forEachChild(t,n){const i=this.resolveIndex_(t);return i?i.inorderTraversal((t=>n(t.name,t.node))):this.children_.inorderTraversal(n)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(t,(t=>t));{const i=this.children_.getIteratorFrom(t.name,Va.Wrap);let e=i.peek();for(;null!=e&&n.compare(e,t)<0;)i.getNext(),e=i.peek();return i}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(t,(t=>t));{const i=this.children_.getReverseIteratorFrom(t.name,Va.Wrap);let e=i.peek();for(;null!=e&&n.compare(e,t)>0;)i.getNext(),e=i.peek();return i}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===du?-1:0}withIndex(t){if(t===qa||this.indexMap_.hasIndex(t))return this;{const n=this.indexMap_.addIndex(t,this.children_);return new hu(this.children_,this.priorityNode_,n)}}isIndexed(t){return t===qa||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const n=t;if(this.getPriority().equals(n.getPriority())){if(this.children_.count()===n.children_.count()){const t=this.getIterator(eu),i=n.getIterator(eu);let e=t.getNext(),o=i.getNext();for(;e&&o;){if(e.name!==o.name||!e.node.equals(o.node))return!1;e=t.getNext(),o=i.getNext()}return null===e&&null===o}return!1}return!1}}resolveIndex_(t){return t===qa?null:this.indexMap_.get(t.toString())}}hu.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const du=new class extends hu{constructor(){super(new Ga(Xa),hu.EMPTY_NODE,uu.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return hu.EMPTY_NODE}isEmpty(){return!1}};function fu(t,n=null){if(null===t)return hu.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(n=t[".priority"]),Ei(null===n||"string"==typeof n||"number"==typeof n||"object"==typeof n&&".sv"in n,"Invalid priority type found: "+typeof n),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new iu(t,fu(n));if(t instanceof Array){let i=hu.EMPTY_NODE;return Xl(t,((n,e)=>{if(Hi(t,n)&&"."!==n.substring(0,1)){const t=fu(e);!t.isLeafNode()&&t.isEmpty()||(i=i.updateImmediateChild(n,t))}})),i.updatePriority(fu(n))}{const i=[];let e=!1;if(Xl(t,((t,n)=>{if("."!==t.substring(0,1)){const o=fu(n);o.isEmpty()||(e=e||!o.getPriority().isEmpty(),i.push(new Va(t,o)))}})),0===i.length)return hu.EMPTY_NODE;const o=su(i,Ha,(t=>t.name),Xa);if(e){const t=su(i,eu.getCompare());return new hu(o,fu(n),new uu({".priority":t},{".priority":eu}))}return new hu(o,fu(n),uu.Default)}}Object.defineProperties(Va,{MIN:{value:new Va(Ul,hu.EMPTY_NODE)},MAX:{value:new Va(Bl,du)}}),Ba.__EMPTY_NODE=hu.EMPTY_NODE,iu.__childrenNodeConstructor=hu,Ya=du,nu=du,tu=fu;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class pu extends Ua{constructor(t){super(),this.indexPath_=t,Ei(!Na(t)&&".priority"!==_a(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){const i=this.extractChild(t.node),e=this.extractChild(n.node),o=i.compareTo(e);return 0===o?ql(t.name,n.name):o}makePost(t,n){const i=fu(t),e=hu.EMPTY_NODE.updateChild(this.indexPath_,i);return new Va(n,e)}maxPost(){const t=hu.EMPTY_NODE.updateChild(this.indexPath_,du);return new Va(Bl,t)}toString(){return Ca(this.indexPath_,0).join("/")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu=new class extends Ua{compare(t,n){const i=t.node.compareTo(n.node);return 0===i?ql(t.name,n.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return Va.MIN}maxPost(){return Va.MAX}makePost(t,n){const i=fu(t);return new Va(n,i)}toString(){return".value"}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(t){return{type:"value",snapshotNode:t}}function bu(t,n){return{type:"child_added",snapshotNode:n,childName:t}}function vu(t,n){return{type:"child_removed",snapshotNode:n,childName:t}}function wu(t,n,i){return{type:"child_changed",snapshotNode:n,childName:t,oldSnap:i}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class yu{constructor(t){this.index_=t}updateChild(t,n,i,e,o,r){Ei(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const s=t.getImmediateChild(n);return s.getChild(e).equals(i.getChild(e))&&s.isEmpty()===i.isEmpty()?t:(null!=r&&(i.isEmpty()?t.hasChild(n)?r.trackChildChange(vu(n,s)):Ei(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?r.trackChildChange(bu(n,i)):r.trackChildChange(wu(n,i,s))),t.isLeafNode()&&i.isEmpty()?t:t.updateImmediateChild(n,i).withIndex(this.index_))}updateFullNode(t,n,i){return null!=i&&(t.isLeafNode()||t.forEachChild(eu,((t,e)=>{n.hasChild(t)||i.trackChildChange(vu(t,e))})),n.isLeafNode()||n.forEachChild(eu,((n,e)=>{if(t.hasChild(n)){const o=t.getImmediateChild(n);o.equals(e)||i.trackChildChange(wu(n,e,o))}else i.trackChildChange(bu(n,e))}))),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?hu.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(t){this.indexedFilter_=new yu(t.getIndex()),this.index_=t.getIndex(),this.startPost_=xu.getStartPost_(t),this.endPost_=xu.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,n,i,e,o,r){return this.matches(new Va(n,i))||(i=hu.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,i,e,o,r)}updateFullNode(t,n,i){n.isLeafNode()&&(n=hu.EMPTY_NODE);let e=n.withIndex(this.index_);e=e.updatePriority(hu.EMPTY_NODE);const o=this;return n.forEachChild(eu,((t,n)=>{o.matches(new Va(t,n))||(e=e.updateImmediateChild(t,hu.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,e,i)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}return t.getIndex().maxPost()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(t){this.rangedFilter_=new xu(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,n,i,e,o,r){return this.rangedFilter_.matches(new Va(n,i))||(i=hu.EMPTY_NODE),t.getImmediateChild(n).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,i,e,o,r):this.fullLimitUpdateChild_(t,n,i,o,r)}updateFullNode(t,n,i){let e;if(n.isLeafNode()||n.isEmpty())e=hu.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<n.numChildren()&&n.isIndexed(this.index_)){let t;e=hu.EMPTY_NODE.withIndex(this.index_),t=this.reverse_?n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let i=0;for(;t.hasNext()&&i<this.limit_;){const n=t.getNext();let o;if(o=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),n)<=0:this.index_.compare(n,this.rangedFilter_.getEndPost())<=0,!o)break;e=e.updateImmediateChild(n.name,n.node),i++}}else{let t,i,o,r;if(e=n.withIndex(this.index_),e=e.updatePriority(hu.EMPTY_NODE),this.reverse_){r=e.getReverseIterator(this.index_),t=this.rangedFilter_.getEndPost(),i=this.rangedFilter_.getStartPost();const n=this.index_.getCompare();o=(t,i)=>n(i,t)}else r=e.getIterator(this.index_),t=this.rangedFilter_.getStartPost(),i=this.rangedFilter_.getEndPost(),o=this.index_.getCompare();let s=0,l=!1;for(;r.hasNext();){const n=r.getNext();!l&&o(t,n)<=0&&(l=!0),l&&s<this.limit_&&o(n,i)<=0?s++:e=e.updateImmediateChild(n.name,hu.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,e,i)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,i,e,o){let r;if(this.reverse_){const t=this.index_.getCompare();r=(n,i)=>t(i,n)}else r=this.index_.getCompare();const s=t;Ei(s.numChildren()===this.limit_,"");const l=new Va(n,i),a=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(s.hasChild(n)){const t=s.getImmediateChild(n);let c=e.getChildAfterChild(this.index_,a,this.reverse_);for(;null!=c&&(c.name===n||s.hasChild(c.name));)c=e.getChildAfterChild(this.index_,c,this.reverse_);const h=null==c?1:r(c,l);if(u&&!i.isEmpty()&&h>=0)return null!=o&&o.trackChildChange(wu(n,i,t)),s.updateImmediateChild(n,i);{null!=o&&o.trackChildChange(vu(n,t));const i=s.updateImmediateChild(n,hu.EMPTY_NODE);return null!=c&&this.rangedFilter_.matches(c)?(null!=o&&o.trackChildChange(bu(c.name,c.node)),i.updateImmediateChild(c.name,c.node)):i}}return i.isEmpty()?t:u&&r(a,l)>=0?(null!=o&&(o.trackChildChange(vu(a.name,a.node)),o.trackChildChange(bu(n,i))),s.updateImmediateChild(n,i).updateImmediateChild(a.name,hu.EMPTY_NODE)):t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=eu}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Ei(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ei(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ul}hasEnd(){return this.endSet_}getIndexEndValue(){return Ei(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ei(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Bl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Ei(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===eu}copy(){const t=new Iu;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function _u(t){const n={};if(t.isDefault())return n;let i;return t.index_===eu?i="$priority":t.index_===gu?i="$value":t.index_===qa?i="$key":(Ei(t.index_ instanceof pu,"Unrecognized index type!"),i=t.index_.toString()),n.orderBy=Wi(i),t.startSet_&&(n.startAt=Wi(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Wi(t.indexStartName_))),t.endSet_&&(n.endAt=Wi(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Wi(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_),n}function Eu(t){const n={};if(t.startSet_&&(n.sp=t.indexStartValue_,t.startNameSet_&&(n.sn=t.indexStartName_)),t.endSet_&&(n.ep=t.indexEndValue_,t.endNameSet_&&(n.en=t.indexEndName_)),t.limitSet_){n.l=t.limit_;let i=t.viewFrom_;""===i&&(i=t.isViewFromLeft()?"l":"r"),n.vf=i}return t.index_!==eu&&(n.i=t.index_.toString()),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu extends wa{constructor(t,n,i,e){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=e,this.log_=$l("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return void 0!==n?"tag$"+n:(Ei(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,n,i,e){const o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);const r=Tu.getListenId_(t,i),s={};this.listens_[r]=s;const l=_u(t._queryParams);this.restRequest_(o+".json",l,((t,n)=>{let l=n;if(404===t&&(l=null,t=null),null===t&&this.onDataUpdate_(o,l,!1,i),Xi(this.listens_,r)===s){let n;n=t?401===t?"permission_denied":"rest_error:"+t:"ok",e(n,null)}}))}unlisten(t,n){const i=Tu.getListenId_(t,n);delete this.listens_[i]}get(t){const n=_u(t._queryParams),i=t._path.toString(),e=new Ri;return this.restRequest_(i+".json",n,((t,n)=>{let o=n;404===t&&(o=null,t=null),null===t?(this.onDataUpdate_(i,o,!1,null),e.resolve(o)):e.reject(new Error(o))})),e.promise}refreshAuthToken(t){}restRequest_(t,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((([e,o])=>{e&&e.accessToken&&(n.auth=e.accessToken),o&&o.token&&(n.ac=o.token);const r=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+te(n);this.log_("Sending REST request for "+r);const s=new XMLHttpRequest;s.onreadystatechange=()=>{if(i&&4===s.readyState){this.log_("REST Response for "+r+" received. status:",s.status,"response:",s.responseText);let t=null;if(s.status>=200&&s.status<300){try{t=Ki(s.responseText)}catch(t){Fl("Failed to parse JSON response for "+r+": "+s.responseText)}i(null,t)}else 401!==s.status&&404!==s.status&&Fl("Got unsuccessful REST response for "+r+" Status: "+s.status),i(s.status);i=null}},s.open("GET",r,!0),s.send()}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(){this.rootNode_=hu.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(){return{value:null,children:new Map}}function Au(t,n,i){if(Na(n))t.value=i,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(n,i);else{const e=_a(n);t.children.has(e)||t.children.set(e,Cu()),Au(t.children.get(e),n=Ta(n),i)}}function Du(t,n){if(Na(n))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;{const i=t.value;return t.value=null,i.forEachChild(eu,((n,i)=>{Au(t,new ka(n),i)})),Du(t,n)}}if(t.children.size>0){const i=_a(n);return n=Ta(n),t.children.has(i)&&Du(t.children.get(i),n)&&t.children.delete(i),0===t.children.size}return!0}function Nu(t,n,i){null!==t.value?i(n,t.value):function(t,n){t.children.forEach(((t,i)=>{n(i,t)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,((t,e)=>{Nu(e,new ka(n.toString()+"/"+t),i)}))}class Ou{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),n=Object.assign({},t);return this.last_&&Xl(this.last_,((t,i)=>{n[t]=n[t]-i})),this.last_=t,n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Ou(t);const i=1e4+2e4*Math.random();ta(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),n={};let i=!1;Xl(t,((t,e)=>{e>0&&Hi(this.statsToReport_,t)&&(n[t]=e,i=!0)})),i&&this.server_.reportStats(n),ta(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ru;function Mu(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ru||(Ru={}));class Lu{constructor(t,n,i){this.path=t,this.affectedTree=n,this.revert=i,this.type=Ru.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(Na(this.path)){if(null!=this.affectedTree.value)return Ei(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ka(t));return new Lu(Ia(),n,this.revert)}}return Ei(_a(this.path)===t,"operationForChild called for unrelated child."),new Lu(Ta(this.path),this.affectedTree,this.revert)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(t,n){this.source=t,this.path=n,this.type=Ru.LISTEN_COMPLETE}operationForChild(t){return Na(this.path)?new $u(this.source,Ia()):new $u(this.source,Ta(this.path))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(t,n,i){this.source=t,this.path=n,this.snap=i,this.type=Ru.OVERWRITE}operationForChild(t){return Na(this.path)?new ju(this.source,Ia(),this.snap.getImmediateChild(t)):new ju(this.source,Ta(this.path),this.snap)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(t,n,i){this.source=t,this.path=n,this.children=i,this.type=Ru.MERGE}operationForChild(t){if(Na(this.path)){const n=this.children.subtree(new ka(t));return n.isEmpty()?null:n.value?new ju(this.source,Ia(),n.value):new zu(this.source,Ia(),n)}return Ei(_a(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new zu(this.source,Ta(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(t,n,i){this.node_=t,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Na(t))return this.isFullyInitialized()&&!this.filtered_;const n=_a(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function Uu(t,n,i,e,o,r){const s=e.filter((t=>t.type===i));s.sort(((n,i)=>function(t,n,i){if(null==n.childName||null==i.childName)throw Ti("Should only compare child_ events.");const e=new Va(n.childName,n.snapshotNode),o=new Va(i.childName,i.snapshotNode);return t.index_.compare(e,o)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,n,i))),s.forEach((i=>{const e=function(t,n,i){return"value"===n.type||"child_removed"===n.type||(n.prevName=i.getPredecessorChildName(n.childName,n.snapshotNode,t.index_)),n}(t,i,r);o.forEach((o=>{o.respondsTo(i.type)&&n.push(o.createEvent(e,t.query_))}))}))}function Bu(t,n){return{eventCache:t,serverCache:n}}function qu(t,n,i,e){return Bu(new Fu(n,i,e),t.serverCache)}function Ku(t,n,i,e){return Bu(t.eventCache,new Fu(n,i,e))}function Wu(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Gu(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hu;class Xu{constructor(t,n=(()=>(Hu||(Hu=new Ga(Kl)),Hu))()){this.value=t,this.children=n}static fromObject(t){let n=new Xu(null);return Xl(t,((t,i)=>{n=n.set(new ka(t),i)})),n}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(null!=this.value&&n(this.value))return{path:Ia(),value:this.value};if(Na(t))return null;{const i=_a(t),e=this.children.get(i);if(null!==e){const o=e.findRootMostMatchingPathAndValue(Ta(t),n);return null!=o?{path:Da(new ka(i),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,(()=>!0))}subtree(t){if(Na(t))return this;{const n=_a(t),i=this.children.get(n);return null!==i?i.subtree(Ta(t)):new Xu(null)}}set(t,n){if(Na(t))return new Xu(n,this.children);{const i=_a(t),e=(this.children.get(i)||new Xu(null)).set(Ta(t),n),o=this.children.insert(i,e);return new Xu(this.value,o)}}remove(t){if(Na(t))return this.children.isEmpty()?new Xu(null):new Xu(null,this.children);{const n=_a(t),i=this.children.get(n);if(i){const e=i.remove(Ta(t));let o;return o=e.isEmpty()?this.children.remove(n):this.children.insert(n,e),null===this.value&&o.isEmpty()?new Xu(null):new Xu(this.value,o)}return this}}get(t){if(Na(t))return this.value;{const n=_a(t),i=this.children.get(n);return i?i.get(Ta(t)):null}}setTree(t,n){if(Na(t))return n;{const i=_a(t),e=(this.children.get(i)||new Xu(null)).setTree(Ta(t),n);let o;return o=e.isEmpty()?this.children.remove(i):this.children.insert(i,e),new Xu(this.value,o)}}fold(t){return this.fold_(Ia(),t)}fold_(t,n){const i={};return this.children.inorderTraversal(((e,o)=>{i[e]=o.fold_(Da(t,e),n)})),n(t,this.value,i)}findOnPath(t,n){return this.findOnPath_(t,Ia(),n)}findOnPath_(t,n,i){const e=!!this.value&&i(n,this.value);if(e)return e;if(Na(t))return null;{const e=_a(t),o=this.children.get(e);return o?o.findOnPath_(Ta(t),Da(n,e),i):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,Ia(),n)}foreachOnPath_(t,n,i){if(Na(t))return this;{this.value&&i(n,this.value);const e=_a(t),o=this.children.get(e);return o?o.foreachOnPath_(Ta(t),Da(n,e),i):new Xu(null)}}foreach(t){this.foreach_(Ia(),t)}foreach_(t,n){this.children.inorderTraversal(((i,e)=>{e.foreach_(Da(t,i),n)})),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal(((n,i)=>{i.value&&t(n,i.value)}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(t){this.writeTree_=t}static empty(){return new Yu(new Xu(null))}}function Ju(t,n,i){if(Na(n))return new Yu(new Xu(i));{const e=t.writeTree_.findRootMostValueAndPath(n);if(null!=e){const o=e.path;let r=e.value;const s=Oa(o,n);return r=r.updateChild(s,i),new Yu(t.writeTree_.set(o,r))}{const e=new Xu(i),o=t.writeTree_.setTree(n,e);return new Yu(o)}}}function Qu(t,n,i){let e=t;return Xl(i,((t,i)=>{e=Ju(e,Da(n,t),i)})),e}function Zu(t,n){if(Na(n))return Yu.empty();{const i=t.writeTree_.setTree(n,new Xu(null));return new Yu(i)}}function tc(t,n){return null!=nc(t,n)}function nc(t,n){const i=t.writeTree_.findRootMostValueAndPath(n);return null!=i?t.writeTree_.get(i.path).getChild(Oa(i.path,n)):null}function ic(t){const n=[],i=t.writeTree_.value;return null!=i?i.isLeafNode()||i.forEachChild(eu,((t,i)=>{n.push(new Va(t,i))})):t.writeTree_.children.inorderTraversal(((t,i)=>{null!=i.value&&n.push(new Va(t,i.value))})),n}function ec(t,n){if(Na(n))return t;{const i=nc(t,n);return new Yu(null!=i?new Xu(i):t.writeTree_.subtree(n))}}function oc(t){return t.writeTree_.isEmpty()}function rc(t,n){return sc(Ia(),t.writeTree_,n)}function sc(t,n,i){if(null!=n.value)return i.updateChild(t,n.value);{let e=null;return n.children.inorderTraversal(((n,o)=>{".priority"===n?(Ei(null!==o.value,"Priority writes must always be leaf nodes"),e=o.value):i=sc(Da(t,n),o,i)})),i.getChild(t).isEmpty()||null===e||(i=i.updateChild(Da(t,".priority"),e)),i}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(t,n){return vc(n,t)}function ac(t,n){if(t.snap)return Ma(t.path,n);for(const i in t.children)if(t.children.hasOwnProperty(i)&&Ma(Da(t.path,i),n))return!0;return!1}function uc(t){return t.visible}function cc(t,n,i){let e=Yu.empty();for(let o=0;o<t.length;++o){const r=t[o];if(n(r)){const t=r.path;let n;if(r.snap)Ma(i,t)?(n=Oa(i,t),e=Ju(e,n,r.snap)):Ma(t,i)&&(n=Oa(t,i),e=Ju(e,Ia(),r.snap.getChild(n)));else{if(!r.children)throw Ti("WriteRecord should have .snap or .children");if(Ma(i,t))n=Oa(i,t),e=Qu(e,n,r.children);else if(Ma(t,i))if(n=Oa(t,i),Na(n))e=Qu(e,Ia(),r.children);else{const t=Xi(r.children,_a(n));if(t){const i=t.getChild(Ta(n));e=Ju(e,Ia(),i)}}}}}return e}function hc(t,n,i,e,o){if(e||o){const r=ec(t.visibleWrites,n);return!o&&oc(r)?i:o||null!=i||tc(r,Ia())?rc(cc(t.allWrites,(function(t){return(t.visible||o)&&(!e||!~e.indexOf(t.writeId))&&(Ma(t.path,n)||Ma(n,t.path))}),n),i||hu.EMPTY_NODE):null}{const e=nc(t.visibleWrites,n);if(null!=e)return e;{const e=ec(t.visibleWrites,n);return oc(e)?i:null!=i||tc(e,Ia())?rc(e,i||hu.EMPTY_NODE):null}}}function dc(t,n,i,e){return hc(t.writeTree,t.treePath,n,i,e)}function fc(t,n){return function(t,n,i){let e=hu.EMPTY_NODE;const o=nc(t.visibleWrites,n);if(o)return o.isLeafNode()||o.forEachChild(eu,((t,n)=>{e=e.updateImmediateChild(t,n)})),e;if(i){const o=ec(t.visibleWrites,n);return i.forEachChild(eu,((t,n)=>{const i=rc(ec(o,new ka(t)),n);e=e.updateImmediateChild(t,i)})),ic(o).forEach((t=>{e=e.updateImmediateChild(t.name,t.node)})),e}return ic(ec(t.visibleWrites,n)).forEach((t=>{e=e.updateImmediateChild(t.name,t.node)})),e}(t.writeTree,t.treePath,n)}function pc(t,n,i,e){return function(t,n,i,e,o){Ei(e||o,"Either existingEventSnap or existingServerSnap must exist");const r=Da(n,i);if(tc(t.visibleWrites,r))return null;{const n=ec(t.visibleWrites,r);return oc(n)?o.getChild(i):rc(n,o.getChild(i))}}(t.writeTree,t.treePath,n,i,e)}function gc(t,n){return function(t,n){return nc(t.visibleWrites,n)}(t.writeTree,Da(t.treePath,n))}function mc(t,n,i){return function(t,n,i,e){const o=Da(n,i),r=nc(t.visibleWrites,o);return null!=r?r:e.isCompleteForChild(i)?rc(ec(t.visibleWrites,o),e.getNode().getImmediateChild(i)):null}(t.writeTree,t.treePath,n,i)}function bc(t,n){return vc(Da(t.treePath,n),t.writeTree)}function vc(t,n){return{treePath:t,writeTree:n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(){this.changeMap=new Map}trackChildChange(t){const n=t.type,i=t.childName;Ei("child_added"===n||"child_changed"===n||"child_removed"===n,"Only child changes supported for tracking"),Ei(".priority"!==i,"Only non-priority child changes can be tracked.");const e=this.changeMap.get(i);if(e){const o=e.type;if("child_added"===n&&"child_removed"===o)this.changeMap.set(i,wu(i,t.snapshotNode,e.snapshotNode));else if("child_removed"===n&&"child_added"===o)this.changeMap.delete(i);else if("child_removed"===n&&"child_changed"===o)this.changeMap.set(i,vu(i,e.oldSnap));else if("child_changed"===n&&"child_added"===o)this.changeMap.set(i,bu(i,t.snapshotNode));else{if("child_changed"!==n||"child_changed"!==o)throw Ti("Illegal combination of changes: "+t+" occurred after "+e);this.changeMap.set(i,wu(i,t.snapshotNode,e.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc=new class{getCompleteChild(t){return null}getChildAfterChild(t,n,i){return null}};class xc{constructor(t,n,i=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(t){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{const n=null!=this.optCompleteServerCache_?new Fu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return mc(this.writes_,t,n)}}getChildAfterChild(t,n,i){const e=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Gu(this.viewCache_),o=function(t,n,i,e,o,r){return function(t,n,i,e,o,r,s){let l;const a=ec(t.visibleWrites,n),u=nc(a,Ia());if(null!=u)l=u;else{if(null==i)return[];l=rc(a,i)}if(l=l.withIndex(s),l.isEmpty()||l.isLeafNode())return[];{const t=[],n=s.getCompare(),i=r?l.getReverseIteratorFrom(e,s):l.getIteratorFrom(e,s);let a=i.getNext();for(;a&&t.length<o;)0!==n(a,e)&&t.push(a),a=i.getNext();return t}}(t.writeTree,t.treePath,n,i,e,o,r)}(this.writes_,e,n,1,i,t);return 0===o.length?null:o[0]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(t,n,i,e,o,r){const s=n.eventCache;if(null!=gc(e,i))return n;{let l,a;if(Na(i))if(Ei(n.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),n.serverCache.isFiltered()){const i=Gu(n),o=fc(e,i instanceof hu?i:hu.EMPTY_NODE);l=t.filter.updateFullNode(n.eventCache.getNode(),o,r)}else{const i=dc(e,Gu(n));l=t.filter.updateFullNode(n.eventCache.getNode(),i,r)}else{const u=_a(i);if(".priority"===u){Ei(1===Ea(i),"Can't have a priority with additional path components");const o=s.getNode();a=n.serverCache.getNode();const r=pc(e,i,o,a);l=null!=r?t.filter.updatePriority(o,r):s.getNode()}else{const c=Ta(i);let h;if(s.isCompleteForChild(u)){a=n.serverCache.getNode();const t=pc(e,i,s.getNode(),a);h=null!=t?s.getNode().getImmediateChild(u).updateChild(c,t):s.getNode().getImmediateChild(u)}else h=mc(e,u,n.serverCache);l=null!=h?t.filter.updateChild(s.getNode(),u,h,c,o,r):s.getNode()}}return qu(n,l,s.isFullyInitialized()||Na(i),t.filter.filtersNodes())}}function Ic(t,n,i,e,o,r,s,l){const a=n.serverCache;let u;const c=s?t.filter:t.filter.getIndexedFilter();if(Na(i))u=c.updateFullNode(a.getNode(),e,null);else if(c.filtersNodes()&&!a.isFiltered()){const t=a.getNode().updateChild(i,e);u=c.updateFullNode(a.getNode(),t,null)}else{const t=_a(i);if(!a.isCompleteForPath(i)&&Ea(i)>1)return n;const o=Ta(i),r=a.getNode().getImmediateChild(t).updateChild(o,e);u=".priority"===t?c.updatePriority(a.getNode(),r):c.updateChild(a.getNode(),t,r,o,yc,null)}const h=Ku(n,u,a.isFullyInitialized()||Na(i),c.filtersNodes());return kc(t,h,i,o,new xc(o,h,r),l)}function _c(t,n,i,e,o,r,s){const l=n.eventCache;let a,u;const c=new xc(o,n,r);if(Na(i))u=t.filter.updateFullNode(n.eventCache.getNode(),e,s),a=qu(n,u,!0,t.filter.filtersNodes());else{const o=_a(i);if(".priority"===o)u=t.filter.updatePriority(n.eventCache.getNode(),e),a=qu(n,u,l.isFullyInitialized(),l.isFiltered());else{const r=Ta(i),u=l.getNode().getImmediateChild(o);let h;if(Na(r))h=e;else{const t=c.getCompleteChild(o);h=null!=t?".priority"===Sa(r)&&t.getChild(Aa(r)).isEmpty()?t:t.updateChild(r,e):hu.EMPTY_NODE}a=u.equals(h)?n:qu(n,t.filter.updateChild(l.getNode(),o,h,r,c,s),l.isFullyInitialized(),t.filter.filtersNodes())}}return a}function Ec(t,n){return t.eventCache.isCompleteForChild(n)}function Tc(t,n,i){return i.foreach(((t,i)=>{n=n.updateChild(t,i)})),n}function Sc(t,n,i,e,o,r,s,l){if(n.serverCache.getNode().isEmpty()&&!n.serverCache.isFullyInitialized())return n;let a,u=n;a=Na(i)?e:new Xu(null).setTree(i,e);const c=n.serverCache.getNode();return a.children.inorderTraversal(((i,e)=>{if(c.hasChild(i)){const a=Tc(0,n.serverCache.getNode().getImmediateChild(i),e);u=Ic(t,u,new ka(i),a,o,r,s,l)}})),a.children.inorderTraversal(((i,e)=>{const a=!n.serverCache.isCompleteForChild(i)&&void 0===e.value;if(!c.hasChild(i)&&!a){const a=Tc(0,n.serverCache.getNode().getImmediateChild(i),e);u=Ic(t,u,new ka(i),a,o,r,s,l)}})),u}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Cc{constructor(t,n){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,e=new yu(i.getIndex()),o=(r=i).loadsAllData()?new yu(r.getIndex()):r.hasLimit()?new ku(r):new xu(r);var r;this.processor_=function(t){return{filter:t}}(o);const s=n.serverCache,l=n.eventCache,a=e.updateFullNode(hu.EMPTY_NODE,s.getNode(),null),u=o.updateFullNode(hu.EMPTY_NODE,l.getNode(),null),c=new Fu(a,s.isFullyInitialized(),e.filtersNodes()),h=new Fu(u,l.isFullyInitialized(),o.filtersNodes());this.viewCache_=Bu(h,c),this.eventGenerator_=new Vu(this.query_)}get query(){return this.query_}}function Ac(t,n){const i=Gu(t.viewCache_);return i&&(t.query._queryParams.loadsAllData()||!Na(n)&&!i.getImmediateChild(_a(n)).isEmpty())?i.getChild(n):null}function Dc(t){return 0===t.eventRegistrations_.length}function Nc(t,n,i){const e=[];if(i){Ei(null==n,"A cancel should cancel all event registrations.");const o=t.query._path;t.eventRegistrations_.forEach((t=>{const n=t.createCancelEvent(i,o);n&&e.push(n)}))}if(n){let i=[];for(let e=0;e<t.eventRegistrations_.length;++e){const o=t.eventRegistrations_[e];if(o.matches(n)){if(n.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(e+1));break}}else i.push(o)}t.eventRegistrations_=i}else t.eventRegistrations_=[];return e}function Oc(t,n,i,e){n.type===Ru.MERGE&&null!==n.source.queryId&&(Ei(Gu(t.viewCache_),"We should always have a full cache before handling merges"),Ei(Wu(t.viewCache_),"Missing event cache, even though we have a server cache"));const o=t.viewCache_,r=function(t,n,i,e,o){const r=new wc;let s,l;if(i.type===Ru.OVERWRITE){const a=i;a.source.fromUser?s=_c(t,n,a.path,a.snap,e,o,r):(Ei(a.source.fromServer,"Unknown source."),l=a.source.tagged||n.serverCache.isFiltered()&&!Na(a.path),s=Ic(t,n,a.path,a.snap,e,o,l,r))}else if(i.type===Ru.MERGE){const a=i;a.source.fromUser?s=function(t,n,i,e,o,r,s){let l=n;return e.foreach(((e,a)=>{const u=Da(i,e);Ec(n,_a(u))&&(l=_c(t,l,u,a,o,r,s))})),e.foreach(((e,a)=>{const u=Da(i,e);Ec(n,_a(u))||(l=_c(t,l,u,a,o,r,s))})),l}(t,n,a.path,a.children,e,o,r):(Ei(a.source.fromServer,"Unknown source."),l=a.source.tagged||n.serverCache.isFiltered(),s=Sc(t,n,a.path,a.children,e,o,l,r))}else if(i.type===Ru.ACK_USER_WRITE){const l=i;s=l.revert?function(t,n,i,e,o,r){let s;if(null!=gc(e,i))return n;{const l=new xc(e,n,o),a=n.eventCache.getNode();let u;if(Na(i)||".priority"===_a(i)){let i;if(n.serverCache.isFullyInitialized())i=dc(e,Gu(n));else{const t=n.serverCache.getNode();Ei(t instanceof hu,"serverChildren would be complete if leaf node"),i=fc(e,t)}i=i,u=t.filter.updateFullNode(a,i,r)}else{const o=_a(i);let c=mc(e,o,n.serverCache);null==c&&n.serverCache.isCompleteForChild(o)&&(c=a.getImmediateChild(o)),u=null!=c?t.filter.updateChild(a,o,c,Ta(i),l,r):n.eventCache.getNode().hasChild(o)?t.filter.updateChild(a,o,hu.EMPTY_NODE,Ta(i),l,r):a,u.isEmpty()&&n.serverCache.isFullyInitialized()&&(s=dc(e,Gu(n)),s.isLeafNode()&&(u=t.filter.updateFullNode(u,s,r)))}return s=n.serverCache.isFullyInitialized()||null!=gc(e,Ia()),qu(n,u,s,t.filter.filtersNodes())}}(t,n,l.path,e,o,r):function(t,n,i,e,o,r,s){if(null!=gc(o,i))return n;const l=n.serverCache.isFiltered(),a=n.serverCache;if(null!=e.value){if(Na(i)&&a.isFullyInitialized()||a.isCompleteForPath(i))return Ic(t,n,i,a.getNode().getChild(i),o,r,l,s);if(Na(i)){let e=new Xu(null);return a.getNode().forEachChild(qa,((t,n)=>{e=e.set(new ka(t),n)})),Sc(t,n,i,e,o,r,l,s)}return n}{let u=new Xu(null);return e.foreach((t=>{const n=Da(i,t);a.isCompleteForPath(n)&&(u=u.set(t,a.getNode().getChild(n)))})),Sc(t,n,i,u,o,r,l,s)}}(t,n,l.path,l.affectedTree,e,o,r)}else{if(i.type!==Ru.LISTEN_COMPLETE)throw Ti("Unknown operation type: "+i.type);s=function(t,n,i,e,o){const r=n.serverCache;return kc(t,Ku(n,r.getNode(),r.isFullyInitialized()||Na(i),r.isFiltered()),i,e,yc,o)}(t,n,i.path,e,r)}const a=r.getChanges();return function(t,n,i){const e=n.eventCache;if(e.isFullyInitialized()){const o=e.getNode().isLeafNode()||e.getNode().isEmpty(),r=Wu(t);(i.length>0||!t.eventCache.isFullyInitialized()||o&&!e.getNode().equals(r)||!e.getNode().getPriority().equals(r.getPriority()))&&i.push(mu(Wu(n)))}}(n,s,a),{viewCache:s,changes:a}}(t.processor_,o,n,i,e);var s,l;return s=t.processor_,Ei((l=r.viewCache).eventCache.getNode().isIndexed(s.filter.getIndex()),"Event snap not indexed"),Ei(l.serverCache.getNode().isIndexed(s.filter.getIndex()),"Server snap not indexed"),Ei(r.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=r.viewCache,Pc(t,r.changes,r.viewCache.eventCache.getNode(),null)}function Pc(t,n,i,e){return function(t,n,i,e){const o=[],r=[];return n.forEach((n=>{"child_changed"===n.type&&t.index_.indexedValueChanged(n.oldSnap,n.snapshotNode)&&r.push({type:"child_moved",snapshotNode:n.snapshotNode,childName:n.childName})})),Uu(t,o,"child_removed",n,e,i),Uu(t,o,"child_added",n,e,i),Uu(t,o,"child_moved",r,e,i),Uu(t,o,"child_changed",n,e,i),Uu(t,o,"value",n,e,i),o}(t.eventGenerator_,n,i,e?[e]:t.eventRegistrations_)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rc,Mc;class Lc{constructor(){this.views=new Map}}function $c(t,n,i,e){const o=n.source.queryId;if(null!==o){const r=t.views.get(o);return Ei(null!=r,"SyncTree gave us an op for an invalid query."),Oc(r,n,i,e)}{let o=[];for(const r of t.views.values())o=o.concat(Oc(r,n,i,e));return o}}function jc(t){const n=[];for(const i of t.views.values())i.query._queryParams.loadsAllData()||n.push(i);return n}function zc(t,n){let i=null;for(const e of t.views.values())i=i||Ac(e,n);return i}function Fc(t,n){return n._queryParams.loadsAllData()?Bc(t):t.views.get(n._queryIdentifier)}function Vc(t,n){return null!=Fc(t,n)}function Uc(t){return null!=Bc(t)}function Bc(t){for(const n of t.views.values())if(n.query._queryParams.loadsAllData())return n;return null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qc=1;class Kc{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Xu(null),this.pendingWriteTree_={visibleWrites:Yu.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Wc(t,n,i,e,o){return function(t,n,i,e,o){Ei(e>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),t.allWrites.push({path:n,snap:i,writeId:e,visible:o}),o&&(t.visibleWrites=Ju(t.visibleWrites,n,i)),t.lastWriteId=e}(t.pendingWriteTree_,n,i,e,o),o?Qc(t,new ju({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},n,i)):[]}function Gc(t,n,i=!1){const e=function(t,n){for(let i=0;i<t.allWrites.length;i++){const e=t.allWrites[i];if(e.writeId===n)return e}return null}(t.pendingWriteTree_,n);if(function(t,n){const i=t.allWrites.findIndex((t=>t.writeId===n));Ei(i>=0,"removeWrite called with nonexistent writeId.");const e=t.allWrites[i];t.allWrites.splice(i,1);let o=e.visible,r=!1,s=t.allWrites.length-1;for(;o&&s>=0;){const n=t.allWrites[s];n.visible&&(s>=i&&ac(n,e.path)?o=!1:Ma(e.path,n.path)&&(r=!0)),s--}return!!o&&(r?(function(t){t.visibleWrites=cc(t.allWrites,uc,Ia()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(e.snap?t.visibleWrites=Zu(t.visibleWrites,e.path):Xl(e.children,(n=>{t.visibleWrites=Zu(t.visibleWrites,Da(e.path,n))})),!0))}(t.pendingWriteTree_,n)){let n=new Xu(null);return null!=e.snap?n=n.set(Ia(),!0):Xl(e.children,(t=>{n=n.set(new ka(t),!0)})),Qc(t,new Lu(e.path,n,i))}return[]}function Hc(t,n,i){return Qc(t,new ju({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n,i))}function Xc(t,n,i,e){const o=n._path,r=t.syncPointTree_.get(o);let s=[];if(r&&("default"===n._queryIdentifier||Vc(r,n))){const l=function(t,n,i,e){const o=n._queryIdentifier,r=[];let s=[];const l=Uc(t);if("default"===o)for(const[n,o]of t.views.entries())s=s.concat(Nc(o,i,e)),Dc(o)&&(t.views.delete(n),o.query._queryParams.loadsAllData()||r.push(o.query));else{const n=t.views.get(o);n&&(s=s.concat(Nc(n,i,e)),Dc(n)&&(t.views.delete(o),n.query._queryParams.loadsAllData()||r.push(n.query)))}return l&&!Uc(t)&&r.push(new(Ei(Rc,"Reference.ts has not been loaded"),Rc)(n._repo,n._path)),{removed:r,events:s}}(r,n,i,e);0===r.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(o));const a=l.removed;s=l.events;const u=-1!==a.findIndex((t=>t._queryParams.loadsAllData())),c=t.syncPointTree_.findOnPath(o,((t,n)=>Uc(n)));if(u&&!c){const n=t.syncPointTree_.subtree(o);if(!n.isEmpty()){const i=function(t){return t.fold(((t,n,i)=>{if(n&&Uc(n))return[Bc(n)];{let t=[];return n&&(t=jc(n)),Xl(i,((n,i)=>{t=t.concat(i)})),t}}))}(n);for(let n=0;n<i.length;++n){const e=i[n],o=e.query,r=nh(t,e);t.listenProvider_.startListening(lh(o),ih(t,o),r.hashFn,r.onComplete)}}}if(!c&&a.length>0&&!e)if(u){const i=null;t.listenProvider_.stopListening(lh(n),i)}else a.forEach((n=>{const i=t.queryToTagMap.get(eh(n));t.listenProvider_.stopListening(lh(n),i)}));!function(t,n){for(let i=0;i<n.length;++i){const e=n[i];if(!e._queryParams.loadsAllData()){const n=eh(e),i=t.queryToTagMap.get(n);t.queryToTagMap.delete(n),t.tagToQueryMap.delete(i)}}}(t,a)}return s}function Yc(t,n,i){const e=n._path;let o=null,r=!1;t.syncPointTree_.foreachOnPath(e,((t,n)=>{const i=Oa(t,e);o=o||zc(n,i),r=r||Uc(n)}));let s,l=t.syncPointTree_.get(e);l?(r=r||Uc(l),o=o||zc(l,Ia())):(l=new Lc,t.syncPointTree_=t.syncPointTree_.set(e,l)),null!=o?s=!0:(s=!1,o=hu.EMPTY_NODE,t.syncPointTree_.subtree(e).foreachChild(((t,n)=>{const i=zc(n,Ia());i&&(o=o.updateImmediateChild(t,i))})));const a=Vc(l,n);if(!a&&!n._queryParams.loadsAllData()){const i=eh(n);Ei(!t.queryToTagMap.has(i),"View does not exist, but we have a tag");const e=qc++;t.queryToTagMap.set(i,e),t.tagToQueryMap.set(e,i)}let u=function(t,n,i,e,o,r){const s=function(t,n,i,e,o){const r=t.views.get(n._queryIdentifier);if(!r){let t=dc(i,o?e:null),r=!1;t?r=!0:e instanceof hu?(t=fc(i,e),r=!1):(t=hu.EMPTY_NODE,r=!1);const s=Bu(new Fu(t,r,!1),new Fu(e,o,!1));return new Cc(n,s)}return r}(t,n,e,o,r);return t.views.has(n._queryIdentifier)||t.views.set(n._queryIdentifier,s),function(t,n){t.eventRegistrations_.push(n)}(s,i),function(t,n){const i=t.viewCache_.eventCache,e=[];return i.getNode().isLeafNode()||i.getNode().forEachChild(eu,((t,n)=>{e.push(bu(t,n))})),i.isFullyInitialized()&&e.push(mu(i.getNode())),Pc(t,e,i.getNode(),n)}(s,i)}(l,n,i,lc(t.pendingWriteTree_,e),o,s);if(!a&&!r){const i=Fc(l,n);u=u.concat(function(t,n,i){const e=n._path,o=ih(t,n),r=nh(t,i),s=t.listenProvider_.startListening(lh(n),o,r.hashFn,r.onComplete),l=t.syncPointTree_.subtree(e);if(o)Ei(!Uc(l.value),"If we're adding a query, it shouldn't be shadowed");else{const n=l.fold(((t,n,i)=>{if(!Na(t)&&n&&Uc(n))return[Bc(n).query];{let t=[];return n&&(t=t.concat(jc(n).map((t=>t.query)))),Xl(i,((n,i)=>{t=t.concat(i)})),t}}));for(let i=0;i<n.length;++i){const e=n[i];t.listenProvider_.stopListening(lh(e),ih(t,e))}}return s}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,n,i))}return u}function Jc(t,n,i){const e=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(n,((t,i)=>{const e=zc(i,Oa(t,n));if(e)return e}));return hc(e,n,o,i,!0)}function Qc(t,n){return Zc(n,t.syncPointTree_,null,lc(t.pendingWriteTree_,Ia()))}function Zc(t,n,i,e){if(Na(t.path))return th(t,n,i,e);{const o=n.get(Ia());null==i&&null!=o&&(i=zc(o,Ia()));let r=[];const s=_a(t.path),l=t.operationForChild(s),a=n.children.get(s);if(a&&l){const t=i?i.getImmediateChild(s):null,n=bc(e,s);r=r.concat(Zc(l,a,t,n))}return o&&(r=r.concat($c(o,t,e,i))),r}}function th(t,n,i,e){const o=n.get(Ia());null==i&&null!=o&&(i=zc(o,Ia()));let r=[];return n.children.inorderTraversal(((n,o)=>{const s=i?i.getImmediateChild(n):null,l=bc(e,n),a=t.operationForChild(n);a&&(r=r.concat(th(a,o,s,l)))})),o&&(r=r.concat($c(o,t,e,i))),r}function nh(t,n){const i=n.query,e=ih(t,i);return{hashFn:()=>(function(t){return t.viewCache_.serverCache.getNode()}(n)||hu.EMPTY_NODE).hash(),onComplete:n=>{if("ok"===n)return e?function(t,n,i){const e=oh(t,i);if(e){const i=rh(e),o=i.path,r=i.queryId,s=Oa(o,n);return sh(t,o,new $u(Mu(r),s))}return[]}(t,i._path,e):function(t,n){return Qc(t,new $u({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n))}(t,i._path);{const e=function(t,n){let i="Unknown Error";"too_big"===t?i="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?i="Client doesn't have permission to access the desired data.":"unavailable"===t&&(i="The service is unavailable");const e=new Error(t+" at "+n._path.toString()+": "+i);return e.code=t.toUpperCase(),e}(n,i);return Xc(t,i,null,e)}}}}function ih(t,n){const i=eh(n);return t.queryToTagMap.get(i)}function eh(t){return t._path.toString()+"$"+t._queryIdentifier}function oh(t,n){return t.tagToQueryMap.get(n)}function rh(t){const n=t.indexOf("$");return Ei(-1!==n&&n<t.length-1,"Bad queryKey."),{queryId:t.substr(n+1),path:new ka(t.substr(0,n))}}function sh(t,n,i){const e=t.syncPointTree_.get(n);return Ei(e,"Missing sync point for query tag that we're tracking"),$c(e,i,lc(t.pendingWriteTree_,n),null)}function lh(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Ei(Mc,"Reference.ts has not been loaded"),Mc)(t._repo,t._path):t}class ah{constructor(t){this.node_=t}getImmediateChild(t){const n=this.node_.getImmediateChild(t);return new ah(n)}node(){return this.node_}}class uh{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){const n=Da(this.path_,t);return new uh(this.syncTree_,n)}node(){return Jc(this.syncTree_,this.path_)}}const ch=function(t,n,i){return t&&"object"==typeof t?(Ei(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?hh(t[".sv"],n,i):"object"==typeof t[".sv"]?dh(t[".sv"],n):void Ei(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},hh=function(t,n,i){switch(t){case"timestamp":return i.timestamp;default:Ei(!1,"Unexpected server value: "+t)}},dh=function(t,n){t.hasOwnProperty("increment")||Ei(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;"number"!=typeof i&&Ei(!1,"Unexpected increment value: "+i);const e=n.node();if(Ei(null!=e,"Expected ChildrenNode.EMPTY_NODE for nulls"),!e.isLeafNode())return i;const o=e.getValue();return"number"!=typeof o?i:o+i},fh=function(t,n,i){return ph(t,new ah(n),i)};function ph(t,n,i){const e=t.getPriority().val(),o=ch(e,n.getImmediateChild(".priority"),i);let r;if(t.isLeafNode()){const e=t,r=ch(e.getValue(),n,i);return r!==e.getValue()||o!==e.getPriority().val()?new iu(r,fu(o)):t}{const e=t;return r=e,o!==e.getPriority().val()&&(r=r.updatePriority(new iu(o))),e.forEachChild(eu,((t,e)=>{const o=ph(e,n.getImmediateChild(t),i);o!==e&&(r=r.updateImmediateChild(t,o))})),r}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(t="",n=null,i={children:{},childCount:0}){this.name=t,this.parent=n,this.node=i}}function mh(t,n){let i=n instanceof ka?n:new ka(n),e=t,o=_a(i);for(;null!==o;){const t=Xi(e.node.children,o)||{children:{},childCount:0};e=new gh(o,e,t),i=Ta(i),o=_a(i)}return e}function bh(t){return t.node.value}function vh(t,n){t.node.value=n,Ih(t)}function wh(t){return t.node.childCount>0}function yh(t,n){Xl(t.node.children,((i,e)=>{n(new gh(i,t,e))}))}function xh(t,n,i,e){i&&!e&&n(t),yh(t,(t=>{xh(t,n,!0,e)})),i&&e&&n(t)}function kh(t){return new ka(null===t.parent?t.name:kh(t.parent)+"/"+t.name)}function Ih(t){null!==t.parent&&function(t,n,i){const e=function(t){return void 0===bh(t)&&!wh(t)}(i),o=Hi(t.node.children,n);e&&o?(delete t.node.children[n],t.node.childCount--,Ih(t)):e||o||(t.node.children[n]=i.node,t.node.childCount++,Ih(t))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t.parent,t.name,t)}const _h=/[\[\].#$\/\u0000-\u001F\u007F]/,Eh=/[\[\].#$\u0000-\u001F\u007F]/,Th=function(t){return"string"==typeof t&&0!==t.length&&!_h.test(t)},Sh=function(t){return"string"==typeof t&&0!==t.length&&!Eh.test(t)},Ch=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!Vl(t)||t&&"object"==typeof t&&Hi(t,".sv")},Ah=function(t,n,i,e){e&&void 0===n||Dh(se(t,"value"),n,i)},Dh=function(t,n,i){const e=i instanceof ka?new La(i,t):i;if(void 0===n)throw new Error(t+"contains undefined "+ja(e));if("function"==typeof n)throw new Error(t+"contains a function "+ja(e)+" with contents = "+n.toString());if(Vl(n))throw new Error(t+"contains "+n.toString()+" "+ja(e));if("string"==typeof n&&n.length>10485760/3&&le(n)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+ja(e)+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){let i=!1,o=!1;if(Xl(n,((n,r)=>{if(".value"===n)i=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!Th(n)))throw new Error(t+" contains an invalid key ("+n+") "+ja(e)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(t,n){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(n),t.byteLength_+=le(n),$a(t)}(e,n),Dh(t,r,e),function(t){const n=t.parts_.pop();t.byteLength_-=le(n),t.parts_.length>0&&(t.byteLength_-=1)}(e)})),i&&o)throw new Error(t+' contains ".value" child '+ja(e)+" in addition to actual children.")}},Nh=function(t,n,i,e){if(!(e&&void 0===i||Sh(i)))throw new Error(se(t,n)+'was an invalid path = "'+i+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Oh=function(t,n){if(".info"===_a(n))throw new Error(t+" failed = Can't modify data under /.info/")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ph{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Rh(t,n){let i=null;for(let e=0;e<n.length;e++){const o=n[e],r=o.getPath();null===i||Ra(r,i.path)||(t.eventLists_.push(i),i=null),null===i&&(i={events:[],path:r}),i.events.push(o)}i&&t.eventLists_.push(i)}function Mh(t,n,i){Rh(t,i),$h(t,(t=>Ra(t,n)))}function Lh(t,n,i){Rh(t,i),$h(t,(t=>Ma(t,n)||Ma(n,t)))}function $h(t,n){t.recursionDepth_++;let i=!0;for(let e=0;e<t.eventLists_.length;e++){const o=t.eventLists_[e];o&&(n(o.path)?(jh(t.eventLists_[e]),t.eventLists_[e]=null):i=!1)}i&&(t.eventLists_=[]),t.recursionDepth_--}function jh(t){for(let n=0;n<t.events.length;n++){const i=t.events[n];if(null!==i){t.events[n]=null;const e=i.getEventRunner();Rl&&Ll("event: "+i.toString()),Zl(e)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(t,n,i,e){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=e,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ph,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Cu(),this.transactionQueueTree_=new gh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Fh(t,n,i){if(t.stats_=ca(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Tu(t.repoInfo_,((n,i,e,o)=>{Bh(t,n,i,e,o)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((()=>qh(t,!0)),0);else{if(null!=i){if("object"!=typeof i)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Wi(i)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}t.persistentConnection_=new Fa(t.repoInfo_,n,((n,i,e,o)=>{Bh(t,n,i,e,o)}),(n=>{qh(t,n)}),(n=>{!function(t,n){Xl(n,((n,i)=>{Kh(t,n,i)}))}(t,n)}),t.authTokenProvider_,t.appCheckProvider_,i),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener((n=>{t.server_.refreshAuthToken(n)})),t.appCheckProvider_.addTokenChangeListener((n=>{t.server_.refreshAppCheckToken(n.token)})),t.statsReporter_=function(n){const i=n.toString();return ua[i]||(ua[i]=new Pu(t.stats_,t.server_)),ua[i]}(t.repoInfo_),t.infoData_=new Su,t.infoSyncTree_=new Kc({startListening:(n,i,e,o)=>{let r=[];const s=t.infoData_.getNode(n._path);return s.isEmpty()||(r=Hc(t.infoSyncTree_,n._path,s),setTimeout((()=>{o("ok")}),0)),r},stopListening:()=>{}}),Kh(t,"connected",!1),t.serverSyncTree_=new Kc({startListening:(n,i,e,o)=>(t.server_.listen(n,e,i,((i,e)=>{const r=o(i,e);Lh(t.eventQueue_,n._path,r)})),[]),stopListening:(n,i)=>{t.server_.unlisten(n,i)}})}function Vh(t){const n=t.infoData_.getNode(new ka(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+n}function Uh(t){return(n=(n={timestamp:Vh(t)})||{}).timestamp=n.timestamp||(new Date).getTime(),n;var n}function Bh(t,n,i,e,o){t.dataUpdateCount++;const r=new ka(n);i=t.interceptServerDataCallback_?t.interceptServerDataCallback_(n,i):i;let s=[];if(o)if(e){const n=Ji(i,(t=>fu(t)));s=function(t,n,i,e){const o=oh(t,e);if(o){const e=rh(o),r=e.path,s=e.queryId,l=Oa(r,n),a=Xu.fromObject(i);return sh(t,r,new zu(Mu(s),l,a))}return[]}(t.serverSyncTree_,r,n,o)}else{const n=fu(i);s=function(t,n,i,e){const o=oh(t,e);if(null!=o){const e=rh(o),r=e.path,s=e.queryId,l=Oa(r,n);return sh(t,r,new ju(Mu(s),l,i))}return[]}(t.serverSyncTree_,r,n,o)}else if(e){const n=Ji(i,(t=>fu(t)));s=function(t,n,i){const e=Xu.fromObject(i);return Qc(t,new zu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n,e))}(t.serverSyncTree_,r,n)}else{const n=fu(i);s=Hc(t.serverSyncTree_,r,n)}let l=r;s.length>0&&(l=td(t,r)),Lh(t.eventQueue_,l,s)}function qh(t,n){Kh(t,"connected",n),!1===n&&function(t){Yh(t,"onDisconnectEvents");const n=Uh(t),i=Cu();Nu(t.onDisconnect_,Ia(),((e,o)=>{const r=function(t,n,i,e){return ph(n,new uh(i,t),e)}(e,o,t.serverSyncTree_,n);Au(i,e,r)}));let e=[];Nu(i,Ia(),((n,i)=>{e=e.concat(Hc(t.serverSyncTree_,n,i));const o=rd(t,n);td(t,o)})),t.onDisconnect_=Cu(),Lh(t.eventQueue_,Ia(),e)}(t)}function Kh(t,n,i){const e=new ka("/.info/"+n),o=fu(i);t.infoData_.updateSnapshot(e,o);const r=Hc(t.infoSyncTree_,e,o);Lh(t.eventQueue_,e,r)}function Wh(t){return t.nextWriteId_++}function Gh(t,n,i){t.server_.onDisconnectCancel(n.toString(),((e,o)=>{"ok"===e&&Du(t.onDisconnect_,n),Jh(0,i,e,o)}))}function Hh(t,n,i,e){const o=fu(i);t.server_.onDisconnectPut(n.toString(),o.val(!0),((i,r)=>{"ok"===i&&Au(t.onDisconnect_,n,o),Jh(0,e,i,r)}))}function Xh(t,n,i){let e;e=".info"===_a(n._path)?Xc(t.infoSyncTree_,n,i):Xc(t.serverSyncTree_,n,i),Mh(t.eventQueue_,n._path,e)}function Yh(t,...n){let i="";t.persistentConnection_&&(i=t.persistentConnection_.id+":"),Ll(i,...n)}function Jh(t,n,i,e){n&&Zl((()=>{if("ok"===i)n(null);else{const t=(i||"error").toUpperCase();let o=t;e&&(o+=": "+e);const r=new Error(o);r.code=t,n(r)}}))}function Qh(t,n,i){return Jc(t.serverSyncTree_,n,i)||hu.EMPTY_NODE}function Zh(t,n=t.transactionQueueTree_){if(n||od(t,n),bh(n)){const i=id(t,n);Ei(i.length>0,"Sending zero length transaction queue"),i.every((t=>0===t.status))&&function(t,n,i){const e=i.map((t=>t.currentWriteId)),o=Qh(t,n,e);let r=o;const s=o.hash();for(let t=0;t<i.length;t++){const e=i[t];Ei(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const o=Oa(n,e.path);r=r.updateChild(o,e.currentOutputSnapshotRaw)}const l=r.val(!0),a=n;t.server_.put(a.toString(),l,(e=>{Yh(t,"transaction put response",{path:a.toString(),status:e});let o=[];if("ok"===e){const e=[];for(let n=0;n<i.length;n++)i[n].status=2,o=o.concat(Gc(t.serverSyncTree_,i[n].currentWriteId)),i[n].onComplete&&e.push((()=>i[n].onComplete(null,!0,i[n].currentOutputSnapshotResolved))),i[n].unwatcher();od(t,mh(t.transactionQueueTree_,n)),Zh(t,t.transactionQueueTree_),Lh(t.eventQueue_,n,o);for(let t=0;t<e.length;t++)Zl(e[t])}else{if("datastale"===e)for(let t=0;t<i.length;t++)i[t].status=3===i[t].status?4:0;else{Fl("transaction at "+a.toString()+" failed: "+e);for(let t=0;t<i.length;t++)i[t].status=4,i[t].abortReason=e}td(t,n)}}),s)}(t,kh(n),i)}else wh(n)&&yh(n,(n=>{Zh(t,n)}))}function td(t,n){const i=nd(t,n),e=kh(i);return function(t,n,i){if(0===n.length)return;const e=[];let o=[];const r=n.filter((t=>0===t.status)).map((t=>t.currentWriteId));for(let s=0;s<n.length;s++){const l=n[s],a=Oa(i,l.path);let u,c=!1;if(Ei(null!==a,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)c=!0,u=l.abortReason,o=o.concat(Gc(t.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=25)c=!0,u="maxretry",o=o.concat(Gc(t.serverSyncTree_,l.currentWriteId,!0));else{const i=Qh(t,l.path,r);l.currentInputSnapshot=i;const e=n[s].update(i.val());if(void 0!==e){Dh("transaction failed: Data returned ",e,l.path);let n=fu(e);"object"==typeof e&&null!=e&&Hi(e,".priority")||(n=n.updatePriority(i.getPriority()));const s=l.currentWriteId,a=Uh(t),u=fh(n,i,a);l.currentOutputSnapshotRaw=n,l.currentOutputSnapshotResolved=u,l.currentWriteId=Wh(t),r.splice(r.indexOf(s),1),o=o.concat(Wc(t.serverSyncTree_,l.path,u,l.currentWriteId,l.applyLocally)),o=o.concat(Gc(t.serverSyncTree_,s,!0))}else c=!0,u="nodata",o=o.concat(Gc(t.serverSyncTree_,l.currentWriteId,!0))}Lh(t.eventQueue_,i,o),o=[],c&&(n[s].status=2,setTimeout(n[s].unwatcher,Math.floor(0)),n[s].onComplete&&e.push("nodata"===u?()=>n[s].onComplete(null,!1,n[s].currentInputSnapshot):()=>n[s].onComplete(new Error(u),!1,null)))}od(t,t.transactionQueueTree_);for(let t=0;t<e.length;t++)Zl(e[t]);Zh(t,t.transactionQueueTree_)}(t,id(t,i),e),e}function nd(t,n){let i,e=t.transactionQueueTree_;for(i=_a(n);null!==i&&void 0===bh(e);)e=mh(e,i),i=_a(n=Ta(n));return e}function id(t,n){const i=[];return ed(t,n,i),i.sort(((t,n)=>t.order-n.order)),i}function ed(t,n,i){const e=bh(n);if(e)for(let t=0;t<e.length;t++)i.push(e[t]);yh(n,(n=>{ed(t,n,i)}))}function od(t,n){const i=bh(n);if(i){let t=0;for(let n=0;n<i.length;n++)2!==i[n].status&&(i[t]=i[n],t++);i.length=t,vh(n,i.length>0?i:void 0)}yh(n,(n=>{od(t,n)}))}function rd(t,n){const i=kh(nd(t,n)),e=mh(t.transactionQueueTree_,n);return function(t,n){let i=t.parent;for(;null!==i;){if(n(i))return!0;i=i.parent}}(e,(n=>{sd(t,n)})),sd(t,e),xh(e,(n=>{sd(t,n)})),i}function sd(t,n){const i=bh(n);if(i){const e=[];let o=[],r=-1;for(let n=0;n<i.length;n++)3===i[n].status||(1===i[n].status?(Ei(r===n-1,"All SENT items should be at beginning of queue."),r=n,i[n].status=3,i[n].abortReason="set"):(Ei(0===i[n].status,"Unexpected transaction status in abort"),i[n].unwatcher(),o=o.concat(Gc(t.serverSyncTree_,i[n].currentWriteId,!0)),i[n].onComplete&&e.push(i[n].onComplete.bind(null,new Error("set"),!1,null))));-1===r?vh(n,void 0):i.length=r+1,Lh(t.eventQueue_,kh(n),o);for(let t=0;t<e.length;t++)Zl(e[t])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld=function(t,n){const i=ad(t),e=i.namespace;return"firebase.com"===i.domain&&zl(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),e&&"undefined"!==e||"localhost"===i.domain||zl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Fl("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ra(i.host,i.secure,e,"ws"===i.scheme||"wss"===i.scheme,n,"",e!==i.subdomain),path:new ka(i.pathString)}},ad=function(t){let n="",i="",e="",o="",r="",s=!0,l="https",a=443;if("string"==typeof t){let u=t.indexOf("//");u>=0&&(l=t.substring(0,u-1),t=t.substring(u+2));let c=t.indexOf("/");-1===c&&(c=t.length);let h=t.indexOf("?");-1===h&&(h=t.length),n=t.substring(0,Math.min(c,h)),c<h&&(o=function(t){let n="";const i=t.split("/");for(let t=0;t<i.length;t++)if(i[t].length>0){let e=i[t];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(t){}n+="/"+e}return n}(t.substring(c,h)));const d=function(t){const n={};"?"===t.charAt(0)&&(t=t.substring(1));for(const i of t.split("&")){if(0===i.length)continue;const e=i.split("=");2===e.length?n[decodeURIComponent(e[0])]=decodeURIComponent(e[1]):Fl(`Invalid query segment '${i}' in query '${t}'`)}return n}(t.substring(Math.min(t.length,h)));u=n.indexOf(":"),u>=0?(s="https"===l||"wss"===l,a=parseInt(n.substring(u+1),10)):u=n.length;const f=n.slice(0,u);if("localhost"===f.toLowerCase())i="localhost";else if(f.split(".").length<=2)i=f;else{const t=n.indexOf(".");e=n.substring(0,t).toLowerCase(),i=n.substring(t+1),r=e}"ns"in d&&(r=d.ns)}return{host:n,port:a,domain:i,subdomain:e,secure:s,scheme:l,pathString:o,namespace:r}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ud{constructor(t,n,i,e){this.eventType=t,this.eventRegistration=n,this.snapshot=i,this.prevName=e}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Wi(this.snapshot.exportVal())}}class cd{constructor(t,n,i){this.eventRegistration=t,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return Ei(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(t,n){this._repo=t,this._path=n}cancel(){const t=new Ri;return Gh(this._repo,this._path,t.wrapCallback((()=>{}))),t.promise}remove(){Oh("OnDisconnect.remove",this._path);const t=new Ri;return Hh(this._repo,this._path,null,t.wrapCallback((()=>{}))),t.promise}set(t){Oh("OnDisconnect.set",this._path),Ah("OnDisconnect.set",t,this._path,!1);const n=new Ri;return Hh(this._repo,this._path,t,n.wrapCallback((()=>{}))),n.promise}setWithPriority(t,n){Oh("OnDisconnect.setWithPriority",this._path),Ah("OnDisconnect.setWithPriority",t,this._path,!1),function(t,n){if(Vl(n))throw new Error(se(t,"priority")+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ch(n))throw new Error(se(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}("OnDisconnect.setWithPriority",n);const i=new Ri;return function(t,n,i,e,o){const r=fu(i,e);t.server_.onDisconnectPut(n.toString(),r.val(!0),((i,e)=>{"ok"===i&&Au(t.onDisconnect_,n,r),Jh(0,o,i,e)}))}(this._repo,this._path,t,n,i.wrapCallback((()=>{}))),i.promise}update(t){Oh("OnDisconnect.update",this._path),function(t,n,i,e){if(e&&void 0===n)return;const o=se(t,"values");if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");const r=[];Xl(n,((t,n)=>{const e=new ka(t);if(Dh(o,n,Da(i,e)),".priority"===Sa(e)&&!Ch(n))throw new Error(o+"contains an invalid value for '"+e.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");r.push(e)})),function(t,n){let i,e;for(i=0;i<n.length;i++){e=n[i];const o=Ca(e);for(let n=0;n<o.length;n++)if(".priority"===o[n]&&n===o.length-1);else if(!Th(o[n]))throw new Error(t+"contains an invalid key ("+o[n]+") in path "+e.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}n.sort(Pa);let o=null;for(i=0;i<n.length;i++){if(e=n[i],null!==o&&Ma(o,e))throw new Error(t+"contains a path "+o.toString()+" that is ancestor of another path "+e.toString());o=e}}(o,r)}("OnDisconnect.update",t,this._path,!1);const n=new Ri;return function(t,n,i,e){if(Yi(i))return Ll("onDisconnect().update() called with empty data.  Don't do anything."),void Jh(0,e,"ok",void 0);t.server_.onDisconnectMerge(n.toString(),i,((o,r)=>{"ok"===o&&Xl(i,((i,e)=>{const o=fu(e);Au(t.onDisconnect_,Da(n,i),o)})),Jh(0,e,o,r)}))}(this._repo,this._path,t,n.wrapCallback((()=>{}))),n.promise}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(t,n,i,e){this._repo=t,this._path=n,this._queryParams=i,this._orderByCalled=e}get key(){return Na(this._path)?null:Sa(this._path)}get ref(){return new pd(this._repo,this._path)}get _queryIdentifier(){const t=Eu(this._queryParams),n=Gl(t);return"{}"===n?"default":n}get _queryObject(){return Eu(this._queryParams)}isEqual(t){if(!((t=ae(t))instanceof fd))return!1;const n=this._repo===t._repo,i=Ra(this._path,t._path);return n&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(t){let n="";for(let i=t.pieceNum_;i<t.pieces_.length;i++)""!==t.pieces_[i]&&(n+="/"+encodeURIComponent(String(t.pieces_[i])));return n||"/"}(this._path)}}class pd extends fd{constructor(t,n){super(t,n,new Iu,!1)}get parent(){const t=Aa(this._path);return null===t?null:new pd(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class gd{constructor(t,n,i){this._node=t,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const n=new ka(t),i=bd(this.ref,t);return new gd(this._node.getChild(n),i,eu)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,((n,i)=>t(new gd(i,bd(this.ref,n),eu))))}hasChild(t){const n=new ka(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function md(t,n){return(t=ae(t))._checkNotDeleted("ref"),void 0!==n?bd(t._root,n):t._root}function bd(t,n){var i;return null===_a((t=ae(t))._path)?("child","path",!1,(i=n)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Nh("child","path",i,false)):Nh("child","path",n,!1),new pd(t._repo,Da(t._path,n))}function vd(t){return t=ae(t),new dd(t._repo,t._path)}function wd(t,n){t=ae(t),Oh("set",t._path),Ah("set",n,t._path,!1);const i=new Ri;return function(t,n,i,e,o){Yh(t,"set",{path:n.toString(),value:i,priority:null});const r=Uh(t),s=fu(i,null),l=Jc(t.serverSyncTree_,n),a=fh(s,l,r),u=Wh(t),c=Wc(t.serverSyncTree_,n,a,u,!0);Rh(t.eventQueue_,c),t.server_.put(n.toString(),s.val(!0),((i,e)=>{const r="ok"===i;r||Fl("set at "+n+" failed: "+i);const s=Gc(t.serverSyncTree_,u,!r);Lh(t.eventQueue_,n,s),Jh(0,o,i,e)}));const h=rd(t,n);td(t,h),Lh(t.eventQueue_,h,[])}(t._repo,t._path,n,0,i.wrapCallback((()=>{}))),i.promise}class yd{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,n){const i=n._queryParams.getIndex();return new ud("value",this,new gd(t.snapshotNode,new pd(n._repo,n._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new cd(this,t,n):null}matches(t){return t instanceof yd&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class xd{constructor(t,n){this.eventType=t,this.callbackContext=n}respondsTo(t){let n="children_added"===t?"child_added":t;return n="children_removed"===n?"child_removed":n,this.eventType===n}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new cd(this,t,n):null}createEvent(t,n){Ei(null!=t.childName,"Child events should have a childName.");const i=bd(new pd(n._repo,n._path),t.childName),e=n._queryParams.getIndex();return new ud(t.type,this,new gd(t.snapshotNode,i,e),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof xd&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}var kd;kd=pd,Ei(!Rc,"__referenceConstructor has already been defined"),Rc=kd,function(t){Ei(!Mc,"__referenceConstructor has already been defined"),Mc=t}(pd);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Id={};function _d(t,n,i,e,o){let r=e||t.options.databaseURL;void 0===r&&(t.options.projectId||zl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ll("Using default host for project ",t.options.projectId),r=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s,l,a=ld(r,o),u=a.repoInfo;void 0!==f&&f.env&&(l=f.env.FIREBASE_DATABASE_EMULATOR_HOST),l?(s=!0,r=`http://${l}?ns=${u.namespace}`,a=ld(r,o),u=a.repoInfo):s=!a.repoInfo.secure;const c=o&&s?new ea(ea.OWNER):new ia(t.name,t.options,n);(function(t,n){const i=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Th(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==i.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Sh(t)}(i))throw new Error(se(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",a),Na(a.path)||zl("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(t,n,i,e){let o=Id[n.name];o||(o={},Id[n.name]=o);let r=o[t.toURLString()];return r&&zl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new zh(t,!1,i,e),o[t.toURLString()]=r,r}(u,t,c,new na(t.name,i));return new Ed(h,t)}class Ed{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Fh(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new pd(this._repo,Ia())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(t,n){const i=Id[n];i&&i[t.key]===t||zl(`Database ${n}(${t.repoInfo_}) has already been deleted.`),function(t){t.persistentConnection_&&t.persistentConnection_.interrupt("repo_interrupt")}(t),delete i[t.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&zl("Cannot call "+t+" on a deleted database.")}}Fa.prototype.simpleListen=function(t,n){this.sendRequest("q",{p:t},n)},Fa.prototype.echo=function(t,n){this.sendRequest("echo",{d:t},n)},_l="9.6.11",Oe(new me("database",((t,{instanceIdentifier:n})=>_d(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),n)),"PUBLIC").setMultipleInstances(!0)),$e("@firebase/database","0.12.8",void 0),$e("@firebase/database","0.12.8","esm2017");class Td{constructor(t,n,i){this.ref=null,this.metadata=null,this.onError=null,this.setMetadataPromise=null,this.ref=t,this.metadata=n,this.onError=i,vd(this.ref).remove().then((()=>{this.setMetadataPromise=wd(this.ref,n),this.setMetadataPromise.catch(i)}),i)}updateMetadata(t){this.metadata=t,this.setMetadataPromise&&(this.setMetadataPromise=this.setMetadataPromise.then((()=>{var t=wd(this.ref,this.metadata);return t.catch(this.onError),t})))}end(){return this.setMetadataPromise?this.setMetadataPromise.then((()=>function(t){return Oh("remove",t._path),wd(t,null)}(this.ref).then((()=>(this.setMetadataPromise=null,this.end())),this.onError)),(function(){})):vd(this.ref).cancel().catch(this.onError)}}class Sd{constructor(t,n){this.metadata=!0,this.session=null,this.user=null,this.forceOffline=!0,this.auth=null,this.ref=null,this.databaseConnected=null,this.isOnline=!1,this.auth=n,this.user=null==n?void 0:n.currentUser,this.ref=md(t,"_firebase_extensions/presence"),function(t,n,i,e,o){let r;if("object"==typeof e&&(r=void 0,o=e),"function"==typeof e&&(r=e),o&&o.onlyOnce){const n=i,e=(i,e)=>{Xh(t._repo,t,l),n(i,e)};e.userCallback=i.userCallback,e.context=i.context,i=e}const s=new hd(i,r||void 0),l="value"===n?new yd(s):new xd(n,s);(function(t,n,i){let e;e=".info"===_a(n._path)?Yc(t.infoSyncTree_,n,i):Yc(t.serverSyncTree_,n,i),Mh(t.eventQueue_,n._path,e)})(t._repo,t,l)}(md(t,".info/connected"),"value",(t=>{this.databaseConnected=t.val(),this.session&&!this.databaseConnected&&(this.session.end(),this.session=null),this.createSessionIfNeeded()}),undefined,undefined),this.auth.onAuthStateChanged((t=>{!this.session||t&&t.uid===this.user.uid||(this.session=null),this.user=t,this.createSessionIfNeeded()}))}randomId(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",i=0;i<20;i++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}setMetadata(t){this.metadata=null==t||t,this.session&&this.session.updateMetadata(this.metadata)}goOffline(){if(this.forceOffline=!0,this.session){var t=this.session.end();return this.session=null,this.isOnline=!1,t}return Promise.resolve()}goOnline(){return this.forceOffline=!1,this.createSessionIfNeeded(),this.isOnline=!0,Promise.resolve()}createSessionIfNeeded(){if(!this.session&&!this.forceOffline&&this.databaseConnected&&this.user){var t=this.randomId(),n=bd(this.ref,`${this.user.uid}/sessions/${t}`);this.session=new Td(n,this.metadata,this.onSessionError)}}onSessionError(t){console.warn("Error updating presence",t),this.session.end(),this.session=null,"PERMISSION_DENIED"!==t.code&&setTimeout(this.createSessionIfNeeded,1e3)}}class Cd{constructor(t){var n;if(this.config={authLocalStorageKey:"enjin:session",tokenLocalStorageKey:"enjin:token",facebook:{permissions:["email","public_profile","user_friends"]}},this.facebook=vi,this.googlePlus=yi,this.twitter=ki,this.isOnline=!1,this.config=Object.assign(Object.assign({},this.config),t),!this.app)try{this.app=function(t,n={}){"object"!=typeof n&&(n={name:n});const i=Object.assign({name:"[DEFAULT]",automaticDataCollectionEnabled:!1},n),e=i.name;if("string"!=typeof e||!e)throw Re.create("bad-app-name",{appName:String(e)});const o=Ae.get(e);if(o){if(Qi(t,o.options)&&Qi(i,o.config))return o;throw Re.create("duplicate-app",{appName:e})}const r=new ve(e);for(const t of De.values())r.addComponent(t);const s=new Me(t,i,r);return Ae.set(e,s),s}(t.firebase),console.log("Initializing Firebase App...",this.app)}catch(t){console.log(t)}this.service=
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t=Le()){const n=Pe(t,"auth");return n.isInitialized()?n.getImmediate():function(t,n){const i=Pe(t,"auth");if(i.isInitialized()){const t=i.getImmediate();if(Qi(i.getOptions(),null!=n?n:{}))return t;Qe(t,"already-initialized")}return i.initialize({options:n})}(t,{popupRedirectResolver:xs,persistence:[Br,Cr,Dr]})}(this.app),this.config.googlePlus&&this.config.googlePlus.options&&this.config.googlePlus.options.webClientId||console.log("googlePlus.options.webClientId is required for Google Native Auth See Here: https://github.com/EddyVerbruggen/cordova-plugin-googleplus#6-usage"),(null===(n=this.config)||void 0===n?void 0:n.emulate)&&function(t,n,i){const e=Jo(t);eo(e._canInitEmulator,e,"emulator-config-failed"),eo(/^https?:\/\//.test(n),e,"invalid-emulator-scheme");const o=!!(null==i?void 0:i.disableWarnings),r=Zo(n),{host:s,port:l}=function(t){const n=Zo(t),i=/(\/\/)?([^?#/]+)/.exec(t.substr(n.length));if(!i)return{host:"",port:null};const e=i[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(e);if(o){const t=o[1];return{host:t,port:tr(e.substr(t.length+1))}}{const[t,n]=e.split(":");return{host:t,port:tr(n)}}}(n);e.config.emulator={url:`${r}//${s}${null===l?"":`:${l}`}/`},e.settings.appVerificationDisabledForTesting=!0,e.emulatorConfig=Object.freeze({host:s,port:l,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:o})}),o||function(){function t(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}(this.service,"http://localhost:9099"),this.onEmailLink(window.location.href)}async initializePushNotifications(t){try{const n=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t=Le()){
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return async function(){try{await Vi()}catch(t){return!1}return"undefined"!=typeof window&&Fi()&&!("undefined"==typeof navigator||!navigator.cookieEnabled)&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */().then((t=>{if(!t)throw hl.create("unsupported-browser")}),(()=>{throw hl.create("indexed-db-unsupported")})),Pe(ae(t),"messaging").getImmediate()}(this.app);t&&"function"==typeof t&&function(t,n){(function(t,n){if(!navigator)throw hl.create("only-available-in-window");t.onMessageHandler=n})(t=ae(t),n)}(n,t);const i=_i("messaging.vapidKey");let e=await Il(n,{vapidKey:i,serviceWorkerRegistration:await navigator.serviceWorker.getRegistration()});return e||("granted"===await Notification.requestPermission()?(console.log("Notification permission granted."),e=await Il(n,{vapidKey:i,serviceWorkerRegistration:await navigator.serviceWorker.getRegistration()})):console.log("Unable to get permission to notify.")),e}catch(t){console.log("Service worker not enabled, push notifications will not work!",t)}}async getClaims(){var t;try{const{claims:n}=await Eo(null===(t=this.service)||void 0===t?void 0:t.currentUser);return n}catch(t){return{}}}async getToken(){var t;const n=(null===(t=this.service)||void 0===t?void 0:t.currentUser)?await _o(this.service.currentUser):localStorage.getItem(this.config.tokenLocalStorageKey);return await this.setToken(n),n}async setToken(t){return localStorage.setItem(this.config.tokenLocalStorageKey,t),t}async onEmailLink(t){if(function(t,n){const i=ur.parseLink(n);return"EMAIL_SIGNIN"===(null==i?void 0:i.operation)}(0,t)){let n=window.localStorage.getItem("emailForSignIn");n||(n=window.prompt("Please provide your email for confirmation"));const i=await async function(t,n,i){const e=ae(t),o=cr.credentialWithLink(n,i||ao());return eo(o._tenantId===(e.tenantId||null),e,"tenant-id-mismatch"),Ir(e,o)}(this.service,n,t);return window.localStorage.removeItem("emailForSignIn"),this.emitLoggedInEvent(i),i}}withGoogleCredential(t){return pr.credential(t)}withCredential(t){return Ir(this.service,t)}withToken(t){
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return async function(t,n){const i=Jo(t),e=await
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(t,n){return wo(t,"POST","/v1/accounts:signInWithCustomToken",mo(t,n))}(i,{token:n,returnSecureToken:!0}),o=await br._fromIdTokenResponse(i,"signIn",e);return await i._updateCurrentUser(o.user),o}(this.service,t)}withPhoneNumber(t,n){return t="+"+t,window.localStorage.setItem("phoneForSignIn",t),async function(t,n,i){const e=Jo(t),o=await async function(t,n,i){var e;const o=await i.verify();try{let r;if(eo("string"==typeof o,t,"argument-error"),eo("recaptcha"===i.type,t,"argument-error"),r="string"==typeof n?{phoneNumber:n}:n,"session"in r){const n=r.session;if("phoneNumber"in r)return eo("enroll"===n.type,t,"internal-error"),(await
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,n){return bo(t,"POST","/v2/accounts/mfaEnrollment:start",mo(t,n))}(t,{idToken:n.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,recaptchaToken:o}})).phoneSessionInfo.sessionInfo;{eo("signin"===n.type,t,"internal-error");const i=(null===(e=r.multiFactorHint)||void 0===e?void 0:e.uid)||r.multiFactorUid;return eo(i,t,"missing-multi-factor-info"),(await function(t,n){return bo(t,"POST","/v2/accounts/mfaSignIn:start",mo(t,n))}(t,{mfaPendingCredential:n.credential,mfaEnrollmentId:i,phoneSignInInfo:{recaptchaToken:o}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:n}=await async function(t,n){return bo(t,"POST","/v1/accounts:sendVerificationCode",mo(t,n))}(t,{phoneNumber:r.phoneNumber,recaptchaToken:o});return n}}finally{i._reset()}}(e,n,ae(i));return new qr(o,(t=>Ir(e,t)))}(this.service,t,n)}withEmailLink(t,n){return window.localStorage.setItem("emailForSignIn",t),
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(t,n,i){const e=ae(t),o={requestType:"EMAIL_SIGNIN",email:n};eo(i.handleCodeInApp,e,"argument-error"),i&&_r(e,o,i),await async function(t,n){return er(t,n)}(e,o)}(this.service,t,n)}anonymously(){return async function(t){var n;const i=Jo(t);if(await i._initializationPromise,null===(n=i.currentUser)||void 0===n?void 0:n.isAnonymous)return new br({user:i.currentUser,providerId:null,operationType:"signIn"});const e=await mr(i,{returnSecureToken:!0}),o=await br._fromIdTokenResponse(i,"signIn",e,!0);return await i._updateCurrentUser(o.user),o}(this.service)}onAuthChanged(t){var n;n=async n=>{var i;if(!n||!n.emailVerified&&n.providerData&&"password"===n.providerData[0].providerId)return!1;n&&(localStorage.setItem(this.config.authLocalStorageKey,JSON.stringify(n)),localStorage.setItem(this.config.tokenLocalStorageKey,await _o(null===(i=this.service)||void 0===i?void 0:i.currentUser,!0))),t&&"function"==typeof t&&t(n)},ae(this.service).onAuthStateChanged(n,void 0,void 0),localStorage.getItem(this.config.authLocalStorageKey)||t(null)}getFromStorage(){return localStorage.getItem(this.config.authLocalStorageKey)?JSON.parse(localStorage.getItem(this.config.authLocalStorageKey)):null}isLoggedIn(){return this.service||this.getFromStorage()}emitLoggedInEvent(t){document.body.dispatchEvent(new CustomEvent("authLoggedIn",{detail:{data:t}}))}emitLoggedOutEvent(){document.body.dispatchEvent(new CustomEvent("authLoggedOut",{detail:{}}))}createUser(t,n){return async function(t,n,i){const e=Jo(t),o=await mr(e,{returnSecureToken:!0,email:n,password:i}),r=await br._fromIdTokenResponse(e,"signIn",o);return await e._updateCurrentUser(r.user),r}(this.service,t,n)}sendEmailVerification(t){return async function(t,n){const i=ae(t),e={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};n&&_r(i.auth,e,n);const{email:o}=await async function(t,n){return er(t,n)}(i.auth,e);o!==t.email&&await t.reload()}(this.service.currentUser,t||null)}sendPasswordReset(t,n){return async function(t,n,i){const e=ae(t),o={requestType:"PASSWORD_RESET",email:n};i&&_r(e,o,i),await async function(t,n){return er(t,n)}(e,o)}(this.service,t,n||null)}withEmail(t,n){return new Promise(((i,e)=>{try{(function(t,n,i){return Ir(ae(t),cr.credential(n,i))})(this.service,t,n).then((t=>{this.emitLoggedInEvent({user:t}),i({data:{user:t}})})).catch((t=>{e(t)}))}catch(t){e(t)}}))}updateEmail(t,n){return new Promise(((i,e)=>{var o;try{(function(t,n){return Er(ae(t),n,null)})(null===(o=this.service)||void 0===o?void 0:o.currentUser,t).then((t=>{i({data:{user:t}}),this.sendEmailVerification(n)})).catch((t=>{e(t)}))}catch(t){e(t)}}))}async facebookNative(){const t=await this.facebook.login(this.config.facebook.permissions);return this.withCredential(fr.credential(t.authResponse.accessToken))}async googleNative(){let t;try{t=await this.googlePlus.login(this.config.googlePlus.options)}catch(t){console.log("Error with Google Native Login..."),console.log(t)}return this.withCredential(pr.credential(t.idToken))}async twitterNative(){const t=await this.twitter.login();return this.withCredential(gr.credential(t.token,t.secret))}async withSocial(t,n=!1){let i,e=n;return window.matchMedia("(display-mode: standalone)").matches&&(console.log("Running in PWA mode..."),e=!0),new Promise((async(n,o)=>{if(window.cordova)"google"===t?this.googleNative().then((t=>{this.emitLoggedInEvent(t),n(t)})).catch((t=>{console.log(t),o(t)})):"facebook"===t?this.facebookNative().then((t=>{this.emitLoggedInEvent(t),n(t)})).catch((t=>{console.log(t),o(t)})):"twitter"===t&&this.twitterNative().then((t=>{this.emitLoggedInEvent(t),n(t)})).catch((t=>{console.log(t),o(t)}));else{"facebook"===t?i=new fr:"google"===t?i=new pr:"twitter"===t?i=new gr:o({message:"A social network is required or the one provided is not yet supported."});try{e?await function(t,n,i){return async function(t,n,i){const e=Jo(t);no(t,n,hr);const o=Kr(e,i);return await async function(t,n){return ns(t)._set(is(n),"true")}(o,e),o._openRedirect(e,n,"signInViaRedirect")}(t,n,i)}(this.service,i):await async function(t,n){const i=Jo(t);no(t,n,hr);const e=Kr(i,void 0);return new Qr(i,"signInViaPopup",n,e).executeNotNull()}(this.service,i),this.emitLoggedInEvent({currentUser:this.service.currentUser})}catch(t){console.log(t)}}}))}logout(){return this.emitLoggedOutEvent(),ae(this.service).signOut()}async updatePassword(t,n){return n&&await async function(t,n){return xr(ae(t),n)}(this.service.currentUser,n),function(t,n){return Er(ae(t),null,n)}(this.service.currentUser,t)}async storeRoles(t){return localStorage.setItem("roles",JSON.stringify(t)),t}async checkRolePermission(t,n,i){let e=[];const o=await this.getClaims();if(!i&&(null==o?void 0:o.admin))return!0;try{e=JSON.parse(localStorage.getItem("roles"))}catch(t){console.log("Error getting roles from local storage")}for(const i of e)if(i.id===t&&i.permissions&&i.permissions.includes(n))return!0;return!1}async goOnline(){if(!this.sessionManager){const t=function(t=Le(),n){return Pe(t,"database").getImmediate({identifier:n})}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.app);this.sessionManager=new Sd(t,this.service)}return this.isOnline=!0,document.body.dispatchEvent(new CustomEvent("fireenjin:online",{detail:{sessionManager:this.sessionManager}})),this.sessionManager.goOnline()}async goOffline(){return this.sessionManager?(this.isOnline=!1,document.body.dispatchEvent(new CustomEvent("fireenjin:offline",{detail:{sessionManager:this.sessionManager}})),this.sessionManager.goOffline()):null}async getSessionManager(){return this.sessionManager}}var Ad,Dd="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==c?c:"undefined"!=typeof self?self:{},Nd=Nd||{},Od=Dd||self;function Pd(){}function Rd(t){var n=typeof t;return"array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length}function Md(t){var n=typeof t;return"object"==n&&null!=t||"function"==n}var Ld="closure_uid_"+(1e9*Math.random()>>>0),$d=0;function jd(t,n,i){return t.call.apply(t.bind,arguments)}function zd(t,n,i){if(!t)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,e),t.apply(n,i)}}return function(){return t.apply(n,arguments)}}function Fd(t,n,i){return(Fd=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?jd:zd).apply(null,arguments)}function Vd(t,n){var i=Array.prototype.slice.call(arguments,1);return function(){var n=i.slice();return n.push.apply(n,arguments),t.apply(this,n)}}function Ud(t,n){function i(){}i.prototype=n.prototype,t.Z=n.prototype,t.prototype=new i,t.prototype.constructor=t,t.Vb=function(t,i,e){for(var o=Array(arguments.length-2),r=2;r<arguments.length;r++)o[r-2]=arguments[r];return n.prototype[i].apply(t,o)}}function Bd(){this.s=this.s,this.o=this.o}Bd.prototype.s=!1,Bd.prototype.na=function(){var t;!this.s&&(this.s=!0,this.M(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,Ld)&&t[Ld]||(t[Ld]=++$d))},Bd.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const qd=Array.prototype.indexOf?function(t,n){return Array.prototype.indexOf.call(t,n,void 0)}:function(t,n){if("string"==typeof t)return"string"!=typeof n||1!=n.length?-1:t.indexOf(n,0);for(let i=0;i<t.length;i++)if(i in t&&t[i]===n)return i;return-1},Kd=Array.prototype.forEach?function(t,n,i){Array.prototype.forEach.call(t,n,i)}:function(t,n,i){const e=t.length,o="string"==typeof t?t.split(""):t;for(let r=0;r<e;r++)r in o&&n.call(i,o[r],r,t)};function Wd(t){return Array.prototype.concat.apply([],arguments)}function Gd(t){const n=t.length;if(0<n){const i=Array(n);for(let e=0;e<n;e++)i[e]=t[e];return i}return[]}function Hd(t){return/^[\s\xa0]*$/.test(t)}var Xd,Yd=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Jd(t,n){return-1!=t.indexOf(n)}function Qd(t,n){return t<n?-1:t>n?1:0}t:{var Zd=Od.navigator;if(Zd){var tf=Zd.userAgent;if(tf){Xd=tf;break t}}Xd=""}function nf(t,n,i){for(const e in t)n.call(i,t[e],e,t)}function ef(t){const n={};for(const i in t)n[i]=t[i];return n}var of="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rf(t,n){let i,e;for(let n=1;n<arguments.length;n++){for(i in e=arguments[n],e)t[i]=e[i];for(let n=0;n<of.length;n++)i=of[n],Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}}function sf(t){return sf[" "](t),t}sf[" "]=Pd;var lf,af,uf=Jd(Xd,"Opera"),cf=Jd(Xd,"Trident")||Jd(Xd,"MSIE"),hf=Jd(Xd,"Edge"),df=hf||cf,ff=Jd(Xd,"Gecko")&&!(Jd(Xd.toLowerCase(),"webkit")&&!Jd(Xd,"Edge"))&&!(Jd(Xd,"Trident")||Jd(Xd,"MSIE"))&&!Jd(Xd,"Edge"),pf=Jd(Xd.toLowerCase(),"webkit")&&!Jd(Xd,"Edge");function gf(){var t=Od.document;return t?t.documentMode:void 0}t:{var mf="",bf=(af=Xd,ff?/rv:([^\);]+)(\)|;)/.exec(af):hf?/Edge\/([\d\.]+)/.exec(af):cf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(af):pf?/WebKit\/(\S+)/.exec(af):uf?/(?:Version)[ \/]?(\S+)/.exec(af):void 0);if(bf&&(mf=bf?bf[1]:""),cf){var vf=gf();if(null!=vf&&vf>parseFloat(mf)){lf=String(vf);break t}}lf=mf}var wf,yf={};function xf(){return t=yf,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){let t=0;const n=Yd(String(lf)).split("."),i=Yd("9").split("."),e=Math.max(n.length,i.length);for(let s=0;0==t&&s<e;s++){var o=n[s]||"",r=i[s]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],0==o[0].length&&0==r[0].length)break;t=Qd(0==o[1].length?0:parseInt(o[1],10),0==r[1].length?0:parseInt(r[1],10))||Qd(0==o[2].length,0==r[2].length)||Qd(o[2],r[2]),o=o[3],r=r[3]}while(0==t)}return 0<=t}();var t}Od.document&&cf?wf=gf()||parseInt(lf,10)||void 0:wf=void 0;var kf=wf,If=function(){if(!Od.addEventListener||!Object.defineProperty)return!1;var t=!1,n=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Od.addEventListener("test",Pd,n),Od.removeEventListener("test",Pd,n)}catch(t){}return t}();function _f(t,n){this.type=t,this.g=this.target=n,this.defaultPrevented=!1}function Ef(t,n){if(_f.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var i=this.type=t.type,e=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=n,n=t.relatedTarget){if(ff){t:{try{sf(n.nodeName);var o=!0;break t}catch(t){}o=!1}o||(n=null)}}else"mouseover"==i?n=t.fromElement:"mouseout"==i&&(n=t.toElement);this.relatedTarget=n,e?(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Tf[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Ef.Z.h.call(this)}}_f.prototype.h=function(){this.defaultPrevented=!0},Ud(Ef,_f);var Tf={2:"touch",3:"pen",4:"mouse"};Ef.prototype.h=function(){Ef.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Sf="closure_listenable_"+(1e6*Math.random()|0),Cf=0;function Af(t,n,i,e,o){this.listener=t,this.proxy=null,this.src=n,this.type=i,this.capture=!!e,this.ia=o,this.key=++Cf,this.ca=this.fa=!1}function Df(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Nf(t){this.src=t,this.g={},this.h=0}function Of(t,n){var i=n.type;if(i in t.g){var e,o=t.g[i],r=qd(o,n);(e=0<=r)&&Array.prototype.splice.call(o,r,1),e&&(Df(n),0==t.g[i].length&&(delete t.g[i],t.h--))}}function Pf(t,n,i,e){for(var o=0;o<t.length;++o){var r=t[o];if(!r.ca&&r.listener==n&&r.capture==!!i&&r.ia==e)return o}return-1}Nf.prototype.add=function(t,n,i,e,o){var r=t.toString();(t=this.g[r])||(t=this.g[r]=[],this.h++);var s=Pf(t,n,e,o);return-1<s?(n=t[s],i||(n.fa=!1)):((n=new Af(n,this.src,r,!!e,o)).fa=i,t.push(n)),n};var Rf="closure_lm_"+(1e6*Math.random()|0),Mf={};function Lf(t,n,i,e,o){if(e&&e.once)return jf(t,n,i,e,o);if(Array.isArray(n)){for(var r=0;r<n.length;r++)Lf(t,n[r],i,e,o);return null}return i=Kf(i),t&&t[Sf]?t.N(n,i,Md(e)?!!e.capture:!!e,o):$f(t,n,i,!1,e,o)}function $f(t,n,i,e,o,r){if(!n)throw Error("Invalid event type");var s=Md(o)?!!o.capture:!!o,l=Bf(t);if(l||(t[Rf]=l=new Nf(t)),(i=l.add(n,i,e,s,r)).proxy)return i;if(e=function(){var t=Uf;return function n(i){return t.call(n.src,n.listener,i)}}(),i.proxy=e,e.src=t,e.listener=i,t.addEventListener)If||(o=s),void 0===o&&(o=!1),t.addEventListener(n.toString(),e,o);else if(t.attachEvent)t.attachEvent(Vf(n.toString()),e);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(e)}return i}function jf(t,n,i,e,o){if(Array.isArray(n)){for(var r=0;r<n.length;r++)jf(t,n[r],i,e,o);return null}return i=Kf(i),t&&t[Sf]?t.O(n,i,Md(e)?!!e.capture:!!e,o):$f(t,n,i,!0,e,o)}function zf(t,n,i,e,o){if(Array.isArray(n))for(var r=0;r<n.length;r++)zf(t,n[r],i,e,o);else e=Md(e)?!!e.capture:!!e,i=Kf(i),t&&t[Sf]?(t=t.i,(n=String(n).toString())in t.g&&-1<(i=Pf(r=t.g[n],i,e,o))&&(Df(r[i]),Array.prototype.splice.call(r,i,1),0==r.length&&(delete t.g[n],t.h--))):t&&(t=Bf(t))&&(n=t.g[n.toString()],t=-1,n&&(t=Pf(n,i,e,o)),(i=-1<t?n[t]:null)&&Ff(i))}function Ff(t){if("number"!=typeof t&&t&&!t.ca){var n=t.src;if(n&&n[Sf])Of(n.i,t);else{var i=t.type,e=t.proxy;n.removeEventListener?n.removeEventListener(i,e,t.capture):n.detachEvent?n.detachEvent(Vf(i),e):n.addListener&&n.removeListener&&n.removeListener(e),(i=Bf(n))?(Of(i,t),0==i.h&&(i.src=null,n[Rf]=null)):Df(t)}}}function Vf(t){return t in Mf?Mf[t]:Mf[t]="on"+t}function Uf(t,n){if(t.ca)t=!0;else{n=new Ef(n,this);var i=t.listener,e=t.ia||t.src;t.fa&&Ff(t),t=i.call(e,n)}return t}function Bf(t){return(t=t[Rf])instanceof Nf?t:null}var qf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kf(t){return"function"==typeof t?t:(t[qf]||(t[qf]=function(n){return t.handleEvent(n)}),t[qf])}function Wf(){Bd.call(this),this.i=new Nf(this),this.P=this,this.I=null}function Gf(t,n){var i,e=t.I;if(e)for(i=[];e;e=e.I)i.push(e);if(t=t.P,e=n.type||n,"string"==typeof n)n=new _f(n,t);else if(n instanceof _f)n.target=n.target||t;else{var o=n;rf(n=new _f(e,t),o)}if(o=!0,i)for(var r=i.length-1;0<=r;r--){var s=n.g=i[r];o=Hf(s,e,!0,n)&&o}if(o=Hf(s=n.g=t,e,!0,n)&&o,o=Hf(s,e,!1,n)&&o,i)for(r=0;r<i.length;r++)o=Hf(s=n.g=i[r],e,!1,n)&&o}function Hf(t,n,i,e){if(!(n=t.i.g[String(n)]))return!0;n=n.concat();for(var o=!0,r=0;r<n.length;++r){var s=n[r];if(s&&!s.ca&&s.capture==i){var l=s.listener,a=s.ia||s.src;s.fa&&Of(t.i,s),o=!1!==l.call(a,e)&&o}}return o&&!e.defaultPrevented}Ud(Wf,Bd),Wf.prototype[Sf]=!0,Wf.prototype.removeEventListener=function(t,n,i,e){zf(this,t,n,i,e)},Wf.prototype.M=function(){if(Wf.Z.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var i=n.g[t],e=0;e<i.length;e++)Df(i[e]);delete n.g[t],n.h--}}this.I=null},Wf.prototype.N=function(t,n,i,e){return this.i.add(String(t),n,!1,i,e)},Wf.prototype.O=function(t,n,i,e){return this.i.add(String(t),n,!0,i,e)};var Xf=Od.JSON.stringify;function Yf(){var t=ep;let n=null;return t.g&&(n=t.g,t.g=t.g.next,t.g||(t.h=null),n.next=null),n}var Jf,Qf=new class{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new Zf),(t=>t.reset()));class Zf{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function tp(t){Od.setTimeout((()=>{throw t}),0)}function np(t,n){Jf||function(){var t=Od.Promise.resolve(void 0);Jf=function(){t.then(op)}}(),ip||(Jf(),ip=!0),ep.add(t,n)}var ip=!1,ep=new class{constructor(){this.h=this.g=null}add(t,n){const i=Qf.get();i.set(t,n),this.h?this.h.next=i:this.g=i,this.h=i}};function op(){for(var t;t=Yf();){try{t.h.call(t.g)}catch(t){tp(t)}var n=Qf;n.j(t),100>n.h&&(n.h++,t.next=n.g,n.g=t)}ip=!1}function rp(t,n){Wf.call(this),this.h=t||1,this.g=n||Od,this.j=Fd(this.kb,this),this.l=Date.now()}function sp(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function lp(t,n,i){if("function"==typeof t)i&&(t=Fd(t,i));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Fd(t.handleEvent,t)}return 2147483647<Number(n)?-1:Od.setTimeout(t,n||0)}function ap(t){t.g=lp((()=>{t.g=null,t.i&&(t.i=!1,ap(t))}),t.j);const n=t.h;t.h=null,t.m.apply(null,n)}Ud(rp,Wf),(Ad=rp.prototype).da=!1,Ad.S=null,Ad.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Gf(this,"tick"),this.da&&(sp(this),this.start()))}},Ad.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ad.M=function(){rp.Z.M.call(this),sp(this),delete this.g};class up extends Bd{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:ap(this)}M(){super.M(),this.g&&(Od.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cp(t){Bd.call(this),this.h=t,this.g={}}Ud(cp,Bd);var hp=[];function dp(t,n,i,e){Array.isArray(i)||(i&&(hp[0]=i.toString()),i=hp);for(var o=0;o<i.length;o++){var r=Lf(n,i[o],e||t.handleEvent,!1,t.h||t);if(!r)break;t.g[r.key]=r}}function fp(t){nf(t.g,(function(t,n){this.g.hasOwnProperty(n)&&Ff(t)}),t),t.g={}}function pp(){this.g=!0}function gp(t,n,i,e){t.info((function(){return"XMLHTTP TEXT ("+n+"): "+function(t,n){if(!t.g)return n;if(!n)return null;try{var i=JSON.parse(n);if(i)for(t=0;t<i.length;t++)if(Array.isArray(i[t])){var e=i[t];if(!(2>e.length)){var o=e[1];if(Array.isArray(o)&&!(1>o.length)){var r=o[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var s=1;s<o.length;s++)o[s]=""}}}return Xf(i)}catch(t){return n}}(t,i)+(e?" "+e:"")}))}cp.prototype.M=function(){cp.Z.M.call(this),fp(this)},cp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},pp.prototype.Aa=function(){this.g=!1},pp.prototype.info=function(){};var mp={},bp=null;function vp(){return bp=bp||new Wf}function wp(t){_f.call(this,mp.Ma,t)}function yp(t){const n=vp();Gf(n,new wp(n,t))}function xp(t,n){_f.call(this,mp.STAT_EVENT,t),this.stat=n}function kp(t){const n=vp();Gf(n,new xp(n,t))}function Ip(t,n){_f.call(this,mp.Na,t),this.size=n}function _p(t,n){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Od.setTimeout((function(){t()}),n)}mp.Ma="serverreachability",Ud(wp,_f),mp.STAT_EVENT="statevent",Ud(xp,_f),mp.Na="timingevent",Ud(Ip,_f);var Ep={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Tp={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Sp(){}function Cp(){}Sp.prototype.h=null;var Ap,Dp={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Np(){_f.call(this,"d")}function Op(){_f.call(this,"c")}function Pp(){}function Rp(t,n,i,e){this.l=t,this.j=n,this.m=i,this.X=e||1,this.V=new cp(this),this.P=Lp,this.W=new rp(t=df?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Mp}function Mp(){this.i=null,this.g="",this.h=!1}Ud(Np,_f),Ud(Op,_f),Ud(Pp,Sp),Pp.prototype.g=function(){return new XMLHttpRequest},Pp.prototype.i=function(){return{}},Ap=new Pp;var Lp=45e3,$p={},jp={};function zp(t,n,i){t.K=1,t.v=ag(ig(n)),t.s=i,t.U=!0,Fp(t,null)}function Fp(t,n){t.F=Date.now(),qp(t),t.A=ig(t.v);var i=t.A,e=t.X;Array.isArray(e)||(e=[String(e)]),xg(i.h,"t",e),t.C=0,i=t.l.H,t.h=new Mp,t.g=xm(t.l,i?n:null,!t.s),0<t.O&&(t.L=new up(Fd(t.Ia,t,t.g),t.O)),dp(t.V,t.g,"readystatechange",t.gb),n=t.H?ef(t.H):{},t.s?(t.u||(t.u="POST"),n["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,n)):(t.u="GET",t.g.ea(t.A,t.u,null,n)),yp(1),function(t,n,i,e,o,r){t.info((function(){if(t.g)if(r)for(var s="",l=r.split("&"),a=0;a<l.length;a++){var u=l[a].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");s=2<=h.length&&"type"==h[1]?s+(c+"=")+u+"&":s+(c+"=redacted&")}}else s=null;else s=r;return"XMLHTTP REQ ("+e+") [attempt "+o+"]: "+n+"\n"+i+"\n"+s}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function Vp(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function Up(t,n,i){let e,o=!0;for(;!t.I&&t.C<i.length;){if(e=Bp(t,i),e==jp){4==n&&(t.o=4,kp(14),o=!1),gp(t.j,t.m,null,"[Incomplete Response]");break}if(e==$p){t.o=4,kp(15),gp(t.j,t.m,i,"[Invalid Chunk]"),o=!1;break}gp(t.j,t.m,e,null),Xp(t,e)}Vp(t)&&e!=jp&&e!=$p&&(t.h.g="",t.C=0),4!=n||0!=i.length||t.h.h||(t.o=1,kp(16),o=!1),t.i=t.i&&o,o?0<i.length&&!t.aa&&(t.aa=!0,(n=t.l).g==t&&n.$&&!n.L&&(n.h.info("Great, no buffering proxy detected. Bytes received: "+i.length),fm(n),n.L=!0,kp(11))):(gp(t.j,t.m,i,"[Invalid Chunked Response]"),Hp(t),Gp(t))}function Bp(t,n){var i=t.C,e=n.indexOf("\n",i);return-1==e?jp:(i=Number(n.substring(i,e)),isNaN(i)?$p:(e+=1)+i>n.length?jp:(n=n.substr(e,i),t.C=e+i,n))}function qp(t){t.Y=Date.now()+t.P,Kp(t,t.P)}function Kp(t,n){if(null!=t.B)throw Error("WatchDog timer not null");t.B=_p(Fd(t.eb,t),n)}function Wp(t){t.B&&(Od.clearTimeout(t.B),t.B=null)}function Gp(t){0==t.l.G||t.I||mm(t.l,t)}function Hp(t){Wp(t);var n=t.L;n&&"function"==typeof n.na&&n.na(),t.L=null,sp(t.W),fp(t.V),t.g&&(n=t.g,t.g=null,n.abort(),n.na())}function Xp(t,n){try{var i=t.l;if(0!=i.G&&(i.g==t||Sg(i.i,t)))if(i.I=t.N,!t.J&&Sg(i.i,t)&&3==i.G){try{var e=i.Ca.g.parse(n)}catch(t){e=null}if(Array.isArray(e)&&3==e.length){var o=e;if(0==o[0]){t:if(!i.u){if(i.g){if(!(i.g.F+3e3<t.F))break t;gm(i),om(i)}dm(i),kp(18)}}else i.ta=o[1],0<i.ta-i.U&&37500>o[2]&&i.N&&0==i.A&&!i.v&&(i.v=_p(Fd(i.ab,i),6e3));if(1>=Tg(i.i)&&i.ka){try{i.ka()}catch(t){}i.ka=void 0}}else vm(i,11)}else if((t.J||i.g==t)&&gm(i),!Hd(n))for(o=i.Ca.g.parse(n),n=0;n<o.length;n++){let u=o[n];if(i.U=u[0],u=u[1],2==i.G)if("c"==u[0]){i.J=u[1],i.la=u[2];const n=u[3];null!=n&&(i.ma=n,i.h.info("VER="+i.ma));const o=u[4];null!=o&&(i.za=o,i.h.info("SVER="+i.za));const c=u[5];null!=c&&"number"==typeof c&&0<c&&(i.K=e=1.5*c,i.h.info("backChannelRequestTimeoutMs_="+e)),e=i;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var r=e.i;!r.g&&(Jd(t,"spdy")||Jd(t,"quic")||Jd(t,"h2"))&&(r.j=r.l,r.g=new Set,r.h&&(Cg(r,r.h),r.h=null))}if(e.D){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(e.sa=t,lg(e.F,e.D,t))}}i.G=3,i.j&&i.j.xa(),i.$&&(i.O=Date.now()-t.F,i.h.info("Handshake RTT: "+i.O+"ms"));var s=t;if((e=i).oa=ym(e,e.H?e.la:null,e.W),s.J){Ag(e.i,s);var l=s,a=e.K;a&&l.setTimeout(a),l.B&&(Wp(l),qp(l)),e.g=s}else hm(e);0<i.l.length&&lm(i)}else"stop"!=u[0]&&"close"!=u[0]||vm(i,7);else 3==i.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?vm(i,7):em(i):"noop"!=u[0]&&i.j&&i.j.wa(u),i.A=0)}yp(4)}catch(t){}}function Yp(t,n){if(t.forEach&&"function"==typeof t.forEach)t.forEach(n,void 0);else if(Rd(t)||"string"==typeof t)Kd(t,n,void 0);else{if(t.T&&"function"==typeof t.T)var i=t.T();else if(t.R&&"function"==typeof t.R)i=void 0;else if(Rd(t)||"string"==typeof t){i=[];for(var e=t.length,o=0;o<e;o++)i.push(o)}else for(o in i=[],e=0,t)i[e++]=o;o=(e=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(Rd(t)){for(var n=[],i=t.length,e=0;e<i;e++)n.push(t[e]);return n}for(e in n=[],i=0,t)n[i++]=t[e];return n}(t)).length;for(var r=0;r<o;r++)n.call(void 0,e[r],i&&i[r],t)}}function Jp(t,n){this.h={},this.g=[],this.i=0;var i=arguments.length;if(1<i){if(i%2)throw Error("Uneven number of arguments");for(var e=0;e<i;e+=2)this.set(arguments[e],arguments[e+1])}else if(t)if(t instanceof Jp)for(i=t.T(),e=0;e<i.length;e++)this.set(i[e],t.get(i[e]));else for(e in t)this.set(e,t[e])}function Qp(t){if(t.i!=t.g.length){for(var n=0,i=0;n<t.g.length;){var e=t.g[n];Zp(t.h,e)&&(t.g[i++]=e),n++}t.g.length=i}if(t.i!=t.g.length){var o={};for(i=n=0;n<t.g.length;)Zp(o,e=t.g[n])||(t.g[i++]=e,o[e]=1),n++;t.g.length=i}}function Zp(t,n){return Object.prototype.hasOwnProperty.call(t,n)}(Ad=Rp.prototype).setTimeout=function(t){this.P=t},Ad.gb=function(t){t=t.target;const n=this.L;n&&3==Qg(t)?n.l():this.Ia(t)},Ad.Ia=function(t){try{if(t==this.g)t:{const c=Qg(this.g);var n=this.g.Da();const h=this.g.ba();if(!(3>c)&&(3!=c||df||this.g&&(this.h.h||this.g.ga()||Zg(this.g)))){this.I||4!=c||7==n||yp(8==n||0>=h?3:2),Wp(this);var i=this.g.ba();this.N=i;n:if(Vp(this)){var e=Zg(this.g);t="";var o=e.length,r=4==Qg(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Hp(this),Gp(this);var s="";break n}this.h.i=new Od.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,t+=this.h.i.decode(e[n],{stream:r&&n==o-1});e.splice(0,o),this.h.g+=t,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(t,n,i,e,o,r,s){t.info((function(){return"XMLHTTP RESP ("+e+") [ attempt "+o+"]: "+n+"\n"+i+"\n"+r+" "+s}))}(this.j,this.u,this.A,this.m,this.X,c,i),this.i){if(this.$&&!this.J){n:{if(this.g){var l,a=this.g;if((l=a.g?a.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Hd(l)){var u=l;break n}}u=null}if(!(i=u)){this.i=!1,this.o=3,kp(12),Hp(this),Gp(this);break t}gp(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Xp(this,i)}this.U?(Up(this,c,s),df&&this.i&&3==c&&(dp(this.V,this.W,"tick",this.fb),this.W.start())):(gp(this.j,this.m,s,null),Xp(this,s)),4==c&&Hp(this),this.i&&!this.I&&(4==c?mm(this.l,this):(this.i=!1,qp(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,kp(12)):(this.o=0,kp(13)),Hp(this),Gp(this)}}}catch(t){}},Ad.fb=function(){if(this.g){var t=Qg(this.g),n=this.g.ga();this.C<n.length&&(Wp(this),Up(this,t,n),this.i&&4!=t&&qp(this))}},Ad.cancel=function(){this.I=!0,Hp(this)},Ad.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function(t,n){t.info((function(){return"TIMEOUT: "+n}))}(this.j,this.A),2!=this.K&&(yp(3),kp(17)),Hp(this),this.o=2,Gp(this)):Kp(this,this.Y-t)},(Ad=Jp.prototype).R=function(){Qp(this);for(var t=[],n=0;n<this.g.length;n++)t.push(this.h[this.g[n]]);return t},Ad.T=function(){return Qp(this),this.g.concat()},Ad.get=function(t,n){return Zp(this.h,t)?this.h[t]:n},Ad.set=function(t,n){Zp(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=n},Ad.forEach=function(t,n){for(var i=this.T(),e=0;e<i.length;e++){var o=i[e],r=this.get(o);t.call(n,r,o,this)}};var tg=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ng(t,n){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof ng){this.g=void 0!==n?n:t.g,eg(this,t.j),this.s=t.s,og(this,t.i),rg(this,t.m),this.l=t.l,n=t.h;var i=new bg;i.i=n.i,n.g&&(i.g=new Jp(n.g),i.h=n.h),sg(this,i),this.o=t.o}else t&&(i=String(t).match(tg))?(this.g=!!n,eg(this,i[1]||"",!0),this.s=ug(i[2]||""),og(this,i[3]||"",!0),rg(this,i[4]),this.l=ug(i[5]||"",!0),sg(this,i[6]||"",!0),this.o=ug(i[7]||"")):(this.g=!!n,this.h=new bg(null,this.g))}function ig(t){return new ng(t)}function eg(t,n,i){t.j=i?ug(n,!0):n,t.j&&(t.j=t.j.replace(/:$/,""))}function og(t,n,i){t.i=i?ug(n,!0):n}function rg(t,n){if(n){if(n=Number(n),isNaN(n)||0>n)throw Error("Bad port number "+n);t.m=n}else t.m=null}function sg(t,n,i){n instanceof bg?(t.h=n,function(t,n){n&&!t.j&&(vg(t),t.i=null,t.g.forEach((function(t,n){var i=n.toLowerCase();n!=i&&(wg(this,n),xg(this,i,t))}),t)),t.j=n}(t.h,t.g)):(i||(n=cg(n,gg)),t.h=new bg(n,t.g))}function lg(t,n,i){t.h.set(n,i)}function ag(t){return lg(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ug(t,n){return t?n?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function cg(t,n,i){return"string"==typeof t?(t=encodeURI(t).replace(n,hg),i&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function hg(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ng.prototype.toString=function(){var t=[],n=this.j;n&&t.push(cg(n,dg,!0),":");var i=this.i;return(i||"file"==n)&&(t.push("//"),(n=this.s)&&t.push(cg(n,dg,!0),"@"),t.push(encodeURIComponent(String(i)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(i=this.m)&&t.push(":",String(i))),(i=this.l)&&(this.i&&"/"!=i.charAt(0)&&t.push("/"),t.push(cg(i,"/"==i.charAt(0)?pg:fg,!0))),(i=this.h.toString())&&t.push("?",i),(i=this.o)&&t.push("#",cg(i,mg)),t.join("")};var dg=/[#\/\?@]/g,fg=/[#\?:]/g,pg=/[#\?]/g,gg=/[#\?@]/g,mg=/#/g;function bg(t,n){this.h=this.g=null,this.i=t||null,this.j=!!n}function vg(t){t.g||(t.g=new Jp,t.h=0,t.i&&function(t,n){if(t){t=t.split("&");for(var i=0;i<t.length;i++){var e=t[i].indexOf("="),o=null;if(0<=e){var r=t[i].substring(0,e);o=t[i].substring(e+1)}else r=t[i];n(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(t.i,(function(n,i){t.add(decodeURIComponent(n.replace(/\+/g," ")),i)})))}function wg(t,n){vg(t),n=kg(t,n),Zp(t.g.h,n)&&(t.i=null,t.h-=t.g.get(n).length,Zp((t=t.g).h,n)&&(delete t.h[n],t.i--,t.g.length>2*t.i&&Qp(t)))}function yg(t,n){return vg(t),n=kg(t,n),Zp(t.g.h,n)}function xg(t,n,i){wg(t,n),0<i.length&&(t.i=null,t.g.set(kg(t,n),Gd(i)),t.h+=i.length)}function kg(t,n){return n=String(n),t.j&&(n=n.toLowerCase()),n}function Ig(t){this.l=t||_g,t=Od.PerformanceNavigationTiming?0<(t=Od.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Od.g&&Od.g.Ea&&Od.g.Ea()&&Od.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ad=bg.prototype).add=function(t,n){vg(this),this.i=null,t=kg(this,t);var i=this.g.get(t);return i||this.g.set(t,i=[]),i.push(n),this.h+=1,this},Ad.forEach=function(t,n){vg(this),this.g.forEach((function(i,e){Kd(i,(function(i){t.call(n,i,e,this)}),this)}),this)},Ad.T=function(){vg(this);for(var t=this.g.R(),n=this.g.T(),i=[],e=0;e<n.length;e++)for(var o=t[e],r=0;r<o.length;r++)i.push(n[e]);return i},Ad.R=function(t){vg(this);var n=[];if("string"==typeof t)yg(this,t)&&(n=Wd(n,this.g.get(kg(this,t))));else{t=this.g.R();for(var i=0;i<t.length;i++)n=Wd(n,t[i])}return n},Ad.set=function(t,n){return vg(this),this.i=null,yg(this,t=kg(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[n]),this.h+=1,this},Ad.get=function(t,n){return t&&0<(t=this.R(t)).length?String(t[0]):n},Ad.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],n=this.g.T(),i=0;i<n.length;i++){var e=n[i],o=encodeURIComponent(String(e));e=this.R(e);for(var r=0;r<e.length;r++){var s=o;""!==e[r]&&(s+="="+encodeURIComponent(String(e[r]))),t.push(s)}}return this.i=t.join("&")};var _g=10;function Eg(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Tg(t){return t.h?1:t.g?t.g.size:0}function Sg(t,n){return t.h?t.h==n:!!t.g&&t.g.has(n)}function Cg(t,n){t.g?t.g.add(n):t.h=n}function Ag(t,n){t.h&&t.h==n?t.h=null:t.g&&t.g.has(n)&&t.g.delete(n)}function Dg(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let n=t.i;for(const i of t.g.values())n=n.concat(i.D);return n}return Gd(t.i)}function Ng(){}function Og(){this.g=new Ng}function Pg(t,n,i){const e=i||"";try{Yp(t,(function(t,i){let o=t;Md(t)&&(o=Xf(t)),n.push(e+i+"="+encodeURIComponent(o))}))}catch(t){throw n.push(e+"type="+encodeURIComponent("_badmap")),t}}function Rg(t,n,i,e,o){try{n.onload=null,n.onerror=null,n.onabort=null,n.ontimeout=null,o(e)}catch(t){}}function Mg(t){this.l=t.$b||null,this.j=t.ib||!1}function Lg(t,n){Wf.call(this),this.D=t,this.u=n,this.m=void 0,this.readyState=$g,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ig.prototype.cancel=function(){if(this.i=Dg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},Ng.prototype.stringify=function(t){return Od.JSON.stringify(t,void 0)},Ng.prototype.parse=function(t){return Od.JSON.parse(t,void 0)},Ud(Mg,Sp),Mg.prototype.g=function(){return new Lg(this.l,this.j)},Mg.prototype.i=function(t){return function(){return t}}({}),Ud(Lg,Wf);var $g=0;function jg(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function zg(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Fg(t)}function Fg(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Ad=Lg.prototype).open=function(t,n){if(this.readyState!=$g)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=n,this.readyState=1,Fg(this)},Ad.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const n={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(n.body=t),(this.D||Od).fetch(new Request(this.B,n)).then(this.Va.bind(this),this.ha.bind(this))},Ad.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,zg(this)),this.readyState=$g},Ad.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Fg(this)),this.g&&(this.readyState=3,Fg(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Od.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;jg(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Ad.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var n=t.value?t.value:new Uint8Array(0);(n=this.A.decode(n,{stream:!t.done}))&&(this.response=this.responseText+=n)}t.done?zg(this):Fg(this),3==this.readyState&&jg(this)}},Ad.Ua=function(t){this.g&&(this.response=this.responseText=t,zg(this))},Ad.Ta=function(t){this.g&&(this.response=t,zg(this))},Ad.ha=function(){this.g&&zg(this)},Ad.setRequestHeader=function(t,n){this.v.append(t,n)},Ad.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Ad.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],n=this.h.entries();for(var i=n.next();!i.done;)t.push((i=i.value)[0]+": "+i[1]),i=n.next();return t.join("\r\n")},Object.defineProperty(Lg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Vg=Od.JSON.parse;function Ug(t){Wf.call(this),this.headers=new Jp,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Bg,this.K=this.L=!1}Ud(Ug,Wf);var Bg="",qg=/^https?$/i,Kg=["POST","PUT"];function Wg(t){return"content-type"==t.toLowerCase()}function Gg(t,n){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=n,t.m=5,Hg(t),Yg(t)}function Hg(t){t.D||(t.D=!0,Gf(t,"complete"),Gf(t,"error"))}function Xg(t){if(t.h&&void 0!==Nd&&(!t.C[1]||4!=Qg(t)||2!=t.ba()))if(t.v&&4==Qg(t))lp(t.Fa,0,t);else if(Gf(t,"readystatechange"),4==Qg(t)){t.h=!1;try{const l=t.ba();t:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break t;default:n=!1}var i;if(!(i=n)){var e;if(e=0===l){var o=String(t.H).match(tg)[1]||null;if(!o&&Od.self&&Od.self.location){var r=Od.self.location.protocol;o=r.substr(0,r.length-1)}e=!qg.test(o?o.toLowerCase():"")}i=e}if(i)Gf(t,"complete"),Gf(t,"success");else{t.m=6;try{var s=2<Qg(t)?t.g.statusText:""}catch(t){s=""}t.j=s+" ["+t.ba()+"]",Hg(t)}}finally{Yg(t)}}}function Yg(t,n){if(t.g){Jg(t);const i=t.g,e=t.C[0]?Pd:null;t.g=null,t.C=null,n||Gf(t,"ready");try{i.onreadystatechange=e}catch(t){}}}function Jg(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Od.clearTimeout(t.A),t.A=null)}function Qg(t){return t.g?t.g.readyState:0}function Zg(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Bg:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function tm(t,n,i){t:{for(e in i){var e=!1;break t}e=!0}e||(i=function(t){let n="";return nf(t,(function(t,i){n+=i,n+=":",n+=t,n+="\r\n"})),n}(i),"string"==typeof t?null!=i&&encodeURIComponent(String(i)):lg(t,n,i))}function nm(t,n,i){return i&&i.internalChannelParams&&i.internalChannelParams[t]||n}function im(t){this.za=0,this.l=[],this.h=new pp,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=nm("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=nm("baseRetryDelayMs",5e3,t),this.$a=nm("retryDelaySeedMs",1e4,t),this.Ya=nm("forwardChannelMaxRetries",2,t),this.ra=nm("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Ig(t&&t.concurrentRequestLimit),this.Ca=new Og,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function em(t){if(rm(t),3==t.G){var n=t.V++,i=ig(t.F);lg(i,"SID",t.J),lg(i,"RID",n),lg(i,"TYPE","terminate"),um(t,i),(n=new Rp(t,t.h,n,void 0)).K=2,n.v=ag(ig(i)),i=!1,Od.navigator&&Od.navigator.sendBeacon&&(i=Od.navigator.sendBeacon(n.v.toString(),"")),!i&&Od.Image&&((new Image).src=n.v,i=!0),i||(n.g=xm(n.l,null),n.g.ea(n.v)),n.F=Date.now(),qp(n)}wm(t)}function om(t){t.g&&(fm(t),t.g.cancel(),t.g=null)}function rm(t){om(t),t.u&&(Od.clearTimeout(t.u),t.u=null),gm(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Od.clearTimeout(t.m),t.m=null)}function sm(t,n){t.l.push(new class{constructor(t,n){this.h=t,this.g=n}}(t.Za++,n)),3==t.G&&lm(t)}function lm(t){Eg(t.i)||t.m||(t.m=!0,np(t.Ha,t),t.C=0)}function am(t,n){var i;i=n?n.m:t.V++;const e=ig(t.F);lg(e,"SID",t.J),lg(e,"RID",i),lg(e,"AID",t.U),um(t,e),t.o&&t.s&&tm(e,t.o,t.s),i=new Rp(t,t.h,i,t.C+1),null===t.o&&(i.H=t.s),n&&(t.l=n.D.concat(t.l)),n=cm(t,i,1e3),i.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Cg(t.i,i),zp(i,e,n)}function um(t,n){t.j&&Yp({},(function(t,i){lg(n,i,t)}))}function cm(t,n,i){i=Math.min(t.l.length,i);var e=t.j?Fd(t.j.Oa,t.j,t):null;t:{var o=t.l;let n=-1;for(;;){const t=["count="+i];-1==n?0<i?(n=o[0].h,t.push("ofs="+n)):n=0:t.push("ofs="+n);let r=!0;for(let s=0;s<i;s++){let i=o[s].h;const l=o[s].g;if(i-=n,0>i)n=Math.max(0,o[s].h-100),r=!1;else try{Pg(l,t,"req"+i+"_")}catch(t){e&&e(l)}}if(r){e=t.join("&");break t}}}return t=t.l.splice(0,i),n.D=t,e}function hm(t){t.g||t.u||(t.Y=1,np(t.Ga,t),t.A=0)}function dm(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=_p(Fd(t.Ga,t),bm(t,t.A)),t.A++,0))}function fm(t){null!=t.B&&(Od.clearTimeout(t.B),t.B=null)}function pm(t){t.g=new Rp(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var n=ig(t.oa);lg(n,"RID","rpc"),lg(n,"SID",t.J),lg(n,"CI",t.N?"0":"1"),lg(n,"AID",t.U),um(t,n),lg(n,"TYPE","xmlhttp"),t.o&&t.s&&tm(n,t.o,t.s),t.K&&t.g.setTimeout(t.K);var i=t.g;t=t.la,i.K=1,i.v=ag(ig(n)),i.s=null,i.U=!0,Fp(i,t)}function gm(t){null!=t.v&&(Od.clearTimeout(t.v),t.v=null)}function mm(t,n){var i=null;if(t.g==n){gm(t),fm(t),t.g=null;var e=2}else{if(!Sg(t.i,n))return;i=n.D,Ag(t.i,n),e=1}if(t.I=n.N,0!=t.G)if(n.i)if(1==e){i=n.s?n.s.length:0,n=Date.now()-n.F;var o=t.C;Gf(e=vp(),new Ip(e,i,n,o)),lm(t)}else hm(t);else if(3==(o=n.o)||0==o&&0<t.I||!(1==e&&function(t,n){return!(Tg(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=n.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=_p(Fd(t.Ha,t,n),bm(t,t.C)),t.C++,0)))}(t,n)||2==e&&dm(t)))switch(i&&0<i.length&&(n=t.i,n.i=n.i.concat(i)),o){case 1:vm(t,5);break;case 4:vm(t,10);break;case 3:vm(t,6);break;default:vm(t,2)}}function bm(t,n){let i=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(i*=2),i*n}function vm(t,n){if(t.h.info("Error code "+n),2==n){var i=null;t.j&&(i=null);var e=Fd(t.jb,t);i||(i=new ng("//www.google.com/images/cleardot.gif"),Od.location&&"http"==Od.location.protocol||eg(i,"https"),ag(i)),function(t,n){const i=new pp;if(Od.Image){const e=new Image;e.onload=Vd(Rg,i,e,"TestLoadImage: loaded",!0,n),e.onerror=Vd(Rg,i,e,"TestLoadImage: error",!1,n),e.onabort=Vd(Rg,i,e,"TestLoadImage: abort",!1,n),e.ontimeout=Vd(Rg,i,e,"TestLoadImage: timeout",!1,n),Od.setTimeout((function(){e.ontimeout&&e.ontimeout()}),1e4),e.src=t}else n(!1)}(i.toString(),e)}else kp(2);t.G=0,t.j&&t.j.va(n),wm(t),rm(t)}function wm(t){t.G=0,t.I=-1,t.j&&(0==Dg(t.i).length&&0==t.l.length||(t.i.i.length=0,Gd(t.l),t.l.length=0),t.j.ua())}function ym(t,n,i){let e=function(t){return t instanceof ng?ig(t):new ng(t,void 0)}(i);if(""!=e.i)n&&og(e,n+"."+e.i),rg(e,e.m);else{const t=Od.location;e=function(t,n,i,e){var o=new ng(null,void 0);return t&&eg(o,t),n&&og(o,n),i&&rg(o,i),e&&(o.l=e),o}(t.protocol,n?n+"."+t.hostname:t.hostname,+t.port,i)}return t.aa&&nf(t.aa,(function(t,n){lg(e,n,t)})),i=t.sa,(n=t.D)&&i&&lg(e,n,i),lg(e,"VER",t.ma),um(t,e),e}function xm(t,n,i){if(n&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(n=new Ug(i&&t.Ba&&!t.qa?new Mg({ib:!0}):t.qa)).L=t.H,n}function km(){}function Im(){if(cf&&!(10<=Number(kf)))throw Error("Environmental error: no available transport.")}function _m(t,n){Wf.call(this),this.g=new im(n),this.l=t,this.h=n&&n.messageUrlParams||null,t=n&&n.messageHeaders||null,n&&n.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=n&&n.initMessageHeaders||null,n&&n.messageContentType&&(t?t["X-WebChannel-Content-Type"]=n.messageContentType:t={"X-WebChannel-Content-Type":n.messageContentType}),n&&n.ya&&(t?t["X-WebChannel-Client-Profile"]=n.ya:t={"X-WebChannel-Client-Profile":n.ya}),this.g.P=t,(t=n&&n.httpHeadersOverwriteParam)&&!Hd(t)&&(this.g.o=t),this.A=n&&n.supportsCrossDomainXhr||!1,this.v=n&&n.sendRawJson||!1,(n=n&&n.httpSessionIdParam)&&!Hd(n)&&(this.g.D=n,null!==(t=this.h)&&n in t&&n in(t=this.h)&&delete t[n]),this.j=new Sm(this)}function Em(t){Np.call(this);var n=t.__sm__;if(n){t:{for(const i in n){t=i;break t}t=void 0}(this.i=t)&&(t=this.i,n=null!==n&&t in n?n[t]:void 0),this.data=n}else this.data=t}function Tm(){Op.call(this),this.status=1}function Sm(t){this.g=t}(Ad=Ug.prototype).ea=function(t,n,i,e){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);n=n?n.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ap.g(),this.C=function(t){return t.h||(t.h=t.i())}(this.u?this.u:Ap),this.g.onreadystatechange=Fd(this.Fa,this);try{this.F=!0,this.g.open(n,String(t),!0),this.F=!1}catch(t){return void Gg(this,t)}t=i||"";const o=new Jp(this.headers);e&&Yp(e,(function(t,n){o.set(n,t)})),e=function(t){t:{var n=Wg;const i=t.length,e="string"==typeof t?t.split(""):t;for(let o=0;o<i;o++)if(o in e&&n.call(void 0,e[o],o,t)){n=o;break t}n=-1}return 0>n?null:"string"==typeof t?t.charAt(n):t[n]}(o.T()),i=Od.FormData&&t instanceof Od.FormData,!(0<=qd(Kg,n))||e||i||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,n){this.g.setRequestHeader(n,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Jg(this),0<this.B&&((this.K=function(t){return cf&&xf()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Fd(this.pa,this)):this.A=lp(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){Gg(this,t)}},Ad.pa=function(){void 0!==Nd&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Gf(this,"timeout"),this.abort(8))},Ad.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Gf(this,"complete"),Gf(this,"abort"),Yg(this))},Ad.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Yg(this,!0)),Ug.Z.M.call(this)},Ad.Fa=function(){this.s||(this.F||this.v||this.l?Xg(this):this.cb())},Ad.cb=function(){Xg(this)},Ad.ba=function(){try{return 2<Qg(this)?this.g.status:-1}catch(t){return-1}},Ad.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},Ad.Qa=function(t){if(this.g){var n=this.g.responseText;return t&&0==n.indexOf(t)&&(n=n.substring(t.length)),Vg(n)}},Ad.Da=function(){return this.m},Ad.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ad=im.prototype).ma=8,Ad.G=1,Ad.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},Ad.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const o=new Rp(this,this.h,t,void 0);let r=this.s;if(this.P&&(r?(r=ef(r),rf(r,this.P)):r=this.P),null===this.o&&(o.H=r),this.ja)t:{for(var n=0,i=0;i<this.l.length;i++){var e=this.l[i];if(void 0===(e="__data__"in e.g&&"string"==typeof(e=e.g.__data__)?e.length:void 0))break;if(4096<(n+=e)){n=i;break t}if(4096===n||i===this.l.length-1){n=i+1;break t}}n=1e3}else n=1e3;n=cm(this,o,n),lg(i=ig(this.F),"RID",t),lg(i,"CVER",22),this.D&&lg(i,"X-HTTP-Session-Id",this.D),um(this,i),this.o&&r&&tm(i,this.o,r),Cg(this.i,o),this.Ra&&lg(i,"TYPE","init"),this.ja?(lg(i,"$req",n),lg(i,"SID","null"),o.$=!0,zp(o,i,null)):zp(o,i,n),this.G=2}}else 3==this.G&&(t?am(this,t):0==this.l.length||Eg(this.i)||am(this))},Ad.Ga=function(){if(this.u=null,pm(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=_p(Fd(this.bb,this),t)}},Ad.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,kp(10),om(this),pm(this))},Ad.ab=function(){null!=this.v&&(this.v=null,om(this),dm(this),kp(19))},Ad.jb=function(t){t?(this.h.info("Successfully pinged google.com"),kp(2)):(this.h.info("Failed to ping google.com"),kp(1))},(Ad=km.prototype).xa=function(){},Ad.wa=function(){},Ad.va=function(){},Ad.ua=function(){},Ad.Oa=function(){},Im.prototype.g=function(t,n){return new _m(t,n)},Ud(_m,Wf),_m.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,n=this.l,i=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),np(Fd(t.hb,t,n))),kp(0),t.W=n,t.aa=i||{},t.N=t.X,t.F=ym(t,null,t.W),lm(t)},_m.prototype.close=function(){em(this.g)},_m.prototype.u=function(t){if("string"==typeof t){var n={};n.__data__=t,sm(this.g,n)}else this.v?((n={}).__data__=Xf(t),sm(this.g,n)):sm(this.g,t)},_m.prototype.M=function(){this.g.j=null,delete this.j,em(this.g),delete this.g,_m.Z.M.call(this)},Ud(Em,Np),Ud(Tm,Op),Ud(Sm,km),Sm.prototype.xa=function(){Gf(this.g,"a")},Sm.prototype.wa=function(t){Gf(this.g,new Em(t))},Sm.prototype.va=function(t){Gf(this.g,new Tm(t))},Sm.prototype.ua=function(){Gf(this.g,"b")},Im.prototype.createWebChannel=Im.prototype.g,_m.prototype.send=_m.prototype.u,_m.prototype.open=_m.prototype.m,_m.prototype.close=_m.prototype.close,Ep.NO_ERROR=0,Ep.TIMEOUT=8,Ep.HTTP_ERROR=6,Tp.COMPLETE="complete",Cp.EventType=Dp,Dp.OPEN="a",Dp.CLOSE="b",Dp.ERROR="c",Dp.MESSAGE="d",Wf.prototype.listen=Wf.prototype.N,Ug.prototype.listenOnce=Ug.prototype.O,Ug.prototype.getLastError=Ug.prototype.La,Ug.prototype.getLastErrorCode=Ug.prototype.Da,Ug.prototype.getStatus=Ug.prototype.ba,Ug.prototype.getResponseJson=Ug.prototype.Qa,Ug.prototype.getResponseText=Ug.prototype.ga,Ug.prototype.send=Ug.prototype.ea;var Cm=Ep,Am=Tp,Dm=mp,Nm=Mg,Om=Cp,Pm=Ug;const Rm="@firebase/firestore";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Mm.UNAUTHENTICATED=new Mm(null),Mm.GOOGLE_CREDENTIALS=new Mm("google-credentials-uid"),Mm.FIRST_PARTY=new Mm("first-party-uid"),Mm.MOCK_USER=new Mm("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Lm="9.6.11";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m=new _e("@firebase/firestore");function jm(){return $m.logLevel}function zm(t,...n){if($m.logLevel<=we.DEBUG){const i=n.map(Um);$m.debug(`Firestore (${Lm}): ${t}`,...i)}}function Fm(t,...n){if($m.logLevel<=we.ERROR){const i=n.map(Um);$m.error(`Firestore (${Lm}): ${t}`,...i)}}function Vm(t,...n){if($m.logLevel<=we.WARN){const i=n.map(Um);$m.warn(`Firestore (${Lm}): ${t}`,...i)}}function Um(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(n){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(t="Unexpected state"){const n=`FIRESTORE (${Lm}) INTERNAL ASSERTION FAILED: `+t;throw Fm(n),new Error(n)}function qm(t){t||Bm()}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Km={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Wm extends Ui{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Xm{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(Mm.UNAUTHENTICATED)))}shutdown(){}}class Ym{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Jm{constructor(t){this.t=t,this.currentUser=Mm.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let i=this.i;const e=t=>this.i!==i?(i=this.i,n(t)):Promise.resolve();let o=new Gm;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Gm,t.enqueueRetryable((()=>e(this.currentUser)))};const r=()=>{const n=o;t.enqueueRetryable((async()=>{await n.promise,await e(this.currentUser)}))},s=t=>{zm("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),r()};this.t.onInit((t=>s(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?s(t):(zm("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Gm)}}),0),r()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((n=>this.i!==t?(zm("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(qm("string"==typeof n.accessToken),new Hm(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return qm(null===t||"string"==typeof t),new Mm(t)}}class Qm{constructor(t,n,i){this.type="FirstParty",this.user=Mm.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);const e=t.auth.getAuthHeaderValueForFirstParty([]);e&&this.headers.set("Authorization",e),i&&this.headers.set("X-Goog-Iam-Authorization-Token",i)}}class Zm{constructor(t,n,i){this.h=t,this.l=n,this.m=i}getToken(){return Promise.resolve(new Qm(this.h,this.l,this.m))}start(t,n){t.enqueueRetryable((()=>n(Mm.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class tb{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nb{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(t,n){const i=t=>{null!=t.error&&zm("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const i=t.token!==this.p;return this.p=t.token,zm("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?n(t.token):Promise.resolve()};this.o=n=>{t.enqueueRetryable((()=>i(n)))};const e=t=>{zm("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.g.onInit((t=>e(t))),setTimeout((()=>{if(!this.appCheck){const t=this.g.getImmediate({optional:!0});t?e(t):zm("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(qm("string"==typeof t.token),this.p=t.token,new tb(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=t=>this.I(t),this.T=t=>n.writeSequenceNumber(t))}I(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.T&&this.T(t),t}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb(t){const n="undefined"!=typeof self&&(self.crypto||self.msCrypto),i=new Uint8Array(t);if(n&&"function"==typeof n.getRandomValues)n.getRandomValues(i);else for(let n=0;n<t;n++)i[n]=Math.floor(256*Math.random());return i}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ib.A=-1;class ob{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const e=eb(40);for(let o=0;o<e.length;++o)i.length<20&&e[o]<n&&(i+=t.charAt(e[o]%t.length))}return i}}function rb(t,n){return t<n?-1:t>n?1:0}function sb(t,n,i){return t.length===n.length&&t.every(((t,e)=>i(t,n[e])))}function lb(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Wm(Km.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Wm(Km.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Wm(Km.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Wm(Km.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return ab.fromMillis(Date.now())}static fromDate(t){return ab.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*n));return new ab(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?rb(this.nanoseconds,t.nanoseconds):rb(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(t){this.timestamp=t}static fromTimestamp(t){return new ub(t)}static min(){return new ub(new ab(0,0))}static max(){return new ub(new ab(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(t){let n=0;for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&n++;return n}function hb(t,n){for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&n(i,t[i])}function db(t){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(t,n,i){void 0===n?n=0:n>t.length&&Bm(),void 0===i?i=t.length-n:i>t.length-n&&Bm(),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return 0===fb.comparator(this,t)}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof fb?t.forEach((t=>{n.push(t)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let e=0;e<i;e++){const i=t.get(e),o=n.get(e);if(i<o)return-1;if(i>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class pb extends fb{construct(t,n,i){return new pb(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new Wm(Km.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((t=>t.length>0)))}return new pb(n)}static emptyPath(){return new pb([])}}const gb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mb extends fb{construct(t,n,i){return new mb(t,n,i)}static isValidIdentifier(t){return gb.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mb.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new mb(["__name__"])}static fromServerFormat(t){const n=[];let i="",e=0;const o=()=>{if(0===i.length)throw new Wm(Km.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let r=!1;for(;e<t.length;){const n=t[e];if("\\"===n){if(e+1===t.length)throw new Wm(Km.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const n=t[e+1];if("\\"!==n&&"."!==n&&"`"!==n)throw new Wm(Km.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=n,e+=2}else"`"===n?(r=!r,e++):"."!==n||r?(i+=n,e++):(o(),e++)}if(o(),r)throw new Wm(Km.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new mb(n)}static emptyPath(){return new mb([])}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(t){this.fields=t,t.sort(mb.comparator)}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return sb(this.fields,t.fields,((t,n)=>t.isEqual(n)))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(t){this.binaryString=t}static fromBase64String(t){const n=atob(t);return new vb(n)}static fromUint8Array(t){const n=function(t){let n="";for(let i=0;i<t.length;++i)n+=String.fromCharCode(t[i]);return n}(t);return new vb(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return rb(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}vb.EMPTY_BYTE_STRING=new vb("");const wb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yb(t){if(qm(!!t),"string"==typeof t){let n=0;const i=wb.exec(t);if(qm(!!i),i[1]){let t=i[1];t=(t+"000000000").substr(0,9),n=Number(t)}const e=new Date(t);return{seconds:Math.floor(e.getTime()/1e3),nanos:n}}return{seconds:xb(t.seconds),nanos:xb(t.nanos)}}function xb(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function kb(t){return"string"==typeof t?vb.fromBase64String(t):vb.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(t){var n,i;return"server_timestamp"===(null===(i=((null===(n=null==t?void 0:t.mapValue)||void 0===n?void 0:n.fields)||{}).__type__)||void 0===i?void 0:i.stringValue)}function _b(t){const n=t.mapValue.fields.__previous_value__;return Ib(n)?_b(n):n}function Eb(t){const n=yb(t.mapValue.fields.__local_write_time__.timestampValue);return new ab(n.seconds,n.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(t,n,i,e,o,r,s,l){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=e,this.ssl=o,this.forceLongPolling=r,this.autoDetectLongPolling=s,this.useFetchStreams=l}}class Sb{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new Sb("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Sb&&t.projectId===this.projectId&&t.database===this.database}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(t){return null==t}function Ab(t){return 0===t&&1/t==-1/0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Db{constructor(t){this.path=t}static fromPath(t){return new Db(pb.fromString(t))}static fromName(t){return new Db(pb.fromString(t).popFirst(5))}static empty(){return new Db(pb.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===pb.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,n){return pb.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Db(new pb(t.slice()))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ob={nullValue:"NULL_VALUE"};function Pb(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ib(t)?4:Gb(t)?9:10:Bm()}function Rb(t,n){if(t===n)return!0;const i=Pb(t);if(i!==Pb(n))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===n.booleanValue;case 4:return Eb(t).isEqual(Eb(n));case 3:return function(t,n){if("string"==typeof t.timestampValue&&"string"==typeof n.timestampValue&&t.timestampValue.length===n.timestampValue.length)return t.timestampValue===n.timestampValue;const i=yb(t.timestampValue),e=yb(n.timestampValue);return i.seconds===e.seconds&&i.nanos===e.nanos}(t,n);case 5:return t.stringValue===n.stringValue;case 6:return function(t,n){return kb(t.bytesValue).isEqual(kb(n.bytesValue))}(t,n);case 7:return t.referenceValue===n.referenceValue;case 8:return function(t,n){return xb(t.geoPointValue.latitude)===xb(n.geoPointValue.latitude)&&xb(t.geoPointValue.longitude)===xb(n.geoPointValue.longitude)}(t,n);case 2:return function(t,n){if("integerValue"in t&&"integerValue"in n)return xb(t.integerValue)===xb(n.integerValue);if("doubleValue"in t&&"doubleValue"in n){const i=xb(t.doubleValue),e=xb(n.doubleValue);return i===e?Ab(i)===Ab(e):isNaN(i)&&isNaN(e)}return!1}(t,n);case 9:return sb(t.arrayValue.values||[],n.arrayValue.values||[],Rb);case 10:return function(t,n){const i=t.mapValue.fields||{},e=n.mapValue.fields||{};if(cb(i)!==cb(e))return!1;for(const t in i)if(i.hasOwnProperty(t)&&(void 0===e[t]||!Rb(i[t],e[t])))return!1;return!0}(t,n);default:return Bm()}}function Mb(t,n){return void 0!==(t.values||[]).find((t=>Rb(t,n)))}function Lb(t,n){if(t===n)return 0;const i=Pb(t),e=Pb(n);if(i!==e)return rb(i,e);switch(i){case 0:case 9007199254740991:return 0;case 1:return rb(t.booleanValue,n.booleanValue);case 2:return function(t,n){const i=xb(t.integerValue||t.doubleValue),e=xb(n.integerValue||n.doubleValue);return i<e?-1:i>e?1:i===e?0:isNaN(i)?isNaN(e)?0:-1:1}(t,n);case 3:return $b(t.timestampValue,n.timestampValue);case 4:return $b(Eb(t),Eb(n));case 5:return rb(t.stringValue,n.stringValue);case 6:return function(t,n){const i=kb(t),e=kb(n);return i.compareTo(e)}(t.bytesValue,n.bytesValue);case 7:return function(t,n){const i=t.split("/"),e=n.split("/");for(let t=0;t<i.length&&t<e.length;t++){const n=rb(i[t],e[t]);if(0!==n)return n}return rb(i.length,e.length)}(t.referenceValue,n.referenceValue);case 8:return function(t,n){const i=rb(xb(t.latitude),xb(n.latitude));return 0!==i?i:rb(xb(t.longitude),xb(n.longitude))}(t.geoPointValue,n.geoPointValue);case 9:return function(t,n){const i=t.values||[],e=n.values||[];for(let t=0;t<i.length&&t<e.length;++t){const n=Lb(i[t],e[t]);if(n)return n}return rb(i.length,e.length)}(t.arrayValue,n.arrayValue);case 10:return function(t,n){const i=t.fields||{},e=Object.keys(i),o=n.fields||{},r=Object.keys(o);e.sort(),r.sort();for(let t=0;t<e.length&&t<r.length;++t){const n=rb(e[t],r[t]);if(0!==n)return n;const s=Lb(i[e[t]],o[r[t]]);if(0!==s)return s}return rb(e.length,r.length)}(t.mapValue,n.mapValue);default:throw Bm()}}function $b(t,n){if("string"==typeof t&&"string"==typeof n&&t.length===n.length)return rb(t,n);const i=yb(t),e=yb(n),o=rb(i.seconds,e.seconds);return 0!==o?o:rb(i.nanos,e.nanos)}function jb(t){return zb(t)}function zb(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const n=yb(t);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?kb(t.bytesValue).toBase64():"referenceValue"in t?Db.fromName(t.referenceValue).toString():"geoPointValue"in t?`geo(${(n=t.geoPointValue).latitude},${n.longitude})`:"arrayValue"in t?function(t){let n="[",i=!0;for(const e of t.values||[])i?i=!1:n+=",",n+=zb(e);return n+"]"}(t.arrayValue):"mapValue"in t?function(t){const n=Object.keys(t.fields||{}).sort();let i="{",e=!0;for(const o of n)e?e=!1:i+=",",i+=`${o}:${zb(t.fields[o])}`;return i+"}"}(t.mapValue):Bm();var n}function Fb(t,n){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${n.path.canonicalString()}`}}function Vb(t){return!!t&&"integerValue"in t}function Ub(t){return!!t&&"arrayValue"in t}function Bb(t){return!!t&&"nullValue"in t}function qb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Kb(t){return!!t&&"mapValue"in t}function Wb(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const n={mapValue:{fields:{}}};return hb(t.mapValue.fields,((t,i)=>n.mapValue.fields[t]=Wb(i))),n}if(t.arrayValue){const n={arrayValue:{values:[]}};for(let i=0;i<(t.arrayValue.values||[]).length;++i)n.arrayValue.values[i]=Wb(t.arrayValue.values[i]);return n}return Object.assign({},t)}function Gb(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function Hb(t){return"nullValue"in t?Ob:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Fb(Sb.empty(),Db.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:Bm()}function Xb(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Fb(Sb.empty(),Db.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Nb:Bm()}function Yb(t,n){return void 0===t?n:void 0===n||Lb(t,n)>0?t:n}function Jb(t,n){return void 0===t?n:void 0===n||Lb(t,n)<0?t:n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(t){this.value=t}static empty(){return new Qb({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!Kb(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Wb(n)}setAll(t){let n=mb.emptyPath(),i={},e=[];t.forEach(((t,o)=>{if(!n.isImmediateParentOf(o)){const t=this.getFieldsMap(n);this.applyChanges(t,i,e),i={},e=[],n=o.popLast()}t?i[o.lastSegment()]=Wb(t):e.push(o.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,i,e)}delete(t){const n=this.field(t.popLast());Kb(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Rb(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let e=n.mapValue.fields[t.get(i)];Kb(e)&&e.mapValue.fields||(e={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=e),n=e}return n.mapValue.fields}applyChanges(t,n,i){hb(n,((n,i)=>t[n]=i));for(const n of i)delete t[n]}clone(){return new Qb(Wb(this.value))}}function Zb(t){const n=[];return hb(t.fields,((t,i)=>{const e=new mb([t]);if(Kb(i)){const t=Zb(i.mapValue).fields;if(0===t.length)n.push(e);else for(const i of t)n.push(e.child(i))}else n.push(e)})),new bb(n)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class tv{constructor(t,n,i,e,o,r){this.key=t,this.documentType=n,this.version=i,this.readTime=e,this.data=o,this.documentState=r}static newInvalidDocument(t){return new tv(t,0,ub.min(),ub.min(),Qb.empty(),0)}static newFoundDocument(t,n,i){return new tv(t,1,n,ub.min(),i,0)}static newNoDocument(t,n){return new tv(t,2,n,ub.min(),Qb.empty(),0)}static newUnknownDocument(t,n){return new tv(t,3,n,ub.min(),Qb.empty(),2)}convertToFoundDocument(t,n){return this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Qb.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Qb.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof tv&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new tv(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class nv{constructor(t,n,i,e){this.indexId=t,this.collectionGroup=n,this.fields=i,this.indexState=e}}function iv(t){return t.fields.find((t=>2===t.kind))}function ev(t){return t.fields.filter((t=>2!==t.kind))}nv.UNKNOWN_ID=-1;class ov{constructor(t,n){this.fieldPath=t,this.kind=n}}class rv{constructor(t,n){this.sequenceNumber=t,this.offset=n}static empty(){return new rv(0,lv.min())}}function sv(t){return new lv(t.readTime,t.key,-1)}class lv{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new lv(ub.min(),Db.empty(),-1)}static max(){return new lv(ub.max(),Db.empty(),-1)}}function av(t,n){let i=t.readTime.compareTo(n.readTime);return 0!==i?i:(i=Db.comparator(t.documentKey,n.documentKey),0!==i?i:rb(t.largestBatchId,n.largestBatchId))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(t,n=null,i=[],e=[],o=null,r=null,s=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=e,this.limit=o,this.startAt=r,this.endAt=s,this.P=null}}function cv(t,n=null,i=[],e=[],o=null,r=null,s=null){return new uv(t,n,i,e,o,r,s)}function hv(t){const n=t;if(null===n.P){let t=n.path.canonicalString();null!==n.collectionGroup&&(t+="|cg:"+n.collectionGroup),t+="|f:",t+=n.filters.map((t=>{return(n=t).field.canonicalString()+n.op.toString()+jb(n.value);var n})).join(","),t+="|ob:",t+=n.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),Cb(n.limit)||(t+="|l:",t+=n.limit),n.startAt&&(t+="|lb:",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map((t=>jb(t))).join(",")),n.endAt&&(t+="|ub:",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map((t=>jb(t))).join(",")),n.P=t}return n.P}function dv(t,n){if(t.limit!==n.limit)return!1;if(t.orderBy.length!==n.orderBy.length)return!1;for(let i=0;i<t.orderBy.length;i++)if(!Cv(t.orderBy[i],n.orderBy[i]))return!1;if(t.filters.length!==n.filters.length)return!1;for(let o=0;o<t.filters.length;o++)if((i=t.filters[o]).op!==(e=n.filters[o]).op||!i.field.isEqual(e.field)||!Rb(i.value,e.value))return!1;var i,e;return t.collectionGroup===n.collectionGroup&&!!t.path.isEqual(n.path)&&!!Dv(t.startAt,n.startAt)&&Dv(t.endAt,n.endAt)}function fv(t){return Db.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function pv(t,n){return t.filters.filter((t=>t instanceof bv&&t.field.isEqual(n)))}function gv(t,n,i){let e,o=!0;for(const i of pv(t,n)){let t,n=!0;switch(i.op){case"<":case"<=":t=Hb(i.value);break;case"==":case"in":case">=":t=i.value;break;case">":t=i.value,n=!1;break;case"!=":case"not-in":t=Ob}Yb(e,t)===t&&(e=t,o=n)}if(null!==i)for(let r=0;r<t.orderBy.length;++r)if(t.orderBy[r].field.isEqual(n)){const t=i.position[r];Yb(e,t)===t&&(e=t,o=i.inclusive);break}return{value:e,inclusive:o}}function mv(t,n,i){let e,o=!0;for(const i of pv(t,n)){let t,n=!0;switch(i.op){case">=":case">":t=Xb(i.value),n=!1;break;case"==":case"in":case"<=":t=i.value;break;case"<":t=i.value,n=!1;break;case"!=":case"not-in":t=Nb}Jb(e,t)===t&&(e=t,o=n)}if(null!==i)for(let r=0;r<t.orderBy.length;++r)if(t.orderBy[r].field.isEqual(n)){const t=i.position[r];Jb(e,t)===t&&(e=t,o=i.inclusive);break}return{value:e,inclusive:o}}class bv extends class{}{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?"in"===n||"not-in"===n?this.V(t,n,i):new vv(t,n,i):"array-contains"===n?new kv(t,i):"in"===n?new Iv(t,i):"not-in"===n?new _v(t,i):"array-contains-any"===n?new Ev(t,i):new bv(t,n,i)}static V(t,n,i){return"in"===n?new wv(t,i):new yv(t,i)}matches(t){const n=t.data.field(this.field);return"!="===this.op?null!==n&&this.v(Lb(n,this.value)):null!==n&&Pb(this.value)===Pb(n)&&this.v(Lb(n,this.value))}v(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Bm()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class vv extends bv{constructor(t,n,i){super(t,n,i),this.key=Db.fromName(i.referenceValue)}matches(t){const n=Db.comparator(t.key,this.key);return this.v(n)}}class wv extends bv{constructor(t,n){super(t,"in",n),this.keys=xv(0,n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class yv extends bv{constructor(t,n){super(t,"not-in",n),this.keys=xv(0,n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function xv(t,n){var i;return((null===(i=n.arrayValue)||void 0===i?void 0:i.values)||[]).map((t=>Db.fromName(t.referenceValue)))}class kv extends bv{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Ub(n)&&Mb(n.arrayValue,this.value)}}class Iv extends bv{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return null!==n&&Mb(this.value.arrayValue,n)}}class _v extends bv{constructor(t,n){super(t,"not-in",n)}matches(t){if(Mb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return null!==n&&!Mb(this.value.arrayValue,n)}}class Ev extends bv{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Ub(n)||!n.arrayValue.values)&&n.arrayValue.values.some((t=>Mb(this.value.arrayValue,t)))}}class Tv{constructor(t,n){this.position=t,this.inclusive=n}}class Sv{constructor(t,n="asc"){this.field=t,this.dir=n}}function Cv(t,n){return t.dir===n.dir&&t.field.isEqual(n.field)}function Av(t,n,i){let e=0;for(let o=0;o<t.position.length;o++){const r=n[o],s=t.position[o];if(e=r.field.isKeyField()?Db.comparator(Db.fromName(s.referenceValue),i.key):Lb(s,i.data.field(r.field)),"desc"===r.dir&&(e*=-1),0!==e)break}return e}function Dv(t,n){if(null===t)return null===n;if(null===n)return!1;if(t.inclusive!==n.inclusive||t.position.length!==n.position.length)return!1;for(let i=0;i<t.position.length;i++)if(!Rb(t.position[i],n.position[i]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(t,n=null,i=[],e=[],o=null,r="F",s=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=e,this.limit=o,this.limitType=r,this.startAt=s,this.endAt=l,this.D=null,this.C=null}}function Ov(t){return new Nv(t)}function Pv(t){return!Cb(t.limit)&&"F"===t.limitType}function Rv(t){return!Cb(t.limit)&&"L"===t.limitType}function Mv(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Lv(t){for(const n of t.filters)if(n.S())return n.field;return null}function $v(t){return null!==t.collectionGroup}function jv(t){const n=t;if(null===n.D){n.D=[];const t=Lv(n),i=Mv(n);if(null!==t&&null===i)t.isKeyField()||n.D.push(new Sv(t)),n.D.push(new Sv(mb.keyField(),"asc"));else{let t=!1;for(const i of n.explicitOrderBy)n.D.push(i),i.field.isKeyField()&&(t=!0);if(!t){const t=n.explicitOrderBy.length>0?n.explicitOrderBy[n.explicitOrderBy.length-1].dir:"asc";n.D.push(new Sv(mb.keyField(),t))}}}return n.D}function zv(t){const n=t;if(!n.C)if("F"===n.limitType)n.C=cv(n.path,n.collectionGroup,jv(n),n.filters,n.limit,n.startAt,n.endAt);else{const t=[];for(const i of jv(n))t.push(new Sv(i.field,"desc"===i.dir?"asc":"desc"));const i=n.endAt?new Tv(n.endAt.position,!n.endAt.inclusive):null,e=n.startAt?new Tv(n.startAt.position,!n.startAt.inclusive):null;n.C=cv(n.path,n.collectionGroup,t,n.filters,n.limit,i,e)}return n.C}function Fv(t,n,i){return new Nv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),n,i,t.startAt,t.endAt)}function Vv(t,n){return dv(zv(t),zv(n))&&t.limitType===n.limitType}function Uv(t){return`${hv(zv(t))}|lt:${t.limitType}`}function Bv(t){return`Query(target=${function(t){let n=t.path.canonicalString();return null!==t.collectionGroup&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((t=>{return`${(n=t).field.canonicalString()} ${n.op} ${jb(n.value)}`;var n})).join(", ")}]`),Cb(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((t=>jb(t))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((t=>jb(t))).join(",")),`Target(${n})`}(zv(t))}; limitType=${t.limitType})`}function qv(t,n){return n.isFoundDocument()&&function(t,n){const i=n.key.path;return null!==t.collectionGroup?n.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Db.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(t,n)&&function(t,n){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===n.data.field(i.field))return!1;return!0}(t,n)&&function(t,n){for(const i of t.filters)if(!i.matches(n))return!1;return!0}(t,n)&&function(t,n){return!(t.startAt&&!function(t,n,i){const e=Av(t,n,i);return t.inclusive?e<=0:e<0}(t.startAt,jv(t),n)||t.endAt&&!function(t,n,i){const e=Av(t,n,i);return t.inclusive?e>=0:e>0}(t.endAt,jv(t),n))}(t,n)}function Kv(t){return(n,i)=>{let e=!1;for(const o of jv(t)){const t=Wv(o,n,i);if(0!==t)return t;e=e||o.field.isKeyField()}return 0}}function Wv(t,n,i){const e=t.field.isKeyField()?Db.comparator(n.key,i.key):function(t,n,i){const e=n.data.field(t),o=i.data.field(t);return null!==e&&null!==o?Lb(e,o):Bm()}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t.field,n,i);switch(t.dir){case"asc":return e;case"desc":return-1*e;default:return Bm()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(t,n){if(t.N){if(isNaN(n))return{doubleValue:"NaN"};if(n===1/0)return{doubleValue:"Infinity"};if(n===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ab(n)?"-0":n}}function Hv(t){return{integerValue:""+t}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(){this._=void 0}}function Yv(t,n,i){return t instanceof Zv?function(t,n){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return n&&(i.fields.__previous_value__=n),{mapValue:i}}(i,n):t instanceof tw?nw(t,n):t instanceof iw?ew(t,n):function(t,n){const i=Qv(t,n),e=rw(i)+rw(t.k);return Vb(i)&&Vb(t.k)?Hv(e):Gv(t.M,e)}(t,n)}function Jv(t,n,i){return t instanceof tw?nw(t,n):t instanceof iw?ew(t,n):i}function Qv(t,n){return t instanceof ow?Vb(i=n)||function(t){return!!t&&"doubleValue"in t}(i)?n:{integerValue:0}:null;var i}class Zv extends Xv{}class tw extends Xv{constructor(t){super(),this.elements=t}}function nw(t,n){const i=sw(n);for(const n of t.elements)i.some((t=>Rb(t,n)))||i.push(n);return{arrayValue:{values:i}}}class iw extends Xv{constructor(t){super(),this.elements=t}}function ew(t,n){let i=sw(n);for(const n of t.elements)i=i.filter((t=>!Rb(t,n)));return{arrayValue:{values:i}}}class ow extends Xv{constructor(t,n){super(),this.M=t,this.k=n}}function rw(t){return xb(t.integerValue||t.doubleValue)}function sw(t){return Ub(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(t,n){this.field=t,this.transform=n}}class aw{constructor(t,n){this.version=t,this.transformResults=n}}class uw{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new uw}static exists(t){return new uw(void 0,t)}static updateTime(t){return new uw(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function cw(t,n){return void 0!==t.updateTime?n.isFoundDocument()&&n.version.isEqual(t.updateTime):void 0===t.exists||t.exists===n.isFoundDocument()}class hw{}function dw(t,n,i){t instanceof bw?function(t,n,i){const e=t.value.clone(),o=yw(t.fieldTransforms,n,i.transformResults);e.setAll(o),n.convertToFoundDocument(i.version,e).setHasCommittedMutations()}(t,n,i):t instanceof vw?function(t,n,i){if(!cw(t.precondition,n))return void n.convertToUnknownDocument(i.version);const e=yw(t.fieldTransforms,n,i.transformResults),o=n.data;o.setAll(ww(t)),o.setAll(e),n.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,n,i):function(t,n,i){n.convertToNoDocument(i.version).setHasCommittedMutations()}(0,n,i)}function fw(t,n,i){t instanceof bw?function(t,n,i){if(!cw(t.precondition,n))return;const e=t.value.clone(),o=xw(t.fieldTransforms,i,n);e.setAll(o),n.convertToFoundDocument(mw(n),e).setHasLocalMutations()}(t,n,i):t instanceof vw?function(t,n,i){if(!cw(t.precondition,n))return;const e=xw(t.fieldTransforms,i,n),o=n.data;o.setAll(ww(t)),o.setAll(e),n.convertToFoundDocument(mw(n),o).setHasLocalMutations()}(t,n,i):function(t,n){cw(t.precondition,n)&&n.convertToNoDocument(ub.min())}(t,n)}function pw(t,n){let i=null;for(const e of t.fieldTransforms){const t=n.data.field(e.field),o=Qv(e.transform,t||null);null!=o&&(null==i&&(i=Qb.empty()),i.set(e.field,o))}return i||null}function gw(t,n){return t.type===n.type&&!!t.key.isEqual(n.key)&&!!t.precondition.isEqual(n.precondition)&&!!function(t,n){return void 0===t&&void 0===n||!(!t||!n)&&sb(t,n,((t,n)=>function(t,n){return t.field.isEqual(n.field)&&function(t,n){return t instanceof tw&&n instanceof tw||t instanceof iw&&n instanceof iw?sb(t.elements,n.elements,Rb):t instanceof ow&&n instanceof ow?Rb(t.k,n.k):t instanceof Zv&&n instanceof Zv}(t.transform,n.transform)}(t,n)))}(t.fieldTransforms,n.fieldTransforms)&&(0===t.type?t.value.isEqual(n.value):1!==t.type||t.data.isEqual(n.data)&&t.fieldMask.isEqual(n.fieldMask))}function mw(t){return t.isFoundDocument()?t.version:ub.min()}class bw extends hw{constructor(t,n,i,e=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=e,this.type=0}}class vw extends hw{constructor(t,n,i,e,o=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=e,this.fieldTransforms=o,this.type=1}}function ww(t){const n=new Map;return t.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const e=t.data.field(i);n.set(i,e)}})),n}function yw(t,n,i){const e=new Map;qm(t.length===i.length);for(let o=0;o<i.length;o++){const r=t[o],s=r.transform,l=n.data.field(r.field);e.set(r.field,Jv(s,l,i[o]))}return e}function xw(t,n,i){const e=new Map;for(const o of t){const t=o.transform,r=i.data.field(o.field);e.set(o.field,Yv(t,r,n))}return e}class kw extends hw{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}}class Iw extends hw{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(t){this.count=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ew,Tw;function Sw(t){if(void 0===t)return Fm("GRPC error has no .code"),Km.UNKNOWN;switch(t){case Ew.OK:return Km.OK;case Ew.CANCELLED:return Km.CANCELLED;case Ew.UNKNOWN:return Km.UNKNOWN;case Ew.DEADLINE_EXCEEDED:return Km.DEADLINE_EXCEEDED;case Ew.RESOURCE_EXHAUSTED:return Km.RESOURCE_EXHAUSTED;case Ew.INTERNAL:return Km.INTERNAL;case Ew.UNAVAILABLE:return Km.UNAVAILABLE;case Ew.UNAUTHENTICATED:return Km.UNAUTHENTICATED;case Ew.INVALID_ARGUMENT:return Km.INVALID_ARGUMENT;case Ew.NOT_FOUND:return Km.NOT_FOUND;case Ew.ALREADY_EXISTS:return Km.ALREADY_EXISTS;case Ew.PERMISSION_DENIED:return Km.PERMISSION_DENIED;case Ew.FAILED_PRECONDITION:return Km.FAILED_PRECONDITION;case Ew.ABORTED:return Km.ABORTED;case Ew.OUT_OF_RANGE:return Km.OUT_OF_RANGE;case Ew.UNIMPLEMENTED:return Km.UNIMPLEMENTED;case Ew.DATA_LOSS:return Km.DATA_LOSS;default:return Bm()}}(Tw=Ew||(Ew={}))[Tw.OK=0]="OK",Tw[Tw.CANCELLED=1]="CANCELLED",Tw[Tw.UNKNOWN=2]="UNKNOWN",Tw[Tw.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tw[Tw.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tw[Tw.NOT_FOUND=5]="NOT_FOUND",Tw[Tw.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tw[Tw.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tw[Tw.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tw[Tw.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tw[Tw.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tw[Tw.ABORTED=10]="ABORTED",Tw[Tw.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tw[Tw.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tw[Tw.INTERNAL=13]="INTERNAL",Tw[Tw.UNAVAILABLE=14]="UNAVAILABLE",Tw[Tw.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Cw{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0!==i)for(const[n,e]of i)if(this.equalsFn(n,t))return e}has(t){return void 0!==this.get(t)}set(t,n){const i=this.mapKeyFn(t),e=this.inner[i];if(void 0===e)return this.inner[i]=[[t,n]],void this.innerSize++;for(let i=0;i<e.length;i++)if(this.equalsFn(e[i][0],t))return void(e[i]=[t,n]);e.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return!1;for(let e=0;e<i.length;e++)if(this.equalsFn(i[e][0],t))return 1===i.length?delete this.inner[n]:i.splice(e,1),this.innerSize--,!0;return!1}forEach(t){hb(this.inner,((n,i)=>{for(const[n,e]of i)t(n,e)}))}isEmpty(){return db(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(t,n){this.comparator=t,this.root=n||Nw.EMPTY}insert(t,n){return new Aw(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Nw.BLACK,null,null))}remove(t){return new Aw(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Nw.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const e=this.comparator(t,i.key);if(0===e)return n+i.left.size;e<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,i)=>(t(n,i),!1)))}toString(){const t=[];return this.inorderTraversal(((n,i)=>(t.push(`${n}:${i}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Dw(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Dw(this.root,t,this.comparator,!1)}getReverseIterator(){return new Dw(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Dw(this.root,t,this.comparator,!0)}}class Dw{constructor(t,n,i,e){this.isReverse=e,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=n?i(t.key,n):1,n&&e&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(0===o){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Nw{constructor(t,n,i,e,o){this.key=t,this.value=n,this.color=null!=i?i:Nw.RED,this.left=null!=e?e:Nw.EMPTY,this.right=null!=o?o:Nw.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,e,o){return new Nw(null!=t?t:this.key,null!=n?n:this.value,null!=i?i:this.color,null!=e?e:this.left,null!=o?o:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let e=this;const o=i(t,e.key);return e=o<0?e.copy(null,null,null,e.left.insert(t,n,i),null):0===o?e.copy(null,n,null,null,null):e.copy(null,null,null,null,e.right.insert(t,n,i)),e.fixUp()}removeMin(){if(this.left.isEmpty())return Nw.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,e=this;if(n(t,e.key)<0)e.left.isEmpty()||e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.remove(t,n),null);else{if(e.left.isRed()&&(e=e.rotateRight()),e.right.isEmpty()||e.right.isRed()||e.right.left.isRed()||(e=e.moveRedRight()),0===n(t,e.key)){if(e.right.isEmpty())return Nw.EMPTY;i=e.right.min(),e=e.copy(i.key,i.value,null,null,e.right.removeMin())}e=e.copy(null,null,null,null,e.right.remove(t,n))}return e.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Nw.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Nw.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Bm();if(this.right.isRed())throw Bm();const t=this.left.check();if(t!==this.right.check())throw Bm();return t+(this.isRed()?0:1)}}Nw.EMPTY=null,Nw.RED=!0,Nw.BLACK=!1,Nw.EMPTY=new class{constructor(){this.size=0}get key(){throw Bm()}get value(){throw Bm()}get color(){throw Bm()}get left(){throw Bm()}get right(){throw Bm()}copy(t,n,i,e,o){return this}insert(t,n,i){return new Nw(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ow{constructor(t){this.comparator=t,this.data=new Aw(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n=>(t(n),!1)))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const e=i.getNext();if(this.comparator(e.key,t[1])>=0)return;n(e.key)}}forEachWhile(t,n){let i;for(i=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Pw(this.data.getIterator())}getIteratorFrom(t){return new Pw(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((t=>{n=n.add(t)})),n}isEqual(t){if(!(t instanceof Ow))return!1;if(this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const t=n.getNext().key,e=i.getNext().key;if(0!==this.comparator(t,e))return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new Ow(this.comparator);return n.data=t,n}}class Pw{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Rw(t){return t.hasNext()?t.getNext():void 0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw=new Aw(Db.comparator);function Lw(){return Mw}const $w=new Aw(Db.comparator);function jw(){return $w}function zw(){return new Cw((t=>t.toString()),((t,n)=>t.isEqual(n)))}const Fw=new Aw(Db.comparator),Vw=new Ow(Db.comparator);function Uw(...t){let n=Vw;for(const i of t)n=n.add(i);return n}const Bw=new Ow(rb);function qw(){return Bw}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(t,n,i,e,o){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=e,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,n){const i=new Map;return i.set(t,Ww.createSynthesizedTargetChangeForCurrentChange(t,n)),new Kw(ub.min(),i,qw(),Lw(),Uw())}}class Ww{constructor(t,n,i,e,o){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=e,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,n){return new Ww(vb.EMPTY_BYTE_STRING,n,Uw(),Uw(),Uw())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(t,n,i,e){this.O=t,this.removedTargetIds=n,this.key=i,this.F=e}}class Hw{constructor(t,n){this.targetId=t,this.$=n}}class Xw{constructor(t,n,i=vb.EMPTY_BYTE_STRING,e=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=e}}class Yw{constructor(){this.B=0,this.L=Zw(),this.U=vb.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(t){t.approximateByteSize()>0&&(this.K=!0,this.U=t)}H(){let t=Uw(),n=Uw(),i=Uw();return this.L.forEach(((e,o)=>{switch(o){case 0:t=t.add(e);break;case 2:n=n.add(e);break;case 1:i=i.add(e);break;default:Bm()}})),new Ww(this.U,this.q,t,n,i)}J(){this.K=!1,this.L=Zw()}Y(t,n){this.K=!0,this.L=this.L.insert(t,n)}X(t){this.K=!0,this.L=this.L.remove(t)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Jw{constructor(t){this.nt=t,this.st=new Map,this.it=Lw(),this.rt=Qw(),this.ot=new Ow(rb)}ut(t){for(const n of t.O)t.F&&t.F.isFoundDocument()?this.at(n,t.F):this.ct(n,t.key,t.F);for(const n of t.removedTargetIds)this.ct(n,t.key,t.F)}ht(t){this.forEachTarget(t,(n=>{const i=this.lt(n);switch(t.state){case 0:this.ft(n)&&i.W(t.resumeToken);break;case 1:i.tt(),i.G||i.J(),i.W(t.resumeToken);break;case 2:i.tt(),i.G||this.removeTarget(n);break;case 3:this.ft(n)&&(i.et(),i.W(t.resumeToken));break;case 4:this.ft(n)&&(this.dt(n),i.W(t.resumeToken));break;default:Bm()}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.st.forEach(((t,i)=>{this.ft(i)&&n(i)}))}_t(t){const n=t.targetId,i=t.$.count,e=this.wt(n);if(e){const t=e.target;if(fv(t))if(0===i){const i=new Db(t.path);this.ct(n,i,tv.newNoDocument(i,ub.min()))}else qm(1===i);else this.gt(n)!==i&&(this.dt(n),this.ot=this.ot.add(n))}}yt(t){const n=new Map;this.st.forEach(((i,e)=>{const o=this.wt(e);if(o){if(i.current&&fv(o.target)){const n=new Db(o.target.path);null!==this.it.get(n)||this.It(e,n)||this.ct(e,n,tv.newNoDocument(n,t))}i.j&&(n.set(e,i.H()),i.J())}}));let i=Uw();this.rt.forEach(((t,n)=>{let e=!0;n.forEachWhile((t=>{const n=this.wt(t);return!n||2===n.purpose||(e=!1,!1)})),e&&(i=i.add(t))})),this.it.forEach(((n,i)=>i.setReadTime(t)));const e=new Kw(t,n,this.ot,this.it,i);return this.it=Lw(),this.rt=Qw(),this.ot=new Ow(rb),e}at(t,n){if(!this.ft(t))return;const i=this.It(t,n.key)?2:0;this.lt(t).Y(n.key,i),this.it=this.it.insert(n.key,n),this.rt=this.rt.insert(n.key,this.Tt(n.key).add(t))}ct(t,n,i){if(!this.ft(t))return;const e=this.lt(t);this.It(t,n)?e.Y(n,1):e.X(n),this.rt=this.rt.insert(n,this.Tt(n).delete(t)),i&&(this.it=this.it.insert(n,i))}removeTarget(t){this.st.delete(t)}gt(t){const n=this.lt(t).H();return this.nt.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Z(t){this.lt(t).Z()}lt(t){let n=this.st.get(t);return n||(n=new Yw,this.st.set(t,n)),n}Tt(t){let n=this.rt.get(t);return n||(n=new Ow(rb),this.rt=this.rt.insert(t,n)),n}ft(t){const n=null!==this.wt(t);return n||zm("WatchChangeAggregator","Detected inactive target",t),n}wt(t){const n=this.st.get(t);return n&&n.G?null:this.nt.Et(t)}dt(t){this.st.set(t,new Yw),this.nt.getRemoteKeysForTarget(t).forEach((n=>{this.ct(t,n,null)}))}It(t,n){return this.nt.getRemoteKeysForTarget(t).has(n)}}function Qw(){return new Aw(Db.comparator)}function Zw(){return new Aw(Db.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty={asc:"ASCENDING",desc:"DESCENDING"},ny={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class iy{constructor(t,n){this.databaseId=t,this.N=n}}function ey(t,n){return t.N?`${new Date(1e3*n.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+n.nanoseconds).slice(-9)}Z`:{seconds:""+n.seconds,nanos:n.nanoseconds}}function oy(t,n){return t.N?n.toBase64():n.toUint8Array()}function ry(t,n){return ey(t,n.toTimestamp())}function sy(t){return qm(!!t),ub.fromTimestamp(function(t){const n=yb(t);return new ab(n.seconds,n.nanos)}(t))}function ly(t,n){return function(t){return new pb(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(n).canonicalString()}function ay(t){const n=pb.fromString(t);return qm(Ay(n)),n}function uy(t,n){return ly(t.databaseId,n.path)}function cy(t,n){const i=ay(n);if(i.get(1)!==t.databaseId.projectId)throw new Wm(Km.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+t.databaseId.projectId);if(i.get(3)!==t.databaseId.database)throw new Wm(Km.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+t.databaseId.database);return new Db(py(i))}function hy(t,n){return ly(t.databaseId,n)}function dy(t){const n=ay(t);return 4===n.length?pb.emptyPath():py(n)}function fy(t){return new pb(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function py(t){return qm(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function gy(t,n,i){return{name:uy(t,n),fields:i.value.mapValue.fields}}function my(t,n){let i;if(n instanceof bw)i={update:gy(t,n.key,n.value)};else if(n instanceof kw)i={delete:uy(t,n.key)};else if(n instanceof vw)i={update:gy(t,n.key,n.data),updateMask:Cy(n.fieldMask)};else{if(!(n instanceof Iw))return Bm();i={verify:uy(t,n.key)}}return n.fieldTransforms.length>0&&(i.updateTransforms=n.fieldTransforms.map((t=>function(t,n){const i=n.transform;if(i instanceof Zv)return{fieldPath:n.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(i instanceof tw)return{fieldPath:n.field.canonicalString(),appendMissingElements:{values:i.elements}};if(i instanceof iw)return{fieldPath:n.field.canonicalString(),removeAllFromArray:{values:i.elements}};if(i instanceof ow)return{fieldPath:n.field.canonicalString(),increment:i.k};throw Bm()}(0,t)))),n.precondition.isNone||(i.currentDocument=function(t,n){return void 0!==n.updateTime?{updateTime:ry(t,n.updateTime)}:void 0!==n.exists?{exists:n.exists}:Bm()}(t,n.precondition)),i}function by(t,n){const i=n.currentDocument?function(t){return void 0!==t.updateTime?uw.updateTime(sy(t.updateTime)):void 0!==t.exists?uw.exists(t.exists):uw.none()}(n.currentDocument):uw.none(),e=n.updateTransforms?n.updateTransforms.map((n=>function(t,n){let i=null;"setToServerValue"in n?(qm("REQUEST_TIME"===n.setToServerValue),i=new Zv):"appendMissingElements"in n?i=new tw(n.appendMissingElements.values||[]):"removeAllFromArray"in n?i=new iw(n.removeAllFromArray.values||[]):"increment"in n?i=new ow(t,n.increment):Bm();const e=mb.fromServerFormat(n.fieldPath);return new lw(e,i)}(t,n))):[];if(n.update){const o=cy(t,n.update.name),r=new Qb({mapValue:{fields:n.update.fields}});if(n.updateMask){const t=function(t){return new bb((t.fieldPaths||[]).map((t=>mb.fromServerFormat(t))))}(n.updateMask);return new vw(o,r,t,i,e)}return new bw(o,r,i,e)}if(n.delete){const e=cy(t,n.delete);return new kw(e,i)}if(n.verify){const e=cy(t,n.verify);return new Iw(e,i)}return Bm()}function vy(t,n){return{documents:[hy(t,n.path)]}}function wy(t,n){const i={structuredQuery:{}},e=n.path;null!==n.collectionGroup?(i.parent=hy(t,e),i.structuredQuery.from=[{collectionId:n.collectionGroup,allDescendants:!0}]):(i.parent=hy(t,e.popLast()),i.structuredQuery.from=[{collectionId:e.lastSegment()}]);const o=function(t){if(0===t.length)return;const n=t.map((t=>function(t){if("=="===t.op){if(qb(t.value))return{unaryFilter:{field:_y(t.field),op:"IS_NAN"}};if(Bb(t.value))return{unaryFilter:{field:_y(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(qb(t.value))return{unaryFilter:{field:_y(t.field),op:"IS_NOT_NAN"}};if(Bb(t.value))return{unaryFilter:{field:_y(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_y(t.field),op:Iy(t.op),value:t.value}}}(t)));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}(n.filters);o&&(i.structuredQuery.where=o);const r=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:_y(t.field),direction:ky(t.dir)}}(t)))}(n.orderBy);r&&(i.structuredQuery.orderBy=r);const s=function(t,n){return t.N||Cb(n)?n:{value:n}}(t,n.limit);var l;return null!==s&&(i.structuredQuery.limit=s),n.startAt&&(i.structuredQuery.startAt={before:(l=n.startAt).inclusive,values:l.position}),n.endAt&&(i.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(n.endAt)),i}function yy(t){let n=dy(t.parent);const i=t.structuredQuery,e=i.from?i.from.length:0;let o=null;if(e>0){qm(1===e);const t=i.from[0];t.allDescendants?o=t.collectionId:n=n.child(t.collectionId)}let r=[];i.where&&(r=xy(i.where));let s=[];i.orderBy&&(s=i.orderBy.map((t=>function(t){return new Sv(Ey(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t))));let l=null;i.limit&&(l=function(t){let n;return n="object"==typeof t?t.value:t,Cb(n)?null:n}(i.limit));let a=null;i.startAt&&(a=function(t){return new Tv(t.values||[],!!t.before)}(i.startAt));let u=null;return i.endAt&&(u=function(t){return new Tv(t.values||[],!t.before)}(i.endAt)),function(t,n,i,e,o,r,s,l){return new Nv(t,n,i,e,o,"F",s,l)}(n,o,s,r,l,0,a,u)}function xy(t){return t?void 0!==t.unaryFilter?[Sy(t)]:void 0!==t.fieldFilter?[Ty(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((t=>xy(t))).reduce(((t,n)=>t.concat(n))):Bm():[]}function ky(t){return ty[t]}function Iy(t){return ny[t]}function _y(t){return{fieldPath:t.canonicalString()}}function Ey(t){return mb.fromServerFormat(t.fieldPath)}function Ty(t){return bv.create(Ey(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Bm()}}(t.fieldFilter.op),t.fieldFilter.value)}function Sy(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Ey(t.unaryFilter.field);return bv.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Ey(t.unaryFilter.field);return bv.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const e=Ey(t.unaryFilter.field);return bv.create(e,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ey(t.unaryFilter.field);return bv.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Bm()}}function Cy(t){const n=[];return t.fields.forEach((t=>n.push(t.canonicalString()))),{fieldPaths:n}}function Ay(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(t){let n="";for(let i=0;i<t.length;i++)n.length>0&&(n=Oy(n)),n=Ny(t.get(i),n);return Oy(n)}function Ny(t,n){let i=n;const e=t.length;for(let n=0;n<e;n++){const e=t.charAt(n);switch(e){case"\0":i+="";break;case"":i+="";break;default:i+=e}}return i}function Oy(t){return t+""}function Py(t){const n=t.length;if(qm(n>=2),2===n)return qm(""===t.charAt(0)&&""===t.charAt(1)),pb.emptyPath();const i=n-2,e=[];let o="";for(let r=0;r<n;){const n=t.indexOf("",r);switch((n<0||n>i)&&Bm(),t.charAt(n+1)){case"":const i=t.substring(r,n);let s;0===o.length?s=i:(o+=i,s=o,o=""),e.push(s);break;case"":o+=t.substring(r,n),o+="\0";break;case"":o+=t.substring(r,n+1);break;default:Bm()}r=n+2}return new pb(e)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry=["userId","batchId"];
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(t,n){return[t,Dy(n)]}function Ly(t,n,i){return[t,Dy(n),i]}const $y={},jy=["prefixPath","collectionGroup","readTime","documentId"],zy=["prefixPath","collectionGroup","documentId"],Fy=["collectionGroup","readTime","prefixPath","documentId"],Vy=["canonicalId","targetId"],Uy=["targetId","path"],By=["path","targetId"],qy=["collectionId","parent"],Ky=["indexId","uid"],Wy=["uid","sequenceNumber"],Gy=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Hy=["indexId","uid","orderedDocumentKey"],Xy=["userId","collectionPath","documentId"],Yy=["userId","collectionPath","largestBatchId"],Jy=["userId","collectionGroup","largestBatchId"],Qy=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Zy=[...Qy,"documentOverlays"],tx=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],nx=[...tx,"indexConfiguration","indexState","indexEntries"],ix="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Bm(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new ox(((i,e)=>{this.nextCallback=n=>{this.wrapSuccess(t,n).next(i,e)},this.catchCallback=t=>{this.wrapFailure(n,t).next(i,e)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof ox?n:ox.resolve(n)}catch(t){return ox.reject(t)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):ox.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):ox.reject(n)}static resolve(t){return new ox((n=>{n(t)}))}static reject(t){return new ox(((n,i)=>{i(t)}))}static waitFor(t){return new ox(((n,i)=>{let e=0,o=0,r=!1;t.forEach((t=>{++e,t.next((()=>{++o,r&&o===e&&n()}),(t=>i(t)))})),r=!0,o===e&&n()}))}static or(t){let n=ox.resolve(!1);for(const i of t)n=n.next((t=>t?ox.resolve(t):i()));return n}static forEach(t,n){const i=[];return t.forEach(((t,e)=>{i.push(n.call(this,t,e))})),this.waitFor(i)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(t,n){this.action=t,this.transaction=n,this.aborted=!1,this.At=new Gm,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{n.error?this.At.reject(new ax(t,n.error)):this.At.resolve()},this.transaction.onerror=n=>{const i=fx(n.target.error);this.At.reject(new ax(t,i))}}static open(t,n,i,e){try{return new rx(n,t.transaction(e,i))}catch(t){throw new ax(n,t)}}get Rt(){return this.At.promise}abort(t){t&&this.At.reject(t),this.aborted||(zm("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const n=this.transaction.objectStore(t);return new cx(n)}}class sx{constructor(t,n,i){this.name=t,this.version=n,this.bt=i,12.2===sx.Vt(Mi())&&Fm("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return zm("SimpleDb","Removing database:",t),hx(window.indexedDB.deleteDatabase(t)).toPromise()}static vt(){if(!Fi())return!1;if(sx.St())return!0;const t=Mi(),n=sx.Vt(t),i=0<n&&n<10,e=sx.Dt(t),o=0<e&&e<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||o)}static St(){var t;return void 0!==f&&"YES"===(null===(t=f.env)||void 0===t?void 0:t.Ct)}static xt(t,n){return t.store(n)}static Vt(t){const n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static Dt(t){const n=t.match(/Android ([\d.]+)/i),i=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(i)}async Nt(t){return this.db||(zm("SimpleDb","Opening database:",this.name),this.db=await new Promise(((n,i)=>{const e=indexedDB.open(this.name,this.version);e.onsuccess=t=>{n(t.target.result)},e.onblocked=()=>{i(new ax(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},e.onerror=n=>{const e=n.target.error;i("VersionError"===e.name?new Wm(Km.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===e.name?new Wm(Km.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+e):new ax(t,e))},e.onupgradeneeded=t=>{zm("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',t.oldVersion),this.bt.kt(t.target.result,e.transaction,t.oldVersion,this.version).next((()=>{zm("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.Mt&&(this.db.onversionchange=t=>this.Mt(t)),this.db}Ot(t){this.Mt=t,this.db&&(this.db.onversionchange=n=>t(n))}async runTransaction(t,n,i,e){const o="readonly"===n;let r=0;for(;;){++r;try{this.db=await this.Nt(t);const n=rx.open(this.db,t,o?"readonly":"readwrite",i),r=e(n).next((t=>(n.Pt(),t))).catch((t=>(n.abort(t),ox.reject(t)))).toPromise();return r.catch((()=>{})),await n.Rt,r}catch(t){const n="FirebaseError"!==t.name&&r<3;if(zm("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class lx{constructor(t){this.Ft=t,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(t){this.Ft=t}done(){this.$t=!0}Ut(t){this.Bt=t}delete(){return hx(this.Ft.delete())}}class ax extends Wm{constructor(t,n){super(Km.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ux(t){return"IndexedDbTransactionError"===t.name}class cx{constructor(t){this.store=t}put(t,n){let i;return void 0!==n?(zm("SimpleDb","PUT",this.store.name,t,n),i=this.store.put(n,t)):(zm("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),hx(i)}add(t){return zm("SimpleDb","ADD",this.store.name,t,t),hx(this.store.add(t))}get(t){return hx(this.store.get(t)).next((n=>(void 0===n&&(n=null),zm("SimpleDb","GET",this.store.name,t,n),n)))}delete(t){return zm("SimpleDb","DELETE",this.store.name,t),hx(this.store.delete(t))}count(){return zm("SimpleDb","COUNT",this.store.name),hx(this.store.count())}qt(t,n){const i=this.options(t,n);if(i.index||"function"!=typeof this.store.getAll){const t=this.cursor(i),n=[];return this.Kt(t,((t,i)=>{n.push(i)})).next((()=>n))}{const t=this.store.getAll(i.range);return new ox(((n,i)=>{t.onerror=t=>{i(t.target.error)},t.onsuccess=t=>{n(t.target.result)}}))}}Gt(t,n){const i=this.store.getAll(t,null===n?void 0:n);return new ox(((t,n)=>{i.onerror=t=>{n(t.target.error)},i.onsuccess=n=>{t(n.target.result)}}))}Qt(t,n){zm("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,n);i.jt=!1;const e=this.cursor(i);return this.Kt(e,((t,n,i)=>i.delete()))}Wt(t,n){let i;n?i=t:(i={},n=t);const e=this.cursor(i);return this.Kt(e,n)}zt(t){const n=this.cursor({});return new ox(((i,e)=>{n.onerror=t=>{const n=fx(t.target.error);e(n)},n.onsuccess=n=>{const e=n.target.result;e?t(e.primaryKey,e.value).next((t=>{t?e.continue():i()})):i()}}))}Kt(t,n){const i=[];return new ox(((e,o)=>{t.onerror=t=>{o(t.target.error)},t.onsuccess=t=>{const o=t.target.result;if(!o)return void e();const r=new lx(o),s=n(o.primaryKey,o.value,r);if(s instanceof ox){const t=s.catch((t=>(r.done(),ox.reject(t))));i.push(t)}r.isDone?e():null===r.Lt?o.continue():o.continue(r.Lt)}})).next((()=>ox.waitFor(i)))}options(t,n){let i;return void 0!==t&&("string"==typeof t?i=t:n=t),{index:i,range:n}}cursor(t){let n="next";if(t.reverse&&(n="prev"),t.index){const i=this.store.index(t.index);return t.jt?i.openKeyCursor(t.range,n):i.openCursor(t.range,n)}return this.store.openCursor(t.range,n)}}function hx(t){return new ox(((n,i)=>{t.onsuccess=t=>{n(t.target.result)},t.onerror=t=>{const n=fx(t.target.error);i(n)}}))}let dx=!1;function fx(t){const n=sx.Vt(Mi());if(n>=12.2&&n<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const t=new Wm("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return dx||(dx=!0,setTimeout((()=>{throw t}),0)),t}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px extends ex{constructor(t,n){super(),this.Ht=t,this.currentSequenceNumber=n}}function gx(t,n){return sx.xt(t.Ht,n)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(t,n,i,e){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=e}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let n=0;n<this.mutations.length;n++){const e=this.mutations[n];e.key.isEqual(t.key)&&dw(e,t,i[n])}}applyToLocalView(t){for(const n of this.baseMutations)n.key.isEqual(t.key)&&fw(n,t,this.localWriteTime);for(const n of this.mutations)n.key.isEqual(t.key)&&fw(n,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach((n=>{const i=t.get(n.key),e=i;this.applyToLocalView(e),i.isValidDocument()||e.convertToNoDocument(ub.min())}))}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),Uw())}isEqual(t){return this.batchId===t.batchId&&sb(this.mutations,t.mutations,((t,n)=>gw(t,n)))&&sb(this.baseMutations,t.baseMutations,((t,n)=>gw(t,n)))}}class bx{constructor(t,n,i,e){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=e}static from(t,n,i){qm(t.mutations.length===i.length);let e=Fw;const o=t.mutations;for(let t=0;t<o.length;t++)e=e.insert(o[t].key,i[t].version);return new bx(t,n,i,e)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(t,n,i,e,o=ub.min(),r=ub.min(),s=vb.EMPTY_BYTE_STRING){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=e,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=r,this.resumeToken=s}withSequenceNumber(t){return new wx(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,n){return new wx(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new wx(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(t){this.Jt=t}}function xx(t,n){const i=n.key,e={prefixPath:i.getCollectionPath().popLast().toArray(),collectionGroup:i.collectionGroup,documentId:i.path.lastSegment(),readTime:kx(n.readTime),hasCommittedMutations:n.hasCommittedMutations};if(n.isFoundDocument())e.document=function(t,n){return{name:uy(t,n.key),fields:n.data.value.mapValue.fields,updateTime:ey(t,n.version.toTimestamp())}}(t.Jt,n);else if(n.isNoDocument())e.noDocument={path:i.path.toArray(),readTime:Ix(n.version)};else{if(!n.isUnknownDocument())return Bm();e.unknownDocument={path:i.path.toArray(),version:Ix(n.version)}}return e}function kx(t){const n=t.toTimestamp();return[n.seconds,n.nanoseconds]}function Ix(t){const n=t.toTimestamp();return{seconds:n.seconds,nanoseconds:n.nanoseconds}}function _x(t){const n=new ab(t.seconds,t.nanoseconds);return ub.fromTimestamp(n)}function Ex(t,n){const i=(n.baseMutations||[]).map((n=>by(t.Jt,n)));for(let t=0;t<n.mutations.length-1;++t){const i=n.mutations[t];t+1<n.mutations.length&&void 0!==n.mutations[t+1].transform&&(i.updateTransforms=n.mutations[t+1].transform.fieldTransforms,n.mutations.splice(t+1,1),++t)}const e=n.mutations.map((n=>by(t.Jt,n))),o=ab.fromMillis(n.localWriteTimeMs);return new mx(n.batchId,o,i,e)}function Tx(t){const n=_x(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?_x(t.lastLimboFreeSnapshotVersion):ub.min();let e;var o;return void 0!==t.query.documents?(qm(1===(o=t.query).documents.length),e=zv(Ov(dy(o.documents[0])))):e=function(t){return zv(yy(t))}(t.query),new wx(e,t.targetId,0,t.lastListenSequenceNumber,n,i,vb.fromBase64String(t.resumeToken))}function Sx(t,n){const i=Ix(n.snapshotVersion),e=Ix(n.lastLimboFreeSnapshotVersion);let o;o=fv(n.target)?vy(t.Jt,n.target):wy(t.Jt,n.target);const r=n.resumeToken.toBase64();return{targetId:n.targetId,canonicalId:hv(n.target),readTime:i,resumeToken:r,lastListenSequenceNumber:n.sequenceNumber,lastLimboFreeSnapshotVersion:e,query:o}}function Cx(t){const n=yy({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Fv(n,n.limit,"L"):n}function Ax(t,n){return new vx(n.largestBatchId,by(t.Jt,n.overlayMutation))}function Dx(t,n){const i=n.path.lastSegment();return[t,Dy(n.path.popLast()),i]}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{getBundleMetadata(t,n){return Ox(t).get(n).next((t=>{if(t)return{id:(n=t).bundleId,createTime:_x(n.createTime),version:n.version};var n}))}saveBundleMetadata(t,n){return Ox(t).put({bundleId:(i=n).id,createTime:Ix(sy(i.createTime)),version:i.version});var i}getNamedQuery(t,n){return Px(t).get(n).next((t=>{if(t)return{name:(n=t).name,query:Cx(n.bundledQuery),readTime:_x(n.readTime)};var n}))}saveNamedQuery(t,n){return Px(t).put(function(t){return{name:t.name,readTime:Ix(sy(t.readTime)),bundledQuery:t.bundledQuery}}(n))}}function Ox(t){return gx(t,"bundles")}function Px(t){return gx(t,"namedQueries")}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(t,n){this.M=t,this.userId=n}static Yt(t,n){return new Rx(t,n.uid||"")}getOverlay(t,n){return Mx(t).get(Dx(this.userId,n)).next((t=>t?Ax(this.M,t):null))}saveOverlays(t,n,i){const e=[];return i.forEach(((i,o)=>{const r=new vx(n,o);e.push(this.Xt(t,r))})),ox.waitFor(e)}removeOverlaysForBatchId(t,n,i){const e=new Set;n.forEach((t=>e.add(Dy(t.getCollectionPath()))));const o=[];return e.forEach((n=>{const e=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,i+1],!1,!0);o.push(Mx(t).Qt("collectionPathOverlayIndex",e))})),ox.waitFor(o)}getOverlaysForCollection(t,n,i){const e=zw(),o=Dy(n),r=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Mx(t).qt("collectionPathOverlayIndex",r).next((t=>{for(const n of t){const t=Ax(this.M,n);e.set(t.getKey(),t)}return e}))}getOverlaysForCollectionGroup(t,n,i,e){const o=zw();let r;const s=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Mx(t).Wt({index:"collectionGroupOverlayIndex",range:s},((t,n,i)=>{const s=Ax(this.M,n);o.size()<e||s.largestBatchId===r?(o.set(s.getKey(),s),r=s.largestBatchId):i.done()})).next((()=>o))}Xt(t,n){return Mx(t).put(function(t,n,i){const[e,o,r]=Dx(n,i.mutation.key);return{userId:n,collectionPath:o,documentId:r,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:my(t.Jt,i.mutation)}}(this.M,this.userId,n))}}function Mx(t){return gx(t,"documentOverlays")}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(){}Zt(t,n){this.te(t,n),n.ee()}te(t,n){if("nullValue"in t)this.ne(n,5);else if("booleanValue"in t)this.ne(n,10),n.se(t.booleanValue?1:0);else if("integerValue"in t)this.ne(n,15),n.se(xb(t.integerValue));else if("doubleValue"in t){const i=xb(t.doubleValue);isNaN(i)?this.ne(n,13):(this.ne(n,15),Ab(i)?n.se(0):n.se(i))}else if("timestampValue"in t){const i=t.timestampValue;this.ne(n,20),"string"==typeof i?n.ie(i):(n.ie(`${i.seconds||""}`),n.se(i.nanos||0))}else if("stringValue"in t)this.re(t.stringValue,n),this.oe(n);else if("bytesValue"in t)this.ne(n,30),n.ue(kb(t.bytesValue)),this.oe(n);else if("referenceValue"in t)this.ae(t.referenceValue,n);else if("geoPointValue"in t){const i=t.geoPointValue;this.ne(n,45),n.se(i.latitude||0),n.se(i.longitude||0)}else"mapValue"in t?Gb(t)?this.ne(n,Number.MAX_SAFE_INTEGER):(this.ce(t.mapValue,n),this.oe(n)):"arrayValue"in t?(this.he(t.arrayValue,n),this.oe(n)):Bm()}re(t,n){this.ne(n,25),this.le(t,n)}le(t,n){n.ie(t)}ce(t,n){const i=t.fields||{};this.ne(n,55);for(const t of Object.keys(i))this.re(t,n),this.te(i[t],n)}he(t,n){const i=t.values||[];this.ne(n,50);for(const t of i)this.te(t,n)}ae(t,n){this.ne(n,37),Db.fromName(t).path.forEach((t=>{this.ne(n,60),this.le(t,n)}))}ne(t,n){t.se(n)}oe(t){t.se(2)}}function $x(t){if(0===t)return 8;let n=0;return t>>4==0&&(n+=4,t<<=4),t>>6==0&&(n+=2,t<<=2),t>>7==0&&(n+=1),n}function jx(t){const n=64-function(t){let n=0;for(let i=0;i<8;++i){const e=$x(255&t[i]);if(n+=e,8!==e)break}return n}(t);return Math.ceil(n/8)}Lx.fe=new Lx;class zx{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(t){const n=t[Symbol.iterator]();let i=n.next();for(;!i.done;)this._e(i.value),i=n.next();this.we()}me(t){const n=t[Symbol.iterator]();let i=n.next();for(;!i.done;)this.ge(i.value),i=n.next();this.ye()}pe(t){for(const n of t){const t=n.charCodeAt(0);if(t<128)this._e(t);else if(t<2048)this._e(960|t>>>6),this._e(128|63&t);else if(n<"\ud800"||"\udbff"<n)this._e(480|t>>>12),this._e(128|63&t>>>6),this._e(128|63&t);else{const t=n.codePointAt(0);this._e(240|t>>>18),this._e(128|63&t>>>12),this._e(128|63&t>>>6),this._e(128|63&t)}}this.we()}Ie(t){for(const n of t){const t=n.charCodeAt(0);if(t<128)this.ge(t);else if(t<2048)this.ge(960|t>>>6),this.ge(128|63&t);else if(n<"\ud800"||"\udbff"<n)this.ge(480|t>>>12),this.ge(128|63&t>>>6),this.ge(128|63&t);else{const t=n.codePointAt(0);this.ge(240|t>>>18),this.ge(128|63&t>>>12),this.ge(128|63&t>>>6),this.ge(128|63&t)}}this.ye()}Te(t){const n=this.Ee(t),i=jx(n);this.Ae(1+i),this.buffer[this.position++]=255&i;for(let t=n.length-i;t<n.length;++t)this.buffer[this.position++]=255&n[t]}Re(t){const n=this.Ee(t),i=jx(n);this.Ae(1+i),this.buffer[this.position++]=~(255&i);for(let t=n.length-i;t<n.length;++t)this.buffer[this.position++]=~(255&n[t])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(t){this.Ae(t.length),this.buffer.set(t,this.position),this.position+=t.length}Se(){return this.buffer.slice(0,this.position)}Ee(t){const n=function(t){const n=new DataView(new ArrayBuffer(8));return n.setFloat64(0,t,!1),new Uint8Array(n.buffer)}(t),i=0!=(128&n[0]);n[0]^=i?255:128;for(let t=1;t<n.length;++t)n[t]^=i?255:0;return n}_e(t){const n=255&t;0===n?(this.be(0),this.be(255)):255===n?(this.be(255),this.be(0)):this.be(n)}ge(t){const n=255&t;0===n?(this.ve(0),this.ve(255)):255===n?(this.ve(255),this.ve(0)):this.ve(t)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(t){this.Ae(1),this.buffer[this.position++]=t}ve(t){this.Ae(1),this.buffer[this.position++]=~t}Ae(t){const n=t+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);const e=new Uint8Array(i);e.set(this.buffer),this.buffer=e}}class Fx{constructor(t){this.De=t}ue(t){this.De.de(t)}ie(t){this.De.pe(t)}se(t){this.De.Te(t)}ee(){this.De.Pe()}}class Vx{constructor(t){this.De=t}ue(t){this.De.me(t)}ie(t){this.De.Ie(t)}se(t){this.De.Re(t)}ee(){this.De.Ve()}}class Ux{constructor(){this.De=new zx,this.Ce=new Fx(this.De),this.xe=new Vx(this.De)}seed(t){this.De.seed(t)}Ne(t){return 0===t?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(t,n,i,e){this.indexId=t,this.documentKey=n,this.arrayValue=i,this.directionalValue=e}ke(){const t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new Bx(this.indexId,this.documentKey,this.arrayValue,i)}}function qx(t,n){let i=t.indexId-n.indexId;return 0!==i?i:(i=Kx(t.arrayValue,n.arrayValue),0!==i?i:(i=Kx(t.directionalValue,n.directionalValue),0!==i?i:Db.comparator(t.documentKey,n.documentKey)))}function Kx(t,n){for(let i=0;i<t.length&&i<n.length;++i){const e=t[i]-n[i];if(0!==e)return e}return t.length-n.length}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];for(const n of t.filters){const t=n;t.S()?this.Fe=t:this.Oe.push(t)}}$e(t){const n=iv(t);if(void 0!==n&&!this.Be(n))return!1;const i=ev(t);let e=0,o=0;for(;e<i.length&&this.Be(i[e]);++e);if(e===i.length)return!0;if(void 0!==this.Fe){const t=i[e];if(!this.Le(this.Fe,t)||!this.Ue(this.Me[o++],t))return!1;++e}for(;e<i.length;++e){const t=i[e];if(o>=this.Me.length||!this.Ue(this.Me[o++],t))return!1}return!0}Be(t){for(const n of this.Oe)if(this.Le(n,t))return!0;return!1}Le(t,n){return!(void 0===t||!t.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===t.op||"array-contains-any"===t.op)}Ue(t,n){return!!t.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===t.dir||1===n.kind&&"desc"===t.dir)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(){this.qe=new Hx}addToCollectionParentIndex(t,n){return this.qe.add(n),ox.resolve()}getCollectionParents(t,n){return ox.resolve(this.qe.getEntries(n))}addFieldIndex(t,n){return ox.resolve()}deleteFieldIndex(t,n){return ox.resolve()}getDocumentsMatchingTarget(t,n){return ox.resolve(null)}getFieldIndex(t,n){return ox.resolve(null)}getFieldIndexes(t,n){return ox.resolve([])}getNextCollectionGroupToUpdate(t){return ox.resolve(null)}updateCollectionGroup(t,n,i){return ox.resolve()}updateIndexEntries(t,n){return ox.resolve()}}class Hx{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),e=this.index[n]||new Ow(pb.comparator),o=!e.has(i);return this.index[n]=e.add(i),o}has(t){const n=t.lastSegment(),i=t.popLast(),e=this.index[n];return e&&e.has(i)}getEntries(t){return(this.index[t]||new Ow(pb.comparator)).toArray()}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx=new Uint8Array(0);class Yx{constructor(t,n){this.user=t,this.databaseId=n,this.Ke=new Hx,this.Ge=new Cw((t=>hv(t)),((t,n)=>dv(t,n))),this.uid=t.uid||""}addToCollectionParentIndex(t,n){if(!this.Ke.has(n)){const i=n.lastSegment(),e=n.popLast();t.addOnCommittedListener((()=>{this.Ke.add(n)}));const o={collectionId:i,parent:Dy(e)};return Jx(t).put(o)}return ox.resolve()}getCollectionParents(t,n){const i=[],e=IDBKeyRange.bound([n,""],[lb(n),""],!1,!0);return Jx(t).qt(e).next((t=>{for(const e of t){if(e.collectionId!==n)break;i.push(Py(e.parent))}return i}))}addFieldIndex(t,n){const i=Zx(t),e=function(t){return{indexId:t.indexId,collectionGroup:t.collectionGroup,fields:t.fields.map((t=>[t.fieldPath.canonicalString(),t.kind]))}}(n);return delete e.indexId,i.add(e).next()}deleteFieldIndex(t,n){const i=Zx(t),e=tk(t),o=Qx(t);return i.delete(n.indexId).next((()=>e.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}getDocumentsMatchingTarget(t,n){const i=Qx(t);let e=!0;const o=new Map;return ox.forEach(this.Qe(n),(n=>this.getFieldIndex(t,n).next((t=>{e&&(e=!!t),o.set(n,t)})))).next((()=>{if(e){let t=Uw();const e=[];return ox.forEach(o,((o,r)=>{var s;zm("IndexedDbIndexManager",`Using index ${s=o,`id=${s.indexId}|cg=${s.collectionGroup}|f=${s.fields.map((t=>`${t.fieldPath}:${t.kind}`)).join(",")}`} to execute ${hv(n)}`);const l=function(t,n){const i=iv(n);if(void 0===i)return null;for(const n of pv(t,i.fieldPath))switch(n.op){case"array-contains-any":return n.value.arrayValue.values||[];case"array-contains":return[n.value]}return null}(r,o),a=function(t,n){const i=new Map;for(const e of ev(n))for(const n of pv(t,e.fieldPath))switch(n.op){case"==":case"in":i.set(e.fieldPath.canonicalString(),n.value);break;case"not-in":case"!=":return i.set(e.fieldPath.canonicalString(),n.value),Array.from(i.values())}return null}(r,o),u=function(t,n){const i=[];let e=!0;for(const o of ev(n)){const n=0===o.kind?gv(t,o.fieldPath,t.startAt):mv(t,o.fieldPath,t.startAt);if(!n.value)return null;i.push(n.value),e&&(e=n.inclusive)}return new Tv(i,e)}(r,o),c=function(t,n){const i=[];let e=!0;for(const o of ev(n)){const n=0===o.kind?mv(t,o.fieldPath,t.endAt):gv(t,o.fieldPath,t.endAt);if(!n.value)return null;i.push(n.value),e&&(e=n.inclusive)}return new Tv(i,e)}(r,o),h=this.je(o,r,u),d=this.je(o,r,c),f=this.We(o,r,a),p=this.ze(o.indexId,l,h,!!u&&u.inclusive,d,!!c&&c.inclusive,f);return ox.forEach(p,(o=>i.Gt(o,n.limit).next((n=>{n.forEach((n=>{const i=Db.fromSegments(n.documentKey);t.has(i)||(t=t.add(i),e.push(i))}))}))))})).next((()=>e))}return ox.resolve(null)}))}Qe(t){let n=this.Ge.get(t);return n||(n=[t],this.Ge.set(t,n),n)}ze(t,n,i,e,o,r,s){const l=(null!=n?n.length:1)*Math.max(null!=i?i.length:1,null!=o?o.length:1),a=l/(null!=n?n.length:1),u=[];for(let c=0;c<l;++c){const l=n?this.He(n[c/a]):Xx,h=i?this.Je(t,l,i[c%a],e):this.Ye(t),d=o?this.Xe(t,l,o[c%a],r):this.Ye(t+1);u.push(...this.createRange(h,d,s.map((n=>this.Je(t,l,n,!0)))))}return u}Je(t,n,i,e){const o=new Bx(t,Db.empty(),n,i);return e?o:o.ke()}Xe(t,n,i,e){const o=new Bx(t,Db.empty(),n,i);return e?o.ke():o}Ye(t){return new Bx(t,Db.empty(),Xx,Xx)}getFieldIndex(t,n){const i=new Wx(n),e=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(t,e).next((t=>{const n=t.filter((t=>i.$e(t)));return n.sort(((t,n)=>n.fields.length-t.fields.length)),n.length>0?n[0]:null}))}Ze(t,n){const i=new Ux;for(const e of ev(t)){const t=n.data.field(e.fieldPath);if(null==t)return null;const o=i.Ne(e.kind);Lx.fe.Zt(t,o)}return i.Se()}He(t){const n=new Ux;return Lx.fe.Zt(t,n.Ne(0)),n.Se()}tn(t,n){const i=new Ux;return Lx.fe.Zt(Fb(this.databaseId,n),i.Ne(function(t){const n=ev(t);return 0===n.length?0:n[n.length-1].kind}(t))),i.Se()}We(t,n,i){if(null===i)return[];let e=[];e.push(new Ux);let o=0;for(const r of ev(t)){const t=i[o++];for(const i of e)if(this.en(n,r.fieldPath)&&Ub(t))e=this.nn(e,r,t);else{const n=i.Ne(r.kind);Lx.fe.Zt(t,n)}}return this.sn(e)}je(t,n,i){return null==i?null:this.We(t,n,i.position)}sn(t){const n=[];for(let i=0;i<t.length;++i)n[i]=t[i].Se();return n}nn(t,n,i){const e=[...t],o=[];for(const t of i.arrayValue.values||[])for(const i of e){const e=new Ux;e.seed(i.Se()),Lx.fe.Zt(t,e.Ne(n.kind)),o.push(e)}return o}en(t,n){return!!t.filters.find((t=>t instanceof bv&&t.field.isEqual(n)&&("in"===t.op||"not-in"===t.op)))}getFieldIndexes(t,n){const i=Zx(t),e=tk(t);return(n?i.qt("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.qt()).next((t=>{const n=[];return ox.forEach(t,(t=>e.get([t.indexId,this.uid]).next((i=>{n.push(function(t,n){const i=n?new rv(n.sequenceNumber,new lv(_x(n.readTime),new Db(Py(n.documentKey)),n.largestBatchId)):rv.empty(),e=t.fields.map((([t,n])=>new ov(mb.fromServerFormat(t),n)));return new nv(t.indexId,t.collectionGroup,e,i)}(t,i))})))).next((()=>n))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((t=>0===t.length?null:(t.sort(((t,n)=>{const i=t.indexState.sequenceNumber-n.indexState.sequenceNumber;return 0!==i?i:rb(t.collectionGroup,n.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(t,n,i){const e=Zx(t),o=tk(t);return this.rn(t).next((t=>e.qt("collectionGroupIndex",IDBKeyRange.bound(n,n)).next((n=>ox.forEach(n,(n=>o.put(function(t,n,i,e){return{indexId:t,uid:n.uid||"",sequenceNumber:i,readTime:Ix(e.readTime),documentKey:Dy(e.documentKey.path),largestBatchId:e.largestBatchId}}(n.indexId,this.user,t,i))))))))}updateIndexEntries(t,n){const i=new Map;return ox.forEach(n,((n,e)=>{const o=i.get(n.collectionGroup);return(o?ox.resolve(o):this.getFieldIndexes(t,n.collectionGroup)).next((o=>(i.set(n.collectionGroup,o),ox.forEach(o,(i=>this.on(t,n,i).next((n=>{const o=this.un(e,i);return n.isEqual(o)?ox.resolve():this.an(t,e,i,n,o)})))))))}))}cn(t,n,i,e){return Qx(t).put({indexId:e.indexId,uid:this.uid,arrayValue:e.arrayValue,directionalValue:e.directionalValue,orderedDocumentKey:this.tn(i,n.key),documentKey:n.key.path.toArray()})}hn(t,n,i,e){return Qx(t).delete([e.indexId,this.uid,e.arrayValue,e.directionalValue,this.tn(i,n.key),n.key.path.toArray()])}on(t,n,i){const e=Qx(t);let o=new Ow(qx);return e.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.tn(i,n)])},((t,e)=>{o=o.add(new Bx(i.indexId,n,e.arrayValue,e.directionalValue))})).next((()=>o))}un(t,n){let i=new Ow(qx);const e=this.Ze(n,t);if(null==e)return i;const o=iv(n);if(null!=o){const r=t.data.field(o.fieldPath);if(Ub(r))for(const o of r.arrayValue.values||[])i=i.add(new Bx(n.indexId,t.key,this.He(o),e))}else i=i.add(new Bx(n.indexId,t.key,Xx,e));return i}an(t,n,i,e,o){zm("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const r=[];return function(t,n,i,e,o){const r=t.getIterator(),s=n.getIterator();let l=Rw(r),a=Rw(s);for(;l||a;){let t=!1,n=!1;if(l&&a){const e=i(l,a);e<0?n=!0:e>0&&(t=!0)}else null!=l?n=!0:t=!0;t?(e(a),a=Rw(s)):n?(o(l),l=Rw(r)):(l=Rw(r),a=Rw(s))}}(e,o,qx,(e=>{r.push(this.cn(t,n,i,e))}),(e=>{r.push(this.hn(t,n,i,e))})),ox.waitFor(r)}rn(t){let n=1;return tk(t).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((t,i,e)=>{e.done(),n=i.sequenceNumber+1})).next((()=>n))}createRange(t,n,i){i=i.sort(((t,n)=>qx(t,n))).filter(((t,n,i)=>!n||0!==qx(t,i[n-1])));const e=[];e.push(t);for(const o of i){const i=qx(o,t),r=qx(o,n);if(0===i)e[0]=t.ke();else if(i>0&&r<0)e.push(o),e.push(o.ke());else if(r>0)break}e.push(n);const o=[];for(let t=0;t<e.length;t+=2)o.push(IDBKeyRange.bound([e[t].indexId,this.uid,e[t].arrayValue,e[t].directionalValue,Xx,[]],[e[t+1].indexId,this.uid,e[t+1].arrayValue,e[t+1].directionalValue,Xx,[]]));return o}}function Jx(t){return gx(t,"collectionParents")}function Qx(t){return gx(t,"indexEntries")}function Zx(t){return gx(t,"indexConfiguration")}function tk(t){return gx(t,"indexState")}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ik{constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new ik(t,ik.DEFAULT_COLLECTION_PERCENTILE,ik.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ek(t,n,i){const e=t.store("mutations"),o=t.store("documentMutations"),r=[],s=IDBKeyRange.only(i.batchId);let l=0;const a=e.Wt({range:s},((t,n,i)=>(l++,i.delete())));r.push(a.next((()=>{qm(1===l)})));const u=[];for(const t of i.mutations){const e=Ly(n,t.key.path,i.batchId);r.push(o.delete(e)),u.push(t.key)}return ox.waitFor(r).next((()=>u))}function ok(t){if(!t)return 0;let n;if(t.document)n=t.document;else if(t.unknownDocument)n=t.unknownDocument;else{if(!t.noDocument)throw Bm();n=t.noDocument}return JSON.stringify(n).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ik.DEFAULT_COLLECTION_PERCENTILE=10,ik.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ik.DEFAULT=new ik(41943040,ik.DEFAULT_COLLECTION_PERCENTILE,ik.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ik.DISABLED=new ik(-1,0,0);class rk{constructor(t,n,i,e){this.userId=t,this.M=n,this.indexManager=i,this.referenceDelegate=e,this.ln={}}static Yt(t,n,i,e){qm(""!==t.uid);const o=t.isAuthenticated()?t.uid:"";return new rk(o,n,i,e)}checkEmpty(t){let n=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return lk(t).Wt({index:"userMutationsIndex",range:i},((t,i,e)=>{n=!1,e.done()})).next((()=>n))}addMutationBatch(t,n,i,e){const o=ak(t),r=lk(t);return r.add({}).next((s=>{qm("number"==typeof s);const l=new mx(s,n,i,e),a=function(t,n,i){const e=i.baseMutations.map((n=>my(t.Jt,n))),o=i.mutations.map((n=>my(t.Jt,n)));return{userId:n,batchId:i.batchId,localWriteTimeMs:i.localWriteTime.toMillis(),baseMutations:e,mutations:o}}(this.M,this.userId,l),u=[];let c=new Ow(((t,n)=>rb(t.canonicalString(),n.canonicalString())));for(const t of e){const n=Ly(this.userId,t.key.path,s);c=c.add(t.key.path.popLast()),u.push(r.put(a)),u.push(o.put(n,$y))}return c.forEach((n=>{u.push(this.indexManager.addToCollectionParentIndex(t,n))})),t.addOnCommittedListener((()=>{this.ln[s]=l.keys()})),ox.waitFor(u).next((()=>l))}))}lookupMutationBatch(t,n){return lk(t).get(n).next((t=>t?(qm(t.userId===this.userId),Ex(this.M,t)):null))}fn(t,n){return this.ln[n]?ox.resolve(this.ln[n]):this.lookupMutationBatch(t,n).next((t=>{if(t){const i=t.keys();return this.ln[n]=i,i}return null}))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,e=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return lk(t).Wt({index:"userMutationsIndex",range:e},((t,n,e)=>{n.userId===this.userId&&(qm(n.batchId>=i),o=Ex(this.M,n)),e.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(t){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return lk(t).Wt({index:"userMutationsIndex",range:n,reverse:!0},((t,n,e)=>{i=n.batchId,e.done()})).next((()=>i))}getAllMutationBatches(t){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return lk(t).qt("userMutationsIndex",n).next((t=>t.map((t=>Ex(this.M,t)))))}getAllMutationBatchesAffectingDocumentKey(t,n){const i=My(this.userId,n.path),e=IDBKeyRange.lowerBound(i),o=[];return ak(t).Wt({range:e},((i,e,r)=>{const[s,l,a]=i,u=Py(l);if(s===this.userId&&n.path.isEqual(u))return lk(t).get(a).next((t=>{if(!t)throw Bm();qm(t.userId===this.userId),o.push(Ex(this.M,t))}));r.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new Ow(rb);const e=[];return n.forEach((n=>{const o=My(this.userId,n.path),r=IDBKeyRange.lowerBound(o),s=ak(t).Wt({range:r},((t,e,o)=>{const[r,s,l]=t,a=Py(s);r===this.userId&&n.path.isEqual(a)?i=i.add(l):o.done()}));e.push(s)})),ox.waitFor(e).next((()=>this.dn(t,i)))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,e=i.length+1,o=My(this.userId,i),r=IDBKeyRange.lowerBound(o);let s=new Ow(rb);return ak(t).Wt({range:r},((t,n,o)=>{const[r,l,a]=t,u=Py(l);r===this.userId&&i.isPrefixOf(u)?u.length===e&&(s=s.add(a)):o.done()})).next((()=>this.dn(t,s)))}dn(t,n){const i=[],e=[];return n.forEach((n=>{e.push(lk(t).get(n).next((t=>{if(null===t)throw Bm();qm(t.userId===this.userId),i.push(Ex(this.M,t))})))})),ox.waitFor(e).next((()=>i))}removeMutationBatch(t,n){return ek(t.Ht,this.userId,n).next((i=>(t.addOnCommittedListener((()=>{this._n(n.batchId)})),ox.forEach(i,(n=>this.referenceDelegate.markPotentiallyOrphaned(t,n))))))}_n(t){delete this.ln[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((n=>{if(!n)return ox.resolve();const i=IDBKeyRange.lowerBound([this.userId]),e=[];return ak(t).Wt({range:i},((t,n,i)=>{if(t[0]===this.userId){const n=Py(t[1]);e.push(n)}else i.done()})).next((()=>{qm(0===e.length)}))}))}containsKey(t,n){return sk(t,this.userId,n)}wn(t){return uk(t).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function sk(t,n,i){const e=My(n,i.path),o=e[1],r=IDBKeyRange.lowerBound(e);let s=!1;return ak(t).Wt({range:r,jt:!0},((t,i,e)=>{const[r,l,a]=t;r===n&&l===o&&(s=!0),e.done()})).next((()=>s))}function lk(t){return gx(t,"mutations")}function ak(t){return gx(t,"documentMutations")}function uk(t){return gx(t,"mutationQueues")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(t){this.mn=t}next(){return this.mn+=2,this.mn}static gn(){return new ck(0)}static yn(){return new ck(-1)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(t,n){this.referenceDelegate=t,this.M=n}allocateTargetId(t){return this.pn(t).next((n=>{const i=new ck(n.highestTargetId);return n.highestTargetId=i.next(),this.In(t,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.pn(t).next((t=>ub.fromTimestamp(new ab(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.pn(t).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(t,n,i){return this.pn(t).next((e=>(e.highestListenSequenceNumber=n,i&&(e.lastRemoteSnapshotVersion=i.toTimestamp()),n>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=n),this.In(t,e))))}addTargetData(t,n){return this.Tn(t,n).next((()=>this.pn(t).next((i=>(i.targetCount+=1,this.En(n,i),this.In(t,i))))))}updateTargetData(t,n){return this.Tn(t,n)}removeTargetData(t,n){return this.removeMatchingKeysForTargetId(t,n.targetId).next((()=>dk(t).delete(n.targetId))).next((()=>this.pn(t))).next((n=>(qm(n.targetCount>0),n.targetCount-=1,this.In(t,n))))}removeTargets(t,n,i){let e=0;const o=[];return dk(t).Wt(((r,s)=>{const l=Tx(s);l.sequenceNumber<=n&&null===i.get(l.targetId)&&(e++,o.push(this.removeTargetData(t,l)))})).next((()=>ox.waitFor(o))).next((()=>e))}forEachTarget(t,n){return dk(t).Wt(((t,i)=>{const e=Tx(i);n(e)}))}pn(t){return fk(t).get("targetGlobalKey").next((t=>(qm(null!==t),t)))}In(t,n){return fk(t).put("targetGlobalKey",n)}Tn(t,n){return dk(t).put(Sx(this.M,n))}En(t,n){let i=!1;return t.targetId>n.highestTargetId&&(n.highestTargetId=t.targetId,i=!0),t.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.pn(t).next((t=>t.targetCount))}getTargetData(t,n){const i=hv(n),e=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return dk(t).Wt({range:e,index:"queryTargetsIndex"},((t,i,e)=>{const r=Tx(i);dv(n,r.target)&&(o=r,e.done())})).next((()=>o))}addMatchingKeys(t,n,i){const e=[],o=pk(t);return n.forEach((n=>{const r=Dy(n.path);e.push(o.put({targetId:i,path:r})),e.push(this.referenceDelegate.addReference(t,i,n))})),ox.waitFor(e)}removeMatchingKeys(t,n,i){const e=pk(t);return ox.forEach(n,(n=>{const o=Dy(n.path);return ox.waitFor([e.delete([i,o]),this.referenceDelegate.removeReference(t,i,n)])}))}removeMatchingKeysForTargetId(t,n){const i=pk(t),e=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(e)}getMatchingKeysForTargetId(t,n){const i=IDBKeyRange.bound([n],[n+1],!1,!0),e=pk(t);let o=Uw();return e.Wt({range:i,jt:!0},(t=>{const n=Py(t[1]),i=new Db(n);o=o.add(i)})).next((()=>o))}containsKey(t,n){const i=Dy(n.path),e=IDBKeyRange.bound([i],[lb(i)],!1,!0);let o=0;return pk(t).Wt({index:"documentTargetsIndex",jt:!0,range:e},(([t,n],i,e)=>{0!==t&&(o++,e.done())})).next((()=>o>0))}Et(t,n){return dk(t).get(n).next((t=>t?Tx(t):null))}}function dk(t){return gx(t,"targets")}function fk(t){return gx(t,"targetGlobal")}function pk(t){return gx(t,"targetDocuments")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gk(t){if(t.code!==Km.FAILED_PRECONDITION||t.message!==ix)throw t;zm("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk([t,n],[i,e]){const o=rb(t,i);return 0===o?rb(n,e):o}class bk{constructor(t){this.An=t,this.buffer=new Ow(mk),this.Rn=0}Pn(){return++this.Rn}bn(t){const n=[t,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(n);else{const t=this.buffer.last();mk(n,t)<0&&(this.buffer=this.buffer.delete(t).add(n))}}get maxValue(){return this.buffer.last()[0]}}class vk{constructor(t,n){this.garbageCollector=t,this.asyncQueue=n,this.Vn=!1,this.vn=null}start(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(t)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(t){const n=this.Vn?3e5:6e4;zm("LruGarbageCollector",`Garbage collection scheduled in ${n}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(async()=>{this.vn=null,this.Vn=!0;try{await t.collectGarbage(this.garbageCollector)}catch(t){ux(t)?zm("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await gk(t)}await this.Sn(t)}))}}class wk{constructor(t,n){this.Dn=t,this.params=n}calculateTargetCount(t,n){return this.Dn.Cn(t).next((t=>Math.floor(n/100*t)))}nthSequenceNumber(t,n){if(0===n)return ox.resolve(ib.A);const i=new bk(n);return this.Dn.forEachTarget(t,(t=>i.bn(t.sequenceNumber))).next((()=>this.Dn.xn(t,(t=>i.bn(t))))).next((()=>i.maxValue))}removeTargets(t,n,i){return this.Dn.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.Dn.removeOrphanedDocuments(t,n)}collect(t,n){return-1===this.params.cacheSizeCollectionThreshold?(zm("LruGarbageCollector","Garbage collection skipped; disabled"),ox.resolve(nk)):this.getCacheSize(t).next((i=>i<this.params.cacheSizeCollectionThreshold?(zm("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nk):this.Nn(t,n)))}getCacheSize(t){return this.Dn.getCacheSize(t)}Nn(t,n){let i,e,o,r,s,l,a;const u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((n=>(n>this.params.maximumSequenceNumbersToCollect?(zm("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${n}`),e=this.params.maximumSequenceNumbersToCollect):e=n,r=Date.now(),this.nthSequenceNumber(t,e)))).next((e=>(i=e,s=Date.now(),this.removeTargets(t,i,n)))).next((n=>(o=n,l=Date.now(),this.removeOrphanedDocuments(t,i)))).next((t=>(a=Date.now(),jm()<=we.DEBUG&&zm("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${r-u}ms\n\tDetermined least recently used ${e} in `+(s-r)+"ms\n"+`\tRemoved ${o} targets in `+(l-s)+"ms\n"+`\tRemoved ${t} documents in `+(a-l)+"ms\n"+`Total Duration: ${a-u}ms`),ox.resolve({didRun:!0,sequenceNumbersCollected:e,targetsRemoved:o,documentsRemoved:t}))))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(t,n){this.db=t,this.garbageCollector=function(t,n){return new wk(t,n)}(this,n)}Cn(t){const n=this.kn(t);return this.db.getTargetCache().getTargetCount(t).next((t=>n.next((n=>t+n))))}kn(t){let n=0;return this.xn(t,(()=>{n++})).next((()=>n))}forEachTarget(t,n){return this.db.getTargetCache().forEachTarget(t,n)}xn(t,n){return this.Mn(t,((t,i)=>n(i)))}addReference(t,n,i){return xk(t,i)}removeReference(t,n,i){return xk(t,i)}removeTargets(t,n,i){return this.db.getTargetCache().removeTargets(t,n,i)}markPotentiallyOrphaned(t,n){return xk(t,n)}On(t,n){return function(t,n){let i=!1;return uk(t).zt((e=>sk(t,e,n).next((t=>(t&&(i=!0),ox.resolve(!t)))))).next((()=>i))}(t,n)}removeOrphanedDocuments(t,n){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),e=[];let o=0;return this.Mn(t,((r,s)=>{if(s<=n){const n=this.On(t,r).next((n=>{if(!n)return o++,i.getEntry(t,r).next((()=>(i.removeEntry(r,ub.min()),pk(t).delete([0,Dy(r.path)]))))}));e.push(n)}})).next((()=>ox.waitFor(e))).next((()=>i.apply(t))).next((()=>o))}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,n){return xk(t,n)}Mn(t,n){const i=pk(t);let e,o=ib.A;return i.Wt({index:"documentTargetsIndex"},(([t,i],{path:r,sequenceNumber:s})=>{0===t?(o!==ib.A&&n(new Db(Py(e)),o),o=s,e=r):o=ib.A})).next((()=>{o!==ib.A&&n(new Db(Py(e)),o)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function xk(t,n){return pk(t).put(function(t,n){return{targetId:0,path:Dy(t.path),sequenceNumber:n}}(n,t.currentSequenceNumber))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(){this.changes=new Cw((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,tv.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return void 0!==i?ox.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(t){this.M=t}setIndexManager(t){this.indexManager=t}addEntry(t,n,i){return Tk(t).put(i)}removeEntry(t,n,i){return Tk(t).delete(function(t,n){const i=t.path.toArray();return[i.slice(0,i.length-2),i[i.length-2],kx(n),i[i.length-1]]}(n,i))}updateMetadata(t,n){return this.getMetadata(t).next((i=>(i.byteSize+=n,this.Fn(t,i))))}getEntry(t,n){let i=tv.newInvalidDocument(n);return Tk(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Sk(n))},((t,e)=>{i=this.$n(n,e)})).next((()=>i))}Bn(t,n){let i={size:0,document:tv.newInvalidDocument(n)};return Tk(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Sk(n))},((t,e)=>{i={document:this.$n(n,e),size:ok(e)}})).next((()=>i))}getEntries(t,n){let i=Lw();return this.Ln(t,n,((t,n)=>{const e=this.$n(t,n);i=i.insert(t,e)})).next((()=>i))}Un(t,n){let i=Lw(),e=new Aw(Db.comparator);return this.Ln(t,n,((t,n)=>{const o=this.$n(t,n);i=i.insert(t,o),e=e.insert(t,ok(n))})).next((()=>({documents:i,qn:e})))}Ln(t,n,i){if(n.isEmpty())return ox.resolve();let e=new Ow(Ak);n.forEach((t=>e=e.add(t)));const o=IDBKeyRange.bound(Sk(e.first()),Sk(e.last())),r=e.getIterator();let s=r.getNext();return Tk(t).Wt({index:"documentKeyIndex",range:o},((t,n,e)=>{const o=Db.fromSegments([...n.prefixPath,n.collectionGroup,n.documentId]);for(;s&&Ak(s,o)<0;)i(s,null),s=r.getNext();s&&s.isEqual(o)&&(i(s,n),s=r.hasNext()?r.getNext():null),s?e.Ut(Sk(s)):e.done()})).next((()=>{for(;s;)i(s,null),s=r.hasNext()?r.getNext():null}))}getAllFromCollection(t,n,i){const e=[n.popLast().toArray(),n.lastSegment(),kx(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],o=[n.popLast().toArray(),n.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Tk(t).qt(IDBKeyRange.bound(e,o,!0)).next((t=>{let n=Lw();for(const i of t){const t=this.$n(Db.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);n=n.insert(t.key,t)}return n}))}getAllFromCollectionGroup(t,n,i,e){let o=Lw();const r=Ck(n,i),s=Ck(n,lv.max());return Tk(t).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(r,s,!0)},((t,n,i)=>{const r=this.$n(Db.fromSegments(n.prefixPath.concat(n.collectionGroup,n.documentId)),n);o=o.insert(r.key,r),o.size===e&&i.done()})).next((()=>o))}newChangeBuffer(t){return new _k(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((t=>t.byteSize))}getMetadata(t){return Ek(t).get("remoteDocumentGlobalKey").next((t=>(qm(!!t),t)))}Fn(t,n){return Ek(t).put("remoteDocumentGlobalKey",n)}$n(t,n){if(n){const t=function(t,n){let i;if(n.document)i=function(t,n,i){const e=cy(t,n.name),o=sy(n.updateTime),r=new Qb({mapValue:{fields:n.fields}}),s=tv.newFoundDocument(e,o,r);return i&&s.setHasCommittedMutations(),i?s.setHasCommittedMutations():s}(t.Jt,n.document,!!n.hasCommittedMutations);else if(n.noDocument){const t=Db.fromSegments(n.noDocument.path),e=_x(n.noDocument.readTime);i=tv.newNoDocument(t,e),n.hasCommittedMutations&&i.setHasCommittedMutations()}else{if(!n.unknownDocument)return Bm();{const t=Db.fromSegments(n.unknownDocument.path),e=_x(n.unknownDocument.version);i=tv.newUnknownDocument(t,e)}}return n.readTime&&i.setReadTime(function(t){const n=new ab(t[0],t[1]);return ub.fromTimestamp(n)}(n.readTime)),i}(this.M,n);if(!t.isNoDocument()||!t.version.isEqual(ub.min()))return t}return tv.newInvalidDocument(t)}}class _k extends kk{constructor(t,n){super(),this.Kn=t,this.trackRemovals=n,this.Gn=new Cw((t=>t.toString()),((t,n)=>t.isEqual(n)))}applyChanges(t){const n=[];let i=0,e=new Ow(((t,n)=>rb(t.canonicalString(),n.canonicalString())));return this.changes.forEach(((o,r)=>{const s=this.Gn.get(o);if(n.push(this.Kn.removeEntry(t,o,s.readTime)),r.isValidDocument()){const l=xx(this.Kn.M,r);e=e.add(o.path.popLast());const a=ok(l);i+=a-s.size,n.push(this.Kn.addEntry(t,o,l))}else if(i-=s.size,this.trackRemovals){const i=xx(this.Kn.M,r.convertToNoDocument(ub.min()));n.push(this.Kn.addEntry(t,o,i))}})),e.forEach((i=>{n.push(this.Kn.indexManager.addToCollectionParentIndex(t,i))})),n.push(this.Kn.updateMetadata(t,i)),ox.waitFor(n)}getFromCache(t,n){return this.Kn.Bn(t,n).next((t=>(this.Gn.set(n,{size:t.size,readTime:t.document.readTime}),t.document)))}getAllFromCache(t,n){return this.Kn.Un(t,n).next((({documents:t,qn:n})=>(n.forEach(((n,i)=>{this.Gn.set(n,{size:i,readTime:t.get(n).readTime})})),t)))}}function Ek(t){return gx(t,"remoteDocumentGlobal")}function Tk(t){return gx(t,"remoteDocumentsV14")}function Sk(t){const n=t.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],n[n.length-1]]}function Ck(t,n){const i=n.documentKey.path.toArray();return[t,kx(n.readTime),i.slice(0,i.length-2),i.length>0?i[i.length-1]:""]}function Ak(t,n){const i=t.path.toArray(),e=n.path.toArray();let o=0;for(let t=0;t<i.length-2&&t<e.length-2;++t)if(o=rb(i[t],e[t]),o)return o;return o=rb(i.length,e.length),o||(o=rb(i[i.length-2],e[e.length-2]),o||rb(i[i.length-1],e[e.length-1]))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(t){this.M=t}kt(t,n,i,e){const o=new rx("createOrUpgrade",n);i<1&&e>=1&&(function(t){t.createObjectStore("owner")}(t),function(t){t.createObjectStore("mutationQueues",{keyPath:"userId"}),t.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ry,{unique:!0}),t.createObjectStore("documentMutations")}(t),Nk(t),function(t){t.createObjectStore("remoteDocuments")}(t));let r=ox.resolve();return i<3&&e>=3&&(0!==i&&(function(t){t.deleteObjectStore("targetDocuments"),t.deleteObjectStore("targets"),t.deleteObjectStore("targetGlobal")}(t),Nk(t)),r=r.next((()=>function(t){const n=t.store("targetGlobal"),i={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ub.min().toTimestamp(),targetCount:0};return n.put("targetGlobalKey",i)}(o)))),i<4&&e>=4&&(0!==i&&(r=r.next((()=>function(t,n){return n.store("mutations").qt().next((i=>{t.deleteObjectStore("mutations"),t.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ry,{unique:!0});const e=n.store("mutations"),o=i.map((t=>e.put(t)));return ox.waitFor(o)}))}(t,o)))),r=r.next((()=>{!function(t){t.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)}))),i<5&&e>=5&&(r=r.next((()=>this.Qn(o)))),i<6&&e>=6&&(r=r.next((()=>(function(t){t.createObjectStore("remoteDocumentGlobal")}(t),this.jn(o))))),i<7&&e>=7&&(r=r.next((()=>this.Wn(o)))),i<8&&e>=8&&(r=r.next((()=>this.zn(t,o)))),i<9&&e>=9&&(r=r.next((()=>{!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t)}))),i<10&&e>=10&&(r=r.next((()=>this.Hn(o)))),i<11&&e>=11&&(r=r.next((()=>{!function(t){t.createObjectStore("bundles",{keyPath:"bundleId"})}(t),function(t){t.createObjectStore("namedQueries",{keyPath:"name"})}(t)}))),i<12&&e>=12&&(r=r.next((()=>{!function(t){const n=t.createObjectStore("documentOverlays",{keyPath:Xy});n.createIndex("collectionPathOverlayIndex",Yy,{unique:!1}),n.createIndex("collectionGroupOverlayIndex",Jy,{unique:!1})}(t)}))),i<13&&e>=13&&(r=r.next((()=>function(t){const n=t.createObjectStore("remoteDocumentsV14",{keyPath:jy});n.createIndex("documentKeyIndex",zy),n.createIndex("collectionGroupIndex",Fy)}(t))).next((()=>this.Jn(t,o))).next((()=>t.deleteObjectStore("remoteDocuments")))),i<14&&e>=14&&(r=r.next((()=>{!function(t){t.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),t.createObjectStore("indexState",{keyPath:Ky}).createIndex("sequenceNumberIndex",Wy,{unique:!1}),t.createObjectStore("indexEntries",{keyPath:Gy}).createIndex("documentKeyIndex",Hy,{unique:!1})}(t)}))),r}jn(t){let n=0;return t.store("remoteDocuments").Wt(((t,i)=>{n+=ok(i)})).next((()=>{const i={byteSize:n};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)}))}Qn(t){const n=t.store("mutationQueues"),i=t.store("mutations");return n.qt().next((n=>ox.forEach(n,(n=>{const e=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return i.qt("userMutationsIndex",e).next((i=>ox.forEach(i,(i=>{qm(i.userId===n.userId);const e=Ex(this.M,i);return ek(t,n.userId,e).next((()=>{}))}))))}))))}Wn(t){const n=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next((t=>{const e=[];return i.Wt((i=>{const o=new pb(i),r=function(t){return[0,Dy(t)]}(o);e.push(n.get(r).next((i=>i?ox.resolve():(i=>n.put({targetId:0,path:Dy(i),sequenceNumber:t.highestListenSequenceNumber}))(o))))})).next((()=>ox.waitFor(e)))}))}zn(t,n){t.createObjectStore("collectionParents",{keyPath:qy});const i=n.store("collectionParents"),e=new Hx,o=t=>{if(e.add(t)){const n=t.lastSegment(),e=t.popLast();return i.put({collectionId:n,parent:Dy(e)})}};return n.store("remoteDocuments").Wt({jt:!0},(t=>{const n=new pb(t);return o(n.popLast())})).next((()=>n.store("documentMutations").Wt({jt:!0},(([t,n,i])=>{const e=Py(n);return o(e.popLast())}))))}Hn(t){const n=t.store("targets");return n.Wt(((t,i)=>{const e=Tx(i),o=Sx(this.M,e);return n.put(o)}))}Jn(t,n){const i=n.store("remoteDocuments"),e=[];return i.Wt(((t,i)=>{const o=n.store("remoteDocumentsV14"),r=(s=i,s.document?new Db(pb.fromString(s.document.name).popFirst(5)):s.noDocument?Db.fromSegments(s.noDocument.path):s.unknownDocument?Db.fromSegments(s.unknownDocument.path):Bm()).path.toArray();var s;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l={prefixPath:r.slice(0,r.length-2),collectionGroup:r[r.length-2],documentId:r[r.length-1],readTime:i.readTime||[0,0],unknownDocument:i.unknownDocument,noDocument:i.noDocument,document:i.document,hasCommittedMutations:!!i.hasCommittedMutations};e.push(o.put(l))})).next((()=>ox.waitFor(e)))}}function Nk(t){t.createObjectStore("targetDocuments",{keyPath:Uy}).createIndex("documentTargetsIndex",By,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Vy,{unique:!0}),t.createObjectStore("targetGlobal")}const Ok="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Pk{constructor(t,n,i,e,o,r,s,l,a,u,c=13){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=i,this.Yn=o,this.window=r,this.document=s,this.Xn=a,this.Zn=u,this.ts=c,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=()=>Promise.resolve(),!Pk.vt())throw new Wm(Km.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yk(this,e),this.hs=n+"main",this.M=new yx(l),this.ls=new sx(this.hs,this.ts,new Dk(this.M)),this.fs=new hk(this.referenceDelegate,this.M),this.ds=function(t){return new Ik(t)}(this.M),this._s=new Nx,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===u&&Fm("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Wm(Km.FAILED_PRECONDITION,Ok);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.fs.getHighestSequenceNumber(t)))})).then((t=>{this.es=new ib(t,this.Xn)})).then((()=>{this.ns=!0})).catch((t=>(this.ls&&this.ls.close(),Promise.reject(t))))}Ts(t){return this.cs=async n=>{if(this.started)return t(n)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.ls.Ot((async n=>{null===n.newVersion&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Yn.enqueueAndForget((async()=>{this.started&&await this.gs()})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>Mk(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Es(t).next((t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable((()=>this.cs(!1))))}))})).next((()=>this.As(t))).next((n=>this.isPrimary&&!n?this.Rs(t).next((()=>!1)):!!n&&this.Ps(t).next((()=>!0)))))).catch((t=>{if(ux(t))return zm("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return zm("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.Yn.enqueueRetryable((()=>this.cs(t))),this.isPrimary=t}))}Es(t){return Rk(t).get("owner").next((t=>ox.resolve(this.bs(t))))}Vs(t){return Mk(t).delete(this.clientId)}async vs(){if(this.isPrimary&&!this.Ss(this.us,18e5)){this.us=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const n=gx(t,"clientMetadata");return n.qt().next((t=>{const i=this.Ds(t,18e5),e=t.filter((t=>-1===i.indexOf(t)));return ox.forEach(e,(t=>n.delete(t.clientId))).next((()=>e))}))})).catch((()=>[]));if(this.ws)for(const n of t)this.ws.removeItem(this.Cs(n.clientId))}}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.gs().then((()=>this.vs())).then((()=>this.Is()))))}bs(t){return!!t&&t.ownerId===this.clientId}As(t){return this.Zn?ox.resolve(!0):Rk(t).get("owner").next((n=>{if(null!==n&&this.Ss(n.leaseTimestampMs,5e3)&&!this.xs(n.ownerId)){if(this.bs(n)&&this.networkEnabled)return!0;if(!this.bs(n)){if(!n.allowTabSynchronization)throw new Wm(Km.FAILED_PRECONDITION,Ok);return!1}}return!(!this.networkEnabled||!this.inForeground)||Mk(t).qt().next((t=>void 0===this.Ds(t,5e3).find((t=>{if(this.clientId!==t.clientId){const n=!this.inForeground&&t.inForeground,i=this.networkEnabled===t.networkEnabled;if(!this.networkEnabled&&t.networkEnabled||n&&i)return!0}return!1}))))})).next((t=>(this.isPrimary!==t&&zm("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),await this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(t=>{const n=new px(t,ib.A);return this.Rs(n).next((()=>this.Vs(n)))})),this.ls.close(),this.Os()}Ds(t,n){return t.filter((t=>this.Ss(t.updateTimeMs,n)&&!this.xs(t.clientId)))}Fs(){return this.runTransaction("getActiveClients","readonly",(t=>Mk(t).qt().next((t=>this.Ds(t,18e5).map((t=>t.clientId))))))}get started(){return this.ns}getMutationQueue(t,n){return rk.Yt(t,this.M,n,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(t){return new Yx(t,this.M.Jt.databaseId)}getDocumentOverlayCache(t){return Rx.Yt(this.M,t)}getBundleCache(){return this._s}runTransaction(t,n,i){zm("IndexedDbPersistence","Starting transaction:",t);const e="readonly"===n?"readonly":"readwrite",o=14===(r=this.ts)?nx:13===r?tx:12===r?Zy:11===r?Qy:void Bm();var r;let s;return this.ls.runTransaction(t,e,o,(e=>(s=new px(e,this.es?this.es.next():ib.A),"readwrite-primary"===n?this.Es(s).next((t=>!!t||this.As(s))).next((n=>{if(!n)throw Fm(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable((()=>this.cs(!1))),new Wm(Km.FAILED_PRECONDITION,ix);return i(s)})).next((t=>this.Ps(s).next((()=>t)))):this.$s(s).next((()=>i(s)))))).then((t=>(s.raiseOnCommittedEvent(),t)))}$s(t){return Rk(t).get("owner").next((t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Wm(Km.FAILED_PRECONDITION,Ok)}))}Ps(t){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Rk(t).put("owner",n)}static vt(){return sx.vt()}Rs(t){const n=Rk(t);return n.get("owner").next((t=>this.bs(t)?(zm("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):ox.resolve()))}Ss(t,n){const i=Date.now();return!(t<i-n||t>i&&(Fm(`Detected an update time that is in the future: ${t} > ${i}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.gs())))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ss=()=>{this.Ns(),!function(){try{return"[object process]"===Object.prototype.toString.call(c.process)}catch(t){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(t){var n;try{const i=null!==(null===(n=this.ws)||void 0===n?void 0:n.getItem(this.Cs(t)));return zm("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(t){return Fm("IndexedDbPersistence","Failed to get zombied client id.",t),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(t){Fm("Failed to set zombie client id.",t)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(t){}}Cs(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Rk(t){return gx(t,"owner")}function Mk(t){return gx(t,"clientMetadata")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Lk{constructor(t,n,i){this.ds=t,this.Bs=n,this.indexManager=i}Ls(t,n){return this.Bs.getAllMutationBatchesAffectingDocumentKey(t,n).next((i=>this.Us(t,n,i)))}Us(t,n,i){return this.ds.getEntry(t,n).next((t=>{for(const n of i)n.applyToLocalView(t);return t}))}qs(t,n){t.forEach(((t,i)=>{for(const t of n)t.applyToLocalView(i)}))}Ks(t,n){return this.ds.getEntries(t,n).next((n=>this.Gs(t,n).next((()=>n))))}Gs(t,n){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(t,n).next((t=>this.qs(n,t)))}Qs(t,n,i){return function(t){return Db.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(n)?this.js(t,n.path):$v(n)?this.Ws(t,n,i):this.zs(t,n,i)}js(t,n){return this.Ls(t,new Db(n)).next((t=>{let n=jw();return t.isFoundDocument()&&(n=n.insert(t.key,t)),n}))}Ws(t,n,i){const e=n.collectionGroup;let o=jw();return this.indexManager.getCollectionParents(t,e).next((r=>ox.forEach(r,(r=>{const s=function(t,n){return new Nv(n,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(n,r.child(e));return this.zs(t,s,i).next((t=>{t.forEach(((t,n)=>{o=o.insert(t,n)}))}))})).next((()=>o))))}zs(t,n,i){let e;return this.ds.getAllFromCollection(t,n.path,i).next((i=>(e=i,this.Bs.getAllMutationBatchesAffectingQuery(t,n)))).next((t=>{for(const n of t)for(const t of n.mutations){const i=t.key;let o=e.get(i);null==o&&(o=tv.newInvalidDocument(i),e=e.insert(i,o)),fw(t,o,n.localWriteTime),o.isFoundDocument()||(e=e.remove(i))}})).next((()=>(e.forEach(((t,i)=>{qv(n,i)||(e=e.remove(t))})),e)))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(t,n,i,e){this.targetId=t,this.fromCache=n,this.Hs=i,this.Js=e}static Ys(t,n){let i=Uw(),e=Uw();for(const t of n.docChanges)switch(t.type){case 0:i=i.add(t.doc.key);break;case 1:e=e.add(t.doc.key)}return new $k(t,n.fromCache,i,e)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{Xs(t){this.Zs=t}Qs(t,n,i,e){return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(n)||i.isEqual(ub.min())?this.ti(t,n):this.Zs.Ks(t,e).next((o=>{const r=this.ei(n,o);return(Pv(n)||Rv(n))&&this.ni(n.limitType,r,e,i)?this.ti(t,n):(jm()<=we.DEBUG&&zm("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Bv(n)),this.Zs.Qs(t,n,function(t){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,e=ub.fromTimestamp(1e9===i?new ab(n+1,0):new ab(n,i));return new lv(e,Db.empty(),-1)}(i)).next((t=>(r.forEach((n=>{t=t.insert(n.key,n)})),t))))}))}ei(t,n){let i=new Ow(Kv(t));return n.forEach(((n,e)=>{qv(t,e)&&(i=i.add(e))})),i}ni(t,n,i,e){if(i.size!==n.size)return!0;const o="F"===t?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(e)>0)}ti(t,n){return jm()<=we.DEBUG&&zm("QueryEngine","Using full collection scan to execute query:",Bv(n)),this.Zs.Qs(t,n,lv.min())}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(t,n,i,e){this.persistence=t,this.si=n,this.M=e,this.ii=new Aw(rb),this.ri=new Cw((t=>hv(t)),dv),this.oi=new Map,this.ui=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.ai(i)}ai(t){this.indexManager=this.persistence.getIndexManager(t),this.Bs=this.persistence.getMutationQueue(t,this.indexManager),this.ci=new Lk(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.ii)))}}function Fk(t,n,i,e){return new zk(t,n,i,e)}async function Vk(t,n){const i=t;return await i.persistence.runTransaction("Handle user change","readonly",(t=>{let e;return i.Bs.getAllMutationBatches(t).next((o=>(e=o,i.ai(n),i.Bs.getAllMutationBatches(t)))).next((n=>{const o=[],r=[];let s=Uw();for(const t of e){o.push(t.batchId);for(const n of t.mutations)s=s.add(n.key)}for(const t of n){r.push(t.batchId);for(const n of t.mutations)s=s.add(n.key)}return i.ci.Ks(t,s).next((t=>({hi:t,removedBatchIds:o,addedBatchIds:r})))}))}))}function Uk(t){const n=t;return n.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>n.fs.getLastRemoteSnapshotVersion(t)))}function Bk(t,n){const i=t;return i.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===n&&(n=-1),i.Bs.getNextMutationBatchAfterBatchId(t,n))))}async function qk(t,n,i){const e=t,o=e.ii.get(n),r=i?"readwrite":"readwrite-primary";try{i||await e.persistence.runTransaction("Release target",r,(t=>e.persistence.referenceDelegate.removeTarget(t,o)))}catch(t){if(!ux(t))throw t;zm("LocalStore",`Failed to update sequence numbers for target ${n}: ${t}`)}e.ii=e.ii.remove(n),e.ri.delete(o.target)}function Kk(t,n,i){const e=t;let o=ub.min(),r=Uw();return e.persistence.runTransaction("Execute query","readonly",(t=>function(t,n,i){const e=t,o=e.ri.get(i);return void 0!==o?ox.resolve(e.ii.get(o)):e.fs.getTargetData(n,i)}(e,t,zv(n)).next((n=>{if(n)return o=n.lastLimboFreeSnapshotVersion,e.fs.getMatchingKeysForTargetId(t,n.targetId).next((t=>{r=t}))})).next((()=>e.si.Qs(t,n,i?o:ub.min(),i?r:Uw()))).next((t=>(function(t,n,i){let e=ub.min();i.forEach(((t,n)=>{n.readTime.compareTo(e)>0&&(e=n.readTime)})),t.oi.set(n,e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,function(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(n),t),{documents:t,li:r})))))}class Wk{constructor(t){this.M=t,this.wi=new Map,this.mi=new Map}getBundleMetadata(t,n){return ox.resolve(this.wi.get(n))}saveBundleMetadata(t,n){var i;return this.wi.set(n.id,{id:(i=n).id,version:i.version,createTime:sy(i.createTime)}),ox.resolve()}getNamedQuery(t,n){return ox.resolve(this.mi.get(n))}saveNamedQuery(t,n){return this.mi.set(n.name,function(t){return{name:t.name,query:Cx(t.bundledQuery),readTime:sy(t.readTime)}}(n)),ox.resolve()}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(){this.overlays=new Aw(Db.comparator),this.gi=new Map}getOverlay(t,n){return ox.resolve(this.overlays.get(n))}saveOverlays(t,n,i){return i.forEach(((i,e)=>{this.Xt(t,n,e)})),ox.resolve()}removeOverlaysForBatchId(t,n,i){const e=this.gi.get(i);return void 0!==e&&(e.forEach((t=>this.overlays=this.overlays.remove(t))),this.gi.delete(i)),ox.resolve()}getOverlaysForCollection(t,n,i){const e=zw(),o=n.length+1,r=new Db(n.child("")),s=this.overlays.getIteratorFrom(r);for(;s.hasNext();){const t=s.getNext().value,r=t.getKey();if(!n.isPrefixOf(r.path))break;r.path.length===o&&t.largestBatchId>i&&e.set(t.getKey(),t)}return ox.resolve(e)}getOverlaysForCollectionGroup(t,n,i,e){let o=new Aw(((t,n)=>t-n));const r=this.overlays.getIterator();for(;r.hasNext();){const t=r.getNext().value;if(t.getKey().getCollectionGroup()===n&&t.largestBatchId>i){let n=o.get(t.largestBatchId);null===n&&(n=zw(),o=o.insert(t.largestBatchId,n)),n.set(t.getKey(),t)}}const s=zw(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((t,n)=>s.set(t,n))),!(s.size()>=e)););return ox.resolve(s)}Xt(t,n,i){if(null===i)return;const e=this.overlays.get(i.key);if(null!==e){const t=this.gi.get(e.largestBatchId).delete(i.key);this.gi.set(e.largestBatchId,t)}this.overlays=this.overlays.insert(i.key,new vx(n,i));let o=this.gi.get(n);void 0===o&&(o=Uw(),this.gi.set(n,o)),this.gi.set(n,o.add(i.key))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(){this.yi=new Ow(Xk.pi),this.Ii=new Ow(Xk.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(t,n){const i=new Xk(t,n);this.yi=this.yi.add(i),this.Ii=this.Ii.add(i)}Ei(t,n){t.forEach((t=>this.addReference(t,n)))}removeReference(t,n){this.Ai(new Xk(t,n))}Ri(t,n){t.forEach((t=>this.removeReference(t,n)))}Pi(t){const n=new Db(new pb([])),i=new Xk(n,t),e=new Xk(n,t+1),o=[];return this.Ii.forEachInRange([i,e],(t=>{this.Ai(t),o.push(t.key)})),o}bi(){this.yi.forEach((t=>this.Ai(t)))}Ai(t){this.yi=this.yi.delete(t),this.Ii=this.Ii.delete(t)}Vi(t){const n=new Db(new pb([])),i=new Xk(n,t),e=new Xk(n,t+1);let o=Uw();return this.Ii.forEachInRange([i,e],(t=>{o=o.add(t.key)})),o}containsKey(t){const n=new Xk(t,0),i=this.yi.firstAfterOrEqual(n);return null!==i&&t.isEqual(i.key)}}class Xk{constructor(t,n){this.key=t,this.vi=n}static pi(t,n){return Db.comparator(t.key,n.key)||rb(t.vi,n.vi)}static Ti(t,n){return rb(t.vi,n.vi)||Db.comparator(t.key,n.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.Bs=[],this.Si=1,this.Di=new Ow(Xk.pi)}checkEmpty(t){return ox.resolve(0===this.Bs.length)}addMutationBatch(t,n,i,e){const o=this.Si;this.Si++;const r=new mx(o,n,i,e);this.Bs.push(r);for(const n of e)this.Di=this.Di.add(new Xk(n.key,o)),this.indexManager.addToCollectionParentIndex(t,n.key.path.popLast());return ox.resolve(r)}lookupMutationBatch(t,n){return ox.resolve(this.Ci(n))}getNextMutationBatchAfterBatchId(t,n){const i=this.xi(n+1),e=i<0?0:i;return ox.resolve(this.Bs.length>e?this.Bs[e]:null)}getHighestUnacknowledgedBatchId(){return ox.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(t){return ox.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new Xk(n,0),e=new Xk(n,Number.POSITIVE_INFINITY),o=[];return this.Di.forEachInRange([i,e],(t=>{const n=this.Ci(t.vi);o.push(n)})),ox.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new Ow(rb);return n.forEach((t=>{const n=new Xk(t,0),e=new Xk(t,Number.POSITIVE_INFINITY);this.Di.forEachInRange([n,e],(t=>{i=i.add(t.vi)}))})),ox.resolve(this.Ni(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,e=i.length+1;let o=i;Db.isDocumentKey(o)||(o=o.child(""));const r=new Xk(new Db(o),0);let s=new Ow(rb);return this.Di.forEachWhile((t=>{const n=t.key.path;return!!i.isPrefixOf(n)&&(n.length===e&&(s=s.add(t.vi)),!0)}),r),ox.resolve(this.Ni(s))}Ni(t){const n=[];return t.forEach((t=>{const i=this.Ci(t);null!==i&&n.push(i)})),n}removeMutationBatch(t,n){qm(0===this.ki(n.batchId,"removed")),this.Bs.shift();let i=this.Di;return ox.forEach(n.mutations,(e=>{const o=new Xk(e.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,e.key)})).next((()=>{this.Di=i}))}_n(t){}containsKey(t,n){const i=new Xk(n,0),e=this.Di.firstAfterOrEqual(i);return ox.resolve(n.isEqual(e&&e.key))}performConsistencyCheck(t){return ox.resolve()}ki(t,n){return this.xi(t)}xi(t){return 0===this.Bs.length?0:t-this.Bs[0].batchId}Ci(t){const n=this.xi(t);return n<0||n>=this.Bs.length?null:this.Bs[n]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(t){this.Mi=t,this.docs=new Aw(Db.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,e=this.docs.get(i),o=e?e.size:0,r=this.Mi(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:r}),this.size+=r-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return ox.resolve(i?i.document.mutableCopy():tv.newInvalidDocument(n))}getEntries(t,n){let i=Lw();return n.forEach((t=>{const n=this.docs.get(t);i=i.insert(t,n?n.document.mutableCopy():tv.newInvalidDocument(t))})),ox.resolve(i)}getAllFromCollection(t,n,i){let e=Lw();const o=new Db(n.child("")),r=this.docs.getIteratorFrom(o);for(;r.hasNext();){const{key:t,value:{document:o}}=r.getNext();if(!n.isPrefixOf(t.path))break;t.path.length>n.length+1||av(sv(o),i)<=0||(e=e.insert(o.key,o.mutableCopy()))}return ox.resolve(e)}getAllFromCollectionGroup(t,n,i,e){Bm()}Oi(t,n){return ox.forEach(this.docs,(t=>n(t)))}newChangeBuffer(t){return new Qk(this)}getSize(t){return ox.resolve(this.size)}}class Qk extends kk{constructor(t){super(),this.Kn=t}applyChanges(t){const n=[];return this.changes.forEach(((i,e)=>{e.isValidDocument()?n.push(this.Kn.addEntry(t,e)):this.Kn.removeEntry(i)})),ox.waitFor(n)}getFromCache(t,n){return this.Kn.getEntry(t,n)}getAllFromCache(t,n){return this.Kn.getEntries(t,n)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(t){this.persistence=t,this.Fi=new Cw((t=>hv(t)),dv),this.lastRemoteSnapshotVersion=ub.min(),this.highestTargetId=0,this.$i=0,this.Bi=new Hk,this.targetCount=0,this.Li=ck.gn()}forEachTarget(t,n){return this.Fi.forEach(((t,i)=>n(i))),ox.resolve()}getLastRemoteSnapshotVersion(t){return ox.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ox.resolve(this.$i)}allocateTargetId(t){return this.highestTargetId=this.Li.next(),ox.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.$i&&(this.$i=n),ox.resolve()}Tn(t){this.Fi.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Li=new ck(n),this.highestTargetId=n),t.sequenceNumber>this.$i&&(this.$i=t.sequenceNumber)}addTargetData(t,n){return this.Tn(n),this.targetCount+=1,ox.resolve()}updateTargetData(t,n){return this.Tn(n),ox.resolve()}removeTargetData(t,n){return this.Fi.delete(n.target),this.Bi.Pi(n.targetId),this.targetCount-=1,ox.resolve()}removeTargets(t,n,i){let e=0;const o=[];return this.Fi.forEach(((r,s)=>{s.sequenceNumber<=n&&null===i.get(s.targetId)&&(this.Fi.delete(r),o.push(this.removeMatchingKeysForTargetId(t,s.targetId)),e++)})),ox.waitFor(o).next((()=>e))}getTargetCount(t){return ox.resolve(this.targetCount)}getTargetData(t,n){const i=this.Fi.get(n)||null;return ox.resolve(i)}addMatchingKeys(t,n,i){return this.Bi.Ei(n,i),ox.resolve()}removeMatchingKeys(t,n,i){this.Bi.Ri(n,i);const e=this.persistence.referenceDelegate,o=[];return e&&n.forEach((n=>{o.push(e.markPotentiallyOrphaned(t,n))})),ox.waitFor(o)}removeMatchingKeysForTargetId(t,n){return this.Bi.Pi(n),ox.resolve()}getMatchingKeysForTargetId(t,n){const i=this.Bi.Vi(n);return ox.resolve(i)}containsKey(t,n){return ox.resolve(this.Bi.containsKey(n))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(t,n){this.Ui={},this.overlays={},this.es=new ib(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new Zk(this),this.indexManager=new Gx,this.ds=function(t){return new Jk(t)}((t=>this.referenceDelegate.qi(t))),this.M=new yx(n),this._s=new Wk(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Gk,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.Ui[t.toKey()];return i||(i=new Yk(n,this.referenceDelegate),this.Ui[t.toKey()]=i),i}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(t,n,i){zm("MemoryPersistence","Starting transaction:",t);const e=new nI(this.es.next());return this.referenceDelegate.Ki(),i(e).next((t=>this.referenceDelegate.Gi(e).next((()=>t)))).toPromise().then((t=>(e.raiseOnCommittedEvent(),t)))}Qi(t,n){return ox.or(Object.values(this.Ui).map((i=>()=>i.containsKey(t,n))))}}class nI extends ex{constructor(t){super(),this.currentSequenceNumber=t}}class iI{constructor(t){this.persistence=t,this.ji=new Hk,this.Wi=null}static zi(t){return new iI(t)}get Hi(){if(this.Wi)return this.Wi;throw Bm()}addReference(t,n,i){return this.ji.addReference(i,n),this.Hi.delete(i.toString()),ox.resolve()}removeReference(t,n,i){return this.ji.removeReference(i,n),this.Hi.add(i.toString()),ox.resolve()}markPotentiallyOrphaned(t,n){return this.Hi.add(n.toString()),ox.resolve()}removeTarget(t,n){this.ji.Pi(n.targetId).forEach((t=>this.Hi.add(t.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next((t=>{t.forEach((t=>this.Hi.add(t.toString())))})).next((()=>i.removeTargetData(t,n)))}Ki(){this.Wi=new Set}Gi(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ox.forEach(this.Hi,(i=>{const e=Db.fromPath(i);return this.Ji(t,e).next((t=>{t||n.removeEntry(e,ub.min())}))})).next((()=>(this.Wi=null,n.apply(t))))}updateLimboDocument(t,n){return this.Ji(t,n).next((t=>{t?this.Hi.delete(n.toString()):this.Hi.add(n.toString())}))}qi(t){return 0}Ji(t,n){return ox.or([()=>ox.resolve(this.ji.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Qi(t,n)])}}class eI{constructor(){this.activeTargetIds=qw()}Zi(t){this.activeTargetIds=this.activeTargetIds.add(t)}tr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Xi(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class oI{constructor(){this.$r=new eI,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t){return this.$r.Zi(t),this.Br[t]||"not-current"}updateQueryState(t,n,i){this.Br[t]=n}removeLocalQueryTarget(t){this.$r.tr(t)}isLocalQueryTarget(t){return this.$r.activeTargetIds.has(t)}clearQueryState(t){delete this.Br[t]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(t){return this.$r.activeTargetIds.has(t)}start(){return this.$r=new eI,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{Lr(t){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(t){this.Qr.push(t)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){zm("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Qr)t(0)}Gr(){zm("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Qr)t(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(t){this.Wr=t.Wr,this.zr=t.zr}Hr(t){this.Jr=t}Yr(t){this.Xr=t}onMessage(t){this.Zr=t}close(){this.zr()}send(t){this.Wr(t)}eo(){this.Jr()}no(t){this.Xr(t)}so(t){this.Zr(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.io=(t.ssl?"https":"http")+"://"+t.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(t,n,i,e,o){const r=this.uo(t,n);zm("RestConnection","Sending: ",r,i);const s={};return this.ao(s,e,o),this.co(t,r,s,i).then((t=>(zm("RestConnection","Received: ",t),t)),(n=>{throw Vm("RestConnection",`${t} failed with error: `,n,"url: ",r,"request:",i),n}))}ho(t,n,i,e,o){return this.oo(t,n,i,e,o)}ao(t,n,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Lm,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((n,i)=>t[i]=n)),i&&i.headers.forEach(((n,i)=>t[i]=n))}uo(t,n){return`${this.io}/v1/${n}:${lI[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}co(t,n,i,e){return new Promise(((o,r)=>{const s=new Pm;s.listenOnce(Am.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case Cm.NO_ERROR:const n=s.getResponseJson();zm("Connection","XHR received:",JSON.stringify(n)),o(n);break;case Cm.TIMEOUT:zm("Connection",'RPC "'+t+'" timed out'),r(new Wm(Km.DEADLINE_EXCEEDED,"Request time out"));break;case Cm.HTTP_ERROR:const i=s.getStatus();if(zm("Connection",'RPC "'+t+'" failed with status:',i,"response text:",s.getResponseText()),i>0){const t=s.getResponseJson().error;if(t&&t.status&&t.message){const n=function(t){const n=t.toLowerCase().replace(/_/g,"-");return Object.values(Km).indexOf(n)>=0?n:Km.UNKNOWN}(t.status);r(new Wm(n,t.message))}else r(new Wm(Km.UNKNOWN,"Server responded with status "+s.getStatus()))}else r(new Wm(Km.UNAVAILABLE,"Connection failed."));break;default:Bm()}}finally{zm("Connection",'RPC "'+t+'" completed.')}}));const l=JSON.stringify(e);s.send(n,"POST",l,i,15)}))}lo(t,n,i){const e=[this.io,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=new Im,r=vp(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new Nm({})),this.ao(s.initMessageHeaders,n,i),Li()||ji()||Mi().indexOf("Electron/")>=0||zi()||Mi().indexOf("MSAppHost/")>=0||$i()||(s.httpHeadersOverwriteParam="$httpHeaders");const l=e.join("");zm("Connection","Creating WebChannel: "+l,s);const a=o.createWebChannel(l,s);let u=!1,c=!1;const h=new aI({Wr:t=>{c?zm("Connection","Not sending because WebChannel is closed:",t):(u||(zm("Connection","Opening WebChannel transport."),a.open(),u=!0),zm("Connection","WebChannel sending:",t),a.send(t))},zr:()=>a.close()}),d=(t,n,i)=>{t.listen(n,(t=>{try{i(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return d(a,Om.EventType.OPEN,(()=>{c||zm("Connection","WebChannel transport opened.")})),d(a,Om.EventType.CLOSE,(()=>{c||(c=!0,zm("Connection","WebChannel transport closed"),h.no())})),d(a,Om.EventType.ERROR,(t=>{c||(c=!0,Vm("Connection","WebChannel transport errored:",t),h.no(new Wm(Km.UNAVAILABLE,"The operation could not be completed")))})),d(a,Om.EventType.MESSAGE,(t=>{var n;if(!c){const i=t.data[0];qm(!!i);const e=i,o=e.error||(null===(n=e[0])||void 0===n?void 0:n.error);if(o){zm("Connection","WebChannel received error:",o);const t=o.status;let n=function(t){const n=Ew[t];if(void 0!==n)return Sw(n)}(t),i=o.message;void 0===n&&(n=Km.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),c=!0,h.no(new Wm(n,i)),a.close()}else zm("Connection","WebChannel received:",i),h.so(i)}})),d(r,Dm.STAT_EVENT,(t=>{10===t.stat?zm("Connection","Detected buffering proxy"):11===t.stat&&zm("Connection","Detected no buffering proxy")})),setTimeout((()=>{h.eo()}),0),h}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(t){return new iy(t,!0)}class dI{constructor(t,n,i=1e3,e=1.5,o=6e4){this.Yn=t,this.timerId=n,this.fo=i,this._o=e,this.wo=o,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(t){this.cancel();const n=Math.floor(this.mo+this.Eo()),i=Math.max(0,Date.now()-this.po),e=Math.max(0,n-i);e>0&&zm("ExponentialBackoff",`Backing off for ${e} ms (base delay: ${this.mo} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,e,(()=>(this.po=Date.now(),t()))),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(t,n,i,e,o,r,s,l){this.Yn=t,this.Ro=i,this.Po=e,this.bo=o,this.authCredentialsProvider=r,this.appCheckCredentialsProvider=s,this.listener=l,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new dI(t,n)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}async stop(){this.Co()&&await this.close(0)}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,(()=>this.Oo())))}Fo(t){this.$o(),this.stream.send(t)}async Oo(){if(this.xo())return this.close(0)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}async close(t,n){this.$o(),this.Bo(),this.Do.cancel(),this.Vo++,4!==t?this.Do.reset():n&&n.code===Km.RESOURCE_EXHAUSTED?(Fm(n.toString()),Fm("Using maximum backoff delay to prevent overloading the backend."),this.Do.Io()):n&&n.code===Km.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Lo(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Yr(n)}Lo(){}auth(){this.state=1;const t=this.Uo(this.Vo),n=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,i])=>{this.Vo===n&&this.qo(t,i)}),(n=>{t((()=>{const t=new Wm(Km.UNKNOWN,"Fetching auth token failed: "+n.message);return this.Ko(t)}))}))}qo(t,n){const i=this.Uo(this.Vo);this.stream=this.Go(t,n),this.stream.Hr((()=>{i((()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,(()=>(this.xo()&&(this.state=3),Promise.resolve()))),this.listener.Hr())))})),this.stream.Yr((t=>{i((()=>this.Ko(t)))})),this.stream.onMessage((t=>{i((()=>this.onMessage(t)))}))}No(){this.state=5,this.Do.To((async()=>{this.state=0,this.start()}))}Ko(t){return zm("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Uo(t){return n=>{this.Yn.enqueueAndForget((()=>this.Vo===t?n():(zm("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class pI extends fI{constructor(t,n,i,e,o,r){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,e,r),this.M=o}Go(t,n){return this.bo.lo("Listen",t,n)}onMessage(t){this.Do.reset();const n=function(t,n){let i;if("targetChange"in n){const e=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Bm()}(n.targetChange.targetChangeType||"NO_CHANGE"),o=n.targetChange.targetIds||[],r=function(t,n){return t.N?(qm(void 0===n||"string"==typeof n),vb.fromBase64String(n||"")):(qm(void 0===n||n instanceof Uint8Array),vb.fromUint8Array(n||new Uint8Array))}(t,n.targetChange.resumeToken),s=n.targetChange.cause,l=s&&function(t){const n=void 0===t.code?Km.UNKNOWN:Sw(t.code);return new Wm(n,t.message||"")}(s);i=new Xw(e,o,r,l||null)}else if("documentChange"in n){const e=n.documentChange,o=cy(t,e.document.name),r=sy(e.document.updateTime),s=new Qb({mapValue:{fields:e.document.fields}}),l=tv.newFoundDocument(o,r,s);i=new Gw(e.targetIds||[],e.removedTargetIds||[],l.key,l)}else if("documentDelete"in n){const e=n.documentDelete,o=cy(t,e.document),r=e.readTime?sy(e.readTime):ub.min(),s=tv.newNoDocument(o,r);i=new Gw([],e.removedTargetIds||[],s.key,s)}else if("documentRemove"in n){const e=n.documentRemove,o=cy(t,e.document);i=new Gw([],e.removedTargetIds||[],o,null)}else{if(!("filter"in n))return Bm();{const t=n.filter,e=new _w(t.count||0);i=new Hw(t.targetId,e)}}return i}(this.M,t),i=function(t){if(!("targetChange"in t))return ub.min();const n=t.targetChange;return n.targetIds&&n.targetIds.length?ub.min():n.readTime?sy(n.readTime):ub.min()}(t);return this.listener.Qo(n,i)}jo(t){const n={};n.database=fy(this.M),n.addTarget=function(t,n){let i;const e=n.target;return i=fv(e)?{documents:vy(t,e)}:{query:wy(t,e)},i.targetId=n.targetId,n.resumeToken.approximateByteSize()>0?i.resumeToken=oy(t,n.resumeToken):n.snapshotVersion.compareTo(ub.min())>0&&(i.readTime=ey(t,n.snapshotVersion.toTimestamp())),i}(this.M,t);const i=function(t,n){const i=function(t,n){switch(n){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Bm()}}(0,n.purpose);return null==i?null:{"goog-listen-tags":i}}(0,t);i&&(n.labels=i),this.Fo(n)}Wo(t){const n={};n.database=fy(this.M),n.removeTarget=t,this.Fo(n)}}class gI extends fI{constructor(t,n,i,e,o,r){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,e,r),this.M=o,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(t,n){return this.bo.lo("Write",t,n)}onMessage(t){if(qm(!!t.streamToken),this.lastStreamToken=t.streamToken,this.zo){this.Do.reset();const n=function(t,n){return t&&t.length>0?(qm(void 0!==n),t.map((t=>function(t,n){let i=sy(t.updateTime?t.updateTime:n);return i.isEqual(ub.min())&&(i=sy(n)),new aw(i,t.transformResults||[])}(t,n)))):[]}(t.writeResults,t.commitTime),i=sy(t.commitTime);return this.listener.Yo(i,n)}return qm(!t.writeResults||0===t.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const t={};t.database=fy(this.M),this.Fo(t)}Jo(t){const n={streamToken:this.lastStreamToken,writes:t.map((t=>my(this.M,t)))};this.Fo(n)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI extends class{}{constructor(t,n,i,e){super(),this.authCredentials=t,this.appCheckCredentials=n,this.bo=i,this.M=e,this.tu=!1}eu(){if(this.tu)throw new Wm(Km.FAILED_PRECONDITION,"The client has already been terminated.")}oo(t,n,i){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([e,o])=>this.bo.oo(t,n,i,e,o))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Km.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Wm(Km.UNKNOWN,t.toString())}))}ho(t,n,i){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([e,o])=>this.bo.ho(t,n,i,e,o))).catch((t=>{throw"FirebaseError"===t.name?(t.code===Km.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Wm(Km.UNKNOWN,t.toString())}))}terminate(){this.tu=!0}}class bI{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve()))))}au(t){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ou("Offline")))}set(t){this.cu(),this.nu=0,"Online"===t&&(this.iu=!1),this.ou(t)}ou(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}uu(t){const n=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(Fm(n),this.iu=!1):zm("OnlineStateTracker",n)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(t,n,i,e,o){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=o,this._u.Lr((()=>{i.enqueueAndForget((async()=>{SI(this)&&(zm("RemoteStore","Restarting streams for network reachability change."),await async function(t){const n=t;n.fu.add(4),await yI(n),n.wu.set("Unknown"),n.fu.delete(4),await wI(n)}(this))}))})),this.wu=new bI(i,e)}}async function wI(t){if(SI(t))for(const n of t.du)await n(!0)}async function yI(t){for(const n of t.du)await n(!1)}function xI(t,n){const i=t;i.lu.has(n.targetId)||(i.lu.set(n.targetId,n),TI(i)?EI(i):qI(i).xo()&&II(i,n))}function kI(t,n){const i=t,e=qI(i);i.lu.delete(n),e.xo()&&_I(i,n),0===i.lu.size&&(e.xo()?e.Mo():SI(i)&&i.wu.set("Unknown"))}function II(t,n){t.mu.Z(n.targetId),qI(t).jo(n)}function _I(t,n){t.mu.Z(n),qI(t).Wo(n)}function EI(t){t.mu=new Jw({getRemoteKeysForTarget:n=>t.remoteSyncer.getRemoteKeysForTarget(n),Et:n=>t.lu.get(n)||null}),qI(t).start(),t.wu.ru()}function TI(t){return SI(t)&&!qI(t).Co()&&t.lu.size>0}function SI(t){return 0===t.fu.size}function CI(t){t.mu=void 0}async function AI(t){t.lu.forEach((n=>{II(t,n)}))}async function DI(t,n){CI(t),TI(t)?(t.wu.au(n),EI(t)):t.wu.set("Unknown")}async function NI(t,n,i){if(t.wu.set("Online"),n instanceof Xw&&2===n.state&&n.cause)try{await async function(t,n){const i=n.cause;for(const e of n.targetIds)t.lu.has(e)&&(await t.remoteSyncer.rejectListen(e,i),t.lu.delete(e),t.mu.removeTarget(e))}(t,n)}catch(i){zm("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),i),await OI(t,i)}else if(n instanceof Gw?t.mu.ut(n):n instanceof Hw?t.mu._t(n):t.mu.ht(n),!i.isEqual(ub.min()))try{const n=await Uk(t.localStore);i.compareTo(n)>=0&&await function(t,n){const i=t.mu.yt(n);return i.targetChanges.forEach(((i,e)=>{if(i.resumeToken.approximateByteSize()>0){const o=t.lu.get(e);o&&t.lu.set(e,o.withResumeToken(i.resumeToken,n))}})),i.targetMismatches.forEach((n=>{const i=t.lu.get(n);if(!i)return;t.lu.set(n,i.withResumeToken(vb.EMPTY_BYTE_STRING,i.snapshotVersion)),_I(t,n);const e=new wx(i.target,n,1,i.sequenceNumber);II(t,e)})),t.remoteSyncer.applyRemoteEvent(i)}(t,i)}catch(n){zm("RemoteStore","Failed to raise snapshot:",n),await OI(t,n)}}async function OI(t,n,i){if(!ux(n))throw n;t.fu.add(1),await yI(t),t.wu.set("Offline"),i||(i=()=>Uk(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{zm("RemoteStore","Retrying IndexedDB access"),await i(),t.fu.delete(1),await wI(t)}))}function PI(t,n){return n().catch((i=>OI(t,i,n)))}async function RI(t){const n=t,i=KI(n);let e=n.hu.length>0?n.hu[n.hu.length-1].batchId:-1;for(;MI(n);)try{const t=await Bk(n.localStore,e);if(null===t){0===n.hu.length&&i.Mo();break}e=t.batchId,LI(n,t)}catch(t){await OI(n,t)}$I(n)&&jI(n)}function MI(t){return SI(t)&&t.hu.length<10}function LI(t,n){t.hu.push(n);const i=KI(t);i.xo()&&i.Ho&&i.Jo(n.mutations)}function $I(t){return SI(t)&&!KI(t).Co()&&t.hu.length>0}function jI(t){KI(t).start()}async function zI(t){KI(t).Zo()}async function FI(t){const n=KI(t);for(const i of t.hu)n.Jo(i.mutations)}async function VI(t,n,i){const e=t.hu.shift(),o=bx.from(e,n,i);await PI(t,(()=>t.remoteSyncer.applySuccessfulWrite(o))),await RI(t)}async function UI(t,n){n&&KI(t).Ho&&await async function(t,n){if(function(t){switch(t){default:return Bm();case Km.CANCELLED:case Km.UNKNOWN:case Km.DEADLINE_EXCEEDED:case Km.RESOURCE_EXHAUSTED:case Km.INTERNAL:case Km.UNAVAILABLE:case Km.UNAUTHENTICATED:return!1;case Km.INVALID_ARGUMENT:case Km.NOT_FOUND:case Km.ALREADY_EXISTS:case Km.PERMISSION_DENIED:case Km.FAILED_PRECONDITION:case Km.ABORTED:case Km.OUT_OF_RANGE:case Km.UNIMPLEMENTED:case Km.DATA_LOSS:return!0}}(i=n.code)&&i!==Km.ABORTED){const i=t.hu.shift();KI(t).ko(),await PI(t,(()=>t.remoteSyncer.rejectFailedWrite(i.batchId,n))),await RI(t)}var i}(t,n),$I(t)&&jI(t)}async function BI(t,n){const i=t;i.asyncQueue.verifyOperationInProgress(),zm("RemoteStore","RemoteStore received new credentials");const e=SI(i);i.fu.add(3),await yI(i),e&&i.wu.set("Unknown"),await i.remoteSyncer.handleCredentialChange(n),i.fu.delete(3),await wI(i)}function qI(t){return t.gu||(t.gu=function(t,n,i){const e=t;return e.eu(),new pI(n,e.bo,e.authCredentials,e.appCheckCredentials,e.M,i)
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}(t.datastore,t.asyncQueue,{Hr:AI.bind(null,t),Yr:DI.bind(null,t),Qo:NI.bind(null,t)}),t.du.push((async n=>{n?(t.gu.ko(),TI(t)?EI(t):t.wu.set("Unknown")):(await t.gu.stop(),CI(t))}))),t.gu}function KI(t){return t.yu||(t.yu=function(t,n,i){const e=t;return e.eu(),new gI(n,e.bo,e.authCredentials,e.appCheckCredentials,e.M,i)}(t.datastore,t.asyncQueue,{Hr:zI.bind(null,t),Yr:UI.bind(null,t),Xo:FI.bind(null,t),Yo:VI.bind(null,t)}),t.du.push((async n=>{n?(t.yu.ko(),await RI(t)):(await t.yu.stop(),t.hu.length>0&&(zm("RemoteStore",`Stopping write stream with ${t.hu.length} pending writes`),t.hu=[]))}))),t.yu
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class WI{constructor(t,n,i,e,o){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=e,this.removalCallback=o,this.deferred=new Gm,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((()=>{}))}static createAndSchedule(t,n,i,e,o){const r=Date.now()+i,s=new WI(t,n,r,e,o);return s.start(i),s}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Wm(Km.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function GI(t,n){if(Fm("AsyncQueue",`${n}: ${t}`),ux(t))return new Wm(Km.UNAVAILABLE,`${n}: ${t}`);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(t){this.comparator=t?(n,i)=>t(n,i)||Db.comparator(n.key,i.key):(t,n)=>Db.comparator(t.key,n.key),this.keyedMap=jw(),this.sortedSet=new Aw(this.comparator)}static emptySet(t){return new HI(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof HI))return!1;if(this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const t=n.getNext().key,e=i.getNext().key;if(!t.isEqual(e))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,n){const i=new HI;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this.pu=new Aw(Db.comparator)}track(t){const n=t.doc.key,i=this.pu.get(n);i?0!==t.type&&3===i.type?this.pu=this.pu.insert(n,t):3===t.type&&1!==i.type?this.pu=this.pu.insert(n,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.pu=this.pu.insert(n,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.pu=this.pu.insert(n,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.pu=this.pu.remove(n):1===t.type&&2===i.type?this.pu=this.pu.insert(n,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.pu=this.pu.insert(n,{type:2,doc:t.doc}):Bm():this.pu=this.pu.insert(n,t)}Iu(){const t=[];return this.pu.inorderTraversal(((n,i)=>{t.push(i)})),t}}class YI{constructor(t,n,i,e,o,r,s,l){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=e,this.mutatedKeys=o,this.fromCache=r,this.syncStateChanged=s,this.excludesMetadataChanges=l}static fromInitialDocuments(t,n,i,e){const o=[];return n.forEach((t=>{o.push({type:0,doc:t})})),new YI(t,n,HI.emptySet(n),o,i,e,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Vv(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let t=0;t<n.length;t++)if(n[t].type!==i[t].type||!n[t].doc.isEqual(i[t].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(){this.Tu=void 0,this.listeners=[]}}class QI{constructor(){this.queries=new Cw((t=>Uv(t)),Vv),this.onlineState="Unknown",this.Eu=new Set}}async function ZI(t,n){const i=t,e=n.query;let o=!1,r=i.queries.get(e);if(r||(o=!0,r=new JI),o)try{r.Tu=await i.onListen(e)}catch(t){const i=GI(t,`Initialization of query '${Bv(n.query)}' failed`);return void n.onError(i)}i.queries.set(e,r),r.listeners.push(n),n.Au(i.onlineState),r.Tu&&n.Ru(r.Tu)&&e_(i)}async function t_(t,n){const i=t,e=n.query;let o=!1;const r=i.queries.get(e);if(r){const t=r.listeners.indexOf(n);t>=0&&(r.listeners.splice(t,1),o=0===r.listeners.length)}if(o)return i.queries.delete(e),i.onUnlisten(e)}function n_(t,n){const i=t;let e=!1;for(const t of n){const n=i.queries.get(t.query);if(n){for(const i of n.listeners)i.Ru(t)&&(e=!0);n.Tu=t}}e&&e_(i)}function i_(t,n,i){const e=t,o=e.queries.get(n);if(o)for(const t of o.listeners)t.onError(i);e.queries.delete(n)}function e_(t){t.Eu.forEach((t=>{t.next()}))}class o_{constructor(t,n,i){this.query=t,this.Pu=n,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=i||{}}Ru(t){if(!this.options.includeMetadataChanges){const n=[];for(const i of t.docChanges)3!==i.type&&n.push(i);t=new YI(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let n=!1;return this.bu?this.vu(t)&&(this.Pu.next(t),n=!0):this.Su(t,this.onlineState)&&(this.Du(t),n=!0),this.Vu=t,n}onError(t){this.Pu.error(t)}Au(t){this.onlineState=t;let n=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,t)&&(this.Du(this.Vu),n=!0),n}Su(t,n){return!t.fromCache||!(this.options.Cu&&"Offline"!==n||t.docs.isEmpty()&&"Offline"!==n)}vu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(t){t=YI.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.bu=!0,this.Pu.next(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(t){this.key=t}}class s_{constructor(t){this.key=t}}class l_{constructor(t,n){this.query=t,this.$u=n,this.Bu=null,this.current=!1,this.Lu=Uw(),this.mutatedKeys=Uw(),this.Uu=Kv(t),this.qu=new HI(this.Uu)}get Ku(){return this.$u}Gu(t,n){const i=n?n.Qu:new XI,e=n?n.qu:this.qu;let o=n?n.mutatedKeys:this.mutatedKeys,r=e,s=!1;const l=Pv(this.query)&&e.size===this.query.limit?e.last():null,a=Rv(this.query)&&e.size===this.query.limit?e.first():null;if(t.inorderTraversal(((t,n)=>{const u=e.get(t),c=qv(this.query,n)?n:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(i.track({type:3,doc:c}),f=!0):this.ju(u,c)||(i.track({type:2,doc:c}),f=!0,(l&&this.Uu(c,l)>0||a&&this.Uu(c,a)<0)&&(s=!0)):!u&&c?(i.track({type:0,doc:c}),f=!0):u&&!c&&(i.track({type:1,doc:u}),f=!0,(l||a)&&(s=!0)),f&&(c?(r=r.add(c),o=d?o.add(t):o.delete(t)):(r=r.delete(t),o=o.delete(t)))})),Pv(this.query)||Rv(this.query))for(;r.size>this.query.limit;){const t=Pv(this.query)?r.last():r.first();r=r.delete(t.key),o=o.delete(t.key),i.track({type:1,doc:t})}return{qu:r,Qu:i,ni:s,mutatedKeys:o}}ju(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i){const e=this.qu;this.qu=t.qu,this.mutatedKeys=t.mutatedKeys;const o=t.Qu.Iu();o.sort(((t,n)=>function(t,n){const i=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Bm()}};return i(t)-i(n)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t.type,n.type)||this.Uu(t.doc,n.doc))),this.Wu(i);const r=n?this.zu():[],s=0===this.Lu.size&&this.current?1:0,l=s!==this.Bu;return this.Bu=s,0!==o.length||l?{snapshot:new YI(this.query,t.qu,e,o,t.mutatedKeys,0===s,l,!1),Hu:r}:{Hu:r}}Au(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new XI,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(t){return!this.$u.has(t)&&!!this.qu.has(t)&&!this.qu.get(t).hasLocalMutations}Wu(t){t&&(t.addedDocuments.forEach((t=>this.$u=this.$u.add(t))),t.modifiedDocuments.forEach((()=>{})),t.removedDocuments.forEach((t=>this.$u=this.$u.delete(t))),this.current=t.current)}zu(){if(!this.current)return[];const t=this.Lu;this.Lu=Uw(),this.qu.forEach((t=>{this.Ju(t.key)&&(this.Lu=this.Lu.add(t.key))}));const n=[];return t.forEach((t=>{this.Lu.has(t)||n.push(new s_(t))})),this.Lu.forEach((i=>{t.has(i)||n.push(new r_(i))})),n}Yu(t){this.$u=t.li,this.Lu=Uw();const n=this.Gu(t.documents);return this.applyChanges(n,!0)}Xu(){return YI.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class a_{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class u_{constructor(t){this.key=t,this.Zu=!1}}class c_{constructor(t,n,i,e,o,r){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=e,this.currentUser=o,this.maxConcurrentLimboResolutions=r,this.ta={},this.ea=new Cw((t=>Uv(t)),Vv),this.na=new Map,this.sa=new Set,this.ia=new Aw(Db.comparator),this.ra=new Map,this.oa=new Hk,this.ua={},this.aa=new Map,this.ca=ck.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}async function h_(t,n){const i=function(t){const n=t;return n.remoteStore.remoteSyncer.applyRemoteEvent=f_.bind(null,n),n.remoteStore.remoteSyncer.getRemoteKeysForTarget=S_.bind(null,n),n.remoteStore.remoteSyncer.rejectListen=g_.bind(null,n),n.ta.Qo=n_.bind(null,n.eventManager),n.ta.fa=i_.bind(null,n.eventManager),n}(t);let e,o;const r=i.ea.get(n);if(r)e=r.targetId,i.sharedClientState.addLocalQueryTarget(e),o=r.view.Xu();else{const t=await function(t,n){const i=t;return i.persistence.runTransaction("Allocate target","readwrite",(t=>{let e;return i.fs.getTargetData(t,n).next((o=>o?(e=o,ox.resolve(e)):i.fs.allocateTargetId(t).next((o=>(e=new wx(n,o,0,t.currentSequenceNumber),i.fs.addTargetData(t,e).next((()=>e)))))))})).then((t=>{const e=i.ii.get(t.targetId);return(null===e||t.snapshotVersion.compareTo(e.snapshotVersion)>0)&&(i.ii=i.ii.insert(t.targetId,t),i.ri.set(n,t.targetId)),t}))}(i.localStore,zv(n));i.isPrimaryClient&&xI(i.remoteStore,t);const r=i.sharedClientState.addLocalQueryTarget(t.targetId);e=t.targetId,o=await async function(t,n,i,e){t.la=(n,i,e)=>async function(t,n,i,e){let o=n.view.Gu(i);o.ni&&(o=await Kk(t.localStore,n.query,!1).then((({documents:t})=>n.view.Gu(t,o))));const r=e&&e.targetChanges.get(n.targetId),s=n.view.applyChanges(o,t.isPrimaryClient,r);return k_(t,n.targetId,s.Hu),s.snapshot}(t,n,i,e);const o=await Kk(t.localStore,n,!0),r=new l_(n,o.li),s=r.Gu(o.documents),l=Ww.createSynthesizedTargetChangeForCurrentChange(i,e&&"Offline"!==t.onlineState),a=r.applyChanges(s,t.isPrimaryClient,l);k_(t,i,a.Hu);const u=new a_(n,i,r);return t.ea.set(n,u),t.na.has(i)?t.na.get(i).push(n):t.na.set(i,[n]),a.snapshot}(i,n,e,"current"===r)}return o}async function d_(t,n){const i=t,e=i.ea.get(n),o=i.na.get(e.targetId);if(o.length>1)return i.na.set(e.targetId,o.filter((t=>!Vv(t,n)))),void i.ea.delete(n);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(e.targetId),i.sharedClientState.isActiveQueryTarget(e.targetId)||await qk(i.localStore,e.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(e.targetId),kI(i.remoteStore,e.targetId),y_(i,e.targetId)})).catch(gk)):(y_(i,e.targetId),await qk(i.localStore,e.targetId,!0))}async function f_(t,n){const i=t;try{const t=await function(t,n){const i=t,e=n.snapshotVersion;let o=i.ii;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const r=i.ui.newChangeBuffer({trackRemovals:!0});o=i.ii;const s=[];n.targetChanges.forEach(((r,l)=>{const a=o.get(l);if(!a)return;s.push(i.fs.removeMatchingKeys(t,r.removedDocuments,l).next((()=>i.fs.addMatchingKeys(t,r.addedDocuments,l))));let u=a.withSequenceNumber(t.currentSequenceNumber);n.targetMismatches.has(l)?u=u.withResumeToken(vb.EMPTY_BYTE_STRING,ub.min()).withLastLimboFreeSnapshotVersion(ub.min()):r.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(r.resumeToken,e)),o=o.insert(l,u),function(t,n,i){return 0===t.resumeToken.approximateByteSize()||n.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size>0}(a,u,r)&&s.push(i.fs.updateTargetData(t,u))}));let l=Lw();if(n.documentUpdates.forEach((e=>{n.resolvedLimboDocuments.has(e)&&s.push(i.persistence.referenceDelegate.updateLimboDocument(t,e))})),s.push(function(t,n,i){let e=Uw();return i.forEach((t=>e=e.add(t))),n.getEntries(t,e).next((t=>{let e=Lw();return i.forEach(((i,o)=>{const r=t.get(i);o.isNoDocument()&&o.version.isEqual(ub.min())?(n.removeEntry(i,o.readTime),e=e.insert(i,o)):!r.isValidDocument()||o.version.compareTo(r.version)>0||0===o.version.compareTo(r.version)&&r.hasPendingWrites?(n.addEntry(o),e=e.insert(i,o)):zm("LocalStore","Ignoring outdated watch update for ",i,". Current version:",r.version," Watch version:",o.version)})),e}))}(t,r,n.documentUpdates).next((t=>{l=t}))),!e.isEqual(ub.min())){const n=i.fs.getLastRemoteSnapshotVersion(t).next((()=>i.fs.setTargetsMetadata(t,t.currentSequenceNumber,e)));s.push(n)}return ox.waitFor(s).next((()=>r.apply(t))).next((()=>i.ci.Gs(t,l))).next((()=>l))})).then((t=>(i.ii=o,t)))}(i.localStore,n);n.targetChanges.forEach(((t,n)=>{const e=i.ra.get(n);e&&(qm(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?e.Zu=!0:t.modifiedDocuments.size>0?qm(e.Zu):t.removedDocuments.size>0&&(qm(e.Zu),e.Zu=!1))})),await E_(i,t,n)}catch(t){await gk(t)}}function p_(t,n,i){const e=t;if(e.isPrimaryClient&&0===i||!e.isPrimaryClient&&1===i){const t=[];e.ea.forEach(((i,e)=>{const o=e.view.Au(n);o.snapshot&&t.push(o.snapshot)})),function(t,n){const i=t;i.onlineState=n;let e=!1;i.queries.forEach(((t,i)=>{for(const t of i.listeners)t.Au(n)&&(e=!0)})),e&&e_(i)}(e.eventManager,n),t.length&&e.ta.Qo(t),e.onlineState=n,e.isPrimaryClient&&e.sharedClientState.setOnlineState(n)}}async function g_(t,n,i){const e=t;e.sharedClientState.updateQueryState(n,"rejected",i);const o=e.ra.get(n),r=o&&o.key;if(r){let t=new Aw(Db.comparator);t=t.insert(r,tv.newNoDocument(r,ub.min()));const i=Uw().add(r),o=new Kw(ub.min(),new Map,new Ow(rb),t,i);await f_(e,o),e.ia=e.ia.remove(r),e.ra.delete(n),__(e)}else await qk(e.localStore,n,!1).then((()=>y_(e,n,i))).catch(gk)}async function m_(t,n){const i=t,e=n.batch.batchId;try{const t=await function(t,n){const i=t;return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const e=n.batch.keys(),o=i.ui.newChangeBuffer({trackRemovals:!0});return function(t,n,i,e){const o=i.batch,r=o.keys();let s=ox.resolve();return r.forEach((t=>{s=s.next((()=>e.getEntry(n,t))).next((n=>{const r=i.docVersions.get(t);qm(null!==r),n.version.compareTo(r)<0&&(o.applyToRemoteDocument(n,i),n.isValidDocument()&&(n.setReadTime(i.commitVersion),e.addEntry(n)))}))})),s.next((()=>t.Bs.removeMutationBatch(n,o)))}(i,t,n,o).next((()=>o.apply(t))).next((()=>i.Bs.performConsistencyCheck(t))).next((()=>i.ci.Ks(t,e)))}))}(i.localStore,n);w_(i,e,null),v_(i,e),i.sharedClientState.updateMutationState(e,"acknowledged"),await E_(i,t)}catch(t){await gk(t)}}async function b_(t,n,i){const e=t;try{const t=await function(t,n){const i=t;return i.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let e;return i.Bs.lookupMutationBatch(t,n).next((n=>(qm(null!==n),e=n.keys(),i.Bs.removeMutationBatch(t,n)))).next((()=>i.Bs.performConsistencyCheck(t))).next((()=>i.ci.Ks(t,e)))}))}(e.localStore,n);w_(e,n,i),v_(e,n),e.sharedClientState.updateMutationState(n,"rejected",i),await E_(e,t)}catch(i){await gk(i)}}function v_(t,n){(t.aa.get(n)||[]).forEach((t=>{t.resolve()})),t.aa.delete(n)}function w_(t,n,i){const e=t;let o=e.ua[e.currentUser.toKey()];if(o){const t=o.get(n);t&&(i?t.reject(i):t.resolve(),o=o.remove(n)),e.ua[e.currentUser.toKey()]=o}}function y_(t,n,i=null){t.sharedClientState.removeLocalQueryTarget(n);for(const e of t.na.get(n))t.ea.delete(e),i&&t.ta.fa(e,i);t.na.delete(n),t.isPrimaryClient&&t.oa.Pi(n).forEach((n=>{t.oa.containsKey(n)||x_(t,n)}))}function x_(t,n){t.sa.delete(n.path.canonicalString());const i=t.ia.get(n);null!==i&&(kI(t.remoteStore,i),t.ia=t.ia.remove(n),t.ra.delete(i),__(t))}function k_(t,n,i){for(const e of i)e instanceof r_?(t.oa.addReference(e.key,n),I_(t,e)):e instanceof s_?(zm("SyncEngine","Document no longer in limbo: "+e.key),t.oa.removeReference(e.key,n),t.oa.containsKey(e.key)||x_(t,e.key)):Bm()}function I_(t,n){const i=n.key,e=i.path.canonicalString();t.ia.get(i)||t.sa.has(e)||(zm("SyncEngine","New document in limbo: "+i),t.sa.add(e),__(t))}function __(t){for(;t.sa.size>0&&t.ia.size<t.maxConcurrentLimboResolutions;){const n=t.sa.values().next().value;t.sa.delete(n);const i=new Db(pb.fromString(n)),e=t.ca.next();t.ra.set(e,new u_(i)),t.ia=t.ia.insert(i,e),xI(t.remoteStore,new wx(zv(Ov(i.path)),e,2,ib.A))}}async function E_(t,n,i){const e=t,o=[],r=[],s=[];e.ea.isEmpty()||(e.ea.forEach(((t,l)=>{s.push(e.la(l,n,i).then((t=>{if(t){e.isPrimaryClient&&e.sharedClientState.updateQueryState(l.targetId,t.fromCache?"not-current":"current"),o.push(t);const n=$k.Ys(l.targetId,t);r.push(n)}})))})),await Promise.all(s),e.ta.Qo(o),await async function(t,n){const i=t;try{await i.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>ox.forEach(n,(n=>ox.forEach(n.Hs,(e=>i.persistence.referenceDelegate.addReference(t,n.targetId,e))).next((()=>ox.forEach(n.Js,(e=>i.persistence.referenceDelegate.removeReference(t,n.targetId,e)))))))))}catch(t){if(!ux(t))throw t;zm("LocalStore","Failed to update sequence numbers: "+t)}for(const t of n){const n=t.targetId;if(!t.fromCache){const t=i.ii.get(n),e=t.withLastLimboFreeSnapshotVersion(t.snapshotVersion);i.ii=i.ii.insert(n,e)}}}(e.localStore,r))}async function T_(t,n){const i=t;if(!i.currentUser.isEqual(n)){zm("SyncEngine","User change. New user:",n.toKey());const t=await Vk(i.localStore,n);i.currentUser=n,function(t){t.aa.forEach((t=>{t.forEach((t=>{t.reject(new Wm(Km.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.aa.clear()}(i),i.sharedClientState.handleUserChange(n,t.removedBatchIds,t.addedBatchIds),await E_(i,t.hi)}}function S_(t,n){const i=t,e=i.ra.get(n);if(e&&e.Zu)return Uw().add(e.key);{let t=Uw();const e=i.na.get(n);if(!e)return t;for(const n of e){const e=i.ea.get(n);t=t.unionWith(e.view.Ku)}return t}}function C_(t){const n=t;return n.remoteStore.remoteSyncer.applySuccessfulWrite=m_.bind(null,n),n.remoteStore.remoteSyncer.rejectFailedWrite=b_.bind(null,n),n}class A_{constructor(){this.synchronizeTabs=!1}async initialize(t){this.M=hI(t.databaseInfo.databaseId),this.sharedClientState=this._a(t),this.persistence=this.wa(t),await this.persistence.start(),this.gcScheduler=this.ma(t),this.localStore=this.ga(t)}ma(t){return null}ga(t){return Fk(this.persistence,new jk,t.initialUser,this.M)}wa(t){return new tI(iI.zi,this.M)}_a(t){return new oI}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class D_ extends A_{constructor(t,n,i){super(),this.ya=t,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.ya.initialize(this,t),await C_(this.ya.syncEngine),await RI(this.ya.remoteStore),await this.persistence.Ts((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(this.localStore),Promise.resolve())))}ga(t){return Fk(this.persistence,new jk,t.initialUser,this.M)}ma(t){return new vk(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)}wa(t){const n=function(t,n){let i=t.projectId;return t.isDefaultDatabase||(i+="."+t.database),"firestore/"+n+"/"+i+"/"}(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?ik.withCacheSize(this.cacheSizeBytes):ik.DEFAULT;return new Pk(this.synchronizeTabs,n,t.clientId,i,t.asyncQueue,"undefined"!=typeof window?window:null,cI(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(t){return new oI}}class N_{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>p_(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=T_.bind(null,this.syncEngine),await async function(t,n){const i=t;n?(i.fu.delete(2),await wI(i)):n||(i.fu.add(2),await yI(i),i.wu.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new QI}createDatastore(t){const n=hI(t.databaseInfo.databaseId),i=new uI(t.databaseInfo);return function(t,n,i,e){return new mI(t,n,i,e)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return n=this.localStore,i=this.datastore,e=t.asyncQueue,o=t=>p_(this.syncEngine,t,0),r=sI.vt()?new sI:new rI,new vI(n,i,e,o,r);var n,i,e,o,r}createSyncEngine(t,n){return function(t,n,i,e,o,r,s){const l=new c_(t,n,i,e,o,r);return s&&(l.ha=!0),l}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}terminate(){return async function(t){const n=t;zm("RemoteStore","RemoteStore shutting down."),n.fu.add(5),await yI(n),n._u.shutdown(),n.wu.set("Unknown")}(this.remoteStore)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.pa(this.observer.next,t)}error(t){this.observer.error?this.pa(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}Ia(){this.muted=!0}pa(t,n){this.muted||setTimeout((()=>{this.muted||t(n)}),0)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(t,n,i,e){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=e,this.user=Mm.UNAUTHENTICATED,this.clientId=ob.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,(async t=>{zm("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(i,(t=>(zm("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Wm(Km.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Gm;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=GI(n,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}async function R_(t,n){t.asyncQueue.verifyOperationInProgress(),zm("FirestoreClient","Initializing OfflineComponentProvider");const i=await t.getConfiguration();await n.initialize(i);let e=i.initialUser;t.setCredentialChangeListener((async t=>{e.isEqual(t)||(await Vk(n.localStore,t),e=t)})),n.persistence.setDatabaseDeletedListener((()=>t.terminate())),t.offlineComponents=n}async function M_(t,n){t.asyncQueue.verifyOperationInProgress();const i=await async function(t){return t.offlineComponents||(zm("FirestoreClient","Using default OfflineComponentProvider"),await R_(t,new A_)),t.offlineComponents}(t);zm("FirestoreClient","Initializing OnlineComponentProvider");const e=await t.getConfiguration();await n.initialize(i,e),t.setCredentialChangeListener((t=>BI(n.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,i)=>BI(n.remoteStore,i))),t.onlineComponents=n}async function L_(t){return t.onlineComponents||(zm("FirestoreClient","Using default OnlineComponentProvider"),await M_(t,new N_)),t.onlineComponents}async function $_(t){const n=await L_(t),i=n.eventManager;return i.onListen=h_.bind(null,n.syncEngine),i.onUnlisten=d_.bind(null,n.syncEngine),i}const j_=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(t,n,i){if(!i)throw new Wm(Km.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${n}.`)}function F_(t){if(!Db.isDocumentKey(t))throw new Wm(Km.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function V_(t){if(Db.isDocumentKey(t))throw new Wm(Km.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function U_(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const n=function(t){return t.constructor?t.constructor.name:null}(t);return n?`a custom ${n} object`:"an object"}}return"function"==typeof t?"a function":Bm()}function B_(t,n){if("_delegate"in t&&(t=t._delegate),!(t instanceof n)){if(n.name===t.constructor.name)throw new Wm(Km.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=U_(t);throw new Wm(Km.INVALID_ARGUMENT,`Expected type '${n.name}', but it was: ${i}`)}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class q_{constructor(t){var n;if(void 0===t.host){if(void 0!==t.ssl)throw new Wm(Km.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Wm(Km.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,function(t,n,i,e){if(!0===n&&!0===e)throw new Wm(Km.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(t,n,i){this._authCredentials=n,this._appCheckCredentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new q_({}),this._settingsFrozen=!1,t instanceof Sb?this._databaseId=t:(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Wm(Km.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sb(t.options.projectId)}(t))}get app(){if(!this._app)throw new Wm(Km.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Wm(Km.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new q_(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new Xm;switch(t.type){case"gapi":const n=t.client;return qm(!("object"!=typeof n||null===n||!n.auth||!n.auth.getAuthHeaderValueForFirstParty)),new Zm(n,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Wm(Km.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=j_.get(t);n&&(zm("ComponentProvider","Removing Datastore"),j_.delete(t),n.terminate())}(this),Promise.resolve()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class W_{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new H_(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new W_(this.firestore,t,this._key)}}class G_{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new G_(this.firestore,t,this._query)}}class H_ extends G_{constructor(t,n,i){super(t,n,Ov(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new W_(this.firestore,null,new Db(t))}withConverter(t){return new H_(this.firestore,t,this._path)}}function X_(t,n,...i){if(t=ae(t),1===arguments.length&&(n=ob.R()),z_("doc","path",n),t instanceof K_){const e=pb.fromString(n,...i);return F_(e),new W_(t,null,new Db(e))}{if(!(t instanceof W_||t instanceof H_))throw new Wm(Km.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const e=t._path.child(pb.fromString(n,...i));return F_(e),new W_(t.firestore,t instanceof H_?t.converter:null,new Db(e))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new dI(this,"async_queue_retry"),this.qa=()=>{const t=cI();t&&zm("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const t=cI();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Ka(),this.Ga(t)}enterRestrictedMode(t){if(!this.Oa){this.Oa=!0,this.La=t||!1;const n=cI();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.qa)}}enqueue(t){if(this.Ka(),this.Oa)return new Promise((()=>{}));const n=new Gm;return this.Ga((()=>this.Oa&&this.La?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Ma.push(t),this.Qa())))}async Qa(){if(0!==this.Ma.length){try{await this.Ma[0](),this.Ma.shift(),this.Do.reset()}catch(t){if(!ux(t))throw t;zm("AsyncQueue","Operation failed with retryable error: "+t)}this.Ma.length>0&&this.Do.To((()=>this.Qa()))}}Ga(t){const n=this.ka.then((()=>(this.Ba=!0,t().catch((t=>{throw this.$a=t,this.Ba=!1,Fm("INTERNAL UNHANDLED ERROR: ",function(t){let n=t.message||"";return t.stack&&(n=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)),t})).then((t=>(this.Ba=!1,t))))));return this.ka=n,n}enqueueAfterDelay(t,n,i){this.Ka(),this.Ua.indexOf(t)>-1&&(n=0);const e=WI.createAndSchedule(this,t,n,i,(t=>this.ja(t)));return this.Fa.push(e),e}Ka(){this.$a&&Bm()}verifyOperationInProgress(){}async Wa(){let t;do{t=this.ka,await t}while(t!==this.ka)}za(t){for(const n of this.Fa)if(n.timerId===t)return!0;return!1}Ha(t){return this.Wa().then((()=>{this.Fa.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const n of this.Fa)if(n.skipDelay(),"all"!==t&&n.timerId===t)break;return this.Wa()}))}Ja(t){this.Ua.push(t)}ja(t){const n=this.Fa.indexOf(t);this.Fa.splice(n,1)}}function J_(t){return function(t){if("object"!=typeof t||null===t)return!1;const n=t;for(const t of["next","error","complete"])if(t in n&&"function"==typeof n[t])return!0;return!1}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)}class Q_ extends K_{constructor(t,n,i){super(t,n,i),this.type="firestore",this._queue=new Y_,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||tE(this),this._firestoreClient.terminate()}}function Z_(t){return t._firestoreClient||tE(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function tE(t){var n;const i=t._freezeSettings(),e=function(t,n,i,e){return new Tb(t,n,i,e.host,e.ssl,e.experimentalForceLongPolling,e.experimentalAutoDetectLongPolling,e.useFetchStreams)}(t._databaseId,(null===(n=t._app)||void 0===n?void 0:n.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new P_(t._authCredentials,t._appCheckCredentials,t._queue,e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class nE{constructor(...t){for(let n=0;n<t.length;++n)if(0===t[n].length)throw new Wm(Km.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mb(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(t){this._byteString=t}static fromBase64String(t){try{return new iE(vb.fromBase64String(t))}catch(t){throw new Wm(Km.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new iE(vb.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(t){this._methodName=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Wm(Km.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Wm(Km.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return rb(this._lat,t._lat)||rb(this._long,t._long)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE=/^__.*__$/;class sE{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return null!==this.fieldMask?new vw(t,this.data,this.fieldMask,n,this.fieldTransforms):new bw(t,this.data,n,this.fieldTransforms)}}class lE{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new vw(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function aE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Bm()}}class uE{constructor(t,n,i,e,o,r){this.settings=t,this.databaseId=n,this.M=i,this.ignoreUndefinedProperties=e,void 0===o&&this.Ya(),this.fieldTransforms=o||[],this.fieldMask=r||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(t){return new uE(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(t){var n;const i=null===(n=this.path)||void 0===n?void 0:n.child(t),e=this.Za({path:i,ec:!1});return e.nc(t),e}sc(t){var n;const i=null===(n=this.path)||void 0===n?void 0:n.child(t),e=this.Za({path:i,ec:!1});return e.Ya(),e}ic(t){return this.Za({path:void 0,ec:!0})}rc(t){return xE(t,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(t){return void 0!==this.fieldMask.find((n=>t.isPrefixOf(n)))||void 0!==this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))}Ya(){if(this.path)for(let t=0;t<this.path.length;t++)this.nc(this.path.get(t))}nc(t){if(0===t.length)throw this.rc("Document fields must not be empty");if(aE(this.Xa)&&rE.test(t))throw this.rc('Document fields cannot begin and end with "__"')}}class cE{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=i||hI(t)}ac(t,n,i,e=!1){return new uE({Xa:t,methodName:n,uc:i,path:mb.emptyPath(),ec:!1,oc:e},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function hE(t){const n=t._freezeSettings(),i=hI(t._databaseId);return new cE(t._databaseId,!!n.ignoreUndefinedProperties,i)}function dE(t,n,i,e,o,r={}){const s=t.ac(r.merge||r.mergeFields?2:0,n,i,o);bE("Data must be an object, but it was:",s,e);const l=gE(e,s);let a,u;if(r.merge)a=new bb(s.fieldMask),u=s.fieldTransforms;else if(r.mergeFields){const t=[];for(const e of r.mergeFields){const o=vE(n,e,i);if(!s.contains(o))throw new Wm(Km.INVALID_ARGUMENT,`Field '${o}' is specified in your field mask but missing from your input data.`);kE(t,o)||t.push(o)}a=new bb(t),u=s.fieldTransforms.filter((t=>a.covers(t.field)))}else a=null,u=s.fieldTransforms;return new sE(new Qb(l),a,u)}class fE extends eE{_toFieldTransform(t){if(2!==t.Xa)throw t.rc(1===t.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof fE}}function pE(t,n){if(mE(t=ae(t)))return bE("Unsupported field value:",n,t),gE(t,n);if(t instanceof eE)return function(t,n){if(!aE(n.Xa))throw n.rc(`${t._methodName}() can only be used with update() and set()`);if(!n.path)throw n.rc(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(n);i&&n.fieldTransforms.push(i)}(t,n),null;if(void 0===t&&n.ignoreUndefinedProperties)return null;if(n.path&&n.fieldMask.push(n.path),t instanceof Array){if(n.settings.ec&&4!==n.Xa)throw n.rc("Nested arrays are not supported");return function(t,n){const i=[];let e=0;for(const o of t){let t=pE(o,n.ic(e));null==t&&(t={nullValue:"NULL_VALUE"}),i.push(t),e++}return{arrayValue:{values:i}}}(t,n)}return function(t,n){if(null===(t=ae(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return function(t,n){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!Ab(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(n)?Hv(n):Gv(t,n)}(n.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=ab.fromDate(t);return{timestampValue:ey(n.M,i)}}if(t instanceof ab){const i=new ab(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ey(n.M,i)}}if(t instanceof oE)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof iE)return{bytesValue:oy(n.M,t._byteString)};if(t instanceof W_){const i=n.databaseId,e=t.firestore._databaseId;if(!e.isEqual(i))throw n.rc(`Document reference is for database ${e.projectId}/${e.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ly(t.firestore._databaseId||n.databaseId,t._key.path)}}throw n.rc(`Unsupported field value: ${U_(t)}`)}(t,n)}function gE(t,n){const i={};return db(t)?n.path&&n.path.length>0&&n.fieldMask.push(n.path):hb(t,((t,e)=>{const o=pE(e,n.tc(t));null!=o&&(i[t]=o)})),{mapValue:{fields:i}}}function mE(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ab||t instanceof oE||t instanceof iE||t instanceof W_||t instanceof eE)}function bE(t,n,i){if(!mE(i)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(i)){const e=U_(i);throw n.rc("an object"===e?t+" a custom object":t+" "+e)}}function vE(t,n,i){if((n=ae(n))instanceof nE)return n._internalPath;if("string"==typeof n)return yE(t,n);throw xE("Field path arguments must be of type string or ",t,!1,void 0,i)}const wE=new RegExp("[~\\*/\\[\\]]");function yE(t,n,i){if(n.search(wE)>=0)throw xE(`Invalid field path (${n}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,i);try{return new nE(...n.split("."))._internalPath}catch(e){throw xE(`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,i)}}function xE(t,n,i,e,o){const r=e&&!e.isEmpty(),s=void 0!==o;let l=`Function ${n}() called with invalid data`;i&&(l+=" (via `toFirestore()`)"),l+=". ";let a="";return(r||s)&&(a+=" (found",r&&(a+=` in field ${e}`),s&&(a+=` in document ${o}`),a+=")"),new Wm(Km.INVALID_ARGUMENT,l+t+a)}function kE(t,n){return t.some((t=>t.isEqual(n)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(t,n,i,e,o){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=e,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new W_(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new _E(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(EE("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n)}}}class _E extends IE{data(){return super.data()}}function EE(t,n){return"string"==typeof n?yE(t,n):n instanceof nE?n._internalPath:n._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class SE extends IE{constructor(t,n,i,e,o,r){super(t,n,i,e,r),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new CE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(EE("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class CE extends SE{data(t={}){return super.data(t)}}class AE{constructor(t,n,i,e){this._firestore=t,this._userDataWriter=n,this._snapshot=e,this.metadata=new TE(e.hasPendingWrites,e.fromCache),this.query=i}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,n){this._snapshot.docs.forEach((i=>{t.call(n,new CE(this._firestore,this._userDataWriter,i.key,i,new TE(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Wm(Km.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(t,n){if(t._snapshot.oldDocs.isEmpty()){let n=0;return t._snapshot.docChanges.map((i=>({type:"added",doc:new CE(t._firestore,t._userDataWriter,i.doc.key,i.doc,new TE(t._snapshot.mutatedKeys.has(i.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++})))}{let i=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>n||3!==t.type)).map((n=>{const e=new CE(t._firestore,t._userDataWriter,n.doc.key,n.doc,new TE(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);let o=-1,r=-1;return 0!==n.type&&(o=i.indexOf(n.doc.key),i=i.delete(n.doc.key)),1!==n.type&&(i=i.add(n.doc),r=i.indexOf(n.doc.key)),{type:DE(n.type),doc:e,oldIndex:o,newIndex:r}}))}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function DE(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Bm()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(t){if(Rv(t)&&0===t.explicitOrderBy.length)throw new Wm(Km.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class OE{}class PE extends OE{constructor(t,n,i){super(),this.lc=t,this.fc=n,this.dc=i,this.type="where"}_apply(t){const n=hE(t.firestore),i=function(t,n,i,e,o,r,s){let l;if(o.isKeyField()){if("array-contains"===r||"array-contains-any"===r)throw new Wm(Km.INVALID_ARGUMENT,`Invalid Query. You can't perform '${r}' queries on documentId().`);if("in"===r||"not-in"===r){jE(s,r);const n=[];for(const i of s)n.push($E(e,t,i));l={arrayValue:{values:n}}}else l=$E(e,t,s)}else"in"!==r&&"not-in"!==r&&"array-contains-any"!==r||jE(s,r),l=function(t,n,i,e=!1){return pE(i,t.ac(e?4:3,"where"))}(i,0,s,"in"===r||"not-in"===r);const a=bv.create(o,r,l);return function(t,n){if(n.S()){const i=Lv(t);if(null!==i&&!i.isEqual(n.field))throw new Wm(Km.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${n.field.toString()}'`);const e=Mv(t);null!==e&&zE(0,n.field,e)}const i=function(t,n){for(const i of t.filters)if(n.indexOf(i.op)>=0)return i.op;return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(n.op));if(null!==i)throw new Wm(Km.INVALID_ARGUMENT,i===n.op?`Invalid query. You cannot use more than one '${n.op.toString()}' filter.`:`Invalid query. You cannot use '${n.op.toString()}' filters with '${i.toString()}' filters.`)}(t,a),a}(t._query,0,n,t.firestore._databaseId,this.lc,this.fc,this.dc);return new G_(t.firestore,t.converter,function(t,n){const i=t.filters.concat([n]);return new Nv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),i,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,i))}}function RE(t,n,i){const e=n,o=EE("where",t);return new PE(o,e,i)}class ME extends OE{constructor(t,n){super(),this.lc=t,this._c=n,this.type="orderBy"}_apply(t){const n=function(t,n,i){if(null!==t.startAt)throw new Wm(Km.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Wm(Km.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const e=new Sv(n,i);return function(t,n){if(null===Mv(t)){const i=Lv(t);null!==i&&zE(0,i,n.field)}}(t,e),e}(t._query,this.lc,this._c);return new G_(t.firestore,t.converter,function(t,n){const i=t.explicitOrderBy.concat([n]);return new Nv(t.path,t.collectionGroup,i,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))}}class LE extends OE{constructor(t,n,i){super(),this.type=t,this.wc=n,this.mc=i}_apply(t){return new G_(t.firestore,t.converter,Fv(t._query,this.wc,this.mc))}}function $E(t,n,i){if("string"==typeof(i=ae(i))){if(""===i)throw new Wm(Km.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$v(n)&&-1!==i.indexOf("/"))throw new Wm(Km.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const e=n.path.child(pb.fromString(i));if(!Db.isDocumentKey(e))throw new Wm(Km.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${e}' is not because it has an odd number of segments (${e.length}).`);return Fb(t,new Db(e))}if(i instanceof W_)return Fb(t,i._key);throw new Wm(Km.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${U_(i)}.`)}function jE(t,n){if(!Array.isArray(t)||0===t.length)throw new Wm(Km.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${n.toString()}' filters.`);if(t.length>10)throw new Wm(Km.INVALID_ARGUMENT,`Invalid Query. '${n.toString()}' filters support a maximum of 10 elements in the value array.`)}function zE(t,n,i){if(!i.isEqual(n))throw new Wm(Km.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${n.toString()}' and so you must also use '${n.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${i.toString()}' instead.`)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function FE(t,n,i){let e;return e=t?i&&(i.merge||i.mergeFields)?t.toFirestore(n,i):t.toFirestore(n):n,e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE extends class{convertValue(t,n="none"){switch(Pb(t)){case 0:return null;case 1:return t.booleanValue;case 2:return xb(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(kb(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw Bm()}}convertObject(t,n){const i={};return hb(t.fields,((t,e)=>{i[t]=this.convertValue(e,n)})),i}convertGeoPoint(t){return new oE(xb(t.latitude),xb(t.longitude))}convertArray(t,n){return(t.values||[]).map((t=>this.convertValue(t,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const i=_b(t);return null==i?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Eb(t));default:return null}}convertTimestamp(t){const n=yb(t);return new ab(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=pb.fromString(t);qm(Ay(i));const e=new Sb(i.get(1),i.get(3)),o=new Db(i.popFirst(5));return e.isEqual(n)||Fm(`Document ${o} contains a document reference within a different database (${e.projectId}/${e.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}{constructor(t){super(),this.firestore=t}convertBytes(t){return new iE(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new W_(this.firestore,null,n)}}function UE(t){t=B_(t,G_);const n=B_(t.firestore,Q_),i=Z_(n),e=new VE(n);return NE(t._query),function(t,n,i={}){const e=new Gm;return t.asyncQueue.enqueueAndForget((async()=>function(t,n,i,e,o){const r=new O_({next:i=>{n.enqueueAndForget((()=>t_(t,s))),i.fromCache&&"server"===e.source?o.reject(new Wm(Km.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):o.resolve(i)},error:t=>o.reject(t)}),s=new o_(i,r,{includeMetadataChanges:!0,Cu:!0});return ZI(t,s)}(await $_(t),t.asyncQueue,n,i,e))),e.promise}(i,t._query).then((i=>new AE(n,e,t,i)))}function BE(t,n){return function(t,n){const i=new Gm;return t.asyncQueue.enqueueAndForget((async()=>async function(t,n,i){const e=C_(t);try{const t=await function(t,n){const i=t,e=ab.now(),o=n.reduce(((t,n)=>t.add(n.key)),Uw());let r;return i.persistence.runTransaction("Locally write mutations","readwrite",(t=>i.ci.Ks(t,o).next((o=>{r=o;const s=[];for(const t of n){const n=pw(t,r.get(t.key));null!=n&&s.push(new vw(t.key,n,Zb(n.value.mapValue),uw.exists(!0)))}return i.Bs.addMutationBatch(t,e,s,n)})))).then((t=>(t.applyToLocalDocumentSet(r),{batchId:t.batchId,changes:r})))}(e.localStore,n);e.sharedClientState.addPendingMutation(t.batchId),function(t,n,i){let e=t.ua[t.currentUser.toKey()];e||(e=new Aw(rb)),e=e.insert(n,i),t.ua[t.currentUser.toKey()]=e}(e,t.batchId,i),await E_(e,t.changes),await RI(e.remoteStore)}catch(t){const n=GI(t,"Failed to persist write");i.reject(n)}}(await function(t){return L_(t).then((t=>t.syncEngine))}(t),n,i))),i.promise}(Z_(t),n)}function qE(t,n,i){const e=i.docs.get(n._key),o=new VE(t);return new SE(t,o,n._key,e,new TE(i.hasPendingWrites,i.fromCache),n.converter)}function KE(t,n){const i={};for(const e in t)t.hasOwnProperty(e)&&(i[e]=n(t[e]));return i}function WE(t){if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map((t=>WE(t)));if("function"==typeof t||"object"==typeof t)return KE(t,(t=>WE(t)));throw new Error("Data cannot be encoded in JSON: "+t)}function GE(t){if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":{const n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((t=>GE(t))):"function"==typeof t||"object"==typeof t?KE(t,(t=>GE(t))):t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t,n=!0){Lm="9.6.11",Oe(new me("firestore",((t,{options:i})=>{const e=t.getProvider("app").getImmediate(),o=new Q_(e,new Jm(t.getProvider("auth-internal")),new nb(t.getProvider("app-check-internal")));return i=Object.assign({useFetchStreams:n},i),o._setSettings(i),o}),"PUBLIC")),$e(Rm,"3.4.8",t),$e(Rm,"3.4.8","esm2017")}();const HE={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE extends Ui{constructor(t,n,i){super(`functions/${t}`,n||""),this.details=i}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class YE{constructor(t,n,i){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then((t=>this.auth=t),(()=>{})),this.messaging||n.get().then((t=>this.messaging=t),(()=>{})),this.appCheck||i.get().then((t=>this.appCheck=t),(()=>{}))}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return null==t?void 0:t.accessToken}catch(t){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(t){return}}async getAppCheckToken(){if(this.appCheck){const t=await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(){return{authToken:await this.getAuthToken(),messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken()}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(t,n,i,e,o="us-central1",r){this.app=t,this.fetchImpl=r,this.emulatorOrigin=null,this.contextProvider=new YE(n,i,e),this.cancelAllRequests=new Promise((t=>{this.deleteService=()=>Promise.resolve(t())}));try{const t=new URL(o);this.customDomain=t.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(t){const n=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${n}/${this.region}/${t}`:null!==this.customDomain?`${this.customDomain}/${t}`:`https://${this.region}-${n}.cloudfunctions.net/${t}`}}async function QE(t,n,i,e){let o;i["Content-Type"]="application/json";try{o=await e(t,{method:"POST",body:JSON.stringify(n),headers:i})}catch(t){return{status:0,json:null}}let r=null;try{r=await o.json()}catch(t){}return{status:o.status,json:r}}const ZE="@firebase/functions";var tT;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tT=fetch.bind(self),Oe(new me("functions",((t,{instanceIdentifier:n})=>{const i=t.getProvider("app").getImmediate(),e=t.getProvider("auth-internal"),o=t.getProvider("messaging-internal"),r=t.getProvider("app-check-internal");return new JE(i,e,o,r,n,tT)}),"PUBLIC").setMultipleInstances(!0)),$e(ZE,"0.7.11",void 0),$e(ZE,"0.7.11","esm2017");class nT{constructor(t){this.watchers={},this.service=function(t=Le()){return Pe(t,"firestore").getImmediate()}(),this.functions=function(t=Le(),n="us-central1"){return Pe(ae(t),"functions").getImmediate({identifier:n})}(),(null==t?void 0:t.emulate)&&(function(t,n,i,e={}){var o;const r=(t=B_(t,K_))._getSettings();if("firestore.googleapis.com"!==r.host&&r.host!==n&&Vm("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:`${n}:${i}`,ssl:!1})),e.mockUserToken){let n,i;if("string"==typeof e.mockUserToken)n=e.mockUserToken,i=Mm.MOCK_USER;else{n=function(t,n){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i=n||"demo-project",e=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const r=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:e,exp:e+3600,auth_time:e,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Di(JSON.stringify({alg:"none",type:"JWT"})),Di(JSON.stringify(r)),""].join(".")}(e.mockUserToken,null===(o=t._app)||void 0===o?void 0:o.options.projectId);const r=e.mockUserToken.sub||e.mockUserToken.user_id;if(!r)throw new Wm(Km.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");i=new Mm(r)}t._authCredentials=new Ym(new Hm(n,i))}}(this.service,"localhost",8080),"localhost",5001,ae(this.functions).emulatorOrigin="http://localhost:5001");try{!function(t,n){!function(t){if(t._initialized||t._terminated)throw new Wm(Km.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}(t=B_(t,Q_));const i=Z_(t),e=t._freezeSettings(),o=new N_;(function(t,n,i){const e=new Gm;t.asyncQueue.enqueue((async()=>{try{await R_(t,i),await M_(t,n),e.resolve()}catch(t){if(!function(t){return"FirebaseError"===t.name?t.code===Km.FAILED_PRECONDITION||t.code===Km.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(t))throw t;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+t),e.reject(t)}})).then((()=>e.promise))})(i,o,new D_(o,e.cacheSizeBytes,null==n?void 0:n.forceOwnership))}(this.service)}catch(t){console.log(t.message)}}call(t){return function(t,n){return function(t,n,i){return e=>async function(t,n,i,e){const o=t._url(n),r={data:i=WE(i)},s={},l=await t.contextProvider.getContext();l.authToken&&(s.Authorization="Bearer "+l.authToken),l.messagingToken&&(s["Firebase-Instance-ID-Token"]=l.messagingToken),null!==l.appCheckToken&&(s["X-Firebase-AppCheck"]=l.appCheckToken);const a=function(t){let n=null;return{promise:new Promise(((i,e)=>{n=setTimeout((()=>{e(new XE("deadline-exceeded","deadline-exceeded"))}),t)})),cancel:()=>{n&&clearTimeout(n)}}}(e.timeout||7e4),u=await Promise.race([QE(o,r,s,t.fetchImpl),a.promise,t.cancelAllRequests]);if(a.cancel(),!u)throw new XE("cancelled","Firebase Functions instance was deleted.");const c=function(t,n){let i,e=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),o=e;try{const t=n&&n.error;if(t){const n=t.status;if("string"==typeof n){if(!HE[n])return new XE("internal","internal");e=HE[n],o=n}const r=t.message;"string"==typeof r&&(o=r),i=t.details,void 0!==i&&(i=GE(i))}}catch(t){}return"ok"===e?null:new XE(e,o,i)}(u.status,u.json);if(c)throw c;if(!u.json)throw new XE("internal","Response is not valid JSON object.");let h=u.json.data;if(void 0===h&&(h=u.json.result),void 0===h)throw new XE("internal","Response is missing data field.");return{data:GE(h)}}(t,n,e,i||{})}(ae(t),n,void 0)}(this.functions,t)}async add(t,n,i){const e=await this.collection(t);return i&&await function(t,n,i){t=B_(t,W_);const e=B_(t.firestore,Q_),o=FE(t.converter,n,i);return BE(e,[dE(hE(e),"setDoc",t._key,o,null!==t.converter,i).toMutation(t._key,uw.none())])}(this.document(t,i),n),i?this.document(t,i):function(t,n){const i=B_(t.firestore,Q_),e=X_(t),o=FE(t.converter,n);return BE(i,[dE(hE(t.firestore),"addDoc",e._key,o,null!==t.converter,{}).toMutation(e._key,uw.exists(!1))]).then((()=>e))}(e,n)}collection(t){return function(t,n,...i){if(t=ae(t),z_("collection","path",n),t instanceof K_){const e=pb.fromString(n,...i);return V_(e),new H_(t,null,e)}{if(!(t instanceof W_||t instanceof H_))throw new Wm(Km.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const e=t._path.child(pb.fromString(n,...i));return V_(e),new H_(t.firestore,null,e)}}(this.service,t)}getCollection(t){return UE(this.collection(t))}document(t,n){return n?X_(this.collection(t),n):X_(this.service,t)}getDocument(t,n){return function(t){t=B_(t,W_);const n=B_(t.firestore,Q_);return function(t,n,i={}){const e=new Gm;return t.asyncQueue.enqueueAndForget((async()=>function(t,n,i,e,o){const r=new O_({next:r=>{n.enqueueAndForget((()=>t_(t,s)));const l=r.docs.has(i);!l&&r.fromCache?o.reject(new Wm(Km.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&r.fromCache&&e&&"server"===e.source?o.reject(new Wm(Km.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):o.resolve(r)},error:t=>o.reject(t)}),s=new o_(Ov(i.path),r,{includeMetadataChanges:!0,Cu:!0});return ZI(t,s)}(await $_(t),t.asyncQueue,n,i,e))),e.promise}(Z_(n),t._key).then((i=>qE(n,t,i)))}(this.document(t,n))}async update(t,n,i){const e=this.document(t,n);return await function(t,n,i,...e){t=B_(t,W_);const o=B_(t.firestore,Q_),r=hE(o);let s;return s="string"==typeof(n=ae(n))||n instanceof nE?function(t,n,i,e,o,r){const s=t.ac(1,n,i),l=[vE(n,e,i)],a=[o];if(r.length%2!=0)throw new Wm(Km.INVALID_ARGUMENT,`Function ${n}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let t=0;t<r.length;t+=2)l.push(vE(n,r[t])),a.push(r[t+1]);const u=[],c=Qb.empty();for(let t=l.length-1;t>=0;--t)if(!kE(u,l[t])){const n=l[t];let i=a[t];i=ae(i);const e=s.sc(n);if(i instanceof fE)u.push(n);else{const t=pE(i,e);null!=t&&(u.push(n),c.set(n,t))}}const h=new bb(u);return new lE(c,h,s.fieldTransforms)}(r,"updateDoc",t._key,n,i,e):function(t,n,i,e){const o=t.ac(1,n,i);bE("Data must be an object, but it was:",o,e);const r=[],s=Qb.empty();hb(e,((t,e)=>{const l=yE(n,t,i);e=ae(e);const a=o.sc(l);if(e instanceof fE)r.push(l);else{const t=pE(e,a);null!=t&&(r.push(l),s.set(l,t))}}));const l=new bb(r);return new lE(s,l,o.fieldTransforms)}(r,"updateDoc",t._key,n),BE(o,[s.toMutation(t._key,uw.exists(!0))])}(e,i,{merge:!0}),(await this.getDocument(t,n)).data()}async clearWatchers(){for(const t of Object.keys(this.watchers))this.watchers[t]();return!0}watchDocument(t,n,i){this.watchers[`${t}:${n}`]=function(t,...n){var i,e,o;t=ae(t);let r={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||J_(n[s])||(r=n[s],s++);const l={includeMetadataChanges:r.includeMetadataChanges};if(J_(n[s])){const t=n[s];n[s]=null===(i=t.next)||void 0===i?void 0:i.bind(t),n[s+1]=null===(e=t.error)||void 0===e?void 0:e.bind(t),n[s+2]=null===(o=t.complete)||void 0===o?void 0:o.bind(t)}let a,u,c;if(t instanceof W_)u=B_(t.firestore,Q_),c=Ov(t._key.path),a={next:i=>{n[s]&&n[s](qE(u,t,i))},error:n[s+1],complete:n[s+2]};else{const i=B_(t,G_);u=B_(i.firestore,Q_),c=i._query;const e=new VE(u);a={next:t=>{n[s]&&n[s](new AE(u,e,i,t))},error:n[s+1],complete:n[s+2]},NE(t._query)}return function(t,n,i,e){const o=new O_(e),r=new o_(n,o,i);return t.asyncQueue.enqueueAndForget((async()=>ZI(await $_(t),r))),()=>{o.Ia(),t.asyncQueue.enqueueAndForget((async()=>t_(await $_(t),r)))}}(Z_(u),c,l,a)}(this.document(t,n),(async t=>{i&&"function"==typeof i&&i({data:t.data()})}))}unwatchDocument(t,n){const i=`${t}:${n}`;return this.watchers[i]&&"function"==typeof this.watchers[i]?(this.watchers[i](),!0):(console.log(`There is no watcher running on ${i} document.`),!1)}async query(t,n,i,e){const o=[];for(const t of n||[])(null==t?void 0:t.conditional)&&(null==t?void 0:t.key)&&o.push(RE(t.key,t.conditional,t.value));return i&&o.push(function(t,n="asc"){const i=n,e=EE("orderBy",t);return new ME(e,i)}(i)),e&&o.push(function(t){return function(t,n){if(n<=0)throw new Wm(Km.INVALID_ARGUMENT,`Function limit() requires a positive number, but it was: ${n}.`)}(0,t),new LE("limit",t,"F")}(e)),UE(function(t,...n){for(const i of n)t=i._apply(t);return t}(this.collection(t),...o))}}function iT(t){var n,i,e=window.location.search.substring(1).split("&");for(n=0;n<e.length;n++)if((i=e[n].split("="))[0]==t)return i[1];return null}const eT=class{constructor(n){t(this,n),this.config=_i(),this.auth=new Cd(Object.assign(Object.assign({},this.config),{tokenLocalStorageKey:"madnessclub:token",authLocalStorageKey:"madnessclub:session",emulate:_i("emulate",!1)})),this.db=new nT({emulate:_i("emulate",!1)}),this.emailSent=!1,this.finishedLoading=!1}async onSubmit(t){var n,i;if(!(null===(i=null===(n=null==t?void 0:t.detail)||void 0===n?void 0:n.data)||void 0===i?void 0:i.email))return alert("A valid email is required to join this club.");this.auth.withEmailLink(t.detail.data.email,{url:_i("url"),dynamicLinkDomain:_i("dynamicLinkDomain"),iOS:{bundleId:"com.fireenjin.madnessclub"},android:{packageName:"com.fireenjin.madnessclub",installApp:!1,minimumVersion:"12"},handleCodeInApp:!0}),this.emailSent=!0}onChange(t){var n,i,e;"interests"===(null===(n=null==t?void 0:t.target)||void 0===n?void 0:n.name)&&(null===(i=this.session)||void 0===i?void 0:i.uid)&&this.db.update("users",this.session.uid,{interests:(null===(e=null==t?void 0:t.target)||void 0===e?void 0:e.value)||[]})}async getUser(t){return(await this.db.getDocument("users",t)).data()}async createNewUser(t){return this.db.add("users",{email:(null==t?void 0:t.email)||null,photo:(null==t?void 0:t.photoURL)||null,id:(null==t?void 0:t.uid)||null,displayName:(null==t?void 0:t.displayName)||null},t.uid),this.getUser(null==t?void 0:t.uid)}async logout(){await this.auth.goOffline(),await this.auth.logout(),await this.db.clearWatchers(),localStorage.clear(),window.location.href="/"}async componentDidLoad(){if(this.auth.onAuthChanged((async t=>{(null==t?void 0:t.uid)&&(this.session=t,this.user=await this.getUser(t.uid),this.user?this.db.update("users",this.session.uid,{email:(null==t?void 0:t.email)||null,photo:(null==t?void 0:t.photoURL)||null,id:(null==t?void 0:t.uid)||null,displayName:(null==t?void 0:t.displayName)||null}):this.user=await this.createNewUser(t),this.db.watchDocument("users",t.uid,(({data:t})=>{this.user=t})))})),this.progressBarEl){let t=0;const n=setInterval((()=>{t+=Math.random()/3,this.progressBarEl.value=t,t>=1&&(this.finishedLoading=!0,clearInterval(n))}),500)}iT("code")&&setTimeout((async()=>{var t;try{this.db.call("connectUserToStripe")({userId:null===(t=this.session)||void 0===t?void 0:t.uid,code:iT("code")})}catch(t){alert(`There was an error setting up your Stripe connection: ${null==t?void 0:t.message}`)}}),3e3)}render(){var t,n,i,o,r,s,l;return e("article",{class:"ion-padding green-screen crt",style:{display:"block",width:"100vw",maxHeight:"100vh",overflowY:"auto"}},e("h1",{class:"title"},e("img",{style:{display:"block",margin:"-10px auto",zIndex:"2",position:"relative"},src:"./assets/images/Madness.png",alt:"MADNESS",height:"75",width:"260"}),e("i",{style:{fontSize:"40px"}},"👊"),this.finishedLoading?e("ion-text",null,e("span",null,"CɭUɃ"),e("b",null,"❚")):e("ion-progress-bar",{ref:t=>this.progressBarEl=t})),(null===(t=this.session)||void 0===t?void 0:t.uid)&&e("ion-button",{style:{position:"absolute",top:"20px",right:"20px"},color:"danger",fill:"clear",onClick:()=>this.logout()},"Logout",e("ion-icon",{slot:"end",name:"power"})),(null===(n=this.session)||void 0===n?void 0:n.uid)?e("div",{class:"dashboard ion-padding"},e("h2",null,"Welcome to the Club"),e("p",{style:{color:"#ffffff"}},"Well done, you are in the roster, consider joining your bretheren on our Discord, while we wait for our orders."),e("ion-button",{href:"https://discord.gg/kMXXNNSzuu",target:"_blank"},e("ion-icon",{name:"logo-discord",slot:"start"}),"Join the Discord"),e("h2",null,"What are you interested in learning?"),e("fireenjin-select",{interfaceOptions:{header:"Interested In"},name:"interests",multiple:!0,value:(null===(i=this.user)||void 0===i?void 0:i.interests)||[],placeholder:"Interests",options:[{label:"Software Engineering (Coding / Programming)",value:"software"},{label:"Graphic Engineering (Design / UI / UX)",value:"design"}]}),(null===(o=this.user)||void 0===o?void 0:o.isEnrolled)&&!(null===(r=this.user)||void 0===r?void 0:r.isPayable)&&e("div",null,e("h2",null,"Setup your Payment Method"),e("p",null,"Get paid to complete missions by creating a Stripe account."),e("ion-button",{color:"success",href:`https://connect.stripe.com/oauth/authorize?response_type=code&client_id=${_i("stripe.clientId")}&stripe_user[email]=${null===(s=this.user)||void 0===s?void 0:s.email}&stripe_user[business_type]=sole_prop&scope=read_write`},e("ion-icon",{slot:"start",name:"logo-usd"}),"Connect to Stripe")),(null===(l=this.user)||void 0===l?void 0:l.isPayable)&&e("div",null,e("h1",null,"Setup Complete"),e("p",null,"You are setup to be paid for Missions!"))):e("div",{class:"landing ion-padding"},e("ion-card",{class:{loaded:this.finishedLoading}},e("ion-card-header",null,e("ion-card-title",null,"Welcome... We've Been Wating...",e("span",{class:"terminal-buttons"}))),e("ion-card-content",{class:"ion-padding"},e("ion-grid",null,e("ion-row",null,e("ion-col",null,e("div",{id:"join-us",class:"ion-padding"},e("h1",null,e("ion-text",{color:"success"},"Enter your Email",e("b",null,"❚"))),e("p",null,"Engineering is our tool, our weapon, to take control of our lives and bring about, The Reboot...☠"),this.emailSent?e("div",null,e("ion-icon",{color:"primary",name:"mail-unread",style:{height:"150px",width:"150px",display:"block",margin:"20px auto"}}),e("h2",{class:"ion-text-center ion-no-padding"},"Email Sent!"),e("ion-text",{color:"medium",class:"ion-text-center",style:{display:"block"}},"Check your spam if you don't see it after a few.")):e("fireenjin-form",{name:"signup",resetButton:"Reset",resetButtonColor:"light",submitButton:"Send",submitButtonColor:"success"},e("p",{style:{color:"#ffffff"}},"Enter & confirm your email below to join us."),e("fireenjin-input",{type:"email",name:"email",placeholder:"Email Address",required:!0})))),e("ion-col",null,e("p",{class:"ion-padding",style:{border:"1px dashed rgba(255, 255, 255, 0.3)",borderRadius:"4px"}},"I see all this potential, and I see it squandered. God damn it, an entire generation pumping gas, waiting tables - slaves with white collars. Advertising has us chasing cars and clothes, working jobs we hate so we can buy shit we don't need. We're the middle children of history, man. No purpose or place. We have no Great War. No Great Depression. Our great war is a spiritual war... Our great depression is our lives. We've all been raised on television to believe that one day we'd all be millionaires, and movie gods, and rock stars, but we won't. We're slowly learning that fact. And we're very, very pissed off. ",e("br",null),e("ion-text",{color:"dark",class:"ion-padding"},"-Tlyer Durden")))))))))}};eT.style="";export{ot as fireenjin_form,St as fireenjin_input,Ct as fireenjin_select,Rt as ion_action_sheet,Ft as ion_alert,Bt as ion_backdrop,qt as ion_button,Kt as ion_card,Wt as ion_card_content,Gt as ion_card_header,Ht as ion_card_title,Xt as ion_checkbox,en as ion_col,on as ion_grid,pn as ion_icon,bn as ion_input,wn as ion_item,yn as ion_label,xn as ion_list,kn as ion_list_header,In as ion_note,Vn as ion_popover,qn as ion_progress_bar,Gn as ion_radio,Xn as ion_radio_group,Jn as ion_ripple_effect,ni as ion_row,ei as ion_select,di as ion_select_option,pi as ion_select_popover,gi as ion_text,eT as page_home}